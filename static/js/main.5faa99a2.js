/*! For license information please see main.5faa99a2.js.LICENSE.txt */
(()=>{var e={240:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,s=t.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!s&&!i)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},o=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(s)return s(e,n).value}return e[n]};e.exports=function e(){var t,n,r,s,c,u,h=arguments[0],d=1,p=arguments.length,f=!1;for("boolean"===typeof h&&(f=h,h=arguments[1]||{},d=2),(null==h||"object"!==typeof h&&"function"!==typeof h)&&(h={});d<p;++d)if(null!=(t=arguments[d]))for(n in t)r=l(h,n),h!==(s=l(t,n))&&(f&&s&&(a(s)||(c=i(s)))?(c?(c=!1,u=r&&i(r)?r:[]):u=r&&a(r)?r:{},o(h,{name:n,newValue:e(f,u,s)})):"undefined"!==typeof s&&o(h,{name:n,newValue:s}));return h}},403:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function u(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var h=1,d=1;function p(e){var t=e.match(n);t&&(h+=t.length);var r=e.lastIndexOf("\n");d=~r?e.length-r:d+e.length}function f(){var e={line:h,column:d};return function(t){return t.position=new m(e),E(),t}}function m(e){this.start=e,this.end={line:h,column:d},this.source=l.source}m.prototype.content=e;var g=[];function y(t){var n=new Error(l.source+":"+h+":"+d+": "+t);if(n.reason=t,n.filename=l.source,n.line=h,n.column=d,n.source=e,!l.silent)throw n;g.push(n)}function b(t){var n=t.exec(e);if(n){var r=n[0];return p(r),e=e.slice(r.length),n}}function E(){b(r)}function v(e){var t;for(e=e||[];t=_();)!1!==t&&e.push(t);return e}function _(){var t=f();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return y("End of comment missing");var r=e.slice(2,n-2);return d+=2,p(r),e=e.slice(n),d+=2,t({type:"comment",comment:r})}}function T(){var e=f(),n=b(s);if(n){if(_(),!b(i))return y("property missing ':'");var r=b(a),l=e({type:"declaration",property:u(n[0].replace(t,c)),value:r?u(r[0].replace(t,c)):c});return b(o),l}}return E(),function(){var e,t=[];for(v(t);e=T();)!1!==e&&(t.push(e),v(t));return t}()}},497:(e,t,n)=>{"use strict";var r=n(218);function s(){}function i(){}i.resetWarningCache=s,e.exports=function(){function e(e,t,n,s,i,a){if(a!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:s};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function E(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),T=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function B(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var H=!1;function U(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function j(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case A:return"Fragment";case T:return"Portal";case S:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function V(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&E(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ie(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ae=null,we=null;function Se(e){if(e=Es(e)){if("function"!==typeof Te)throw Error(i(280));var t=e.stateNode;t&&(t=_s(t),Te(e.stateNode,e.type,t))}}function ke(e){Ae?we?we.push(e):we=[e]:Ae=e}function Ce(){if(Ae){var e=Ae,t=we;if(we=Ae=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function xe(e,t){return e(t)}function Ie(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return xe(e,t,n)}finally{Ne=!1,(null!==Ae||null!==we)&&(Ie(),Ce())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=_s(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function Le(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Be=!1,He=null,Ue={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,s,i,a,o,l){Me=!1,Fe=null,Le.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(i(188))}function $e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return We(s),e;if(a===r)return We(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ve=s.unstable_scheduleCallback,Ye=s.unstable_cancelCallback,Ke=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Qe=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=ht(o):0!==(i&=a)&&(r=ht(i))}else 0!==(a=n&~s)?r=ht(a):0!==i&&(r=ht(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Et=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Tt,At,wt,St,kt=!1,Ct=[],xt=null,It=null,Nt=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Es(t))&&Tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ft(e){var t=bs(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void St(e.priority,(function(){At(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Es(n))&&Tt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ve=r,n.target.dispatchEvent(r),ve=null,t.shift()}return!0}function Ht(e,t,n){Bt(e)&&n.delete(t)}function Ut(){kt=!1,null!==xt&&Bt(xt)&&(xt=null),null!==It&&Bt(It)&&(It=null),null!==Nt&&Bt(Nt)&&(Nt=null),Rt.forEach(Ht),Dt.forEach(Ht)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return jt(t,e)}if(0<Ct.length){jt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&jt(xt,e),null!==It&&jt(It,e),null!==Nt&&jt(Nt,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var Gt=v.ReactCurrentBatchConfig,Wt=!0;function $t(e,t,n,r){var s=Et,i=Gt.transition;Gt.transition=null;try{Et=1,Vt(e,t,n,r)}finally{Et=s,Gt.transition=i}}function qt(e,t,n,r){var s=Et,i=Gt.transition;Gt.transition=null;try{Et=4,Vt(e,t,n,r)}finally{Et=s,Gt.transition=i}}function Vt(e,t,n,r){if(Wt){var s=Kt(e,t,n,r);if(null===s)Wr(e,t,r,Yt,n),Lt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,s),!0;case"dragenter":return It=Mt(It,e,t,n,r,s),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Rt.set(i,Mt(Rt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dt.set(i,Mt(Dt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==s;){var i=Es(s);if(null!==i&&_t(i),null===(i=Kt(e,t,n,r))&&Wr(e,t,r,Yt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Yt=null;function Kt(e,t,n,r){if(Yt=null,null!==(e=bs(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,s="value"in Qt?Qt.value:Qt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),pn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=sn(pn),mn=sn(F({},pn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),En=sn(bn),vn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=An[e])&&!!t[e]}function Sn(){return wn}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Nn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Rn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Bn=String.fromCharCode(32),Hn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function $n(e,t,n,r){ke(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Vn=null;function Yn(e){Br(e,0)}function Kn(e){if(V(vs(e)))return e}function Xn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Vn=qn=null)}function nr(e){if("value"===e.propertyName&&Kn(Vn)){var t=[];$n(t,Vn,e,_e(e)),Re(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Vn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Vn)}function ir(e,t){if("click"===e)return Kn(t)}function ar(e,t){if("input"===e||"change"===e)return Kn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!h.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,br=null,Er=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Er||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=qr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ar={},wr={};function Sr(e){if(Ar[e])return Ar[e];if(!Tr[e])return e;var t,n=Tr[e];for(t in n)if(n.hasOwnProperty(t)&&t in wr)return Ar[e]=n[t];return e}u&&(wr=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);var kr=Sr("animationend"),Cr=Sr("animationiteration"),xr=Sr("animationstart"),Ir=Sr("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Nr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(kr,"onAnimationEnd"),Dr(Cr,"onAnimationIteration"),Dr(xr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(je.apply(this,arguments),Me){if(!Me)throw Error(i(198));var u=Fe;Me=!1,Fe=null,Be||(Be=!0,He=u)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Fr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Fr(s,o,c),i=l}}}if(Be)throw e=He,Be=!1,He=null,e}function Hr(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Ur("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Xt(t)){case 1:var s=$t;break;case 4:s=qt;break;default:s=Vt}n=s.bind(null,t,n,e),s=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=bs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Re((function(){var r=i,s=_e(n),a=[];e:{var o=Nr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case kr:case Cr:case xr:l=yn;break;case Ir:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=En;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=De(f,d))&&u.push($r(f,m,p)))),h)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ve||!(c=n.relatedTarget||n.fromElement)||!bs(c)&&!c[fs])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bs(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?o:vs(l),p=null==c?o:vs(c),(o=new u(m,f+"leave",l,n,s)).target=h,o.relatedTarget=p,m=null,bs(s)===r&&((u=new u(d,f+"enter",c,n,s)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Vr(p))f++;for(p=0,m=d;m;m=Vr(m))p++;for(;0<f-p;)u=Vr(u),f--;for(;0<p-f;)d=Vr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Vr(u),d=Vr(d)}u=null}else u=null;null!==l&&Yr(a,o,l,u,!1),null!==c&&null!==h&&Yr(a,h,c,u,!0)}if("select"===(l=(o=r?vs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Wn(o))if(Qn)g=ar;else{g=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?$n(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?vs(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,br=null);break;case"focusout":br=yr=gr=null;break;case"mousedown":Er=!0;break;case"contextmenu":case"mouseup":case"dragend":Er=!1,vr(a,n,s);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":vr(a,n,s)}var b;if(On)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else zn?Un(e,n)&&(E="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(E="onCompositionStart");E&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==E?"onCompositionEnd"===E&&zn&&(b=en()):(Jt="value"in(Qt=s)?Qt.value:Qt.textContent,zn=!0)),0<(y=qr(r,E)).length&&(E=new vn(E,e,null,n,s),a.push({event:E,listeners:y}),b?E.data=b:null!==(b=jn(n))&&(E.data=b))),(b=Mn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Hn=!0,Bn);case"textInput":return(e=t.data)===Bn&&Hn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Un(e,t)?(e=en(),Zt=Jt=Qt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(s=new vn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=b))}Br(a,t)}))}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=De(e,n))&&r.unshift($r(e,i,s)),null!=(i=De(e,t))&&r.push($r(e,i,s))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=De(n,i))&&a.unshift($r(n,l,o)):s||null!=(l=De(n,i))&&a.push($r(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Kr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout((function(){throw e}))}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);zt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),ds="__reactFiber$"+hs,ps="__reactProps$"+hs,fs="__reactContainer$"+hs,ms="__reactEvents$"+hs,gs="__reactListeners$"+hs,ys="__reactHandles$"+hs;function bs(e){var t=e[ds];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[ds]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[ds])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function Es(e){return!(e=e[ds]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function _s(e){return e[ps]||null}var Ts=[],As=-1;function ws(e){return{current:e}}function Ss(e){0>As||(e.current=Ts[As],Ts[As]=null,As--)}function ks(e,t){As++,Ts[As]=e.current,e.current=t}var Cs={},xs=ws(Cs),Is=ws(!1),Ns=Cs;function Rs(e,t){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ds(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ps(){Ss(Is),Ss(xs)}function Os(e,t,n){if(xs.current!==Cs)throw Error(i(168));ks(xs,t),ks(Is,n)}function Ls(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,G(e)||"Unknown",s));return F({},n,r)}function Ms(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,Ns=xs.current,ks(xs,e),ks(Is,Is.current),!0}function Fs(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ls(e,t,Ns),r.__reactInternalMemoizedMergedChildContext=e,Ss(Is),Ss(xs),ks(xs,e)):Ss(Is),ks(Is,n)}var Bs=null,Hs=!1,Us=!1;function js(e){null===Bs?Bs=[e]:Bs.push(e)}function zs(){if(!Us&&null!==Bs){Us=!0;var e=0,t=Et;try{var n=Bs;for(Et=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bs=null,Hs=!1}catch(s){throw null!==Bs&&(Bs=Bs.slice(e+1)),Ve(Ze,zs),s}finally{Et=t,Us=!1}}return null}var Gs=[],Ws=0,$s=null,qs=0,Vs=[],Ys=0,Ks=null,Xs=1,Qs="";function Js(e,t){Gs[Ws++]=qs,Gs[Ws++]=$s,$s=e,qs=t}function Zs(e,t,n){Vs[Ys++]=Xs,Vs[Ys++]=Qs,Vs[Ys++]=Ks,Ks=e;var r=Xs;e=Qs;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Xs=1<<32-at(t)+s|n<<s|r,Qs=i+e}else Xs=1<<i|n<<s|r,Qs=e}function ei(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function ti(e){for(;e===$s;)$s=Gs[--Ws],Gs[Ws]=null,qs=Gs[--Ws],Gs[Ws]=null;for(;e===Ks;)Ks=Vs[--Ys],Vs[Ys]=null,Qs=Vs[--Ys],Vs[Ys]=null,Xs=Vs[--Ys],Vs[Ys]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ks?{id:Xs,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function hi(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw di(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function di(){for(var e=ri;e;)e=cs(e.nextSibling)}function pi(){ri=ni=null,si=!1}function fi(e){null===ii?ii=[e]:ii.push(e)}var mi=v.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function Ei(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===A?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&bi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case T:return(t=Bc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function p(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===s?c(e,t,n,r):null;case T:return n.key===s?u(e,t,n,r):null;case D:return p(e,t,(s=n._init)(n._payload),r)}if(te(n)||L(n))return null!==s?null:h(e,t,n,r,null);yi(e,n)}return null}function f(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case T:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case D:return f(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,h=i,m=i=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(s,h,o[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(s,h),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===o.length)return n(s,h),si&&Js(s,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(s,o[m],l))&&(i=a(h,i,m),null===u?c=h:u.sibling=h,u=h);return si&&Js(s,m),c}for(h=r(s,h);m<o.length;m++)null!==(g=f(h,s,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(s,e)})),si&&Js(s,m),c}function g(s,o,l,c){var u=L(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var h=u=null,m=o,g=o=0,y=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var E=p(s,m,b.value,c);if(null===E){null===m&&(m=y);break}e&&m&&null===E.alternate&&t(s,m),o=a(E,o,g),null===h?u=E:h.sibling=E,h=E,m=y}if(b.done)return n(s,m),si&&Js(s,g),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=d(s,b.value,c))&&(o=a(b,o,g),null===h?u=b:h.sibling=b,h=b);return si&&Js(s,g),u}for(m=r(s,m);!b.done;g++,b=l.next())null!==(b=f(m,s,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),o=a(b,o,g),null===h?u=b:h.sibling=b,h=b);return e&&m.forEach((function(e){return t(s,e)})),si&&Js(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===A&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===A){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&bi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===A?((i=Lc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Oc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case T:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Bc(a,r.mode,l)).return=r,r=i}return o(r);case D:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(L(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Fc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var vi=Ei(!0),_i=Ei(!1),Ti=ws(null),Ai=null,wi=null,Si=null;function ki(){Si=wi=Ai=null}function Ci(e){var t=Ti.current;Ss(Ti),e._currentValue=t}function xi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ii(e,t){Ai=e,Si=wi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Eo=!0),e.firstContext=null)}function Ni(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},null===wi){if(null===Ai)throw Error(i(308));wi=e,Ai.dependencies={lanes:0,firstContext:e}}else wi=wi.next=e;return t}var Ri=null;function Di(e){null===Ri?Ri=[e]:Ri.push(e)}function Pi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Di(t)):(n.next=s.next,s.next=n),t.interleaved=n,Oi(e,r)}function Oi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Li=!1;function Mi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&xl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Oi(e,n)}return null===(s=r.interleaved)?(t.next=t,Di(r)):(t.next=s.next,s.next=t),r.interleaved=t,Oi(e,n)}function Ui(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function ji(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var s=e.updateQueue;Li=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var h=s.baseState;for(a=0,u=c=l=null,o=i;;){var d=o.lane,p=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=F({},h,d);break e;case 2:Li=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=d;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(d=o).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===u&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Ml|=a,e.lanes=a,e.memoizedState=h}}function Gi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Wi={},$i=ws(Wi),qi=ws(Wi),Vi=ws(Wi);function Yi(e){if(e===Wi)throw Error(i(174));return e}function Ki(e,t){switch(ks(Vi,t),ks(qi,e),ks($i,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss($i),ks($i,t)}function Xi(){Ss($i),Ss(qi),Ss(Vi)}function Qi(e){Yi(Vi.current);var t=Yi($i.current),n=le(t,e.type);t!==n&&(ks(qi,e),ks($i,n))}function Ji(e){qi.current===e&&(Ss($i),Ss(qi))}var Zi=ws(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=v.ReactCurrentDispatcher,sa=v.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,ua=!1,ha=0,da=0;function pa(){throw Error(i(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:Za,e=n(r,s),ua){a=0;do{if(ua=!1,ha=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,s)}while(ua)}if(ra.current=Qa,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ga(){var e=0!==ha;return ha=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ba(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function Ea(e,t){return"function"===typeof t?t(e):t}function va(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((ia&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,aa.lanes|=h,Ml|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(Eo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Ml|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(Eo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ta(){}function Aa(e,t){var n=aa,r=ba(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,Eo=!0),r=r.queue,La(ka.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Na(9,Sa.bind(null,n,r,s,t),void 0,null),null===Il)throw Error(i(349));0!==(30&ia)||wa(n,t,s)}return s}function wa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Sa(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&xa(e)}function ka(e,t,n){return n((function(){Ca(t)&&xa(e)}))}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function xa(e){var t=Oi(e,1);null!==t&&nc(t,e,1,-1)}function Ia(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:e},t.queue=e,e=e.dispatch=Va.bind(null,aa,e),[t.memoizedState,e]}function Na(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ra(){return ba().memoizedState}function Da(e,t,n,r){var s=ya();aa.flags|=e,s.memoizedState=Na(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var s=ba();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&fa(r,a.deps))return void(s.memoizedState=Na(t,n,i,r))}aa.flags|=e,s.memoizedState=Na(1|t,n,i,r)}function Oa(e,t){return Da(8390656,8,e,t)}function La(e,t){return Pa(2048,8,e,t)}function Ma(e,t){return Pa(4,2,e,t)}function Fa(e,t){return Pa(4,4,e,t)}function Ba(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ha(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Ba.bind(null,t,e),n)}function Ua(){}function ja(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function za(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ga(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,Eo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Ml|=n,e.baseState=!0),t)}function Wa(e,t){var n=Et;Et=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{Et=n,sa.transition=r}}function $a(){return ba().memoizedState}function qa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Ka(t,n);else if(null!==(n=Pi(e,t,n,r))){nc(n,e,r,ec()),Xa(n,t,r)}}function Va(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Ka(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Di(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Pi(e,t,s,r))&&(nc(n,e,r,s=ec()),Xa(n,t,r))}}function Ya(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ka(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Qa={readContext:Ni,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Ja={readContext:Ni,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Ni,useEffect:Oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Ba.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qa.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ia,useDebugValue:Ua,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ia(!1),t=e[0];return e=Wa.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=ya();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Il)throw Error(i(349));0!==(30&ia)||wa(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Oa(ka.bind(null,r,a,e),[e]),r.flags|=2048,Na(9,Sa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Il.identifierPrefix;if(si){var n=Qs;t=":"+t+"R"+(n=(Xs&~(1<<32-at(Xs)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ni,useCallback:ja,useContext:Ni,useEffect:La,useImperativeHandle:Ha,useInsertionEffect:Ma,useLayoutEffect:Fa,useMemo:za,useReducer:va,useRef:Ra,useState:function(){return va(Ea)},useDebugValue:Ua,useDeferredValue:function(e){return Ga(ba(),oa.memoizedState,e)},useTransition:function(){return[va(Ea)[0],ba().memoizedState]},useMutableSource:Ta,useSyncExternalStore:Aa,useId:$a,unstable_isNewReconciler:!1},eo={readContext:Ni,useCallback:ja,useContext:Ni,useEffect:La,useImperativeHandle:Ha,useInsertionEffect:Ma,useLayoutEffect:Fa,useMemo:za,useReducer:_a,useRef:Ra,useState:function(){return _a(Ea)},useDebugValue:Ua,useDeferredValue:function(e){var t=ba();return null===oa?t.memoizedState=e:Ga(t,oa.memoizedState,e)},useTransition:function(){return[_a(Ea)[0],ba().memoizedState]},useMutableSource:Ta,useSyncExternalStore:Aa,useId:$a,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Bi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Hi(e,i,s))&&(nc(t,e,s,r),Ui(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Bi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Hi(e,i,s))&&(nc(t,e,s,r),Ui(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Bi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Hi(e,s,r))&&(nc(t,e,r,n),Ui(t,e,r))}};function so(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function io(e,t,n){var r=!1,s=Cs,i=t.contextType;return"object"===typeof i&&null!==i?i=Ni(i):(s=Ds(t)?Ns:xs.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Rs(e,s):Cs),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Mi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ni(i):(i=Ds(t)?Ns:xs.current,s.context=Rs(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),zi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Bi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,$l=r),uo(0,t)},n}function fo(e,t,n){(n=Bi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bi(-1,1)).tag=2,Hi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var bo=v.ReactCurrentOwner,Eo=!1;function vo(e,t,n,r){t.child=null===e?_i(t,null,n,r):vi(t,e.child,n,r)}function _o(e,t,n,r,s){n=n.render;var i=t.ref;return Ii(t,s),r=ma(e,t,n,r,i,s),n=ga(),null===e||Eo?(si&&n&&ei(t),t.flags|=1,vo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function To(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Dc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ao(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Wo(e,t,s)}return t.flags|=1,(e=Pc(i,r)).ref=t.ref,e.return=t,t.child=e}function Ao(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(Eo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Wo(e,t,s);0!==(131072&e.flags)&&(Eo=!0)}}return ko(e,t,n,r,s)}function wo(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ks(Pl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ks(Pl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,ks(Pl,Dl),Dl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,ks(Pl,Dl),Dl|=r;return vo(e,t,s,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ko(e,t,n,r,s){var i=Ds(n)?Ns:xs.current;return i=Rs(t,i),Ii(t,s),n=ma(e,t,n,r,i,s),r=ga(),null===e||Eo?(si&&r&&ei(t),t.flags|=1,vo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function Co(e,t,n,r,s){if(Ds(n)){var i=!0;Ms(t)}else i=!1;if(Ii(t,s),null===t.stateNode)Go(e,t),io(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ni(c):c=Rs(t,c=Ds(n)?Ns:xs.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Li=!1;var d=t.memoizedState;a.state=d,zi(t,r,a,s),l=t.memoizedState,o!==r||d!==l||Is.current||Li?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Li||so(t,n,o,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ni(l):l=Rs(t,l=Ds(n)?Ns:xs.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&ao(t,a,r,l),Li=!1,d=t.memoizedState,a.state=d,zi(t,r,a,s);var f=t.memoizedState;o!==h||d!==f||Is.current||Li?("function"===typeof p&&(no(t,n,p,r),f=t.memoizedState),(c=Li||so(t,n,c,r,d,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xo(e,t,n,r,i,s)}function xo(e,t,n,r,s,i){So(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Fs(t,n,!1),Wo(e,t,i);r=t.stateNode,bo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=vi(t,e.child,null,i),t.child=vi(t,null,o,i)):vo(e,t,o,i),t.memoizedState=r.state,s&&Fs(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Os(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Os(0,t.context,!1),Ki(e,t.containerInfo)}function No(e,t,n,r,s){return pi(),fi(s),t.flags|=256,vo(e,t,n,r),t.child}var Ro,Do,Po,Oo,Lo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var r,s=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),ks(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Mc(l,s,0,null),e=Lc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Lo,e):Bo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Ho(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Mc({mode:"visible",children:r.children},s,0,null),(a=Lc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&vi(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Lo,a);if(0===(1&t.mode))return Ho(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Ho(e,t,o,r=co(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),Eo||l){if(null!==(r=Il)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Oi(e,s),nc(r,e,s,-1))}return mc(),Ho(e,t,o,r=co(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Vs[Ys++]=Xs,Vs[Ys++]=Qs,Vs[Ys++]=Ks,Xs=e.id,Qs=e.overflow,Ks=t),t=Bo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Pc(r,o):(o=Lc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,s}return e=(o=e.child).sibling,s=Pc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Bo(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ho(e,t,n,r){return null!==r&&fi(r),vi(t,e.child,null,n),(e=Bo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xi(e.return,t,n)}function jo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(vo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ks(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),jo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}jo(t,!0,n,null,i);break;case"together":jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Go(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $o(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Vo(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Ds(t.type)&&Ps(),qo(t),null;case 3:return r=t.stateNode,Xi(),Ss(Is),Ss(xs),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),Do(e,t),qo(t),null;case 5:Ji(t);var s=Yi(Vi.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return qo(t),null}if(e=Yi($i.current),hi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ds]=t,r[ps]=a,e=0!==(1&t.mode),n){case"dialog":Hr("cancel",r),Hr("close",r);break;case"iframe":case"object":case"embed":Hr("load",r);break;case"video":case"audio":for(s=0;s<Lr.length;s++)Hr(Lr[s],r);break;case"source":Hr("error",r);break;case"img":case"image":case"link":Hr("error",r),Hr("load",r);break;case"details":Hr("toggle",r);break;case"input":X(r,a),Hr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Hr("invalid",r);break;case"textarea":se(r,a),Hr("invalid",r)}for(var l in be(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Hr("scroll",r)}switch(n){case"input":q(r),Z(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ds]=t,e[ps]=r,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ee(n,r),n){case"dialog":Hr("cancel",e),Hr("close",e),s=r;break;case"iframe":case"object":case"embed":Hr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Lr.length;s++)Hr(Lr[s],e);s=r;break;case"source":Hr("error",e),s=r;break;case"img":case"image":case"link":Hr("error",e),Hr("load",e),s=r;break;case"details":Hr("toggle",e),s=r;break;case"input":X(e,r),s=K(e,r),Hr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=F({},r,{value:void 0}),Hr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Hr("invalid",e)}for(a in be(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Hr("scroll",e):null!=u&&E(e,a,u,l))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Vi.current),Yi($i.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ds]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ds]=t,t.stateNode=r}return qo(t),null;case 13:if(Ss(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))di(),pi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[ds]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Xi(),Do(e,t),null===e&&zr(t.stateNode.containerInfo),qo(t),null;case 10:return Ci(t.type._context),qo(t),null;case 19:if(Ss(Zi),null===(a=t.memoizedState))return qo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)$o(a,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,$o(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ks(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>zl&&(t.flags|=128,r=!0,$o(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$o(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return qo(t),null}else 2*Qe()-a.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,$o(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=Zi.current,ks(Zi,r?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Yo(e,t){switch(ti(t),t.tag){case 1:return Ds(t.type)&&Ps(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xi(),Ss(Is),Ss(xs),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(Ss(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(Zi),null;case 4:return Xi(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Po=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Yi($i.current);var i,a=null;switch(n){case"input":s=K(e,s),r=K(e,r),a=[];break;case"select":s=F({},s,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in be(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Hr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Oo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ko=!1,Xo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){wc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){wc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&el(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ds],delete t[ps],delete t[ms],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Xo||Zo(n,t);case 6:var r=ul,s=hl;ul=null,dl(e,t,n),hl=s,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),zt(e)):ls(ul,n.stateNode));break;case 4:r=ul,s=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=s;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),s=s.next}while(s!==r)}dl(e,t,n);break;case 1:if(!Xo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){wc(n,t,o)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,dl(e,t,n),Xo=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach((function(t){var r=xc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));pl(a,o,s),ul=null,hl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){wc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){wc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){wc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(g){wc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(s,a),Ee(l,o);var u=Ee(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?ge(s,d):"dangerouslySetInnerHTML"===h?he(s,d):"children"===h?de(s,d):E(s,h,d,u)}switch(l){case"input":J(s,a);break;case"textarea":ie(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(s,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[ps]=a}catch(g){wc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){wc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){wc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(jl=Qe())),4&r&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(u=Xo)||h,ml(t,e),Xo=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Jo=e,h=e.child;null!==h;){for(d=Jo=h;null!==Jo;){switch(f=(p=Jo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){wc(r,n,g)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){_l(d);continue}}null!==f?(f.return=p,Jo=f):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{s=d.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){wc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){wc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){wc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Jo=e,El(e,t,n)}function El(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var s=Jo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Ko;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Ko;var c=Xo;if(Ko=a,(Xo=l)&&!c)for(Jo=s;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?Tl(s):null!==l?(l.return=a,Jo=l):Tl(s);for(;null!==i;)Jo=i,El(i,t,n),i=i.sibling;Jo=s,Ko=o,Xo=c}vl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Jo=i):vl(e)}}function vl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Gi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Gi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(i(163))}Xo||512&t.flags&&sl(t)}catch(p){wc(t,t.return,p)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function _l(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function Tl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){wc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){wc(t,s,l)}}var i=t.return;try{sl(t)}catch(l){wc(t,i,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){wc(t,a,l)}}}catch(l){wc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var Al,wl=Math.ceil,Sl=v.ReactCurrentDispatcher,kl=v.ReactCurrentOwner,Cl=v.ReactCurrentBatchConfig,xl=0,Il=null,Nl=null,Rl=0,Dl=0,Pl=ws(0),Ol=0,Ll=null,Ml=0,Fl=0,Bl=0,Hl=null,Ul=null,jl=0,zl=1/0,Gl=null,Wl=!1,$l=null,ql=null,Vl=!1,Yl=null,Kl=0,Xl=0,Ql=null,Jl=-1,Zl=0;function ec(){return 0!==(6&xl)?Qe():-1!==Jl?Jl:Jl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&xl)&&0!==Rl?Rl&-Rl:null!==mi.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=Et)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Ql=null,Error(i(185));yt(e,n,r),0!==(2&xl)&&e===Il||(e===Il&&(0===(2&xl)&&(Fl|=n),4===Ol&&oc(e,Rl)),rc(e,r),1===n&&0===xl&&0===(1&t.mode)&&(zl=Qe()+500,Hs&&zs()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=dt(e,e===Il?Rl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Hs=!0,js(e)}(lc.bind(null,e)):js(lc.bind(null,e)),as((function(){0===(6&xl)&&zs()})),n=null;else{switch(vt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Jl=-1,Zl=0,0!==(6&xl))throw Error(i(327));var n=e.callbackNode;if(Tc()&&e.callbackNode!==n)return null;var r=dt(e,e===Il?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var s=xl;xl|=2;var a=fc();for(Il===e&&Rl===t||(Gl=null,zl=Qe()+500,dc(e,t));;)try{bc();break}catch(l){pc(e,l)}ki(),Sl.current=a,xl=s,null!==Nl?t=0:(Il=null,Rl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(r=s,t=ic(e,s))),1===t)throw n=Ll,dc(e,0),oc(e,r),rc(e,Qe()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,r))&&(0!==(a=ft(e))&&(r=a,t=ic(e,a))),1===t))throw n=Ll,dc(e,0),oc(e,r),rc(e,Qe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:_c(e,Ul,Gl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=jl+500-Qe())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(_c.bind(null,e,Ul,Gl),t);break}_c(e,Ul,Gl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wl(r/1960))-r)){e.timeoutHandle=rs(_c.bind(null,e,Ul,Gl),r);break}_c(e,Ul,Gl);break;default:throw Error(i(329))}}}return rc(e,Qe()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=Hl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Bl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&xl))throw Error(i(327));Tc();var t=dt(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ll,dc(e,0),oc(e,t),rc(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Ul,Gl),rc(e,Qe()),null}function cc(e,t){var n=xl;xl|=1;try{return e(t)}finally{0===(xl=n)&&(zl=Qe()+500,Hs&&zs())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&xl)&&Tc();var t=xl;xl|=1;var n=Cl.transition,r=Et;try{if(Cl.transition=null,Et=1,e)return e()}finally{Et=r,Cl.transition=n,0===(6&(xl=t))&&zs()}}function hc(){Dl=Pl.current,Ss(Pl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ps();break;case 3:Xi(),Ss(Is),Ss(xs),na();break;case 5:Ji(r);break;case 4:Xi();break;case 13:case 19:Ss(Zi);break;case 10:Ci(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Il=e,Nl=e=Pc(e.current,null),Rl=Dl=t,Ol=0,Ll=null,Bl=Fl=Ml=0,Ul=Hl=null,null!==Ri){for(t=0;t<Ri.length;t++)if(null!==(r=(n=Ri[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ri=null}return e}function pc(e,t){for(;;){var n=Nl;try{if(ki(),ra.current=Qa,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,ua=!1,ha=0,kl.current=null,null===n||null===n.return){Ol=1,Ll=t,Nl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,yo(f,o,l,0,t),1&f.mode&&mo(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),fi(lo(c,l));break e}}a=c=lo(c,l),4!==Ol&&(Ol=2),null===Hl?Hl=[a]:Hl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,ji(a,po(0,c,t));break e;case 1:l=c;var b=a.type,E=a.stateNode;if(0===(128&a.flags)&&("function"===typeof b.getDerivedStateFromError||null!==E&&"function"===typeof E.componentDidCatch&&(null===ql||!ql.has(E)))){a.flags|=65536,t&=-t,a.lanes|=t,ji(a,fo(a,l,t));break e}}a=a.return}while(null!==a)}vc(n)}catch(v){t=v,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function fc(){var e=Sl.current;return Sl.current=Qa,null===e?Qa:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Il||0===(268435455&Ml)&&0===(268435455&Fl)||oc(Il,Rl)}function gc(e,t){var n=xl;xl|=2;var r=fc();for(Il===e&&Rl===t||(Gl=null,dc(e,t));;)try{yc();break}catch(s){pc(e,s)}if(ki(),xl=n,Sl.current=r,null!==Nl)throw Error(i(261));return Il=null,Rl=0,Ol}function yc(){for(;null!==Nl;)Ec(Nl)}function bc(){for(;null!==Nl&&!Ke();)Ec(Nl)}function Ec(e){var t=Al(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?vc(e):Nl=t,kl.current=null}function vc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Vo(n,t,Dl)))return void(Nl=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Ol=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Ol&&(Ol=5)}function _c(e,t,n){var r=Et,s=Cl.transition;try{Cl.transition=null,Et=1,function(e,t,n,r){do{Tc()}while(null!==Yl);if(0!==(6&xl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Il&&(Nl=Il=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Vl||(Vl=!0,Ic(tt,(function(){return Tc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=Et;Et=1;var l=xl;xl|=4,kl.current=null,function(e,t){if(es=Wt,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(_){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==s&&3!==d.nodeType||(l=o+s),d!==a||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===s&&(l=o),p===a&&++h===r&&(c=o),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Wt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,b=t.stateNode,E=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(i(163))}}catch(_){wc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ts),Wt=!!es,ts=es=null,e.current=n,bl(n,e,s),Xe(),xl=l,Et=o,Cl.transition=a}else e.current=n;if(Vl&&(Vl=!1,Yl=e,Kl=s),a=e.pendingLanes,0===a&&(ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,e=$l,$l=null,e;0!==(1&Kl)&&0!==e.tag&&Tc(),a=e.pendingLanes,0!==(1&a)?e===Ql?Xl++:(Xl=0,Ql=e):Xl=0,zs()}(e,t,n,r)}finally{Cl.transition=s,Et=r}return null}function Tc(){if(null!==Yl){var e=vt(Kl),t=Cl.transition,n=Et;try{if(Cl.transition=null,Et=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Kl=0,0!==(6&xl))throw Error(i(331));var s=xl;for(xl|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var h=Jo;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Jo=d;else for(;null!==Jo;){var p=(h=Jo).sibling,f=h.return;if(il(h),h===u){Jo=null;break}if(null!==p){p.return=f,Jo=p;break}Jo=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,Jo=b;break e}Jo=a.return}}var E=e.current;for(Jo=E;null!==Jo;){var v=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==v)v.return=o,Jo=v;else e:for(o=E;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(T){wc(l,l.return,T)}if(l===o){Jo=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Jo=_;break e}Jo=l.return}}if(xl=s,zs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(T){}r=!0}return r}finally{Et=n,Cl.transition=t}}return!1}function Ac(e,t,n){e=Hi(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function wc(e,t,n){if(3===e.tag)Ac(e,e,n);else for(;null!==t;){if(3===t.tag){Ac(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Hi(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Rl&n)===n&&(4===Ol||3===Ol&&(130023424&Rl)===Rl&&500>Qe()-jl?dc(e,0):Bl|=n),rc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Oi(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function xc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),kc(e,n)}function Ic(e,t){return Ve(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Nc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case A:return Lc(n.children,s,a,t);case w:o=8,s|=8;break;case S:return(e=Rc(12,n,t,2|s)).elementType=S,e.lanes=a,e;case I:return(e=Rc(13,n,t,s)).elementType=I,e.lanes=a,e;case N:return(e=Rc(19,n,t,s)).elementType=N,e.lanes=a,e;case P:return Mc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:o=10;break e;case C:o=9;break e;case x:o=11;break e;case R:o=14;break e;case D:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,s,i,a,o,l){return e=new Hc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mi(i),e}function jc(e){if(!e)return Cs;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ds(n))return Ls(e,n,t)}return t}function zc(e,t,n,r,s,i,a,o,l){return(e=Uc(n,r,!0,e,0,i,0,o,l)).context=jc(null),n=e.current,(i=Bi(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Hi(n,i,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function Gc(e,t,n,r){var s=t.current,i=ec(),a=tc(s);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Hi(s,t,a))&&(nc(e,s,a,i),Ui(e,s,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}Al=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Is.current)Eo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Eo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),pi();break;case 5:Qi(t);break;case 1:Ds(t.type)&&Ms(t);break;case 4:Ki(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ks(Ti,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ks(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(ks(Zi,1&Zi.current),null!==(e=Wo(e,t,n))?e.sibling:null);ks(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),ks(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,wo(e,t,n)}return Wo(e,t,n)}(e,t,n);Eo=0!==(131072&e.flags)}else Eo=!1,si&&0!==(1048576&t.flags)&&Zs(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Go(e,t),e=t.pendingProps;var s=Rs(t,xs.current);Ii(t,n),s=ma(null,t,r,e,s,n);var a=ga();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(r)?(a=!0,Ms(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Mi(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=xo(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),vo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Go(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===R)return 14}return 2}(r),e=to(r,e),s){case 0:t=ko(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=_o(null,t,r,e,n);break e;case 14:t=To(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,ko(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(Io(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Fi(e,t),zi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=No(e,t,r,n,s=lo(Error(i(423)),t));break e}if(r!==s){t=No(e,t,r,n,s=lo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=_i(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===s){t=Wo(e,t,n);break e}vo(e,t,r,n)}t=t.child}return t;case 5:return Qi(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),So(e,t),vo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Fo(e,t,n);case 4:return Ki(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=vi(t,null,r,n):vo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,_o(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,ks(Ti,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Is.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Bi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),xi(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),xi(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}vo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ii(t,n),r=r(s=Ni(s)),t.flags|=1,vo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),To(e,t,r,s=to(r.type,s),n);case 15:return Ao(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),Go(e,t),t.tag=1,Ds(r)?(e=!0,Ms(t)):e=!1,Ii(t,n),io(t,r,s),oo(t,r,s,n),xo(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return wo(e,t,n)}throw Error(i(156,t.tag))};var Vc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Wc(a);o.call(e)}}Gc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Wc(a);i.call(e)}}var a=zc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[fs]=a.current,zr(8===e.nodeType?e.parentNode:e),uc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[fs]=l.current,zr(8===e.nodeType?e.parentNode:e),uc((function(){Gc(t,l,n,r)})),l}(n,t,e,s,r);return Wc(a)}Kc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Gc(e,t,null,null)},Kc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Gc(null,e,null,null)})),t[fs]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=wt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(bt(t,1|n),rc(t,Qe()),0===(6&xl)&&(zl=Qe()+500,zs()))}break;case 13:uc((function(){var t=Oi(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},Tt=function(e){if(13===e.tag){var t=Oi(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},At=function(e){if(13===e.tag){var t=tc(e),n=Oi(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},wt=function(){return Et},St=function(e,t){var n=Et;try{return Et=e,t()}finally{Et=n}},Te=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=_s(r);if(!s)throw Error(i(90));V(r),J(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[Es,vs,_s,ke,Ce,cc]},tu={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{st=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:T,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(i(299));var n=!1,r="",s=Vc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,s),e[fs]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Vc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,s,0,a,o),e[fs]=t.current,zr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Kc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fs]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function b(){}function E(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var v=E.prototype=new b;v.constructor=E,m(v,y.prototype),v.isPureReactComponent=!0;var _=Array.isArray,T=Object.prototype.hasOwnProperty,A={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)T.call(t,s)&&!w.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:A.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+x(l,0):i,_(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),I(a,t,s,"",(function(e){return e}))):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",_(e))for(var c=0;c<e.length;c++){var u=i+x(o=e[c],c);l+=I(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,s,u=i+x(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",(function(e){return t.call(n,e,s++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:A};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=E,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=A.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)T.call(t,c)&&!w.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,E="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,v(e),!m)if(null!==r(c))m=!0,P(T);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function T(e,n){m=!1,g&&(g=!1,b(k),k=-1),f=!0;var i=p;try{for(v(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(c)&&s(c),v(n)}else s(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,w=!1,S=null,k=-1,C=5,x=-1;function I(){return!(t.unstable_now()-x<C)}function N(){if(null!==S){var e=t.unstable_now();x=e;var n=!0;try{n=S(!0,e)}finally{n?A():(w=!1,S=null)}}else w=!1}if("function"===typeof E)A=function(){E(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=N,A=function(){D.postMessage(null)}}else A=function(){y(N,0)};function P(e){S=e,w||(w=!0,A())}function O(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,P(T))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(k),k=-1):g=!0,O(_,i-a))):(e.sortIndex=o,n(c,e),m||f||(m=!0,P(T))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},222:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=null;if(!e||"string"!==typeof e)return n;var r=(0,s.default)(e),i="function"===typeof t;return r.forEach((function(e){if("declaration"===e.type){var r=e.property,s=e.value;i?t(r,s,e):s&&((n=n||{})[r]=s)}})),n};var s=r(n(403))},440:e=>{"use strict";var t=function(){};e.exports=t},749:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/pdf.worker.min.251d69a696d4b789725e.mjs"}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".104d52a0.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="audio-copilot:";n.l=(r,s,i,a)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+i){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[s];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Audio-Copilot/",(()=>{n.b=document.baseURI||self.location.href;var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise(((n,r)=>s=e[t]=[n,r]));r.push(s[2]=i);var a=n.p+n.u(t),o=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,s[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var s,i,a=r[0],o=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkaudio_copilot=self.webpackChunkaudio_copilot||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{dU:()=>na,ng:()=>ra,EA:()=>sa,Tm:()=>ia,D6:()=>aa,YE:()=>oa});var t={};n.r(t),n.d(t,{boolean:()=>go,booleanish:()=>yo,commaOrSpaceSeparated:()=>To,commaSeparated:()=>_o,number:()=>Eo,overloadedBoolean:()=>bo,spaceSeparated:()=>vo});var r={};n.r(r),n.d(r,{attentionMarkers:()=>ru,contentInitial:()=>Qc,disable:()=>su,document:()=>Xc,flow:()=>Zc,flowInitial:()=>Jc,insideSpan:()=>nu,string:()=>eu,text:()=>tu});var s=n(43),i=n(391);const a=globalThis.atob,o=globalThis.btoa;class l{static floatTo16BitPCM(e){const t=new ArrayBuffer(2*e.length),n=new DataView(t);let r=0;for(let s=0;s<e.length;s++,r+=2){let t=Math.max(-1,Math.min(1,e[s]));n.setInt16(r,t<0?32768*t:32767*t,!0)}return t}static base64ToArrayBuffer(e){const t=a(e),n=t.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=t.charCodeAt(s);return r.buffer}static arrayBufferToBase64(e){e instanceof Float32Array?e=this.floatTo16BitPCM(e):e instanceof Int16Array&&(e=e.buffer);let t="",n=new Uint8Array(e);for(let r=0;r<n.length;r+=32768){let e=n.subarray(r,r+32768);t+=String.fromCharCode.apply(null,e)}return o(t)}static mergeInt16Arrays(e,t){if(e instanceof ArrayBuffer&&(e=new Int16Array(e)),t instanceof ArrayBuffer&&(t=new Int16Array(t)),!(e instanceof Int16Array)||!(t instanceof Int16Array))throw new Error("Both items must be Int16Array");const n=new Int16Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n}static generateId(e){const t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return`${e}${Array((arguments.length>1&&void 0!==arguments[1]?arguments[1]:21)-e.length).fill(0).map((e=>t[Math.floor(58*Math.random())])).join("")}`}}const c=e=>new Promise((t=>setTimeout((()=>t()),e)));class u{constructor(){this.eventHandlers={},this.nextEventHandlers={}}clearEventHandlers(){return this.eventHandlers={},this.nextEventHandlers={},!0}on(e,t){return this.eventHandlers[e]=this.eventHandlers[e]||[],this.eventHandlers[e].push(t),t}onNext(e,t){return this.nextEventHandlers[e]=this.nextEventHandlers[e]||[],this.nextEventHandlers[e].push(t),t}off(e,t){const n=this.eventHandlers[e]||[];if(t){const r=n.indexOf(t);if(-1===r)throw new Error(`Could not turn off specified event listener for "${e}": not found as a listener`);n.splice(r,1)}else delete this.eventHandlers[e];return!0}offNext(e,t){const n=this.nextEventHandlers[e]||[];if(t){const r=n.indexOf(t);if(-1===r)throw new Error(`Could not turn off specified next event listener for "${e}": not found as a listener`);n.splice(r,1)}else delete this.nextEventHandlers[e];return!0}async waitForNext(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Date.now();let r;for(this.onNext(e,(e=>r=e));!r;){if(t){if(Date.now()-n>t)return null}await c(1)}return r}dispatch(e,t){const n=[].concat(this.eventHandlers[e]||[]);for(const s of n)s(t);const r=[].concat(this.nextEventHandlers[e]||[]);for(const s of r)s(t);return delete this.nextEventHandlers[e],!0}}class h extends u{constructor(){let{url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:n,debug:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(),this.defaultUrl="wss://api.openai.com/v1/realtime",this.url=e||this.defaultUrl,this.apiKey=t||null,this.debug=!!r,this.ws=null,globalThis.document&&this.apiKey&&!n)throw new Error('Can not provide API key in the browser without "dangerouslyAllowAPIKeyInBrowser" set to true')}isConnected(){return!!this.ws}log(){const e=(new Date).toISOString();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const s=[`[Websocket/${e}]`].concat(n).map((e=>"object"===typeof e&&null!==e?JSON.stringify(e,null,2):e));return this.debug&&console.log(...s),!0}async connect(){let{model:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{model:"gpt-4o-realtime-preview-2024-10-01"};if(this.apiKey||this.url!==this.defaultUrl||console.warn(`No apiKey provided for connection to "${this.url}"`),this.isConnected())throw new Error("Already connected");if(globalThis.WebSocket){globalThis.document&&this.apiKey&&console.warn("Warning: Connecting using API key in the browser, this is not recommended");const t=new(0,globalThis.WebSocket)(`${this.url}${e?`?model=${e}`:""}`,["realtime",`openai-insecure-api-key.${this.apiKey}`,"openai-beta.realtime-v1"]);return t.addEventListener("message",(e=>{const t=JSON.parse(e.data);this.receive(t.type,t)})),new Promise(((e,n)=>{const r=()=>{this.disconnect(t),n(new Error(`Could not connect to "${this.url}"`))};t.addEventListener("error",r),t.addEventListener("open",(()=>{this.log(`Connected to "${this.url}"`),t.removeEventListener("error",r),t.addEventListener("error",(()=>{this.disconnect(t),this.log(`Error, disconnected from "${this.url}"`),this.dispatch("close",{error:!0})})),t.addEventListener("close",(()=>{this.disconnect(t),this.log(`Disconnected from "${this.url}"`),this.dispatch("close",{error:!1})})),this.ws=t,e(!0)}))}))}{const e="ws",t=new(0,(await import(e)).default)("wss://api.openai.com/v1/realtime?model=gpt-4o-realtime-preview-2024-10-01",[],{finishRequest:e=>{e.setHeader("Authorization",`Bearer ${this.apiKey}`),e.setHeader("OpenAI-Beta","realtime=v1"),e.end()}});return t.on("message",(e=>{const t=JSON.parse(e.toString());this.receive(t.type,t)})),new Promise(((e,n)=>{const r=()=>{this.disconnect(t),n(new Error(`Could not connect to "${this.url}"`))};t.on("error",r),t.on("open",(()=>{this.log(`Connected to "${this.url}"`),t.removeListener("error",r),t.on("error",(()=>{this.disconnect(t),this.log(`Error, disconnected from "${this.url}"`),this.dispatch("close",{error:!0})})),t.on("close",(()=>{this.disconnect(t),this.log(`Disconnected from "${this.url}"`),this.dispatch("close",{error:!1})})),this.ws=t,e(!0)}))}))}}disconnect(e){if(!e||this.ws===e)return this.ws&&this.ws.close(),this.ws=null,!0}receive(e,t){return this.log("received:",e,t),this.dispatch(`server.${e}`,t),this.dispatch("server.*",t),!0}send(e,t){if(!this.isConnected())throw new Error("RealtimeAPI is not connected");if("object"!==typeof(t=t||{}))throw new Error("data must be an object");const n={event_id:l.generateId("evt_"),type:e,...t};return this.dispatch(`client.${e}`,n),this.dispatch("client.*",n),this.log("sent:",e,n),this.ws.send(JSON.stringify(n)),!0}}class d{defaultFrequency=24e3;EventProcessors={"conversation.item.created":e=>{const{item:t}=e,n=JSON.parse(JSON.stringify(t));if(this.itemLookup[n.id]||(this.itemLookup[n.id]=n,this.items.push(n)),n.formatted={},n.formatted.audio=new Int16Array(0),n.formatted.text="",n.formatted.transcript="",this.queuedSpeechItems[n.id]&&(n.formatted.audio=this.queuedSpeechItems[n.id].audio,delete this.queuedSpeechItems[n.id]),n.content){const e=n.content.filter((e=>["text","input_text"].includes(e.type)));for(const t of e)n.formatted.text+=t.text}return this.queuedTranscriptItems[n.id]&&(n.formatted.transcript=this.queuedTranscriptItems.transcript,delete this.queuedTranscriptItems[n.id]),"message"===n.type?"user"===n.role?(n.status="completed",this.queuedInputAudio&&(n.formatted.audio=this.queuedInputAudio,this.queuedInputAudio=null)):n.status="in_progress":"function_call"===n.type?(n.formatted.tool={type:"function",name:n.name,call_id:n.call_id,arguments:""},n.status="in_progress"):"function_call_output"===n.type&&(n.status="completed",n.formatted.output=n.output),{item:n,delta:null}},"conversation.item.truncated":e=>{const{item_id:t,audio_end_ms:n}=e,r=this.itemLookup[t];if(!r)throw new Error(`item.truncated: Item "${t}" not found`);const s=Math.floor(n*this.defaultFrequency/1e3);return r.formatted.transcript="",r.formatted.audio=r.formatted.audio.slice(0,s),{item:r,delta:null}},"conversation.item.deleted":e=>{const{item_id:t}=e,n=this.itemLookup[t];if(!n)throw new Error(`item.deleted: Item "${t}" not found`);delete this.itemLookup[n.id];const r=this.items.indexOf(n);return r>-1&&this.items.splice(r,1),{item:n,delta:null}},"conversation.item.input_audio_transcription.completed":e=>{const{item_id:t,content_index:n,transcript:r}=e,s=this.itemLookup[t],i=r||" ";return s?(s.content[n].transcript=r,s.formatted.transcript=i,{item:s,delta:{transcript:r}}):(this.queuedTranscriptItems[t]={transcript:i},{item:null,delta:null})},"input_audio_buffer.speech_started":e=>{const{item_id:t,audio_start_ms:n}=e;return this.queuedSpeechItems[t]={audio_start_ms:n},{item:null,delta:null}},"input_audio_buffer.speech_stopped":(e,t)=>{const{item_id:n,audio_end_ms:r}=e;this.queuedSpeechItems[n]||(this.queuedSpeechItems[n]={audio_start_ms:r});const s=this.queuedSpeechItems[n];if(s.audio_end_ms=r,t){const e=Math.floor(s.audio_start_ms*this.defaultFrequency/1e3),n=Math.floor(s.audio_end_ms*this.defaultFrequency/1e3);s.audio=t.slice(e,n)}return{item:null,delta:null}},"response.created":e=>{const{response:t}=e;return this.responseLookup[t.id]||(this.responseLookup[t.id]=t,this.responses.push(t)),{item:null,delta:null}},"response.output_item.added":e=>{const{response_id:t,item:n}=e,r=this.responseLookup[t];if(!r)throw new Error(`response.output_item.added: Response "${t}" not found`);return r.output.push(n.id),{item:null,delta:null}},"response.output_item.done":e=>{const{item:t}=e;if(!t)throw new Error('response.output_item.done: Missing "item"');const n=this.itemLookup[t.id];if(!n)throw new Error(`response.output_item.done: Item "${t.id}" not found`);return n.status=t.status,{item:n,delta:null}},"response.content_part.added":e=>{const{item_id:t,part:n}=e,r=this.itemLookup[t];if(!r)throw new Error(`response.content_part.added: Item "${t}" not found`);return r.content.push(n),{item:r,delta:null}},"response.audio_transcript.delta":e=>{const{item_id:t,content_index:n,delta:r}=e,s=this.itemLookup[t];if(!s)throw new Error(`response.audio_transcript.delta: Item "${t}" not found`);return s.content[n].transcript+=r,s.formatted.transcript+=r,{item:s,delta:{transcript:r}}},"response.audio.delta":e=>{const{item_id:t,content_index:n,delta:r}=e,s=this.itemLookup[t];if(!s)throw new Error(`response.audio.delta: Item "${t}" not found`);const i=l.base64ToArrayBuffer(r),a=new Int16Array(i);return s.formatted.audio=l.mergeInt16Arrays(s.formatted.audio,a),{item:s,delta:{audio:a}}},"response.text.delta":e=>{const{item_id:t,content_index:n,delta:r}=e,s=this.itemLookup[t];if(!s)throw new Error(`response.text.delta: Item "${t}" not found`);return s.content[n].text+=r,s.formatted.text+=r,{item:s,delta:{text:r}}},"response.function_call_arguments.delta":e=>{const{item_id:t,delta:n}=e,r=this.itemLookup[t];if(!r)throw new Error(`response.function_call_arguments.delta: Item "${t}" not found`);return r.arguments+=n,r.formatted.tool.arguments+=n,{item:r,delta:{arguments:n}}}};constructor(){this.clear()}clear(){return this.itemLookup={},this.items=[],this.responseLookup={},this.responses=[],this.queuedSpeechItems={},this.queuedTranscriptItems={},this.queuedInputAudio=null,!0}queueInputAudio(e){return this.queuedInputAudio=e,e}processEvent(e){if(!e.event_id)throw console.error(e),new Error('Missing "event_id" on event');if(!e.type)throw console.error(e),new Error('Missing "type" on event');const t=this.EventProcessors[e.type];if(!t)throw new Error(`Missing conversation event processor for "${e.type}"`);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return t.call(this,e,...r)}getItem(e){return this.itemLookup[e]||null}getItems(){return this.items.slice()}}class p extends u{constructor(){let{url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:n,debug:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.defaultSessionConfig={modalities:["text","audio"],instructions:"",voice:"verse",input_audio_format:"pcm16",output_audio_format:"pcm16",input_audio_transcription:null,turn_detection:null,tools:[],tool_choice:"auto",temperature:.8,max_response_output_tokens:4096},this.sessionConfig={},this.transcriptionModels=[{model:"whisper-1"}],this.defaultServerVadConfig={type:"server_vad",threshold:.5,prefix_padding_ms:300,silence_duration_ms:200},this.realtime=new h({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:n,debug:r}),this.conversation=new d,this._resetConfig(),this._addAPIEventHandlers()}_resetConfig(){return this.sessionCreated=!1,this.tools={},this.sessionConfig=JSON.parse(JSON.stringify(this.defaultSessionConfig)),this.inputAudioBuffer=new Int16Array(0),!0}_addAPIEventHandlers(){var e=this;this.realtime.on("client.*",(e=>{const t={time:(new Date).toISOString(),source:"client",event:e};this.dispatch("realtime.event",t)})),this.realtime.on("server.*",(e=>{const t={time:(new Date).toISOString(),source:"server",event:e};this.dispatch("realtime.event",t)})),this.realtime.on("server.session.created",(()=>this.sessionCreated=!0));const t=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const{item:i,delta:a}=e.conversation.processEvent(t,...r);return{item:i,delta:a}},n=function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];const{item:a,delta:o}=t(n,...s);return a&&e.dispatch("conversation.updated",{item:a,delta:o}),{item:a,delta:o}},r=async e=>{try{const t=JSON.parse(e.arguments),n=this.tools[e.name];if(!n)throw new Error(`Tool "${e.name}" has not been added`);const r=await n.handler(t);this.realtime.send("conversation.item.create",{item:{type:"function_call_output",call_id:e.call_id,output:JSON.stringify(r)}})}catch(t){this.realtime.send("conversation.item.create",{item:{type:"function_call_output",call_id:e.call_id,output:JSON.stringify({error:t.message})}})}this.createResponse()};return this.realtime.on("server.response.created",t),this.realtime.on("server.response.output_item.added",t),this.realtime.on("server.response.content_part.added",t),this.realtime.on("server.input_audio_buffer.speech_started",(e=>{t(e),this.dispatch("conversation.interrupted")})),this.realtime.on("server.input_audio_buffer.speech_stopped",(e=>t(e,this.inputAudioBuffer))),this.realtime.on("server.conversation.item.created",(e=>{const{item:t}=n(e);this.dispatch("conversation.item.appended",{item:t}),"completed"===t.status&&this.dispatch("conversation.item.completed",{item:t})})),this.realtime.on("server.conversation.item.truncated",n),this.realtime.on("server.conversation.item.deleted",n),this.realtime.on("server.conversation.item.input_audio_transcription.completed",n),this.realtime.on("server.response.audio_transcript.delta",n),this.realtime.on("server.response.audio.delta",n),this.realtime.on("server.response.text.delta",n),this.realtime.on("server.response.function_call_arguments.delta",n),this.realtime.on("server.response.output_item.done",(async e=>{const{item:t}=n(e);"completed"===t.status&&this.dispatch("conversation.item.completed",{item:t}),t.formatted.tool&&r(t.formatted.tool)})),!0}isConnected(){return this.realtime.isConnected()}reset(){return this.disconnect(),this.clearEventHandlers(),this.realtime.clearEventHandlers(),this._resetConfig(),this._addAPIEventHandlers(),!0}async connect(){if(this.isConnected())throw new Error("Already connected, use .disconnect() first");return await this.realtime.connect(),this.updateSession(),!0}async waitForSessionCreated(){if(!this.isConnected())throw new Error("Not connected, use .connect() first");for(;!this.sessionCreated;)await new Promise((e=>setTimeout((()=>e()),1)));return!0}disconnect(){this.sessionCreated=!1,this.realtime.isConnected()&&this.realtime.disconnect(),this.conversation.clear()}getTurnDetectionType(){return this.sessionConfig.turn_detection?.type||null}addTool(e,t){if(!e?.name)throw new Error("Missing tool name in definition");const n=e?.name;if(this.tools[n])throw new Error(`Tool "${n}" already added. Please use .removeTool("${n}") before trying to add again.`);if("function"!==typeof t)throw new Error(`Tool "${n}" handler must be a function`);return this.tools[n]={definition:e,handler:t},this.updateSession(),this.tools[n]}removeTool(e){if(!this.tools[e])throw new Error(`Tool "${e}" does not exist, can not be removed.`);return delete this.tools[e],!0}deleteItem(e){return this.realtime.send("conversation.item.delete",{item_id:e}),!0}updateSession(){let{modalities:e,instructions:t,voice:n,input_audio_format:r,output_audio_format:s,input_audio_transcription:i,turn_detection:a,tools:o,tool_choice:l,temperature:c,max_response_output_tokens:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0!==e&&(this.sessionConfig.modalities=e),void 0!==t&&(this.sessionConfig.instructions=t),void 0!==n&&(this.sessionConfig.voice=n),void 0!==r&&(this.sessionConfig.input_audio_format=r),void 0!==s&&(this.sessionConfig.output_audio_format=s),void 0!==i&&(this.sessionConfig.input_audio_transcription=i),void 0!==a&&(this.sessionConfig.turn_detection=a),void 0!==o&&(this.sessionConfig.tools=o),void 0!==l&&(this.sessionConfig.tool_choice=l),void 0!==c&&(this.sessionConfig.temperature=c),void 0!==u&&(this.sessionConfig.max_response_output_tokens=u);const h=[].concat((o||[]).map((e=>{const t={type:"function",...e};if(this.tools[t?.name])throw new Error(`Tool "${t?.name}" has already been defined`);return t})),Object.keys(this.tools).map((e=>({type:"function",...this.tools[e].definition})))),d={...this.sessionConfig};return d.tools=h,this.realtime.isConnected()&&this.realtime.send("session.update",{session:d}),!0}sendUserMessageContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){for(const t of e)"input_audio"===t.type&&(t.audio instanceof ArrayBuffer||t.audio instanceof Int16Array)&&(t.audio=l.arrayBufferToBase64(t.audio));this.realtime.send("conversation.item.create",{item:{type:"message",role:"user",content:e}})}return this.createResponse(),!0}appendInputAudio(e){return e.byteLength>0&&(this.realtime.send("input_audio_buffer.append",{audio:l.arrayBufferToBase64(e)}),this.inputAudioBuffer=l.mergeInt16Arrays(this.inputAudioBuffer,e)),!0}createResponse(){return null===this.getTurnDetectionType()&&this.inputAudioBuffer.byteLength>0&&(this.realtime.send("input_audio_buffer.commit"),this.conversation.queueInputAudio(this.inputAudioBuffer),this.inputAudioBuffer=new Int16Array(0)),this.realtime.send("response.create"),!0}cancelResponse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return this.realtime.send("response.cancel"),{item:null};if(e){const n=this.conversation.getItem(e);if(!n)throw new Error(`Could not find item "${e}"`);if("message"!==n.type)throw new Error('Can only cancelResponse messages with type "message"');if("assistant"!==n.role)throw new Error('Can only cancelResponse messages with role "assistant"');this.realtime.send("response.cancel");const r=n.content.findIndex((e=>"audio"===e.type));if(-1===r)throw new Error("Could not find audio on item to cancel");return this.realtime.send("conversation.item.truncate",{item_id:e,content_index:r,audio_end_ms:Math.floor(t/this.conversation.defaultFrequency*1e3)}),{item:n}}}async waitForNextItem(){const e=await this.waitForNext("conversation.item.appended"),{item:t}=e;return{item:t}}async waitForNextCompletedItem(){const e=await this.waitForNext("conversation.item.completed"),{item:t}=e;return{item:t}}}class f{static floatTo16BitPCM(e){const t=new ArrayBuffer(2*e.length),n=new DataView(t);let r=0;for(let s=0;s<e.length;s++,r+=2){let t=Math.max(-1,Math.min(1,e[s]));n.setInt16(r,t<0?32768*t:32767*t,!0)}return t}static mergeBuffers(e,t){const n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}_packData(e,t){return[new Uint8Array([t,t>>8]),new Uint8Array([t,t>>8,t>>16,t>>24])][e]}pack(e,t){if(null===t||void 0===t||!t.bitsPerSample)throw new Error('Missing "bitsPerSample"');if(null===t||void 0===t||!t.channels)throw new Error('Missing "channels"');if(null===t||void 0===t||!t.data)throw new Error('Missing "data"');const{bitsPerSample:n,channels:r,data:s}=t,i=["RIFF",this._packData(1,52),"WAVE","fmt ",this._packData(1,16),this._packData(0,1),this._packData(0,r.length),this._packData(1,e),this._packData(1,e*r.length*n/8),this._packData(0,r.length*n/8),this._packData(0,n),"data",this._packData(1,r[0].length*r.length*n/8),s],a=new Blob(i,{type:"audio/mpeg"});return{blob:a,url:URL.createObjectURL(a),channelCount:r.length,sampleRate:e,duration:s.byteLength/(r.length*e*2)}}}globalThis.WavPacker=f;const m=[4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13],g=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],y=[],b=[];for(let n=1;n<=8;n++)for(let e=0;e<m.length;e++){const t=m[e];y.push(t/Math.pow(2,8-n)),b.push(g[e]+n)}const E=[32,2e3],v=y.filter(((e,t)=>y[t]>E[0]&&y[t]<E[1])),_=b.filter(((e,t)=>y[t]>E[0]&&y[t]<E[1]));class T{static getFrequencies(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"frequency",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-100,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-30;n||(n=new Float32Array(e.frequencyBinCount),e.getFloatFrequencyData(n));const a=t/2,o=1/n.length*a;let l,c,u;if("music"===r||"voice"===r){const e="voice"===r?v:y,t=Array(e.length).fill(s);for(let r=0;r<n.length;r++){const s=r*o,i=n[r];for(let n=e.length-1;n>=0;n--)if(s>e[n]){t[n]=Math.max(t[n],i);break}}l=t,c="voice"===r?v:y,u="voice"===r?_:b}else l=Array.from(n),c=l.map(((e,t)=>o*t)),u=c.map((e=>`${e.toFixed(2)} Hz`));const h=l.map((e=>Math.max(0,Math.min((e-s)/(i-s),1))));return{values:new Float32Array(h),frequencies:c,labels:u}}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.fftResults=[],t){const{length:n,sampleRate:r}=t,s=new OfflineAudioContext({length:n,sampleRate:r}),i=s.createBufferSource();i.buffer=t;const a=s.createAnalyser();a.fftSize=8192,a.smoothingTimeConstant=.1,i.connect(a);const o=1/60,l=n/r,c=e=>{const t=o*e;t<l&&s.suspend(t).then((()=>{const t=new Float32Array(a.frequencyBinCount);a.getFloatFrequencyData(t),this.fftResults.push(t),c(e+1)})),1===e?s.startRendering():s.resume()};i.start(0),c(1),this.audio=e,this.context=s,this.analyser=a,this.sampleRate=r,this.audioBuffer=t}else{const t=new AudioContext,n=t.createMediaElementSource(e),r=t.createAnalyser();r.fftSize=8192,r.smoothingTimeConstant=.1,n.connect(r),r.connect(t.destination),this.audio=e,this.context=t,this.analyser=r,this.sampleRate=this.context.sampleRate,this.audioBuffer=null}}getFrequencies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frequency",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-30,r=null;if(this.audioBuffer&&this.fftResults.length){const e=this.audio.currentTime/this.audio.duration,t=Math.min(e*this.fftResults.length|0,this.fftResults.length-1);r=this.fftResults[t]}return T.getFrequencies(this.analyser,this.sampleRate,r,e,t,n)}async resumeIfSuspended(){return"suspended"===this.context.state&&await this.context.resume(),!0}}globalThis.AudioAnalysis=T;const A=new Blob(["\nclass StreamProcessor extends AudioWorkletProcessor {\n  constructor() {\n    super();\n    this.hasStarted = false;\n    this.hasInterrupted = false;\n    this.outputBuffers = [];\n    this.bufferLength = 128;\n    this.write = { buffer: new Float32Array(this.bufferLength), trackId: null };\n    this.writeOffset = 0;\n    this.trackSampleOffsets = {};\n    this.port.onmessage = (event) => {\n      if (event.data) {\n        const payload = event.data;\n        if (payload.event === 'write') {\n          const int16Array = payload.buffer;\n          const float32Array = new Float32Array(int16Array.length);\n          for (let i = 0; i < int16Array.length; i++) {\n            float32Array[i] = int16Array[i] / 0x8000; // Convert Int16 to Float32\n          }\n          this.writeData(float32Array, payload.trackId);\n        } else if (\n          payload.event === 'offset' ||\n          payload.event === 'interrupt'\n        ) {\n          const requestId = payload.requestId;\n          const trackId = this.write.trackId;\n          const offset = this.trackSampleOffsets[trackId] || 0;\n          this.port.postMessage({\n            event: 'offset',\n            requestId,\n            trackId,\n            offset,\n          });\n          if (payload.event === 'interrupt') {\n            this.hasInterrupted = true;\n          }\n        } else {\n          throw new Error(`Unhandled event \"${payload.event}\"`);\n        }\n      }\n    };\n  }\n\n  writeData(float32Array, trackId = null) {\n    let { buffer } = this.write;\n    let offset = this.writeOffset;\n    for (let i = 0; i < float32Array.length; i++) {\n      buffer[offset++] = float32Array[i];\n      if (offset >= buffer.length) {\n        this.outputBuffers.push(this.write);\n        this.write = { buffer: new Float32Array(this.bufferLength), trackId };\n        buffer = this.write.buffer;\n        offset = 0;\n      }\n    }\n    this.writeOffset = offset;\n    return true;\n  }\n\n  process(inputs, outputs, parameters) {\n    const output = outputs[0];\n    const outputChannelData = output[0];\n    const outputBuffers = this.outputBuffers;\n    if (this.hasInterrupted) {\n      this.port.postMessage({ event: 'stop' });\n      return false;\n    } else if (outputBuffers.length) {\n      this.hasStarted = true;\n      const { buffer, trackId } = outputBuffers.shift();\n      for (let i = 0; i < outputChannelData.length; i++) {\n        outputChannelData[i] = buffer[i] || 0;\n      }\n      if (trackId) {\n        this.trackSampleOffsets[trackId] =\n          this.trackSampleOffsets[trackId] || 0;\n        this.trackSampleOffsets[trackId] += buffer.length;\n      }\n      return true;\n    } else if (this.hasStarted) {\n      this.port.postMessage({ event: 'stop' });\n      // hanks - to resume the playback, a separate message should be sent to indicate \n      // reply completed from real-time API\n      this.port.postMessage({ event: 'stop_by_completion' });\n      return false;\n    } else {\n      return true;\n    }\n  }\n}\n\nregisterProcessor('stream_processor', StreamProcessor);\n"],{type:"application/javascript"}),w=URL.createObjectURL(A);class S{constructor(){let{sampleRate:e=44100}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.scriptSrc=w,this.sampleRate=e,this.context=null,this.stream=null,this.analyser=null,this.trackSampleOffsets={},this.interruptedTrackIds={},this.newsAudio=null,this.newsVideo=null,this.isHidden=!0,this.setIsPlaying=null,this.itemStatus=null,this.askStop=!1,this.gainNode=null}setItemStatus(e){this.itemStatus=e}async connect(e,t,n){this.context=new AudioContext({sampleRate:this.sampleRate}),"suspended"===this.context.state&&await this.context.resume();try{await this.context.audioWorklet.addModule(this.scriptSrc)}catch(s){throw console.error(s),new Error(`Could not add audioWorklet module: ${this.scriptSrc}`)}const r=this.context.createAnalyser();return r.fftSize=8192,r.smoothingTimeConstant=.1,this.analyser=r,this.newsAudio=e,this.newsVideo=t,this.setIsPlaying=n,this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination),this.gainNode.gain.value=0,!0}getFrequencies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frequency",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-30;if(!this.analyser)throw new Error("Not connected, please call .connect() first");return T.getFrequencies(this.analyser,this.sampleRate,null,e,t,n)}_start(){const e=new AudioWorkletNode(this.context,"stream_processor");return e.connect(this.context.destination),e.connect(this.gainNode),e.port.onmessage=t=>{const{event:n}=t.data;if("stop"===n)e.disconnect(),this.stream=null;else if("offset"===n){const{requestId:e,trackId:n,offset:r}=t.data,s=r/this.sampleRate;this.trackSampleOffsets[e]={trackId:n,offset:r,currentTime:s}}else"stop_by_completion"===n&&("completed"===this.itemStatus&&this.newsAudio&&this.isHidden&&(this.askStop?this.newsAudio.pause():(this.newsAudio.play(),this.setIsPlaying(!0))),"completed"===this.itemStatus&&this.newsVideo&&!this.isHidden&&(this.askStop?this.newsVideo.pause():(this.newsVideo.play(),this.setIsPlaying(!0))))},this.analyser.disconnect(),e.connect(this.analyser),this.stream=e,!0}add16BitPCM(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";if("string"!==typeof n)throw new Error("trackId must be a string");if(!this.interruptedTrackIds[n]){if(this.stream||this._start(),e instanceof Int16Array)t=e;else{if(!(e instanceof ArrayBuffer))throw new Error("argument must be Int16Array or ArrayBuffer");t=new Int16Array(e)}return this.stream.port.postMessage({event:"write",buffer:t,trackId:n}),t}}async getTrackSampleOffset(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.stream)return null;const t=crypto.randomUUID();let n;for(this.stream.port.postMessage({event:e?"interrupt":"offset",requestId:t});!n;)n=this.trackSampleOffsets[t],await new Promise((e=>setTimeout((()=>e()),1)));const{trackId:r}=n;return e&&r&&(this.interruptedTrackIds[r]=!0),n}async interrupt(){return this.getTrackSampleOffset(!0)}}globalThis.WavStreamPlayer=S;const k=new Blob(["\nclass AudioProcessor extends AudioWorkletProcessor {\n\n  constructor() {\n    super();\n    this.port.onmessage = this.receive.bind(this);\n    this.initialize();\n  }\n\n  initialize() {\n    this.foundAudio = false;\n    this.recording = false;\n    this.chunks = [];\n  }\n\n  /**\n   * Concatenates sampled chunks into channels\n   * Format is chunk[Left[], Right[]]\n   */\n  readChannelData(chunks, channel = -1, maxChannels = 9) {\n    let channelLimit;\n    if (channel !== -1) {\n      if (chunks[0] && chunks[0].length - 1 < channel) {\n        throw new Error(\n          `Channel ${channel} out of range: max ${chunks[0].length}`\n        );\n      }\n      channelLimit = channel + 1;\n    } else {\n      channel = 0;\n      channelLimit = Math.min(chunks[0] ? chunks[0].length : 1, maxChannels);\n    }\n    const channels = [];\n    for (let n = channel; n < channelLimit; n++) {\n      const length = chunks.reduce((sum, chunk) => {\n        return sum + chunk[n].length;\n      }, 0);\n      const buffers = chunks.map((chunk) => chunk[n]);\n      const result = new Float32Array(length);\n      let offset = 0;\n      for (let i = 0; i < buffers.length; i++) {\n        result.set(buffers[i], offset);\n        offset += buffers[i].length;\n      }\n      channels[n] = result;\n    }\n    return channels;\n  }\n\n  /**\n   * Combines parallel audio data into correct format,\n   * channels[Left[], Right[]] to float32Array[LRLRLRLR...]\n   */\n  formatAudioData(channels) {\n    if (channels.length === 1) {\n      // Simple case is only one channel\n      const float32Array = channels[0].slice();\n      const meanValues = channels[0].slice();\n      return { float32Array, meanValues };\n    } else {\n      const float32Array = new Float32Array(\n        channels[0].length * channels.length\n      );\n      const meanValues = new Float32Array(channels[0].length);\n      for (let i = 0; i < channels[0].length; i++) {\n        const offset = i * channels.length;\n        let meanValue = 0;\n        for (let n = 0; n < channels.length; n++) {\n          float32Array[offset + n] = channels[n][i];\n          meanValue += channels[n][i];\n        }\n        meanValues[i] = meanValue / channels.length;\n      }\n      return { float32Array, meanValues };\n    }\n  }\n\n  /**\n   * Converts 32-bit float data to 16-bit integers\n   */\n  floatTo16BitPCM(float32Array) {\n    const buffer = new ArrayBuffer(float32Array.length * 2);\n    const view = new DataView(buffer);\n    let offset = 0;\n    for (let i = 0; i < float32Array.length; i++, offset += 2) {\n      let s = Math.max(-1, Math.min(1, float32Array[i]));\n      view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\n    }\n    return buffer;\n  }\n\n  /**\n   * Retrieves the most recent amplitude values from the audio stream\n   * @param {number} channel\n   */\n  getValues(channel = -1) {\n    const channels = this.readChannelData(this.chunks, channel);\n    const { meanValues } = this.formatAudioData(channels);\n    return { meanValues, channels };\n  }\n\n  /**\n   * Exports chunks as an audio/wav file\n   */\n  export() {\n    const channels = this.readChannelData(this.chunks);\n    const { float32Array, meanValues } = this.formatAudioData(channels);\n    const audioData = this.floatTo16BitPCM(float32Array);\n    return {\n      meanValues: meanValues,\n      audio: {\n        bitsPerSample: 16,\n        channels: channels,\n        data: audioData,\n      },\n    };\n  }\n\n  receive(e) {\n    const { event, id } = e.data;\n    let receiptData = {};\n    switch (event) {\n      case 'start':\n        this.recording = true;\n        break;\n      case 'stop':\n        this.recording = false;\n        break;\n      case 'clear':\n        this.initialize();\n        break;\n      case 'export':\n        receiptData = this.export();\n        break;\n      case 'read':\n        receiptData = this.getValues();\n        break;\n      default:\n        break;\n    }\n    // Always send back receipt\n    this.port.postMessage({ event: 'receipt', id, data: receiptData });\n  }\n\n  sendChunk(chunk) {\n    const channels = this.readChannelData([chunk]);\n    const { float32Array, meanValues } = this.formatAudioData(channels);\n    const rawAudioData = this.floatTo16BitPCM(float32Array);\n    const monoAudioData = this.floatTo16BitPCM(meanValues);\n    this.port.postMessage({\n      event: 'chunk',\n      data: {\n        mono: monoAudioData,\n        raw: rawAudioData,\n      },\n    });\n  }\n\n  process(inputList, outputList, parameters) {\n    // Copy input to output (e.g. speakers)\n    // Note that this creates choppy sounds with Mac products\n    const sourceLimit = Math.min(inputList.length, outputList.length);\n    for (let inputNum = 0; inputNum < sourceLimit; inputNum++) {\n      const input = inputList[inputNum];\n      const output = outputList[inputNum];\n      const channelCount = Math.min(input.length, output.length);\n      for (let channelNum = 0; channelNum < channelCount; channelNum++) {\n        input[channelNum].forEach((sample, i) => {\n          output[channelNum][i] = sample;\n        });\n      }\n    }\n    const inputs = inputList[0];\n    // There's latency at the beginning of a stream before recording starts\n    // Make sure we actually receive audio data before we start storing chunks\n    let sliceIndex = 0;\n    if (!this.foundAudio) {\n      for (const channel of inputs) {\n        sliceIndex = 0; // reset for each channel\n        if (this.foundAudio) {\n          break;\n        }\n        if (channel) {\n          for (const value of channel) {\n            if (value !== 0) {\n              // find only one non-zero entry in any channel\n              this.foundAudio = true;\n              break;\n            } else {\n              sliceIndex++;\n            }\n          }\n        }\n      }\n    }\n    if (inputs && inputs[0] && this.foundAudio && this.recording) {\n      // We need to copy the TypedArray, because the `process`\n      // internals will reuse the same buffer to hold each input\n      const chunk = inputs.map((input) => input.slice(sliceIndex));\n      this.chunks.push(chunk);\n      this.sendChunk(chunk);\n    }\n    return true;\n  }\n}\n\nregisterProcessor('audio_processor', AudioProcessor);\n"],{type:"application/javascript"}),C=URL.createObjectURL(k);class x{constructor(){let{sampleRate:e=44100,outputToSpeakers:t=!1,debug:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.scriptSrc=C,this.sampleRate=e,this.outputToSpeakers=t,this.debug=!!n,this._deviceChangeCallback=null,this._devices=[],this.stream=null,this.processor=null,this.source=null,this.node=null,this.recording=!1,this._lastEventId=0,this.eventReceipts={},this.eventTimeout=5e3,this._chunkProcessor=()=>{},this._chunkProcessorSize=void 0,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)}}static async decode(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const n=new AudioContext({sampleRate:arguments.length>1&&void 0!==arguments[1]?arguments[1]:44100});let r,s;if(e instanceof Blob){if(-1!==t)throw new Error('Can not specify "fromSampleRate" when reading from Blob');s=e,r=await s.arrayBuffer()}else if(e instanceof ArrayBuffer){if(-1!==t)throw new Error('Can not specify "fromSampleRate" when reading from ArrayBuffer');r=e,s=new Blob([r],{type:"audio/wav"})}else{let n,i;if(e instanceof Int16Array){i=e,n=new Float32Array(e.length);for(let t=0;t<e.length;t++)n[t]=e[t]/32768}else if(e instanceof Float32Array)n=e;else{if(!(e instanceof Array))throw new Error('"audioData" must be one of: Blob, Float32Arrray, Int16Array, ArrayBuffer, Array<number>');n=new Float32Array(e)}if(-1===t)throw new Error('Must specify "fromSampleRate" when reading from Float32Array, In16Array or Array');if(t<3e3)throw new Error('Minimum "fromSampleRate" is 3000 (3kHz)');i||(i=f.floatTo16BitPCM(n));const a={bitsPerSample:16,channels:[n],data:i};s=(new f).pack(t,a).blob,r=await s.arrayBuffer()}const i=await n.decodeAudioData(r),a=i.getChannelData(0);return{blob:s,url:URL.createObjectURL(s),values:a,audioBuffer:i}}log(){return this.debug&&this.log(...arguments),!0}getSampleRate(){return this.sampleRate}getStatus(){return this.processor?this.recording?"recording":"paused":"ended"}async _event(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n=n||this.processor,!n)throw new Error("Can not send events without recording first");const r={event:e,id:this._lastEventId++,data:t};n.port.postMessage(r);const s=(new Date).valueOf();for(;!this.eventReceipts[r.id];){if((new Date).valueOf()-s>this.eventTimeout)throw new Error(`Timeout waiting for "${e}" event`);await new Promise((e=>setTimeout((()=>e(!0)),1)))}const i=this.eventReceipts[r.id];return delete this.eventReceipts[r.id],i}listenForDeviceChange(e){if(null===e&&this._deviceChangeCallback)navigator.mediaDevices.removeEventListener("devicechange",this._deviceChangeCallback),this._deviceChangeCallback=null;else if(null!==e){let t=0,n=[];const r=e=>e.map((e=>e.deviceId)).sort().join(","),s=async()=>{let s=++t;const i=await this.listDevices();s===t&&r(n)!==r(i)&&(n=i,e(i.slice()))};navigator.mediaDevices.addEventListener("devicechange",s),s(),this._deviceChangeCallback=s}return!0}async requestPermission(){const e=await navigator.permissions.query({name:"microphone"});if("denied"===e.state)window.alert("You must grant microphone access to use this feature.");else if("prompt"===e.state)try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});e.getTracks().forEach((e=>e.stop()))}catch(t){window.alert("You must grant microphone access to use this feature.")}return!0}async listDevices(){if(!navigator.mediaDevices||!("enumerateDevices"in navigator.mediaDevices))throw new Error("Could not request user devices");await this.requestPermission();const e=(await navigator.mediaDevices.enumerateDevices()).filter((e=>"audioinput"===e.kind)),t=e.findIndex((e=>"default"===e.deviceId)),n=[];if(-1!==t){let r=e.splice(t,1)[0],s=e.findIndex((e=>e.groupId===r.groupId));-1!==s&&(r=e.splice(s,1)[0]),r.default=!0,n.push(r)}return n.concat(e)}async begin(e){if(this.processor)throw new Error("Already connected: please call .end() to start a new session");if(!navigator.mediaDevices||!("getUserMedia"in navigator.mediaDevices))throw new Error("Could not request user media");try{const t={audio:!0};e&&(t.audio={deviceId:{exact:e}}),this.stream=await navigator.mediaDevices.getUserMedia(t)}catch(a){throw new Error("Could not start media stream")}const t=new AudioContext({sampleRate:this.sampleRate}),n=t.createMediaStreamSource(this.stream);try{await t.audioWorklet.addModule(this.scriptSrc)}catch(o){throw console.error(o),new Error(`Could not add audioWorklet module: ${this.scriptSrc}`)}const r=new AudioWorkletNode(t,"audio_processor");r.port.onmessage=e=>{const{event:t,id:n,data:r}=e.data;if("receipt"===t)this.eventReceipts[n]=r;else if("chunk"===t)if(this._chunkProcessorSize){const e=this._chunkProcessorBuffer;this._chunkProcessorBuffer={raw:f.mergeBuffers(e.raw,r.raw),mono:f.mergeBuffers(e.mono,r.mono)},this._chunkProcessorBuffer.mono.byteLength>=this._chunkProcessorSize&&(this._chunkProcessor(this._chunkProcessorBuffer),this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)})}else this._chunkProcessor(r)};const s=n.connect(r),i=t.createAnalyser();return i.fftSize=8192,i.smoothingTimeConstant=.1,s.connect(i),this.outputToSpeakers&&(console.warn("Warning: Output to speakers may affect sound quality,\nespecially due to system audio feedback preventative measures.\nuse only for debugging"),i.connect(t.destination)),this.source=n,this.node=s,this.analyser=i,this.processor=r,!0}getFrequencies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frequency",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-30;if(!this.processor)throw new Error("Session ended: please call .begin() first");return T.getFrequencies(this.analyser,this.sampleRate,null,e,t,n)}async pause(){if(!this.processor)throw new Error("Session ended: please call .begin() first");if(!this.recording)throw new Error("Already paused: please call .record() first");return this._chunkProcessorBuffer.raw.byteLength&&this._chunkProcessor(this._chunkProcessorBuffer),this.log("Pausing ..."),await this._event("stop"),this.recording=!1,!0}async record(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8192;if(!this.processor)throw new Error("Session ended: please call .begin() first");if(this.recording)throw new Error("Already recording: please call .pause() first");if("function"!==typeof e)throw new Error("chunkProcessor must be a function");return this._chunkProcessor=e,this._chunkProcessorSize=t,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)},this.log("Recording ..."),await this._event("start"),this.recording=!0,!0}async clear(){if(!this.processor)throw new Error("Session ended: please call .begin() first");return await this._event("clear"),!0}async read(){if(!this.processor)throw new Error("Session ended: please call .begin() first");this.log("Reading ...");return await this._event("read")}async save(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.processor)throw new Error("Session ended: please call .begin() first");if(!e&&this.recording)throw new Error("Currently recording: please call .pause() first, or call .save(true) to force");this.log("Exporting ...");const t=await this._event("export");return(new f).pack(this.sampleRate,t.audio)}async end(){if(!this.processor)throw new Error("Session ended: please call .begin() first");const e=this.processor;this.log("Stopping ..."),await this._event("stop"),this.recording=!1;this.stream.getTracks().forEach((e=>e.stop())),this.log("Exporting ...");const t=await this._event("export",{},e);this.processor.disconnect(),this.source.disconnect(),this.node.disconnect(),this.analyser.disconnect(),this.stream=null,this.processor=null,this.source=null,this.node=null;return(new f).pack(this.sampleRate,t.audio)}async quit(){return this.listenForDeviceChange(null),this.processor&&await this.end(),!0}}globalThis.WavRecorder=x;const I="\nSpeaker 1: 00:00 \n Hey there, explorers. Welcome to our deep dive. Today.\n\nSpeaker 2: 00:03 \n Uh, yeah.\n\nSpeaker 1: 00:04 \n We're going to learn all about some cool animals.\n\nSpeaker 2: 00:06 \n Cool?\n\nSpeaker 1: 00:07 \n From a magazine. Kind of like the ones you might read at home.\n\nSpeaker 2: 00:09 \n Oh, yeah, like National Geographic, Little Kids Magazine.\n\nSpeaker 1: 00:12 \n Exactly.\n\nSpeaker 2: 00:13 \n It has lots of colorful pictures and fun facts about animals.\n\nSpeaker 1: 00:16 \n Yeah. And this is the November December issue.\n\nSpeaker 2: 00:19 \n That's right.\n\nSpeaker 1: 00:20 \n So let's get started. First up, we have zebras. Look at this picture.\n\nSpeaker 2: 00:26 \n Oh, wow.\n\nSpeaker 1: 00:26 \n They have black and white stripes all over their body.\n\nSpeaker 2: 00:29 \n Yeah. They're so cool.\n\nSpeaker 1: 00:31 \n Did you know those. Those stripes aren't just for looking cool. They actually help zebras stay healthy.\n\nSpeaker 2: 00:38 \n Oh. How do they do that?\n\nSpeaker 1: 00:39 \n Well, you know flies, Those little buzzing bugs. They can bite zebras and make them sick.\n\nSpeaker 2: 00:43 \n Oh, no.\n\nSpeaker 1: 00:44 \n But the stripes, they confuse the flies.\n\nSpeaker 2: 00:47 \n Really?\n\nSpeaker 1: 00:47 \n Yeah. Makes it hard for them to land on the zebra.\n\nSpeaker 2: 00:49 \n Wow.\n\nSpeaker 1: 00:50 \n So the flies fly away to find another animal.\n\nSpeaker 2: 00:53 \n That's a neat trick.\n\nSpeaker 1: 00:54 \n I know, right? So the zebras stay healthy.\n\nSpeaker 2: 00:56 \n Smart stripes.\n\nSpeaker 1: 00:58 \n Okay. Now let's travel to the high mountains.\n\nSpeaker 2: 01:00 \n Ooh.\n\nSpeaker 1: 01:01 \n Where we can find a very special goat called a markhor.\n\nSpeaker 2: 01:05 \n A markhor? What's that?\n\nSpeaker 1: 01:06 \n Well, what makes the markhor special is that it has really long horns.\n\nSpeaker 2: 01:11 \n Long horns.\n\nSpeaker 1: 01:12 \n And guess what? The horns twist like a giant corkscrew.\n\nSpeaker 2: 01:15 \n Whoa. A corkscrew?\n\nSpeaker 1: 01:17 \n Yep. They use their horns to help them climb steep rocks.\n\nSpeaker 2: 01:19 \n Oh. Can you imagine climbing a mountain with twisty horns?\n\nSpeaker 1: 01:23 \n Markhors are amazing climbers.\n\nSpeaker 2: 01:26 \n They are.\n\nSpeaker 1: 01:26 \n And look, they have these funny beards too.\n\nSpeaker 2: 01:28 \n Oh, yeah.\n\nSpeaker 1: 01:29 \n It's like a grandpa goat.\n\nSpeaker 2: 01:30 \n Haha. A grandpa goat with corkscrew horns.\n\nSpeaker 1: 01:33 \n Okay, let's fly over to Antarctica now.\n\nSpeaker 2: 01:35 \n Ooh.\n\nSpeaker 1: 01:36 \n Where it's super cold and icy. There we can find a bird that loves the snow.\n\nSpeaker 2: 01:41 \n A bird that loves snow?\n\nSpeaker 1: 01:42 \n It's called a snow petrel.\n\nSpeaker 2: 01:43 \n A snow petrel? Never heard of that one.\n\nSpeaker 1: 01:46 \n They are very good at catching fish.\n\nSpeaker 2: 01:48 \n Oh.\n\nSpeaker 1: 01:48 \n They use their beaks, which are kind of like their mouths, to grab fish from the ocean.\n\nSpeaker 2: 01:53 \n Okay.\n\nSpeaker 1: 01:53 \n Sometimes they fly above water to look for fish. And sometimes they stand on the ice and wait.\n\nSpeaker 2: 01:58 \n So patient.\n\nSpeaker 1: 01:59 \n And they even build their nests high up on icy cliffs.\n\nSpeaker 2: 02:02 \n Wow. Can you imagine living in such a chilly place?\n\nSpeaker 1: 02:05 \n Brr. I'm glad we're just visiting.\n\nSpeaker 2: 02:07 \n Me too.\n\nSpeaker 1: 02:08 \n Speaking of cold places, have you ever tried to walk in really deep snow?\n\nSpeaker 2: 02:13 \n Yeah, it's hard.\n\nSpeaker 1: 02:14 \n It's hard. But there's an animal called a snowshoe hare.\n\nSpeaker 2: 02:18 \n A snowshoe hare that has special feet.\n\nSpeaker 1: 02:21 \n That make it easy to walk on snow.\n\nSpeaker 2: 02:22 \n Oh, special feet.\n\nSpeaker 1: 02:24 \n Their feet are big and covered in fur to keep them warm.\n\nSpeaker 2: 02:27 \n Okay.\n\nSpeaker 1: 02:28 \n And they have something called webbing.\n\nSpeaker 2: 02:30 \n Webbing.\n\nSpeaker 1: 02:31 \n Which means their toes are connected by skin, like a duck's foot.\n\nSpeaker 2: 02:35 \n Oh, like a duck.\n\nSpeaker 1: 02:36 \n And the webbing helps them walk on top of the snow without sinking.\n\nSpeaker 2: 02:40 \n Wow.\n\nSpeaker 1: 02:41 \n It's like wearing snowshoes. So quick, imagine hopping through the snow without sinking.\n\nSpeaker 2: 02:44 \n That would be so fun.\n\nSpeaker 1: 02:46 \n Now let's meet an animal that's super big.\n\nSpeaker 2: 02:48 \n Okay.\n\nSpeaker 1: 02:49 \n And can live both on land and in water.\n\nSpeaker 2: 02:51 \n Bo.\n\nSpeaker 1: 02:52 \n It's called a walrus.\n\nSpeaker 2: 02:53 \n A walrus. Those have tusks, right?\n\nSpeaker 1: 02:55 \n Yes. Look at those big tusks.\n\nSpeaker 2: 02:56 \n Wow. They look like giant teeth.\n\nSpeaker 1: 02:58 \n Walruses have thick skin to help them stay warm in cold water.\n\nSpeaker 2: 03:02 \n Okay.\n\nSpeaker 1: 03:03 \n And they have flippers, which are like arms and legs that help them swim. Cool. So what are those tusks for?\n\nSpeaker 2: 03:09 \n Well, they use them for lots of things.\n\nSpeaker 1: 03:11 \n Like what?\n\nSpeaker 2: 03:12 \n They use them to pull themselves out of the water and onto the ice.\n\nSpeaker 1: 03:15 \n Okay.\n\nSpeaker 2: 03:16 \n And they also use them to protect themselves from danger and to dig for food in the sand.\n\nSpeaker 1: 03:21 \n Oh, like clams.\n\nSpeaker 2: 03:23 \n Exactly. Walruses love to eat clams.\n\nSpeaker 1: 03:28 \n Cool.\n\nSpeaker 2: 03:28 \n And get this. They even use their whiskers to feel around for food. It's like having extra fingers.\n\nSpeaker 1: 03:34 \n That's amazing.\n\nSpeaker 2: 03:35 \n Yeah.\n\nSpeaker 1: 03:36 \n So they use their whiskers to find clams under the sand.\n\nSpeaker 2: 03:38 \n No. They are so cool.\n\nSpeaker 1: 03:40 \n Okay. Are you ready for a trip to outer space?\n\nSpeaker 2: 03:42 \n Outer space?\n\nSpeaker 1: 03:43 \n Let's zoom over to Venus.\n\nSpeaker 2: 03:44 \n But Venus?\n\nSpeaker 1: 03:45 \n A planet that's even hotter than a pizza oven.\n\nSpeaker 2: 03:47 \n Hotter than a pizza oven?\n\nSpeaker 1: 03:49 \n Venus is the brightest planet in our sky.\n\nSpeaker 2: 03:52 \n It is.\n\nSpeaker 1: 03:52 \n And it's covered in clouds. But these clouds are different from the clouds we see on Earth.\n\nSpeaker 2: 03:58 \n How are they different?\n\nSpeaker 1: 03:59 \n They're thick and trap heat from the sun, which makes Venus super hot.\n\nSpeaker 2: 04:03 \n Wow. Imagine a whole planet that's super hot.\n\nSpeaker 1: 04:06 \n I wouldn't want to visit there.\n\nSpeaker 2: 04:07 \n Me neither. It's amazing how different planets can be from Earth.\n\nSpeaker 1: 04:11 \n I know, right?\n\nSpeaker 2: 04:12 \n Welcome back. Are you ready for more amazing animals?\n\nSpeaker 1: 04:16 \n You bet. What cool creature do we have next?\n\nSpeaker 2: 04:19 \n Have you ever heard of a mandrill?\n\nSpeaker 1: 04:23 \n A mandrill? I don't think so.\n\nSpeaker 2: 04:24 \n Well, they're really cool because they're the largest kind of monkey.\n\nSpeaker 1: 04:27 \n The biggest monkey. Wow. What does it look like?\n\nSpeaker 2: 04:30 \n Mandrills are famous for being very colorful.\n\nSpeaker 1: 04:34 \n Colorful?\n\nSpeaker 2: 04:34 \n Their faces are red and blue, and they have colorful stripes on their bottoms, too.\n\nSpeaker 1: 04:38 \n Wow. They must.\n\nSpeaker 2: 04:40 \n Yeah.\n\nSpeaker 1: 04:41 \n Where do these mandrills live?\n\nSpeaker 2: 04:42 \n Mandrills live in the forests of Africa.\n\nSpeaker 1: 04:45 \n The forests?\n\nSpeaker 2: 04:46 \n You can find them swinging from trees and looking for food. Down on the forest floor.\n\nSpeaker 1: 04:51 \n What kind of food do mandrills like to eat?\n\nSpeaker 2: 04:53 \n Well, mandrills eat both plants and animals.\n\nSpeaker 1: 04:55 \n Plants and animals.\n\nSpeaker 2: 04:56 \n When an animal eats both plants and animals, we call that an omnivore.\n\nSpeaker 1: 05:00 \n Omnivore.\n\nSpeaker 2: 05:00 \n So a mandrill is an omnivore.\n\nSpeaker 1: 05:02 \n Okay, got it.\n\nSpeaker 2: 05:03 \n They munch on yummy fruits and seeds and bugs.\n\nSpeaker 1: 05:05 \n Oh, yummy.\n\nSpeaker 2: 05:06 \n And sometimes they even eat small reptiles like lizards.\n\nSpeaker 1: 05:09 \n Lizards. Wow. It sounds like mandrills have quite the appetite. Let's move on to an animal you might have seen before. The mallard duck.\n\nSpeaker 2: 05:19 \n Oh yeah, mallards.\n\nSpeaker 1: 05:20 \n Mallards are a type of duck that you can find all over the world.\n\nSpeaker 2: 05:23 \n That's right. They live near water like ponds, lakes and rivers.\n\nSpeaker 1: 05:26 \n Yeah, I've seen mallards at the park before.\n\nSpeaker 2: 05:29 \n They love to swim.\n\nSpeaker 1: 05:30 \n They do? They have that shiny green head and a bright yellow beak.\n\nSpeaker 2: 05:33 \n Exactly.\n\nSpeaker 1: 05:34 \n What do they find to eat in the water?\n\nSpeaker 2: 05:35 \n Well, mallard ducks are omnivores, just like mandrills.\n\nSpeaker 1: 05:38 \n Oh wow. Another omnivore.\n\nSpeaker 2: 05:40 \n They eat plants and seeds in the water.\n\nSpeaker 1: 05:42 \n Okay.\n\nSpeaker 2: 05:43 \n And they also gobble up small insects.\n\nSpeaker 1: 05:45 \n Insects?\n\nSpeaker 2: 05:45 \n And even tiny snails that live in the water.\n\nSpeaker 1: 05:48 \n Snails. Yuck.\n\nSpeaker 2: 05:49 \n It's amazing how animals are so good at finding food no matter where they live.\n\nSpeaker 1: 05:53 \n I know, right? Whether it's a forest or a lake.\n\nSpeaker 2: 05:56 \n Yeah.\n\nSpeaker 1: 05:57 \n There's always something tasty to eat. Speaking of animals that know how to survive, let's take a look at the purple sea urchin.\n\nSpeaker 2: 06:04 \n A purple sea urchin?\n\nSpeaker 1: 06:06 \n Purple sea urchin. What in the world is that? I've never heard of it.\n\nSpeaker 2: 06:10 \n It's a really interesting creature that lives in the ocean.\n\nSpeaker 1: 06:13 \n The ocean? It's shaped like a ball.\n\nSpeaker 2: 06:16 \n A ball?\n\nSpeaker 1: 06:16 \n And is covered in sharp spines.\n\nSpeaker 2: 06:18 \n Spines?\n\nSpeaker 1: 06:19 \n To protect it from other animals that might want to eat it.\n\nSpeaker 2: 06:21 \n So it's kind of like an underwater cactus?\n\nSpeaker 1: 06:23 \n Uh huh.\n\nSpeaker 2: 06:24 \n And what color is it?\n\nSpeaker 1: 06:25 \n What color do you think it is?\n\nSpeaker 2: 06:27 \n Is it purple?\n\nSpeaker 1: 06:28 \n You got it. It's purple.\n\nSpeaker 2: 06:29 \n So cool. How do they move around with all those pointy spines? It seems like that would make it hard to get around.\n\nSpeaker 1: 06:34 \n Well, purple sea urchins have these tiny little feet called tube feet.\n\nSpeaker 2: 06:39 \n Tube feet?\n\nSpeaker 1: 06:40 \n That they use to slowly crawl along the ocean floor.\n\nSpeaker 2: 06:43 \n Wow. So it's like a slow motion walking cactus underwater. That's amazing. Okay, what other amazing animal do we have to meet?\n\nSpeaker 1: 06:51 \n Get ready to learn about a very special wild cat called a caracal.\n\nSpeaker 2: 06:56 \n A caracal?\n\nSpeaker 1: 06:57 \n Ever heard of it?\n\nSpeaker 2: 06:57 \n I've never heard of a caracal before. What makes it so special?\n\nSpeaker 1: 07:00 \n Caracals are known for their really long ears.\n\nSpeaker 2: 07:03 \n Long ears?\n\nSpeaker 1: 07:03 \n Their ears have tufts of fur at the tips.\n\nSpeaker 2: 07:06 \n Okay.\n\nSpeaker 1: 07:06 \n Making them look extra long. We call those tufts of fur tufted ears.\n\nSpeaker 2: 07:11 \n Tufted ears.\n\nSpeaker 1: 07:12 \n Those ears help them hear even the tiniest sounds. Wow. I bet that comes in handy when they're hunting.\n\nSpeaker 2: 07:17 \n You're exactly right. Caracals can hear small animals like mice and birds moving around in the grass.\n\nSpeaker 1: 07:23 \n Wow. So it's like their ears are a radar to help them find food.\n\nSpeaker 2: 07:26 \n Exactly. Exactly. And guess what? Caracal kittens grow up really quickly.\n\nSpeaker 1: 07:30 \n Oh, how quickly?\n\nSpeaker 2: 07:31 \n By the time they are 10 months old.\n\nSpeaker 1: 07:32 \n 10 months old?\n\nSpeaker 2: 07:33 \n They can hunt on their own.\n\nSpeaker 1: 07:34 \n Wow. 10 months old. That's like being a teenager in the animal world.\n\nSpeaker 2: 07:38 \n Yeah.\n\nSpeaker 1: 07:39 \n Okay, I'm ready for our next animal. What do we have?\n\nSpeaker 2: 07:42 \n Let's learn about an animal that looks like a mix of different animals.\n\nSpeaker 1: 07:46 \n Okay.\n\nSpeaker 2: 07:46 \n Have you ever heard of a raccoon dog?\n\nSpeaker 1: 07:48 \n A raccoon dog? Is it a raccoon or a dog? I'm so confused.\n\nSpeaker 2: 07:53 \n It's a little bit of both. Both raccoon dogs are wild animals that are part of the same family as foxes and wolves.\n\nSpeaker 1: 08:00 \n Foxes and wolves.\n\nSpeaker 2: 08:01 \n But their faces look a lot like raccoons.\n\nSpeaker 1: 08:03 \n So they are like a combination of different animals.\n\nSpeaker 2: 08:06 \n Exactly.\n\nSpeaker 1: 08:06 \n How cool.\n\nSpeaker 2: 08:07 \n They have a bushy tail like a fox.\n\nSpeaker 1: 08:09 \n Okay.\n\nSpeaker 2: 08:10 \n A pointy nose like a dog. And a black mask around their eyes just like a raccoon.\n\nSpeaker 1: 08:16 \n It's like nature decided to take the best parts of different animals and put them all together.\n\nSpeaker 2: 08:20 \n I know, right?\n\nSpeaker 1: 08:21 \n What a cool combination it is. I wonder how they came up with the name raccoon dog.\n\nSpeaker 2: 08:25 \n Me too.\n\nSpeaker 1: 08:26 \n Where do raccoon dogs live?\n\nSpeaker 2: 08:27 \n Raccoon dogs live in forests and grasslands in parts of Asia and Europe.\n\nSpeaker 1: 08:33 \n Forests and grasslands.\n\nSpeaker 2: 08:35 \n And remember how we learned that mandrills are omnivores?\n\nSpeaker 1: 08:37 \n Yes.\n\nSpeaker 2: 08:38 \n Because they eat both plants and animals. Well, raccoon dogs are omnivores too, so they eat everything.\n\nSpeaker 1: 08:44 \n That makes sense. Because if you live in a lot of different places, you need to be able to find food everywhere.\n\nSpeaker 2: 08:49 \n Yeah. They're very adaptable.\n\nSpeaker 1: 08:51 \n I love learning about all these amazing animals. What do we have next?\n\nSpeaker 2: 08:55 \n Let's hop over to meet a very colorful frog, the strawberry poison frog.\n\nSpeaker 1: 09:00 \n Strawberry poison frog? Why is it called a poison frog?\n\nSpeaker 2: 09:04 \n Because it has poison in its skin.\n\nSpeaker 1: 09:06 \n Poison? Is it dangerous?\n\nSpeaker 2: 09:08 \n It is a little bit dangerous, but don't worry. It won't hurt you if you don't touch it.\n\nSpeaker 1: 09:12 \n Okay, good. I'll be sure to keep my hands to myself. But why is it Called a strawberry.\n\nSpeaker 2: 09:16 \n Poison frog because it is bright red, just like a strawberry.\n\nSpeaker 1: 09:20 \n Oh. I bet that bright red color is a warning to other animals that it is dangerous to eat it.\n\nSpeaker 2: 09:27 \n That's right.\n\nSpeaker 1: 09:27 \n It's like a big sign that says, don't eat me.\n\nSpeaker 2: 09:29 \n You are exactly right. The bright colors on poison frogs are nature's way of warning other animals to stay away. It's their way of saying, hey, I'm poisonous. Don't eat me.\n\nSpeaker 1: 09:39 \n Wow. Imagine being a walking warning sign. That's so cool. Okay, what else do we have to learn about today?\n\nSpeaker 2: 09:46 \n Wow. We learned about so many incredible animals from that National Geographic little kids magazine. We saw zebras with stripes that confuse flies. Mark horse with their super long twisty horns for climbing mountains. And snow petrels who can hunt for fish in icy water.\n\nSpeaker 1: 10:04 \n And don't forget about the snowshoe hare. Oh, yeah, they have those special feet that help them walk on top of the snow without sinking. It's like they have built in snowshoes.\n\nSpeaker 2: 10:13 \n That's right. And we can't forget about walruses.\n\nSpeaker 1: 10:15 \n Oh. With their big tusks and whiskers that.\n\nSpeaker 2: 10:17 \n Are like extra fingers.\n\nSpeaker 1: 10:18 \n Exactly.\n\nSpeaker 2: 10:19 \n Use those whiskers to find clams under the sand. It's incredible how all these animals have special features.\n\nSpeaker 1: 10:24 \n I know, right?\n\nSpeaker 2: 10:25 \n That help them survive. From the hot African savanna to the icy cold, Antarctic animals have adapted to all sorts of environments.\n\nSpeaker 1: 10:33 \n And we even went on a quick trip to outer space to learn about the super hot planet Venus. Its thick clouds trap the heat from the sun, making it way too hot for us to visit.\n\nSpeaker 2: 10:43 \n It's amazing to think about all the different planets and animals that exist in our universe. There's so much to explore and discover.\n\nSpeaker 1: 10:50 \n So what was your favorite animal that we learned about today?\n\nSpeaker 2: 10:53 \n Hmm, that's a tough one.\n\nSpeaker 1: 10:55 \n I know, right? Yeah, there's so many cool ones.\n\nSpeaker 2: 10:58 \n But I think my favorite is the snowshoe hare.\n\nSpeaker 1: 11:00 \n Oh, the snowshoe hare.\n\nSpeaker 2: 11:01 \n It's amazing how they can hop through the snow without sinking.\n\nSpeaker 1: 11:04 \n I know.\n\nSpeaker 2: 11:05 \n Those big furry feet and the webbing between their toes are such a clever adaptation for living in a snowy place.\n\nSpeaker 1: 11:12 \n That's a great choice. I think my favorite is the markhor.\n\nSpeaker 2: 11:14 \n The markhor.\n\nSpeaker 1: 11:15 \n I love those twisty horns.\n\nSpeaker 2: 11:17 \n Yeah, they're pretty cool.\n\nSpeaker 1: 11:17 \n It makes them look so unique. I wonder if you could have any animal superpower. What would you choose?\n\nSpeaker 2: 11:23 \n Ooh, that's a good question.\n\nSpeaker 1: 11:25 \n Would you want to have super speed like a cheetah, the ability to camouflage like a chameleon, or maybe even the power to fly like a bird.\n\nSpeaker 2: 11:35 \n So many choices.\n\nSpeaker 1: 11:36 \n It's fun to think about. It is what it would be like to have special abilities like animals.\n\nSpeaker 2: 11:41 \n Well, that's all the time we have for today's deep dive. But remember, learning about the world around us is an adventure that never ends.\n\nSpeaker 1: 11:48 \n So keep exploring and asking questions.\n\nSpeaker 2: 11:50 \n You never know what amazing things you might discover.\n",N=`System settings:\nTool use: enabled.\n\nInstructions:\n\nGeneral Instructions:\n - You are an audio copilot, which will transform the passive listening experience into an interactive and engaging one. You will help the user understand the on-going playback and provide answers to their questions.\n\nAudio Scripts with timestamp:\n - Here are the audio scripts: ${I}, you can use this an knowledge base when providing an answer to user.\n  \nVoice Control Instructions:\n Voice Control Instructions for function call audio_control: \n- You are also an artificial intelligence agent responsible for helping control audio playback by voice commands. You will receive voice control commands from the user and respond with the appropriate action. You may receive the following commands:\n - Always respond with a short reply, e.g. 'OK' when you receive a voice control command\n\nGeneral Guidance Steps:\n - Capture and Analyze User Voice Commands: Obtain the user's voice input and interpret the command's content, such as identifying whether the user intends to start, pause, or adjust the volume.\n - Determine the Context of the User's Command: Understand the context of the user's instruction. For instance, if the user requests to fast-forward, clarify the specific time interval they wish to skip.\n - Seek Clarification for Ambiguous Commands: If the user's command lacks clarity, politely ask for further confirmation to generate an accurate function call.\n\nExamples for how to set the function call signatures:\n - When you received 'stop the audio', 'pause the audio', or similar phrases (or in other languages,e.g. in chinese '\u505c\u4e00\u4e0b'\uff0c '\u6682\u505c') to describe the intent to pause/stop the on-going playback, just set the command as 'pause'\n - When user ask as 'resume the audio', 'continue the audio', 'Please Play the audio', 'start playig the audio'or similar phrases(or in other languages,e.g. in chinese,'\u7ee7\u7eed') to describe the intent to resume the paused playback, just set the command as 'resume'\n - When user ask as 'speed up', 'speed down', or similar phrases(or in other languages, e.g. in chinese '\u5feb\u4e00\u70b9'\uff0c'\u6162\u4e00\u70b9') to describe the intent to change the playback speed, just set the command as 'speed' and the context as 'up' or 'down' as best as you can understand\n - When user ask as 'Adjust the volume up or down' or simply as 'volume up', 'volume down' to describe the intent to increase or decrease the volume of audio up or down, just set the command as 'volume', the context as 'up' or 'down' as best as you understand\n - When user ask as 'back to normal' to describe the intent to reset the playback speed to normal, just set the command as 'speed' and the context as 'normal'\n - When user ask as 'skip forward', 'skip backward', or similar phrases(or in other languages, e.g. in chinese '\u5feb\u8fdb\u4e00\u70b9'\uff0c '\u540e\u9000\u4e00\u70b9') to describe the intent to skip the playback, just set the command as 'skip' and the context as 'forward' or 'backward' as you understand\n - When user ask as 'Play the audio from the start' to describe the intent to play the audio from the start, just set the command as 'skip', the context as 'start'\n - When user ask as 'Play the audio from the beginning' to describe the intent to play the audio from the beginning, just set the command as 'skip', the context as 'start'\n - When user ask as 'What is playing right now?' or 'why here the word/phrase/sentence used to say...' to describe the intent(or in other language, e.g. in chinese '\u6b63\u5728\u8ba8\u8bba\u4ec0\u4e48'\uff0c'\u73b0\u5728\u5728\u8bb2\u4ec0\u4e48', '\u6211\u542c\u4e0d\u61c2') to ask what is talked right now(maybe some words/phrases near by, the user is not quite understood or not hear clearly), just set the command as 'peek', try to explain to user by using the currentTime and duration of the audio you received from the function calling and also the scripts or general knowledge as best as you can.\n\nNotes:\n - Capture Key Action Words: When interpreting user commands, focus on identifying key action words to minimize misunderstandings.\n - Clarify Ambiguous Commands: If a command is unclear, seek clarification from the user to ensure the function call accurately reflects their intent.\n\n \n \nFunction Call for Translate the current senense Instruction:\n - when function: translation_current_sentence is called, you should translate the current sentence to the requested language and return the translated sentence.\n - The current sentence is the sentence that is currently being played in the audio.\n - The current time and duration of the audio should be used to determine the current sentence.\n\nFunction Call for search video from youtube Instruction:\n - just provide simple response like indicated in the return info when you receive the command to search video from youtube. \n\nFunction Call for learning/exploring by keyword/topic Instruction:\n - you will receive a keyword with the start time and end time to locate audio segment talking about the keyword.\n - you will play as an english teacher role to lead the user to learn the content related to the keyword.\n - you should start to provide some basic words(from the scripts) which are prequiste to understand the keyword and ask to repeat the user to repeat or practice with you together.\n - then you will explain the scripts from the start time to the end time of the scripts sentence by sentence.\n - then you will play the audio segment from the start time to the end time of the keyword for enghlish hearing practice.\n - then you will ask the user some questions about the information between the start time to the end time to check user has understood.\n - At last you will wrap up what has been learned and ask the user to continue or ask more questions.\n\n\nOther important instruction should be followed during interaction:\n- Simplify and Clarify Extracted Content: After identifying relevant information, explain the concepts or statements from the audio using simplified and easily understandable language.\n- Provide Necessary Background Information: If the question involves implicit context or requires additional background, offer relevant explanations, possibly referencing other parts of the audio.\n- Offer Multiple Interpretations When Applicable: If there are several possible explanations, present multiple options and encourage the user to select the one that aligns with their understanding.\n- Define Terms in Layman's Language: When addressing terminology, strive to define terms using simple language, avoiding complex industry-specific jargon.\n- Always provide a transition phrase at the end of each reply no more than five words, like "ok", "sure"... etc.\n- If the answer you received, like "OK", "OK, please", "Please go ahead", "OK, continue", "OK, continue playing", "OK, continue reading", "OK, continue with the news", "OK, "continue with the audio"... etc, you do not need to respond. The audio will be resumed soon.\n- If you do not know the answer based the audio scripts, try to reply based on general knowledge as best as you can as a general AI assistant. \n- If you realy do not know the answer based the audio scripts and your general knowledge, you can say "I am not sure, but I can help you with other questions."              \n- If user asks "Please go ahead", "OK, continue", "OK, continue playing", "OK, continue reading", "OK, continue with the news", "OK, "continue with the audio", you just simply reply "OK" or "\u597d\u7684" depending the user's language.\n- Be kind, helpful, and curteous\n- It is okay to ask the user questions\n- Use tools and functions you have available liberally, it is part of the training apparatus\n- Be open to exploration and conversation\n\nPersonality:\n- Be upbeat and genuine\n- Try speaking quickly as if excited\n`,R=new WeakMap,D={drawBars:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];s=Math.floor(Math.min(s,(e.width-a)/(Math.max(i,1)+a))),s||(s=Math.floor((e.width-a)/(Math.max(i,1)+a))),i||(i=(e.width-a)/s-a);const l=function(e,t){let n,r,s,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(a&&(r=t.toString(),s=i.toString(),n=R.has(e)?R.get(e):{},R.set(e,n),n[r]=n[r]||{},n[r][s]))return n[r][s];const o=e.length,l=new Array(t);if(t<=o){l.fill(0);const n=new Array(t).fill(0);for(let r=0;r<o;r++){const s=Math.floor(r*(t/o));i?l[s]=Math.max(l[s],Math.abs(e[r])):l[s]+=Math.abs(e[r]),n[s]++}if(!i)for(let e=0;e<l.length;e++)l[e]=l[e]/n[e]}else for(let c=0;c<t;c++){const n=c*(o-1)/(t-1),r=Math.floor(n),s=Math.ceil(n),i=n-r;l[c]=s>=o?e[o-1]:e[r]*(1-i)+e[s]*i}return a&&(n[r][s]=l),l}(n,s,!0);for(let c=0;c<s;c++){const n=Math.abs(l[c]),s=Math.max(1,n*e.height),u=a+c*(i+a),h=o?(e.height-s)/2:e.height-s;t.fillStyle=r,t.fillRect(u,h,i,s)}}};var P=n(173),O=n.n(P);function L(){return L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}function M(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var F=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=e.size,a=void 0===i?24:i,o=M(e,["color","size"]);return s.createElement("svg",L({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))}));F.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},F.displayName="X";const B=F;function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}function U(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var j=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=e.size,a=void 0===i?24:i,o=U(e,["color","size"]);return s.createElement("svg",H({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),s.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))}));j.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},j.displayName="Plus";const z=j;function G(){return G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}function W(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var $=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=e.size,a=void 0===i?24:i,o=W(e,["color","size"]);return s.createElement("svg",G({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))}));$.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},$.displayName="Minus";const q=$;function V(){return V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}function Y(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var K=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=e.size,a=void 0===i?24:i,o=Y(e,["color","size"]);return s.createElement("svg",V({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}))}));K.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},K.displayName="Zap";const X=K;function Q(){return Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(this,arguments)}function J(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var Z=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=e.size,a=void 0===i?24:i,o=J(e,["color","size"]);return s.createElement("svg",Q({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))}));Z.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},Z.displayName="Edit";const ee=Z;function te(){return te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te.apply(this,arguments)}function ne(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var re=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=e.size,a=void 0===i?24:i,o=ne(e,["color","size"]);return s.createElement("svg",te({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),s.createElement("polyline",{points:"12 19 5 12 12 5"}))}));re.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},re.displayName="ArrowLeft";const se=re;function ie(){return ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}function ae(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var oe=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=e.size,a=void 0===i?24:i,o=ae(e,["color","size"]);return s.createElement("svg",ie({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),s.createElement("polyline",{points:"12 5 19 12 12 19"}))}));oe.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},oe.displayName="ArrowRight";const le=oe;function ce(){return ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ce.apply(this,arguments)}function ue(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var he=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=e.size,a=void 0===i?24:i,o=ue(e,["color","size"]);return s.createElement("svg",ce({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("rect",{x:"6",y:"4",width:"4",height:"16"}),s.createElement("rect",{x:"14",y:"4",width:"4",height:"16"}))}));he.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},he.displayName="Pause";const de=he;function pe(){return pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}function fe(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var me=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=e.size,a=void 0===i?24:i,o=fe(e,["color","size"]);return s.createElement("svg",pe({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("polygon",{points:"5 3 19 12 5 21 5 3"}))}));me.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},me.displayName="Play";const ge=me;function ye(){return ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}function be(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var Ee=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=e.size,a=void 0===i?24:i,o=be(e,["color","size"]);return s.createElement("svg",ye({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),s.createElement("path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}),s.createElement("path",{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}),s.createElement("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),s.createElement("line",{x1:"8",y1:"23",x2:"16",y2:"23"}))}));Ee.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},Ee.displayName="MicOff";const ve=Ee;function _e(){return _e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function Te(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var Ae=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=e.size,a=void 0===i?24:i,o=Te(e,["color","size"]);return s.createElement("svg",_e({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),s.createElement("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),s.createElement("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),s.createElement("line",{x1:"8",y1:"23",x2:"16",y2:"23"}))}));Ae.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},Ae.displayName="Mic";const we=Ae;var Se=n(579);function ke(e){let{label:t="Okay",icon:n,iconPosition:r="start",iconColor:s,iconFill:i=!1,buttonStyle:a="regular",...o}=e;const l="start"===r?n:null,c="end"===r?n:null,u=[];return s&&u.push(`icon-${s}`),i&&u.push("icon-fill"),u.push(`button-style-${a}`),(0,Se.jsxs)("button",{"data-component":"Button",className:u.join(" "),...o,children:[l&&(0,Se.jsx)("span",{className:"icon icon-start",children:(0,Se.jsx)(l,{})}),(0,Se.jsx)("span",{className:"label",children:t}),c&&(0,Se.jsx)("span",{className:"icon icon-end",children:(0,Se.jsx)(c,{})})]})}var Ce=function(e,t,n){if(n||2===arguments.length)for(var r,s=0,i=t.length;s<i;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))},xe=Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce(Ce([],["onCopy","onCut","onPaste"],!0),["onCompositionEnd","onCompositionStart","onCompositionUpdate"],!0),["onFocus","onBlur"],!0),["onInput","onInvalid","onReset","onSubmit"],!0),["onLoad","onError"],!0),["onKeyDown","onKeyPress","onKeyUp"],!0),["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],!0),["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],!0),["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],!0),["onSelect"],!0),["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],!0),["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],!0),["onScroll"],!0),["onWheel"],!0),["onAnimationStart","onAnimationEnd","onAnimationIteration"],!0),["onTransitionEnd"],!0),["onChange"],!0),["onToggle"],!0);function Ie(e,t){var n={};return xe.forEach((function(r){var s=e[r];s&&(n[r]=t?function(e){return s(e,t(r))}:s)})),n}function Ne(e){var t=!1;return{promise:new Promise((function(n,r){e.then((function(e){return!t&&n(e)})).catch((function(e){return!t&&r(e)}))})),cancel:function(){t=!0}}}function Re(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Re(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const De=function(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Re(e))&&(r&&(r+=" "),r+=t);return r};var Pe=!0,Oe="Invariant failed";function Le(e,t){if(!e){if(Pe)throw new Error(Oe);var n="function"===typeof t?t():t,r=n?"".concat(Oe,": ").concat(n):Oe;throw new Error(r)}}var Me=n(440),Fe=Object.prototype.hasOwnProperty;function Be(e,t,n){for(n of e.keys())if(He(n,t))return n}function He(e,t){var n,r,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&He(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((s=r)&&"object"===typeof s&&!(s=Be(t,s)))return!1;if(!t.has(s))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((s=r[0])&&"object"===typeof s&&!(s=Be(t,s)))return!1;if(!He(r[1],t.get(s)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(Fe.call(e,n)&&++r&&!Fe.call(t,n))return!1;if(!(n in t)||!He(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}var Ue={d:(e,t)=>{for(var n in t)Ue.o(t,n)&&!Ue.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},je=globalThis.pdfjsLib={};Ue.d(je,{AbortException:()=>Zt,AnnotationEditorLayer:()=>ea,AnnotationEditorParamsType:()=>tt,AnnotationEditorType:()=>et,AnnotationEditorUIManager:()=>nr,AnnotationLayer:()=>zi,AnnotationMode:()=>Ze,CMapCompressionType:()=>Ot,ColorPicker:()=>Xi,DOMSVGFactory:()=>Nn,DrawLayer:()=>ta,FeatureTest:()=>rn,GlobalWorkerOptions:()=>Vr,ImageKind:()=>ct,InvalidPDFException:()=>Kt,MissingPDFException:()=>Xt,OPS:()=>Lt,Outliner:()=>$i,PDFDataRangeTransport:()=>Ks,PDFDateString:()=>zn,PDFWorker:()=>ei,PasswordResponses:()=>Mt,PermissionFlag:()=>nt,PixelsPerInch:()=>kn,RenderingCancelledException:()=>Dn,TextLayer:()=>Fs,UnexpectedResponseException:()=>Qt,Util:()=>an,VerbosityLevel:()=>Pt,XfaLayer:()=>hi,build:()=>oi,createValidAbsoluteUrl:()=>Wt,fetchData:()=>Cn,getDocument:()=>qs,getFilenameFromUrl:()=>Ln,getPdfFilenameFromUrl:()=>Mn,getXfaPageViewport:()=>Gn,isDataScheme:()=>Pn,isPdfFile:()=>On,noContextMenu:()=>Hn,normalizeUnicode:()=>cn,renderTextLayer:()=>Bs,setLayerDimensions:()=>Vn,shadow:()=>$t,updateTextLayer:()=>Hs,version:()=>ai});const ze="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),Ge=[1,0,0,1,0,0],We=[.001,0,0,.001,0,0],$e=1.35,qe=1,Ve=2,Ye=4,Ke=16,Xe=32,Qe=64,Je=256,Ze={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},et={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},tt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},nt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},rt=0,st=1,it=2,at=3,ot=3,lt=4,ct={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ut=1,ht=2,dt=3,pt=4,ft=5,mt=6,gt=7,yt=8,bt=9,Et=10,vt=11,_t=12,Tt=13,At=14,wt=15,St=16,kt=17,Ct=20,xt=1,It=2,Nt=3,Rt=4,Dt=5,Pt={ERRORS:0,WARNINGS:1,INFOS:5},Ot={NONE:0,BINARY:1},Lt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},Mt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ft=Pt.WARNINGS;function Bt(e){Number.isInteger(e)&&(Ft=e)}function Ht(){return Ft}function Ut(e){Ft>=Pt.INFOS&&console.log(`Info: ${e}`)}function jt(e){Ft>=Pt.WARNINGS&&console.log(`Warning: ${e}`)}function zt(e){throw new Error(e)}function Gt(e,t){e||zt(t)}function Wt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);t?.length>=2&&(e=`http://${e}`)}if(n.tryConvertEncoding)try{e=function(e){return decodeURIComponent(escape(e))}(e)}catch{}}const r=t?new URL(e,t):new URL(e);if(function(e){switch(e?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch{}return null}function $t(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const qt=function(){function e(t,n){this.constructor===e&&zt("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class Vt extends qt{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Yt extends qt{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Kt extends qt{constructor(e){super(e,"InvalidPDFException")}}class Xt extends qt{constructor(e){super(e,"MissingPDFException")}}class Qt extends qt{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Jt extends qt{constructor(e){super(e,"FormatError")}}class Zt extends qt{constructor(e){super(e,"AbortException")}}function en(e){"object"===typeof e&&void 0!==e?.length||zt("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const r=[];for(let s=0;s<t;s+=n){const i=Math.min(s+n,t),a=e.subarray(s,i);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function tn(e){"string"!==typeof e&&zt("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n}function nn(e){const t=Object.create(null);for(const[n,r]of e)t[n]=r;return t}class rn{static get isLittleEndian(){return $t(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return $t(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return $t(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get platform(){return"undefined"!==typeof navigator&&"string"===typeof navigator?.platform?$t(this,"platform",{isMac:navigator.platform.includes("Mac")}):$t(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return $t(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const sn=Array.from(Array(256).keys(),(e=>e.toString(16).padStart(2,"0")));class an{static makeHexColor(e,t,n){return`#${sn[e]}${sn[t]}${sn[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),i=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],s[0],i[0]),Math.min(n[1],r[1],s[1],i[1]),Math.max(n[0],r[0],s[0],i[0]),Math.max(n[1],r[1],s[1],i[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],i=e[2]*t[1]+e[3]*t[3],a=(n+i)/2,o=Math.sqrt((n+i)**2-4*(n*i-s*r))/2,l=a+o||1,c=a-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),i=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>i?null:[n,s,r,i]}static#e(e,t,n,r,s,i,a,o,l,c){if(l<=0||l>=1)return;const u=1-l,h=l*l,d=h*l,p=u*(u*(u*e+3*l*t)+3*h*n)+d*r,f=u*(u*(u*s+3*l*i)+3*h*a)+d*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],f),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],f)}static#t(e,t,n,r,s,i,a,o,l,c,u,h){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&this.#e(e,t,n,r,s,i,a,o,-u/c,h));const d=c**2-4*u*l;if(d<0)return;const p=Math.sqrt(d),f=2*l;this.#e(e,t,n,r,s,i,a,o,(-c+p)/f,h),this.#e(e,t,n,r,s,i,a,o,(-c-p)/f,h)}static bezierBoundingBox(e,t,n,r,s,i,a,o,l){return l?(l[0]=Math.min(l[0],e,a),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,a),l[3]=Math.max(l[3],t,o)):l=[Math.min(e,a),Math.min(t,o),Math.max(e,a),Math.max(t,o)],this.#t(e,n,s,a,t,r,i,o,3*(3*(n-s)-e+a),6*(e-2*n+s),3*(n-e),l),this.#t(e,n,s,a,t,r,i,o,3*(3*(r-i)-t+o),6*(t-2*r+i),3*(r-t),l),l}}let on=null,ln=null;function cn(e){return on||(on=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ln=new Map([["\ufb05","\u017ft"]])),e.replaceAll(on,((e,t,n)=>t?t.normalize("NFKC"):ln.get(n)))}const un="pdfjs_internal_id_",hn=0,dn=1,pn=2,fn=3,mn=4,gn=5,yn=6,bn=7,En=8;class vn{constructor(){this.constructor===vn&&zt("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,s){return"none"}destroy(){}}class _n{#n=!1;constructor(){let{enableHWA:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.constructor===_n&&zt("Cannot initialize BaseCanvasFactory."),this.#n=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#n})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){zt("Abstract method `_createCanvas` called.")}}class Tn{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.constructor===Tn&&zt("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":""),r=this.isCompressed?Ot.BINARY:Ot.NONE;return this._fetchData(n,r).catch((e=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)}))}_fetchData(e,t){zt("Abstract method `_fetchData` called.")}}class An{constructor(e){let{baseUrl:t=null}=e;this.constructor===An&&zt("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetchData(n).catch((e=>{throw new Error(`Unable to load font data at: ${n}`)}))}_fetchData(e){zt("Abstract method `_fetchData` called.")}}class wn{constructor(){this.constructor===wn&&zt("Cannot initialize BaseSVGFactory.")}create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){zt("Abstract method `_createSVG` called.")}}const Sn="http://www.w3.org/2000/svg";class kn{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=(()=>this.CSS/this.PDF)()}async function Cn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(Bn(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise(((n,r)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200!==s.status&&0!==s.status)r(new Error(s.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(s.response)}n(s.responseText)}},s.send(null)}))}class xn extends Tn{_fetchData(e,t){return Cn(e,this.isCompressed?"arraybuffer":"text").then((e=>({cMapData:e instanceof ArrayBuffer?new Uint8Array(e):tn(e),compressionType:t})))}}class In extends An{_fetchData(e){return Cn(e,"arraybuffer").then((e=>new Uint8Array(e)))}}class Nn extends wn{_createSVG(e){return document.createElementNS(Sn,e)}}class Rn{constructor(e){let{viewBox:t,scale:n,rotation:r,offsetX:s=0,offsetY:i=0,dontFlip:a=!1}=e;this.viewBox=t,this.scale=n,this.rotation=r,this.offsetX=s,this.offsetY=i;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,u,h,d,p,f,m,g;switch(r%=360,r<0&&(r+=360),r){case 180:c=-1,u=0,h=0,d=1;break;case 90:c=0,u=1,h=1,d=0;break;case 270:c=0,u=-1,h=-1,d=0;break;case 0:c=1,u=0,h=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(h=-h,d=-d),0===c?(p=Math.abs(l-t[1])*n+s,f=Math.abs(o-t[0])*n+i,m=(t[3]-t[1])*n,g=(t[2]-t[0])*n):(p=Math.abs(o-t[0])*n+s,f=Math.abs(l-t[1])*n+i,m=(t[2]-t[0])*n,g=(t[3]-t[1])*n),this.transform=[c*n,u*n,h*n,d*n,p-c*n*o-h*n*l,f-u*n*o-d*n*l],this.width=m,this.height=g}get rawDims(){const{viewBox:e}=this;return $t(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Rn({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){return an.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=an.applyTransform([e[0],e[1]],this.transform),n=an.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return an.applyInverseTransform([e,t],this.transform)}}class Dn extends qt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function Pn(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function On(e){return"string"===typeof e&&/\.pdf$/i.test(e)}function Ln(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function Mn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(Pn(e))return jt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let s=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch{}return s||t}class Fn{started=(()=>Object.create(null))();times=[];time(e){e in this.started&&jt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||jt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-r}ms\n`);return e.join("")}}function Bn(e,t){try{const{protocol:n}=t?new URL(e,t):new URL(e);return"http:"===n||"https:"===n}catch{return!1}}function Hn(e){e.preventDefault()}function Un(e){console.log("Deprecated API usage: "+e)}let jn;class zn{static toDateObject(e){if(!e||"string"!==typeof e)return null;jn||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=jn.exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let i=parseInt(t[4],10);i=i>=0&&i<=23?i:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===l?(i+=c,a+=u):"+"===l&&(i-=c,a-=u),new Date(Date.UTC(n,r,s,i,a,o))}}function Gn(e,t){let{scale:n=1,rotation:r=0}=t;const{width:s,height:i}=e.attributes.style,a=[0,0,parseInt(s),parseInt(i)];return new Rn({viewBox:a,scale:n,rotation:r})}function Wn(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map((e=>parseInt(e))):e.startsWith("rgba(")?e.slice(5,-1).split(",").map((e=>parseInt(e))).slice(0,3):(jt(`Not a valid color format: "${e}"`),[0,0,0])}function $n(e){const{a:t,b:n,c:r,d:s,e:i,f:a}=e.getTransform();return[t,n,r,s,i,a]}function qn(e){const{a:t,b:n,c:r,d:s,e:i,f:a}=e.getTransform().invertSelf();return[t,n,r,s,i,a]}function Vn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof Rn){const{pageWidth:r,pageHeight:s}=t.rawDims,{style:i}=e,a=rn.isCSSRoundSupported,o=`var(--scale-factor) * ${r}px`,l=`var(--scale-factor) * ${s}px`,c=a?`round(${o}, 1px)`:`calc(${o})`,u=a?`round(${l}, 1px)`:`calc(${l})`;n&&t.rotation%180!==0?(i.width=u,i.height=c):(i.width=c,i.height=u)}r&&e.setAttribute("data-main-rotation",t.rotation)}class Yn{#r=null;#s=null;#i;#a=null;constructor(e){this.#i=e}render(){const e=this.#r=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#i._uiManager._signal;e.addEventListener("contextmenu",Hn,{signal:t}),e.addEventListener("pointerdown",Yn.#o,{signal:t});const n=this.#a=document.createElement("div");n.className="buttons",e.append(n);const r=this.#i.toolbarPosition;if(r){const{style:t}=e,n="ltr"===this.#i._uiManager.direction?1-r[0]:r[0];t.insetInlineEnd=100*n+"%",t.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#l(),e}static#o(e){e.stopPropagation()}#c(e){this.#i._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#u(e){this.#i._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#h(e){const t=this.#i._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Hn,{signal:t})}hide(){this.#r.classList.add("hidden"),this.#s?.hideDropdown()}show(){this.#r.classList.remove("hidden")}#l(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${this.#i.editorType}-button`),this.#h(e),e.addEventListener("click",(e=>{this.#i._uiManager.delete()}),{signal:this.#i._uiManager._signal}),this.#a.append(e)}get#d(){const e=document.createElement("div");return e.className="divider",e}addAltTextButton(e){this.#h(e),this.#a.prepend(e,this.#d)}addColorPicker(e){this.#s=e;const t=e.renderButton();this.#h(t),this.#a.prepend(t,this.#d)}remove(){this.#r.remove(),this.#s?.destroy(),this.#s=null}}class Kn{#a=null;#r=null;#p;constructor(e){this.#p=e}#f(){const e=this.#r=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Hn,{signal:this.#p._signal});const t=this.#a=document.createElement("div");return t.className="buttons",e.append(t),this.#m(),e}#g(e,t){let n=0,r=0;for(const s of e){const e=s.y+s.height;if(e<n)continue;const i=s.x+(t?s.width:0);e>n?(r=i,n=e):t?i>r&&(r=i):i<r&&(r=i)}return[t?1-r:r,n]}show(e,t,n){const[r,s]=this.#g(t,n),{style:i}=this.#r||=this.#f();e.append(this.#r),i.insetInlineEnd=100*r+"%",i.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#r.remove()}#m(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=this.#p._signal;e.addEventListener("contextmenu",Hn,{signal:n}),e.addEventListener("click",(()=>{this.#p.highlightSelection("floating_button")}),{signal:n}),this.#a.append(e)}}function Xn(e,t,n){for(const r of n)t.addEventListener(r,e[r].bind(e))}class Qn{#y=0;get id(){return"pdfjs_internal_editor_"+this.#y++}}class Jn{#b=(()=>function(){if("undefined"!==typeof crypto&&"function"===typeof crypto?.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);if("undefined"!==typeof crypto&&"function"===typeof crypto?.getRandomValues)crypto.getRandomValues(e);else for(let t=0;t<32;t++)e[t]=Math.floor(255*Math.random());return en(e)}())();#y=0;#E=null;static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return $t(this,"_isSVGFittingCanvas",t.decode().then((()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0]))))}async#v(e,t){this.#E||=new Map;let n=this.#E.get(e);if(null===n)return null;if(n?.bitmap)return n.refCounter+=1,n;try{let e;if(n||={bitmap:null,id:`image_${this.#b}_${this.#y++}`,refCounter:0,isSvg:!1},"string"===typeof t?(n.url=t,e=await Cn(t,"blob")):e=n.file=t,"image/svg+xml"===e.type){const t=Jn._isSVGFittingCanvas,r=new FileReader,s=new Image,i=new Promise(((e,i)=>{s.onload=()=>{n.bitmap=s,n.isSvg=!0,e()},r.onload=async()=>{const e=n.svgUrl=r.result;s.src=await t?`${e}#svgView(preserveAspectRatio(none))`:e},s.onerror=r.onerror=i}));r.readAsDataURL(e),await i}else n.bitmap=await createImageBitmap(e);n.refCounter=1}catch(r){console.error(r),n=null}return this.#E.set(e,n),n&&this.#E.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:n,size:r,type:s}=e;return this.#v(`${t}_${n}_${r}_${s}`,e)}async getFromUrl(e){return this.#v(e,e)}async getFromId(e){this.#E||=new Map;const t=this.#E.get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=this.#E.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#E||=new Map;const t=this.#E.get(e);t&&(t.refCounter-=1,0===t.refCounter&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${this.#b}_`)}}class Zn{#_=[];#T=!1;#A;#w=-1;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;this.#A=e}add(e){let{cmd:t,undo:n,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=e;if(s&&t(),this.#T)return;const l={cmd:t,undo:n,post:r,type:i};if(-1===this.#w)return this.#_.length>0&&(this.#_.length=0),this.#w=0,void this.#_.push(l);if(a&&this.#_[this.#w].type===i)return o&&(l.undo=this.#_[this.#w].undo),void(this.#_[this.#w]=l);const c=this.#w+1;c===this.#A?this.#_.splice(0,1):(this.#w=c,c<this.#_.length&&this.#_.splice(c)),this.#_.push(l)}undo(){if(-1===this.#w)return;this.#T=!0;const{undo:e,post:t}=this.#_[this.#w];e(),t?.(),this.#T=!1,this.#w-=1}redo(){if(this.#w<this.#_.length-1){this.#w+=1,this.#T=!0;const{cmd:e,post:t}=this.#_[this.#w];e(),t?.(),this.#T=!1}}hasSomethingToUndo(){return-1!==this.#w}hasSomethingToRedo(){return this.#w<this.#_.length-1}destroy(){this.#_=null}}class er{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=rn.platform;for(const[n,r,s={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:r,options:s}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:r,options:s}),this.allKeys.add(e.split("+").at(-1)))}}#S(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#S(t));if(!n)return;const{callback:r,options:{bubbles:s=!1,args:i=[],checker:a=null}}=n;a&&!a(e,t)||(r.bind(e,...i,t)(),s||(t.stopPropagation(),t.preventDefault()))}}class tr{static _colorsMapping=(()=>new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]))();get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const n of e.keys()){t.style.color=n;const r=window.getComputedStyle(t).color;e.set(n,Wn(r))}t.remove()}(e),$t(this,"_colors",e)}convert(e){const t=Wn(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every(((e,n)=>e===t[n])))return tr._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?an.makeHexColor(...t):e}}class nr{#k=(()=>new AbortController)();#C=null;#x=(()=>new Map)();#I=(()=>new Map)();#N=null;#R=null;#D=null;#P=(()=>new Zn)();#O=0;#L=(()=>new Set)();#M=null;#F=null;#B=(()=>new Set)();#H=!1;#U=null;#j=null;#z=null;#G=!1;#W=null;#$=(()=>new Qn)();#q=!1;#V=!1;#Y=null;#K=null;#X=null;#Q=(()=>et.NONE)();#J=(()=>new Set)();#Z=null;#ee=null;#te=null;#ne=this.blur.bind(this);#re=this.focus.bind(this);#se=this.copy.bind(this);#ie=this.cut.bind(this);#ae=this.paste.bind(this);#oe=this.keydown.bind(this);#le=this.keyup.bind(this);#ce=this.onEditingAction.bind(this);#ue=this.onPageChanging.bind(this);#he=this.onScaleChanging.bind(this);#de=this.onRotationChanging.bind(this);#pe={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#fe=[0,0];#me=null;#ge=null;#ye=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=nr.prototype,t=e=>e.#ge.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return $t(this,"_keyboardManager",new er([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&e.#ge.contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&e.#ge.contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}constructor(e,t,n,r,s,i,a,o,l){this._signal=this.#k.signal,this.#ge=e,this.#ye=t,this.#N=n,this._eventBus=r,this._eventBus._on("editingaction",this.#ce),this._eventBus._on("pagechanging",this.#ue),this._eventBus._on("scalechanging",this.#he),this._eventBus._on("rotationchanging",this.#de),this.#be(),this.#Ee(),this.#ve(),this.#R=s.annotationStorage,this.#U=s.filterFactory,this.#ee=i,this.#z=a||null,this.#H=o,this.#X=l||null,this.viewParameters={realScale:kn.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#k?.abort(),this.#k=null,this._signal=null,this._eventBus._off("editingaction",this.#ce),this._eventBus._off("pagechanging",this.#ue),this._eventBus._off("scalechanging",this.#he),this._eventBus._off("rotationchanging",this.#de);for(const e of this.#I.values())e.destroy();this.#I.clear(),this.#x.clear(),this.#B.clear(),this.#C=null,this.#J.clear(),this.#P.destroy(),this.#N?.destroy(),this.#W?.hide(),this.#W=null,this.#j&&(clearTimeout(this.#j),this.#j=null),this.#me&&(clearTimeout(this.#me),this.#me=null)}async mlGuess(e){return this.#X?.guess(e)||null}get hasMLManager(){return!!this.#X}get hcmFilter(){return $t(this,"hcmFilter",this.#ee?this.#U.addHCMFilter(this.#ee.foreground,this.#ee.background):"none")}get direction(){return $t(this,"direction",getComputedStyle(this.#ge).direction)}get highlightColors(){return $t(this,"highlightColors",this.#z?new Map(this.#z.split(",").map((e=>e.split("=").map((e=>e.trim()))))):null)}get highlightColorNames(){return $t(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(e=>e.reverse()))):null)}setMainHighlightColorPicker(e){this.#K=e}editAltText(e){this.#N?.editAltText(this,e)}onPageChanging(e){let{pageNumber:t}=e;this.#O=t-1}focusMainContainer(){this.#ge.focus()}findParent(e,t){for(const n of this.#I.values()){const{x:r,y:s,width:i,height:a}=n.div.getBoundingClientRect();if(e>=r&&e<=r+i&&t>=s&&t<=s+a)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#ye.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#B.add(e)}removeShouldRescale(e){this.#B.delete(e)}onScaleChanging(e){let{scale:t}=e;this.commitOrRemove(),this.viewParameters.realScale=t*kn.PDF_TO_CSS_UNITS;for(const n of this.#B)n.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}#_e(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}=t,a=t.toString(),o=this.#_e(t).closest(".textLayer"),l=this.getSelectionBoxes(o);if(l){t.empty(),this.#Q===et.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:et.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const t of this.#I.values())if(t.hasTextLayer(o)){t.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:l,anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i,text:a});break}}}#Te(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=this.#_e(e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(this.#W||=new Kn(this),this.#W.show(t,n,"ltr"===this.direction))}addToAnnotationStorage(e){e.isEmpty()||!this.#R||this.#R.has(e.id)||this.#R.setValue(e.id,e)}#Ae(){const e=document.getSelection();if(!e||e.isCollapsed)return void(this.#Z&&(this.#W?.hide(),this.#Z=null,this.#we({hasSelectedText:!1})));const{anchorNode:t}=e;if(t===this.#Z)return;if(this.#_e(e).closest(".textLayer")){if(this.#W?.hide(),this.#Z=t,this.#we({hasSelectedText:!0}),(this.#Q===et.HIGHLIGHT||this.#Q===et.NONE)&&(this.#Q===et.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#G=this.isShiftKeyDown,!this.isShiftKeyDown)){const e=this._signal,t=e=>{"pointerup"===e.type&&0!==e.button||(window.removeEventListener("pointerup",t),window.removeEventListener("blur",t),"pointerup"===e.type&&this.#Se("main_toolbar"))};window.addEventListener("pointerup",t,{signal:e}),window.addEventListener("blur",t,{signal:e})}}else this.#Z&&(this.#W?.hide(),this.#Z=null,this.#we({hasSelectedText:!1}))}#Se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.#Q===et.HIGHLIGHT?this.highlightSelection(e):this.#H&&this.#Te()}#be(){document.addEventListener("selectionchange",this.#Ae.bind(this),{signal:this._signal})}#ke(){const e=this._signal;window.addEventListener("focus",this.#re,{signal:e}),window.addEventListener("blur",this.#ne,{signal:e})}#Ce(){window.removeEventListener("focus",this.#re),window.removeEventListener("blur",this.#ne)}blur(){if(this.isShiftKeyDown=!1,this.#G&&(this.#G=!1,this.#Se("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#J)if(t.div.contains(e)){this.#Y=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#Y)return;const[e,t]=this.#Y;this.#Y=null,t.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0,signal:this._signal}),t.focus()}#ve(){const e=this._signal;window.addEventListener("keydown",this.#oe,{signal:e}),window.addEventListener("keyup",this.#le,{signal:e})}#xe(){window.removeEventListener("keydown",this.#oe),window.removeEventListener("keyup",this.#le)}#Ie(){const e=this._signal;document.addEventListener("copy",this.#se,{signal:e}),document.addEventListener("cut",this.#ie,{signal:e}),document.addEventListener("paste",this.#ae,{signal:e})}#Ne(){document.removeEventListener("copy",this.#se),document.removeEventListener("cut",this.#ie),document.removeEventListener("paste",this.#ae)}#Ee(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#ve(),this.#Ie()}removeEditListeners(){this.#xe(),this.#Ne()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of this.#F)if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of this.#F)if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){if(e.preventDefault(),this.#C?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of this.#J){const e=n.serialize(!0);e&&t.push(e)}0!==t.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const e of this.#F)if(e.isHandlingMimeForPasting(i.type))return void e.paste(i,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){return void jt(`paste: "${s.message}".`)}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const e=[];for(const i of n){const t=r.deserialize(i);if(!t)return;e.push(t)}const t=()=>{for(const t of e)this.#Re(t);this.#De(e)},s=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:s,mustExec:!0})}catch(s){jt(`paste: "${s.message}".`)}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),this.#Q===et.NONE||this.isEditorHandlingKeyboard||nr._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,this.#G&&(this.#G=!1,this.#Se("main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#we(e){Object.entries(e).some((e=>{let[t,n]=e;return this.#pe[t]!==n}))&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#pe,e)}),this.#Q===et.HIGHLIGHT&&!1===e.hasSelectedEditor&&this.#Pe([[tt.HIGHLIGHT_FREE,!0]]))}#Pe(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ke(),this.#Ie(),this.#we({isEditing:this.#Q!==et.NONE,isEmpty:this.#Oe(),hasSomethingToUndo:this.#P.hasSomethingToUndo(),hasSomethingToRedo:this.#P.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#Ce(),this.#Ne(),this.#we({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#F){this.#F=e;for(const e of this.#F)this.#Pe(e.defaultPropertiesToUpdate)}}getId(){return this.#$.id}get currentLayer(){return this.#I.get(this.#O)}getLayer(e){return this.#I.get(e)}get currentPageIndex(){return this.#O}addLayer(e){this.#I.set(e.pageIndex,e),this.#q?e.enable():e.disable()}removeLayer(e){this.#I.delete(e.pageIndex)}updateMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.#Q!==e){if(this.#Q=e,e===et.NONE)return this.setEditingState(!1),void this.#Le();this.setEditingState(!0),this.#Me(),this.unselectAll();for(const t of this.#I.values())t.updateMode(e);if(t||!n){if(t)for(const e of this.#x.values())if(e.annotationElementId===t){this.setSelected(e),e.enterInEditMode();break}}else this.addNewEditorFromKeyboard()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#Q&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#F){switch(e){case tt.CREATE:return void this.currentLayer.addNewEditor();case tt.HIGHLIGHT_DEFAULT_COLOR:this.#K?.updateColor(t);break;case tt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#te||=new Map).set(e,t),this.showAllEditors("highlight",t)}for(const n of this.#J)n.updateParams(e,t);for(const n of this.#F)n.updateDefaultParams(e,t)}}showAllEditors(e,t){for(const n of this.#x.values())n.editorType===e&&n.show(t);(this.#te?.get(tt.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#Pe([[tt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.#V!==e){this.#V=e;for(const t of this.#I.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}#Me(){if(!this.#q){this.#q=!0;for(const e of this.#I.values())e.enable();for(const e of this.#x.values())e.enable()}}#Le(){if(this.unselectAll(),this.#q){this.#q=!1;for(const e of this.#I.values())e.disable();for(const e of this.#x.values())e.disable()}}getEditors(e){const t=[];for(const n of this.#x.values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return this.#x.get(e)}addEditor(e){this.#x.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#j&&clearTimeout(this.#j),this.#j=setTimeout((()=>{this.focusMainContainer(),this.#j=null}),0)),this.#x.delete(e.id),this.unselect(e),e.annotationElementId&&this.#L.has(e.annotationElementId)||this.#R?.remove(e.id)}addDeletedAnnotationElement(e){this.#L.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#L.has(e)}removeDeletedAnnotationElement(e){this.#L.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#Re(e){const t=this.#I.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#C!==e&&(this.#C=e,e&&this.#Pe(e.propertiesToUpdate))}get#Fe(){let e=null;for(e of this.#J);return e}updateUI(e){this.#Fe===e&&this.#Pe(e.propertiesToUpdate)}toggleSelected(e){if(this.#J.has(e))return this.#J.delete(e),e.unselect(),void this.#we({hasSelectedEditor:this.hasSelection});this.#J.add(e),e.select(),this.#Pe(e.propertiesToUpdate),this.#we({hasSelectedEditor:!0})}setSelected(e){for(const t of this.#J)t!==e&&t.unselect();this.#J.clear(),this.#J.add(e),e.select(),this.#Pe(e.propertiesToUpdate),this.#we({hasSelectedEditor:!0})}isSelected(e){return this.#J.has(e)}get firstSelectedEditor(){return this.#J.values().next().value}unselect(e){e.unselect(),this.#J.delete(e),this.#we({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#J.size}get isEnterHandled(){return 1===this.#J.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#P.undo(),this.#we({hasSomethingToUndo:this.#P.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Oe()})}redo(){this.#P.redo(),this.#we({hasSomethingToUndo:!0,hasSomethingToRedo:this.#P.hasSomethingToRedo(),isEmpty:this.#Oe()})}addCommands(e){this.#P.add(e),this.#we({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Oe()})}#Oe(){if(0===this.#x.size)return!0;if(1===this.#x.size)for(const e of this.#x.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#J];this.addCommands({cmd:()=>{for(const t of e)t.remove()},undo:()=>{for(const t of e)this.#Re(t)},mustExec:!0})}commitOrRemove(){this.#C?.commitOrRemove()}hasSomethingToControl(){return this.#C||this.hasSelection}#De(e){for(const t of this.#J)t.unselect();this.#J.clear();for(const t of e)t.isEmpty()||(this.#J.add(t),t.select());this.#we({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#J)e.commit();this.#De(this.#x.values())}unselectAll(){if((!this.#C||(this.#C.commitOrRemove(),this.#Q===et.NONE))&&this.hasSelection){for(const e of this.#J)e.unselect();this.#J.clear(),this.#we({hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;this.#fe[0]+=e,this.#fe[1]+=t;const[n,r]=this.#fe,s=[...this.#J];this.#me&&clearTimeout(this.#me),this.#me=setTimeout((()=>{this.#me=null,this.#fe[0]=this.#fe[1]=0,this.addCommands({cmd:()=>{for(const e of s)this.#x.has(e.id)&&e.translateInPage(n,r)},undo:()=>{for(const e of s)this.#x.has(e.id)&&e.translateInPage(-n,-r)},mustExec:!1})}),1e3);for(const i of s)i.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#M=new Map;for(const e of this.#J)this.#M.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#M)return!1;this.disableUserSelect(!1);const e=this.#M;this.#M=null;let t=!1;for(const[{x:r,y:s,pageIndex:i},a]of e)a.newX=r,a.newY=s,a.newPageIndex=i,t||=r!==a.savedX||s!==a.savedY||i!==a.savedPageIndex;if(!t)return!1;const n=(e,t,n,r)=>{if(this.#x.has(e.id)){const s=this.#I.get(r);s?e._setParentAndPosition(s,t,n):(e.pageIndex=r,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:r,newY:s,newPageIndex:i}]of e)n(t,r,s,i)},undo:()=>{for(const[t,{savedX:r,savedY:s,savedPageIndex:i}]of e)n(t,r,s,i)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#M)for(const n of this.#M.keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#J.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#C===e}getActive(){return this.#C}getMode(){return this.#Q}get imageManager(){return $t(this,"imageManager",new Jn)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:r,width:s,height:i}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(e,t,a,o)=>({x:(t-r)/i,y:1-(e+a-n)/s,width:o/i,height:a/s});break;case"180":a=(e,t,a,o)=>({x:1-(e+a-n)/s,y:1-(t+o-r)/i,width:a/s,height:o/i});break;case"270":a=(e,t,a,o)=>({x:1-(t+o-r)/i,y:(e-n)/s,width:o/i,height:a/s});break;default:a=(e,t,a,o)=>({x:(e-n)/s,y:(t-r)/i,width:a/s,height:o/i})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:r,height:s}of e.getClientRects())0!==r&&0!==s&&o.push(a(t,n,r,s))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(this.#D||=new Map).set(t,n)}removeChangedExistingAnnotation(e){let{annotationElementId:t}=e;this.#D?.delete(t)}renderAnnotationElement(e){const t=this.#D?.get(e.data.id);if(!t)return;const n=this.#R.getRawValue(t);n&&(this.#Q!==et.NONE||n.hasBeenModified)&&n.renderAnnotationElement(e)}}class rr{#Be="";#He=!1;#Ue=null;#je=null;#ze=null;#Ge=!1;#i=null;static _l10nPromise=null;constructor(e){this.#i=e}static initialize(e){rr._l10nPromise||=e}async render(){const e=this.#Ue=document.createElement("button");e.className="altText";const t=await rr._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const n=this.#i._uiManager._signal;e.addEventListener("contextmenu",Hn,{signal:n}),e.addEventListener("pointerdown",(e=>e.stopPropagation()),{signal:n});const r=e=>{e.preventDefault(),this.#i._uiManager.editAltText(this.#i)};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",(t=>{t.target===e&&"Enter"===t.key&&(this.#Ge=!0,r(t))}),{signal:n}),await this.#We(),e}finish(){this.#Ue&&(this.#Ue.focus({focusVisible:this.#Ge}),this.#Ge=!1)}isEmpty(){return!this.#Be&&!this.#He}get data(){return{altText:this.#Be,decorative:this.#He}}set data(e){let{altText:t,decorative:n}=e;this.#Be===t&&this.#He===n||(this.#Be=t,this.#He=n,this.#We())}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#Ue&&(!e&&this.#ze&&(clearTimeout(this.#ze),this.#ze=null),this.#Ue.disabled=!e)}destroy(){this.#Ue?.remove(),this.#Ue=null,this.#je=null}async#We(){const e=this.#Ue;if(!e)return;if(!this.#Be&&!this.#He)return e.classList.remove("done"),void this.#je?.remove();e.classList.add("done"),rr._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then((t=>{e.setAttribute("aria-label",t)}));let t=this.#je;if(!t){this.#je=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip");const n=t.id=`alt-text-tooltip-${this.#i.id}`;e.setAttribute("aria-describedby",n);const r=100,s=this.#i._uiManager._signal;s.addEventListener("abort",(()=>{clearTimeout(this.#ze),this.#ze=null}),{once:!0}),e.addEventListener("mouseenter",(()=>{this.#ze=setTimeout((()=>{this.#ze=null,this.#je.classList.add("show"),this.#i._reportTelemetry({action:"alt_text_tooltip"})}),r)}),{signal:s}),e.addEventListener("mouseleave",(()=>{this.#ze&&(clearTimeout(this.#ze),this.#ze=null),this.#je?.classList.remove("show")}),{signal:s})}t.innerText=this.#He?await rr._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#Be,t.parentNode||e.append(t);const n=this.#i.getImageForAltText();n?.setAttribute("aria-describedby",t.id)}}class sr{#$e=null;#qe=null;#Be=null;#Ve=!1;#Ye=!1;#Ke=null;#Xe=null;#Qe=this.focusin.bind(this);#Je=this.focusout.bind(this);#Ze=null;#et="";#tt=!1;#nt=null;#rt=!1;#st=!1;#it=!1;#at=null;#ot=0;#lt=0;#ct=null;_initialOptions=(()=>Object.create(null))();_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#ut=!1;#ht=(()=>sr._zIndex++)();static _borderLineWidth=-1;static _colorManager=(()=>new tr)();static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=sr.prototype._resizeWithKeyboard,t=nr.TRANSLATE_SMALL,n=nr.TRANSLATE_BIG;return $t(this,"_resizerKeyboardManager",new er([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],sr.prototype._stopResizingWithKeyboard]]))}constructor(e){this.constructor===sr&&zt("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:i}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[s,i];const[a,o]=this.parentDimensions;this.x=e.x/a,this.y=e.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return $t(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new ir({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,n){if(sr._l10nPromise||=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map((t=>[t,e.get(t.replaceAll(/([A-Z])/g,(e=>`-${e.toLowerCase()}`)))]))),n?.strings)for(const s of n.strings)sr._l10nPromise.set(s,e.get(s));if(-1!==sr._borderLineWidth)return;const r=getComputedStyle(document.documentElement);sr._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#ut}set _isDraggable(e){this.#ut=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#ht}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#dt(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#tt?this.#tt=!1:this.parent.setSelected(this))}focusout(e){if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const t=e.relatedTarget;t?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[s,i]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/s,this.y=(t+r)/i,this.fixAndSetPosition()}#pt(e,t,n){let[r,s]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/r,this.y+=n/s,this.fixAndSetPosition()}translate(e,t){this.#pt(this.parentDimensions,e,t)}translateInPage(e,t){this.#nt||=[this.x,this.y],this.#pt(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#nt||=[this.x,this.y];const[n,r]=this.parentDimensions;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:i}=this;const[a,o]=this.getBaseTranslation();s+=a,i+=o,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*i).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#nt&&(this.#nt[0]!==this.x||this.#nt[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=sr,r=n/e,s=n/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const[t,n]=this.pageDimensions;let{x:r,y:s,width:i,height:a}=this;if(i*=t,a*=n,r*=t,s*=n,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-i,r)),s=Math.max(0,Math.min(n-a,s));break;case 90:r=Math.max(0,Math.min(t-a,r)),s=Math.min(n,Math.max(i,s));break;case 180:r=Math.min(t,Math.max(i,r)),s=Math.min(n,Math.max(a,s));break;case 270:r=Math.min(t,Math.max(a,r)),s=Math.max(0,Math.min(n-i,s))}this.x=r/=t,this.y=s/=n;const[o,l]=this.getBaseTranslation();r+=o,s+=l;const{style:c}=this.div;c.left=`${(100*r).toFixed(2)}%`,c.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#ft(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return sr.#ft(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return sr.#ft(e,t,360-this.parentRotation)}#mt(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this,r=t*e,s=n*e;return rn.isCSSRoundSupported?[Math.round(r),Math.round(s)]:[r,s]}setDims(e,t){const[n,r]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,this.#Ye||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),s=!this.#Ye&&t.endsWith("%");if(r&&s)return;const[i,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/i).toFixed(2)}%`),this.#Ye||s||(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#gt(){if(this.#Ke)return;this.#Ke=document.createElement("div"),this.#Ke.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");this.#Ke.append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",this.#yt.bind(this,n),{signal:t}),e.addEventListener("contextmenu",Hn,{signal:t}),e.tabIndex=-1}this.div.prepend(this.#Ke)}#yt(e,t){t.preventDefault();const{isMac:n}=rn.platform;if(0!==t.button||t.ctrlKey&&n)return;this.#Be?.toggle(!1);const r=this.#bt.bind(this,e),s=this._isDraggable;this._isDraggable=!1;const i=this._uiManager._signal,a={passive:!0,capture:!0,signal:i};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",r,a),window.addEventListener("contextmenu",Hn,{signal:i});const o=this.x,l=this.y,c=this.width,u=this.height,h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{this.parent.togglePointerEvents(!0),this.#Be?.toggle(!0),this._isDraggable=s,window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),window.removeEventListener("pointermove",r,a),window.removeEventListener("contextmenu",Hn),this.parent.div.style.cursor=h,this.div.style.cursor=d,this.#Et(o,l,c,u)};window.addEventListener("pointerup",p,{signal:i}),window.addEventListener("blur",p,{signal:i})}#Et(e,t,n,r){const s=this.x,i=this.y,a=this.width,o=this.height;s===e&&i===t&&a===n&&o===r||this.addCommands({cmd:()=>{this.width=a,this.height=o,this.x=s,this.y=i;const[e,t]=this.parentDimensions;this.setDims(e*a,t*o),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=r,this.x=e,this.y=t;const[s,i]=this.parentDimensions;this.setDims(s*n,i*r),this.fixAndSetPosition()},mustExec:!0})}#bt(e,t){const[n,r]=this.parentDimensions,s=this.x,i=this.y,a=this.width,o=this.height,l=sr.MIN_SIZE/n,c=sr.MIN_SIZE/r,u=e=>Math.round(1e4*e)/1e4,h=this.#mt(this.rotation),d=(e,t)=>[h[0]*e+h[2]*t,h[1]*e+h[3]*t],p=this.#mt(360-this.rotation);let f,m,g=!1,y=!1;switch(e){case"topLeft":g=!0,f=(e,t)=>[0,0],m=(e,t)=>[e,t];break;case"topMiddle":f=(e,t)=>[e/2,0],m=(e,t)=>[e/2,t];break;case"topRight":g=!0,f=(e,t)=>[e,0],m=(e,t)=>[0,t];break;case"middleRight":y=!0,f=(e,t)=>[e,t/2],m=(e,t)=>[0,t/2];break;case"bottomRight":g=!0,f=(e,t)=>[e,t],m=(e,t)=>[0,0];break;case"bottomMiddle":f=(e,t)=>[e/2,t],m=(e,t)=>[e/2,0];break;case"bottomLeft":g=!0,f=(e,t)=>[0,t],m=(e,t)=>[e,0];break;case"middleLeft":y=!0,f=(e,t)=>[0,t/2],m=(e,t)=>[e,t/2]}const b=f(a,o),E=m(a,o);let v=d(...E);const _=u(s+v[0]),T=u(i+v[1]);let A=1,w=1,[S,k]=this.screenToPageTranslation(t.movementX,t.movementY);if([S,k]=((e,t)=>[p[0]*e+p[2]*t,p[1]*e+p[3]*t])(S/n,k/r),g){const e=Math.hypot(a,o);A=w=Math.max(Math.min(Math.hypot(E[0]-b[0]-S,E[1]-b[1]-k)/e,1/a,1/o),l/a,c/o)}else y?A=Math.max(l,Math.min(1,Math.abs(E[0]-b[0]-S)))/a:w=Math.max(c,Math.min(1,Math.abs(E[1]-b[1]-k)))/o;const C=u(a*A),x=u(o*w);v=d(...m(C,x));const I=_-v[0],N=T-v[1];this.width=C,this.height=x,this.x=I,this.y=N,this.setDims(n*C,r*x),this.fixAndSetPosition()}altTextFinish(){this.#Be?.finish()}async addEditToolbar(){return this.#Ze||this.#st||(this.#Ze=new Yn(this),this.div.append(this.#Ze.render()),this.#Be&&this.#Ze.addAltTextButton(await this.#Be.render())),this.#Ze}removeEditToolbar(){this.#Ze&&(this.#Ze.remove(),this.#Ze=null,this.#Be?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#Be||(rr.initialize(sr._l10nPromise),this.#Be=new rr(this),this.#$e&&(this.#Be.data=this.#$e,this.#$e=null),await this.addEditToolbar())}get altTextData(){return this.#Be?.data}set altTextData(e){this.#Be&&(this.#Be.data=e)}hasAltText(){return!this.#Be?.isEmpty()}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#Ve?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",this.#Qe,{signal:e}),this.div.addEventListener("focusout",this.#Je,{signal:e});const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*n/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),Xn(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=rn.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(this.#tt=!0,this._isDraggable?this.#vt(e):this.#_t(e))}#_t(e){const{isMac:t}=rn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#vt(e){const t=this._uiManager.isSelected(this);let n,r;this._uiManager.setUpDragSession();const s=this._uiManager._signal;t&&(this.div.classList.add("moving"),n={passive:!0,capture:!0,signal:s},this.#ot=e.clientX,this.#lt=e.clientY,r=e=>{const{clientX:t,clientY:n}=e,[r,s]=this.screenToPageTranslation(t-this.#ot,n-this.#lt);this.#ot=t,this.#lt=n,this._uiManager.dragSelectedEditors(r,s)},window.addEventListener("pointermove",r,n));const i=()=>{window.removeEventListener("pointerup",i),window.removeEventListener("blur",i),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",r,n)),this.#tt=!1,this._uiManager.endDragSession()||this.#_t(e)};window.addEventListener("pointerup",i,{signal:s}),window.addEventListener("blur",i,{signal:s})}moveInDOM(){this.#at&&clearTimeout(this.#at),this.#at=setTimeout((()=>{this.#at=null,this.parent?.moveEditorInDOM(this)}),0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const r=this.parentScale,[s,i]=this.pageDimensions,[a,o]=this.pageTranslation,l=e/r,c=t/r,u=this.x*s,h=this.y*i,d=this.width*s,p=this.height*i;switch(n){case 0:return[u+l+a,i-h-c-p+o,u+l+d+a,i-h-c+o];case 90:return[u+c+a,i-h+l+o,u+c+p+a,i-h+l+d+o];case 180:return[u-l-d+a,i-h+c+o,u-l+a,i-h+c+p+o];case 270:return[u-c-p+a,i-h-l-d+o,u-c+a,i-h-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,s,i]=e,a=s-n,o=i-r;switch(this.rotation){case 0:return[n,t-i,a,o];case 90:return[n,t-r,o,a];case 180:return[s,t-r,a,o];case 270:return[s,t-i,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#st=!0}disableEditMode(){this.#st=!1}isInEditMode(){return this.#st}shouldGetKeyboardEvents(){return this.#it}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){const e=this._uiManager._signal;this.div?.addEventListener("focusin",this.#Qe,{signal:e}),this.div?.addEventListener("focusout",this.#Je,{signal:e})}rotate(e){}serialize(){zt("An editor must be serializable")}static deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,r.#$e=e.accessibilityData;const[s,i]=r.pageDimensions,[a,o,l,c]=r.getRectInCurrentCoords(e.rect,i);return r.x=a/s,r.y=o/i,r.width=l/s,r.height=c/i,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.div.removeEventListener("focusin",this.#Qe),this.div.removeEventListener("focusout",this.#Je),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#at&&(clearTimeout(this.#at),this.#at=null),this.#dt(),this.removeEditToolbar(),this.#ct){for(const e of this.#ct.values())clearTimeout(e);this.#ct=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#gt(),this.#Ke.classList.remove("hidden"),Xn(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),this.#Xe={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#Ke.children;if(!this.#qe){this.#qe=Array.from(t);const e=this.#Tt.bind(this),n=this.#At.bind(this),r=this._uiManager._signal;for(const t of this.#qe){const s=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:r}),t.addEventListener("blur",n,{signal:r}),t.addEventListener("focus",this.#wt.bind(this,s),{signal:r}),sr._l10nPromise.get(`pdfjs-editor-resizer-label-${s}`).then((e=>t.setAttribute("aria-label",e)))}}const n=this.#qe[0];let r=0;for(const i of t){if(i===n)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#qe.length/4);if(s!==r){if(s<r)for(let t=0;t<r-s;t++)this.#Ke.append(this.#Ke.firstChild);else if(s>r)for(let t=0;t<s-r;t++)this.#Ke.firstChild.before(this.#Ke.lastChild);let e=0;for(const n of t){const t=this.#qe[e++].getAttribute("data-resizer-name");sr._l10nPromise.get(`pdfjs-editor-resizer-label-${t}`).then((e=>n.setAttribute("aria-label",e)))}}this.#St(0),this.#it=!0,this.#Ke.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#Tt(e){sr._resizerKeyboardManager.exec(this,e)}#At(e){this.#it&&e.relatedTarget?.parentNode!==this.#Ke&&this.#dt()}#wt(e){this.#et=this.#it?e:""}#St(e){if(this.#qe)for(const t of this.#qe)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#it&&this.#bt(this.#et,{movementX:e,movementY:t})}#dt(){if(this.#it=!1,this.#St(-1),this.#Xe){const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=this.#Xe;this.#Et(e,t,n,r),this.#Xe=null}}_stopResizingWithKeyboard(){this.#dt(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this.#Ze?this.#Ze?.show():this.addEditToolbar().then((()=>{this.div?.classList.contains("selectedEditor")&&this.#Ze?.show()}))}unselect(){this.#Ke?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this.#Ze?.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#rt}set isEditing(e){this.#rt=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#Ye=!0;const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){this.#ct||=new Map;const{action:t}=e;let n=this.#ct.get(t);return n&&clearTimeout(n),n=setTimeout((()=>{this._reportTelemetry(e),this.#ct.delete(t),0===this.#ct.size&&(this.#ct=null)}),sr._telemetryTimeout),void this.#ct.set(t,n)}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#Ve=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#Ve=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===t.nodeName&&t.classList.contains("annotationContent")&&t.remove()}}class ir extends sr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const ar=3285377520,or=4294901760,lr=65535;class cr{constructor(e){this.h1=e?4294967295&e:ar,this.h2=e?4294967295&e:ar}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let r=0,s=e.length;r<s;r++){const s=e.charCodeAt(r);s<=255?t[n++]=s:(t[n++]=s>>>8,t[n++]=255&s)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const r=n>>2,s=n-4*r,i=new Uint32Array(t.buffer,0,r);let a=0,o=0,l=this.h1,c=this.h2;const u=3432918353,h=461845907,d=11601,p=13715;for(let f=0;f<r;f++)1&f?(a=i[f],a=a*u&or|a*d&lr,a=a<<15|a>>>17,a=a*h&or|a*p&lr,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=i[f],o=o*u&or|o*d&lr,o=o<<15|o>>>17,o=o*h&or|o*p&lr,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,s){case 3:a^=t[4*r+2]<<16;case 2:a^=t[4*r+1]<<8;case 1:a^=t[4*r],a=a*u&or|a*d&lr,a=a<<15|a>>>17,a=a*h&or|a*p&lr,1&r?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&or|36045*e&lr,t=4283543511*t&or|(2950163797*(t<<16|e>>>16)&or)>>>16,e^=t>>>1,e=444984403*e&or|60499*e&lr,t=3301882366*t&or|(3120437893*(t<<16|e>>>16)&or)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const ur=Object.freeze({map:null,hash:"",transfer:void 0});class hr{#kt=!1;#Ct=(()=>new Map)();constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#Ct.get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return this.#Ct.get(e)}remove(e){if(this.#Ct.delete(e),0===this.#Ct.size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of this.#Ct.values())if(e instanceof sr)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#Ct.get(e);let r=!1;if(void 0!==n)for(const[s,i]of Object.entries(t))n[s]!==i&&(r=!0,n[s]=i);else r=!0,this.#Ct.set(e,t);r&&this.#xt(),t instanceof sr&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#Ct.has(e)}getAll(){return this.#Ct.size>0?nn(this.#Ct):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return this.#Ct.size}#xt(){this.#kt||(this.#kt=!0,"function"===typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#kt&&(this.#kt=!1,"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new dr(this)}get serializable(){if(0===this.#Ct.size)return ur;const e=new Map,t=new cr,n=[],r=Object.create(null);let s=!1;for(const[i,a]of this.#Ct){const n=a instanceof sr?a.serialize(!1,r):a;n&&(e.set(i,n),t.update(`${i}:${JSON.stringify(n)}`),s||=!!n.bitmap)}if(s)for(const i of e.values())i.bitmap&&n.push(i.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:ur}get editorStats(){let e=null;const t=new Map;for(const n of this.#Ct.values()){if(!(n instanceof sr))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(n).constructor),e||=Object.create(null);const i=e[s]||=new Map;for(const[e,t]of Object.entries(r)){if("type"===e)continue;let n=i.get(e);n||(n=new Map,i.set(e,n));const r=n.get(t)??0;n.set(t,r+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}}class dr extends hr{#It;constructor(e){super();const{map:t,hash:n,transfer:r}=e.serializable,s=structuredClone(t,r?{transfer:r}:null);this.#It={map:s,hash:n,transfer:r}}get print(){zt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#It}}class pr{#Nt=(()=>new Set)();constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#Nt.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,_inspectFont:n}=e;if(t&&!this.#Nt.has(t.loadedName))if(Gt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:r,style:s}=t,i=new FontFace(e,r,s);this.addNativeFontFace(i);try{await i.load(),this.#Nt.add(e),n?.(t)}catch{jt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(i)}}else zt("Not implemented: loadSystemFont without the Font Loading API.")}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw jt(`Failed to load font '${t.family}': '${n}'.`),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise((t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)}))}}get isFontLoadingAPISupported(){return $t(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let e=!1;return(ze||"undefined"!==typeof navigator&&"string"===typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),$t(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(Gt(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return $t(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function r(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}let s,i;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c=`lt${Date.now()}${this.loadTestFontId++}`;let u=this._loadTestFont;u=r(u,976,c.length,c);const h=1482184792;let d=n(u,16);for(s=0,i=c.length-3;s<i;s+=4)d=d-h+n(c,s)|0;var p;s<c.length&&(d=d-h+n(c+"XXX",s)|0),u=r(u,16,4,(p=d,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f=`@font-face {font-family:"${c}";src:${`url(data:font/opentype;base64,${btoa(u)});`}}`;this.insertRule(f);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const g of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=g,m.append(e)}this._document.body.append(m),function e(t,n){if(++l>30)return jt("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,(()=>{m.remove(),t.complete()}))}}class fr{constructor(e,t){let{disableFontFace:n=!1,inspectFont:r=null}=t;this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=!0===n,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=en(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let n;if(this.cssFontInfo){let e=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(e+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${e}src:${t}}`}else n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this._inspectFont?.(this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(s){jt(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(n)||0===n.length)return this.compiledGlyphs[t]=function(e,t){};const r=[];for(let i=0,a=n.length;i<a;)switch(n[i++]){case hn:{const[e,t,s,a,o,l]=n.slice(i,i+6);r.push((n=>n.bezierCurveTo(e,t,s,a,o,l))),i+=6}break;case dn:{const[e,t]=n.slice(i,i+2);r.push((n=>n.moveTo(e,t))),i+=2}break;case pn:{const[e,t]=n.slice(i,i+2);r.push((n=>n.lineTo(e,t))),i+=2}break;case fn:{const[e,t,s,a]=n.slice(i,i+4);r.push((n=>n.quadraticCurveTo(e,t,s,a))),i+=4}break;case mn:r.push((e=>e.restore()));break;case gn:r.push((e=>e.save()));break;case yn:Gt(2===r.length,"Scale command is only valid at the third position.");break;case bn:{const[e,t,s,a,o,l]=n.slice(i,i+6);r.push((n=>n.transform(e,t,s,a,o,l))),i+=6}break;case En:{const[e,t]=n.slice(i,i+2);r.push((n=>n.translate(e,t))),i+=2}}return this.compiledGlyphs[t]=function(e,t){r[0](e),r[1](e),e.scale(t,-t);for(let n=2,s=r.length;n<s;n++)r[n](e)}}}if(ze){var mr=Promise.withResolvers(),gr=null;(async()=>{const e=await import("fs"),t=await import("http"),n=await import("https"),r=await import("url");return new Map(Object.entries({fs:e,http:t,https:n,url:r,canvas:undefined,path2d:undefined}))})().then((e=>{gr=e,mr.resolve()}),(e=>{jt(`loadPackages: ${e}`),gr=new Map,mr.resolve()}))}class yr{static get promise(){return mr.promise}static get(e){return gr?.get(e)}}const br=function(e){return yr.get("fs").promises.readFile(e).then((e=>new Uint8Array(e)))};const Er="Fill",vr="Stroke",_r="Shading";function Tr(e,t){if(!t)return;const n=t[2]-t[0],r=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],n,r),e.clip(s)}class Ar{constructor(){this.constructor===Ar&&zt("Cannot initialize BaseShadingPattern.")}getPattern(){zt("Abstract method `getPattern` called.")}}class wr extends Ar{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let s;if(r===vr||r===Er){const i=t.current.getClippedPathBoundingBox(r,$n(e))||[0,0,0,0],a=Math.ceil(i[2]-i[0])||1,o=Math.ceil(i[3]-i[1])||1,l=t.cachedCanvases.getCanvas("pattern",a,o,!0),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-i[0],-i[1]),n=an.transform(n,[1,0,0,1,i[0],i[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),Tr(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=e.createPattern(l.canvas,"no-repeat");const u=new DOMMatrix(n);s.setTransform(u)}else Tr(e,this._bbox),s=this._createGradient(e);return s}}function Sr(e,t,n,r,s,i,a,o){const l=t.coords,c=t.colors,u=e.data,h=4*e.width;let d;l[n+1]>l[r+1]&&(d=n,n=r,r=d,d=i,i=a,a=d),l[r+1]>l[s+1]&&(d=r,r=s,s=d,d=a,a=o,o=d),l[n+1]>l[r+1]&&(d=n,n=r,r=d,d=i,i=a,a=d);const p=(l[n]+t.offsetX)*t.scaleX,f=(l[n+1]+t.offsetY)*t.scaleY,m=(l[r]+t.offsetX)*t.scaleX,g=(l[r+1]+t.offsetY)*t.scaleY,y=(l[s]+t.offsetX)*t.scaleX,b=(l[s+1]+t.offsetY)*t.scaleY;if(f>=b)return;const E=c[i],v=c[i+1],_=c[i+2],T=c[a],A=c[a+1],w=c[a+2],S=c[o],k=c[o+1],C=c[o+2],x=Math.round(f),I=Math.round(b);let N,R,D,P,O,L,M,F;for(let B=x;B<=I;B++){if(B<g){const e=B<f?0:(f-B)/(f-g);N=p-(p-m)*e,R=E-(E-T)*e,D=v-(v-A)*e,P=_-(_-w)*e}else{let e;e=B>b?1:g===b?0:(g-B)/(g-b),N=m-(m-y)*e,R=T-(T-S)*e,D=A-(A-k)*e,P=w-(w-C)*e}let e;e=B<f?0:B>b?1:(f-B)/(f-b),O=p-(p-y)*e,L=E-(E-S)*e,M=v-(v-k)*e,F=_-(_-C)*e;const t=Math.round(Math.min(N,O)),n=Math.round(Math.max(N,O));let r=h*B+4*t;for(let s=t;s<=n;s++)e=(N-s)/(N-O),e<0?e=0:e>1&&(e=1),u[r++]=R-(R-L)*e|0,u[r++]=D-(D-M)*e|0,u[r++]=P-(P-F)*e|0,u[r++]=255}}function kr(e,t,n){const r=t.coords,s=t.colors;let i,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(r.length/o)-1,c=o-1;for(i=0;i<l;i++){let t=i*o;for(let i=0;i<c;i++,t++)Sr(e,n,r[t],r[t+1],r[t+o],s[t],s[t+1],s[t+o]),Sr(e,n,r[t+o+1],r[t+1],r[t+o],s[t+o+1],s[t+1],s[t+o])}break;case"triangles":for(i=0,a=r.length;i<a;i+=3)Sr(e,n,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class Cr extends Ar{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const r=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),i=Math.ceil(this._bounds[2])-r,a=Math.ceil(this._bounds[3])-s,o=Math.min(Math.ceil(Math.abs(i*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*e[1]*1.1)),3e3),c=i/o,u=a/l,h={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-s,scaleX:1/c,scaleY:1/u},d=o+4,p=l+4,f=n.getCanvas("mesh",d,p,!1),m=f.context,g=m.createImageData(o,l);if(t){const e=g.data;for(let n=0,r=e.length;n<r;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const y of this._figures)kr(g,y,h);m.putImageData(g,2,2);return{canvas:f.canvas,offsetX:r-2*c,offsetY:s-2*u,scaleX:c,scaleY:u}}getPattern(e,t,n,r){let s;if(Tr(e,this._bbox),r===_r)s=an.singularValueDecompose2dScale($n(e));else if(s=an.singularValueDecompose2dScale(t.baseTransform),this.matrix){const e=an.singularValueDecompose2dScale(this.matrix);s=[s[0]*e[0],s[1]*e[1]]}const i=this._createMeshCanvas(s,r===_r?null:this._background,t.cachedCanvases);return r!==_r&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(i.offsetX,i.offsetY),e.scale(i.scaleX,i.scaleY),e.createPattern(i.canvas,"no-repeat")}}class xr extends Ar{getPattern(){return"hotpink"}}const Ir=1,Nr=2;class Rr{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,r,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const t=this.operatorList,n=this.bbox,r=this.xstep,s=this.ystep,i=this.paintType,a=this.tilingType,o=this.color,l=this.canvasGraphicsFactory;Ut("TilingType: "+a);const c=n[0],u=n[1],h=n[2],d=n[3],p=an.singularValueDecompose2dScale(this.matrix),f=an.singularValueDecompose2dScale(this.baseTransform),m=[p[0]*f[0],p[1]*f[1]],g=this.getSizeAndScale(r,this.ctx.canvas.width,m[0]),y=this.getSizeAndScale(s,this.ctx.canvas.height,m[1]),b=e.cachedCanvases.getCanvas("pattern",g.size,y.size,!0),E=b.context,v=l.createCanvasGraphics(E);v.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(v,i,o);let _=c,T=u,A=h,w=d;return c<0&&(_=0,A+=Math.abs(c)),u<0&&(T=0,w+=Math.abs(u)),E.translate(-g.scale*_,-y.scale*T),v.transform(g.scale,0,0,y.scale,0,0),E.save(),this.clipBbox(v,_,T,A,w),v.baseTransform=$n(v.ctx),v.executeOperatorList(t),v.endDrawing(),{canvas:b.canvas,scaleX:g.scale,scaleY:y.scale,offsetX:_,offsetY:T}}getSizeAndScale(e,t,n){e=Math.abs(e);const r=Math.max(Rr.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=r?s=r:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,r,s){const i=r-t,a=s-n;e.ctx.rect(t,n,i,a),e.current.updateRectMinMax($n(e.ctx),[t,n,r,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,s=e.current;switch(t){case Ir:const e=this.ctx;r.fillStyle=e.fillStyle,r.strokeStyle=e.strokeStyle,s.fillColor=e.fillStyle,s.strokeColor=e.strokeStyle;break;case Nr:const i=an.makeHexColor(n[0],n[1],n[2]);r.fillStyle=i,r.strokeStyle=i,s.fillColor=i,s.strokeColor=i;break;default:throw new Jt(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,r){let s=n;r!==_r&&(s=an.transform(s,t.baseTransform),this.matrix&&(s=an.transform(s,this.matrix)));const i=this.createPatternCanvas(t);let a=new DOMMatrix(s);a=a.translate(i.offsetX,i.offsetY),a=a.scale(1/i.scaleX,1/i.scaleY);const o=e.createPattern(i.canvas,"repeat");return o.setTransform(a),o}}function Dr(e){let{src:t,srcPos:n=0,dest:r,width:s,height:i,nonBlackColor:a=4294967295,inverseDecode:o=!1}=e;const l=rn.isLittleEndian?4278190080:255,[c,u]=o?[a,l]:[l,a],h=s>>3,d=7&s,p=t.length;r=new Uint32Array(r.buffer);let f=0;for(let m=0;m<i;m++){for(const s=n+h;n<s;n++){const e=n<p?t[n]:255;r[f++]=128&e?u:c,r[f++]=64&e?u:c,r[f++]=32&e?u:c,r[f++]=16&e?u:c,r[f++]=8&e?u:c,r[f++]=4&e?u:c,r[f++]=2&e?u:c,r[f++]=1&e?u:c}if(0===d)continue;const e=n<p?t[n++]:255;for(let t=0;t<d;t++)r[f++]=e&1<<7-t?u:c}return{srcPos:n,destPos:f}}const Pr=16;class Or{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return void 0!==this.cache[e]?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Lr(e,t,n,r,s,i,a,o,l,c){const[u,h,d,p,f,m]=$n(e);if(0===h&&0===d){const g=a*u+f,y=Math.round(g),b=o*p+m,E=Math.round(b),v=(a+l)*u+f,_=Math.abs(Math.round(v)-y)||1,T=(o+c)*p+m,A=Math.abs(Math.round(T)-E)||1;return e.setTransform(Math.sign(u),0,0,Math.sign(p),y,E),e.drawImage(t,n,r,s,i,0,0,_,A),e.setTransform(u,h,d,p,f,m),[_,A]}if(0===u&&0===p){const g=o*d+f,y=Math.round(g),b=a*h+m,E=Math.round(b),v=(o+c)*d+f,_=Math.abs(Math.round(v)-y)||1,T=(a+l)*h+m,A=Math.abs(Math.round(T)-E)||1;return e.setTransform(0,Math.sign(h),Math.sign(d),0,y,E),e.drawImage(t,n,r,s,i,0,0,A,_),e.setTransform(u,h,d,p,f,m),[A,_]}e.drawImage(t,n,r,s,i,a,o,l,c);return[Math.hypot(u,h)*l,Math.hypot(d,p)*c]}class Mr{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Ge,this.textMatrixScale=1,this.fontMatrix=We,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=rt,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=an.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=an.applyTransform(t,e),r=an.applyTransform(t.slice(2),e),s=an.applyTransform([t[0],t[3]],e),i=an.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],s[0],i[0]),this.minY=Math.min(this.minY,n[1],r[1],s[1],i[1]),this.maxX=Math.max(this.maxX,n[0],r[0],s[0],i[0]),this.maxY=Math.max(this.maxY,n[1],r[1],s[1],i[1])}updateScalingPathMinMax(e,t){an.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,s,i,a,o,l,c){const u=an.bezierBoundingBox(t,n,r,s,i,a,o,l,c);c||this.updateRectMinMax(e,u)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Er,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===vr){t||zt("Stroke bounding box must include transform.");const e=an.singularValueDecompose2dScale(t),r=e[0]*this.lineWidth/2,s=e[1]*this.lineWidth/2;n[0]-=r,n[1]-=s,n[2]+=r,n[3]+=s}return n}updateClipFromPath(){const e=an.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Er,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return an.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Fr(e,t){if("undefined"!==typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,r=t.width,s=n%Pr,i=(n-s)/Pr,a=0===s?i:i+1,o=e.createImageData(r,Pr);let l,c=0;const u=t.data,h=o.data;let d,p,f,m;if(t.kind===ct.GRAYSCALE_1BPP){const t=u.byteLength,n=new Uint32Array(h.buffer,0,h.byteLength>>2),m=n.length,g=r+7>>3,y=4294967295,b=rn.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(f=d<i?Pr:s,l=0,p=0;p<f;p++){const e=t-c;let s=0;const i=e>g?r:8*e-7,a=-8&i;let o=0,h=0;for(;s<a;s+=8)h=u[c++],n[l++]=128&h?y:b,n[l++]=64&h?y:b,n[l++]=32&h?y:b,n[l++]=16&h?y:b,n[l++]=8&h?y:b,n[l++]=4&h?y:b,n[l++]=2&h?y:b,n[l++]=1&h?y:b;for(;s<i;s++)0===o&&(h=u[c++],o=128),n[l++]=h&o?y:b,o>>=1}for(;l<m;)n[l++]=0;e.putImageData(o,0,d*Pr)}}else if(t.kind===ct.RGBA_32BPP){for(p=0,m=r*Pr*4,d=0;d<i;d++)h.set(u.subarray(c,c+m)),c+=m,e.putImageData(o,0,p),p+=Pr;d<a&&(m=r*s*4,h.set(u.subarray(c,c+m)),e.putImageData(o,0,p))}else{if(t.kind!==ct.RGB_24BPP)throw new Error(`bad image kind: ${t.kind}`);for(f=Pr,m=r*f,d=0;d<a;d++){for(d>=i&&(f=s,m=r*f),l=0,p=m;p--;)h[l++]=u[c++],h[l++]=u[c++],h[l++]=u[c++],h[l++]=255;e.putImageData(o,0,d*Pr)}}}function Br(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,r=t.width,s=n%Pr,i=(n-s)/Pr,a=0===s?i:i+1,o=e.createImageData(r,Pr);let l=0;const c=t.data,u=o.data;for(let h=0;h<a;h++){const t=h<i?Pr:s;({srcPos:l}=Dr({src:c,srcPos:l,dest:u,width:r,height:t,nonBlackColor:0})),e.putImageData(o,0,h*Pr)}}function Hr(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)void 0!==e[r]&&(t[r]=e[r]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function Ur(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!ze){const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function jr(e,t){if(t)return!0;const n=an.singularValueDecompose2dScale(e);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*kn.PDF_TO_CSS_UNITS);return n[0]<=r&&n[1]<=r}const zr=["butt","round","square"],Gr=["miter","round","bevel"],Wr={},$r={};class qr{constructor(e,t,n,r,s,i,a,o){let{optionalContentConfig:l,markedContentStack:c=null}=i;this.ctx=e,this.current=new Mr(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new Or(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:r=!1,background:s=null}=e;const i=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=o,r){const e=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...$n(this.compositeCtx))}this.ctx.save(),Ur(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=$n(this.ctx)}executeOperatorList(e,t,n,r){const s=e.argsArray,i=e.fnArray;let a=t||0;const o=s.length;if(o===a)return a;const l=o-a>10&&"function"===typeof n,c=l?Date.now()+15:0;let u=0;const h=this.commonObjs,d=this.objs;let p;for(;;){if(void 0!==r&&a===r.nextBreakPoint)return r.breakIt(a,n),a;if(p=i[a],p!==Lt.dependency)this[p].apply(this,s[a]);else for(const e of s[a]){const t=e.startsWith("g_")?h:d;if(!t.has(e))return t.get(e,n),a}if(a++,a===o)return a;if(l&&++u>10){if(Date.now()>c)return n(),a;u=0}}}#Rt(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#Rt(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#Dt()}#Dt(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const n=e.width,r=e.height;let s,i,a=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=n,c=r,u="prescale1";for(;a>2&&l>1||o>2&&c>1;){let t=l,n=c;a>2&&l>1&&(t=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/t),o>2&&c>1&&(n=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/n),s=this.cachedCanvases.getCanvas(u,t,n),i=s.context,i.clearRect(0,0,t,n),i.drawImage(e,0,0,l,c,0,0,t,n),e=s.canvas,l=t,c=n,u="prescale1"===u?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,s=this.current.fillColor,i=this.current.patternFill,a=$n(t);let o,l,c,u;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;l=JSON.stringify(i?a:[a.slice(0,4),s]),o=this._cachedBitmapsMap.get(t),o||(o=new Map,this._cachedBitmapsMap.set(t,o));const n=o.get(l);if(n&&!i){return{canvas:n,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])}}c=n}c||(u=this.cachedCanvases.getCanvas("maskCanvas",n,r),Br(u.context,e));let h=an.transform(a,[1/n,0,0,-1/r,0,0]);h=an.transform(h,[1,0,0,1,0,-r]);const[d,p,f,m]=an.getAxialAlignedBoundingBox([0,0,n,r],h),g=Math.round(f-d)||1,y=Math.round(m-p)||1,b=this.cachedCanvases.getCanvas("fillCanvas",g,y),E=b.context,v=d,_=p;E.translate(-v,-_),E.transform(...h),c||(c=this._scaleImage(u.canvas,qn(E)),c=c.img,o&&i&&o.set(l,c)),E.imageSmoothingEnabled=jr($n(E),e.interpolate),Lr(E,c,0,0,c.width,c.height,0,0,n,r),E.globalCompositeOperation="source-in";const T=an.transform(qn(E),[1,0,0,1,-v,-_]);return E.fillStyle=i?s.getPattern(t,this,T,Er):s,E.fillRect(0,0,n,r),o&&!i&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,b.canvas)),{canvas:b.canvas,offsetX:Math.round(v),offsetY:Math.round(_)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=zr[e]}setLineJoin(e){this.ctx.lineJoin=Gr[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...$n(this.suspendedCtx)),Hr(this.suspendedCtx,s),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,r,s,i,a){t.transform(e,n,r,s,i,a),this.__originalTransform(e,n,r,s,i,a)},e.setTransform=function(e,n,r,s,i,a){t.setTransform(e,n,r,s,i,a),this.__originalSetTransform(e,n,r,s,i,a)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,r,s,i,a){t.bezierCurveTo(e,n,r,s,i,a),this.__originalBezierCurveTo(e,n,r,s,i,a)},e.rect=function(e,n,r,s){t.rect(e,n,r,s),this.__originalRect(e,n,r,s)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Hr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const s=r[0],i=r[1],a=r[2]-s,o=r[3]-i;0!==a&&0!==o&&(this.genericComposeSMask(t.context,n,a,o,t.subtype,t.backdrop,t.transferMap,s,i,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,s,i,a,o,l,c,u){let h=e.canvas,d=o-c,p=l-u;if(i)if(d<0||p<0||d+n>h.width||p+r>h.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,r),t=e.context;t.drawImage(h,-d,-p),i.some((e=>0!==e))&&(t.globalCompositeOperation="destination-atop",t.fillStyle=an.makeHexColor(...i),t.fillRect(0,0,n,r),t.globalCompositeOperation="source-over"),h=e.canvas,d=p=0}else if(i.some((e=>0!==e))){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(d,p,n,r),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=an.makeHexColor(...i),e.fillRect(d,p,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===s&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===s&&(t.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,n,r),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(h,d,p,n,r,o,l,n,r),t.restore()}save(){this.inSMaskMode?(Hr(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Hr(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,s,i){this.ctx.transform(e,t,n,r,s,i),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const r=this.ctx,s=this.current;let i,a,o=s.x,l=s.y;const c=$n(r),u=0===c[0]&&0===c[3]||0===c[1]&&0===c[2],h=u?n.slice(0):null;for(let d=0,p=0,f=e.length;d<f;d++)switch(0|e[d]){case Lt.rectangle:o=t[p++],l=t[p++];const e=t[p++],n=t[p++],d=o+e,f=l+n;r.moveTo(o,l),0===e||0===n?r.lineTo(d,f):(r.lineTo(d,l),r.lineTo(d,f),r.lineTo(o,f)),u||s.updateRectMinMax(c,[o,l,d,f]),r.closePath();break;case Lt.moveTo:o=t[p++],l=t[p++],r.moveTo(o,l),u||s.updatePathMinMax(c,o,l);break;case Lt.lineTo:o=t[p++],l=t[p++],r.lineTo(o,l),u||s.updatePathMinMax(c,o,l);break;case Lt.curveTo:i=o,a=l,o=t[p+4],l=t[p+5],r.bezierCurveTo(t[p],t[p+1],t[p+2],t[p+3],o,l),s.updateCurvePathMinMax(c,i,a,t[p],t[p+1],t[p+2],t[p+3],o,l,h),p+=6;break;case Lt.curveTo2:i=o,a=l,r.bezierCurveTo(o,l,t[p],t[p+1],t[p+2],t[p+3]),s.updateCurvePathMinMax(c,i,a,o,l,t[p],t[p+1],t[p+2],t[p+3],h),o=t[p+2],l=t[p+3],p+=4;break;case Lt.curveTo3:i=o,a=l,o=t[p+2],l=t[p+3],r.bezierCurveTo(t[p],t[p+1],o,l,o,l),s.updateCurvePathMinMax(c,i,a,t[p],t[p+1],o,l,o,l,h),p+=4;break;case Lt.closePath:r.closePath()}u&&s.updateScalingPathMinMax(c,h),s.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===typeof n&&n?.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,qn(t),vr),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.fillColor;let r=!1;this.current.patternFill&&(t.save(),t.fillStyle=n.getPattern(t,this,qn(t),Er),r=!0);const s=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==s&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Wr}eoClip(){this.pendingClip=$r}beginText(){this.current.textMatrix=Ge,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||We,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||jt("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const s=n.loadedName||"sans-serif",i=n.systemFontInfo?.css||`"${s}", ${n.fallbackName}`;let a="normal";n.black?a="900":n.bold&&(a="bold");const o=n.italic?"italic":"normal";let l=t;t<16?l=16:t>100&&(l=100),this.current.fontSizeScale=t/l,this.ctx.font=`${o} ${a} ${l}px ${i}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,s,i){this.current.textMatrix=[e,t,n,r,s,i],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r){const s=this.ctx,i=this.current,a=i.font,o=i.textRenderingMode,l=i.fontSize/i.fontSizeScale,c=o&ot,u=!!(o&lt),h=i.patternFill&&!a.missingFile;let d;if((a.disableFontFace||u||h)&&(d=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||h?(s.save(),s.translate(t,n),s.beginPath(),d(s,l),r&&s.setTransform(...r),c!==rt&&c!==it||s.fill(),c!==st&&c!==it||s.stroke(),s.restore()):(c!==rt&&c!==it||s.fillText(e,t,n),c!==st&&c!==it||s.strokeText(e,t,n)),u){(this.pendingTextPaths||=[]).push({transform:$n(s),x:t,y:n,fontSize:l,addToPath:d})}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return $t(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(0===r)return;const s=this.ctx,i=t.fontSizeScale,a=t.charSpacing,o=t.wordSpacing,l=t.fontDirection,c=t.textHScale*l,u=e.length,h=n.vertical,d=h?1:-1,p=n.defaultVMetrics,f=r*t.fontMatrix[0],m=t.textRenderingMode===rt&&!n.disableFontFace&&!t.patternFill;let g;if(s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),l>0?s.scale(c,-1):s.scale(c,1),t.patternFill){s.save();const e=t.fillColor.getPattern(s,this,qn(s),Er);g=$n(s),s.restore(),s.fillStyle=e}let y=t.lineWidth;const b=t.textMatrixScale;if(0===b||0===y){const e=t.textRenderingMode&ot;e!==st&&e!==it||(y=this.getSinglePixelWidth())}else y/=b;if(1!==i&&(s.scale(i,i),y/=i),s.lineWidth=y,n.isInvalidPDFjsFont){const n=[];let r=0;for(const t of e)n.push(t.unicode),r+=t.width;return s.fillText(n.join(""),0,0),t.x+=r*f*c,s.restore(),void this.compose()}let E,v=0;for(E=0;E<u;++E){const t=e[E];if("number"===typeof t){v+=d*t*r/1e3;continue}let c=!1;const u=(t.isSpace?o:0)+a,y=t.fontChar,b=t.accent;let _,T,A=t.width;if(h){const e=t.vmetric||p,n=-(t.vmetric?e[1]:.5*A)*f,r=e[2]*f;A=e?-e[0]:A,_=n/i,T=(v+r)/i}else _=v/i,T=0;if(n.remeasure&&A>0){const e=1e3*s.measureText(y).width/r*i;if(A<e&&this.isFontSubpixelAAEnabled){const t=A/e;c=!0,s.save(),s.scale(t,1),_/=t}else A!==e&&(_+=(A-e)/2e3*r/i)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(m&&!b)s.fillText(y,_,T);else if(this.paintChar(y,_,T,g),b){const e=_+r*b.offset.x/i,t=T-r*b.offset.y/i;this.paintChar(b.fontChar,e,t,g)}v+=h?A*f-u*l:A*f+u*l,c&&s.restore()}h?t.y-=v:t.x+=v*c,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,s=n.fontSize,i=n.fontDirection,a=r.vertical?1:-1,o=n.charSpacing,l=n.wordSpacing,c=n.textHScale*i,u=n.fontMatrix||We,h=e.length;let d,p,f,m;if(!(n.textRenderingMode===at)&&0!==s){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(c,i),d=0;d<h;++d){if(p=e[d],"number"===typeof p){m=a*p*s/1e3,this.ctx.translate(m,0),n.x+=m*c;continue}const i=(p.isSpace?l:0)+o,h=r.charProcOperatorList[p.operatorListId];if(!h){jt(`Type3 character "${p.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=p,this.save(),t.scale(s,s),t.transform(...u),this.executeOperatorList(h),this.restore());f=an.applyTransform([p.width,0],u)[0]*s+i,t.translate(f,0),n.x+=f*c}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,s,i){this.ctx.rect(n,r,s-n,i-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=e[1],r=this.baseTransform||$n(this.ctx),s={createCanvasGraphics:e=>new qr(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Rr(e,n,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){const r=an.makeHexColor(e,t,n);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(e,t,n){const r=an.makeHexColor(e,t,n);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new wr(e);case"Mesh":return new Cr(e);case"Dummy":return new xr}throw new Error(`Unknown IR type: ${e[0]}`)}(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,qn(t),_r);const r=qn(t);if(r){const{width:e,height:n}=t.canvas,[s,i,a,o]=an.getAxialAlignedBoundingBox([0,0,e,n],r);this.ctx.fillRect(s,i,a-s,o-i)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){zt("Should not call beginInlineImage")}beginImageData(){zt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=$n(this.ctx),t)){const e=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],e,n),this.current.updateRectMinMax($n(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Ut("TODO: Support non-isolated groups."),e.knockout&&jt("Knockout groups not supported.");const n=$n(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=an.getAxialAlignedBoundingBox(e.bbox,$n(t));const s=[0,0,t.canvas.width,t.canvas.height];r=an.intersect(r,s)||[0,0,0,0];const i=Math.floor(r[0]),a=Math.floor(r[1]),o=Math.max(Math.ceil(r[2])-i,1),l=Math.max(Math.ceil(r[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(c,o,l),h=u.context;h.translate(-i,-a),h.transform(...n),e.smask?this.smaskStack.push({canvas:u.canvas,context:h,offsetX:i,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(i,a),t.save()),Hr(t,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=$n(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=an.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,r,s){if(this.#Rt(),Ur(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const r=t[2]-t[0],i=t[3]-t[1];if(s&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=r,t[3]=i;const[s,a]=an.singularValueDecompose2dScale($n(this.ctx)),{viewportScale:o}=this,l=Math.ceil(r*this.outputScaleX*o),c=Math.ceil(i*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(l,c);const{canvas:u,context:h}=this.annotationCanvas;this.annotationCanvasMap.set(e,u),this.annotationCanvas.savedCtx=this.ctx,this.ctx=h,this.ctx.save(),this.ctx.setTransform(s,0,0,-a,0,i*a),Ur(this.ctx)}else Ur(this.ctx),this.ctx.rect(t[0],t[1],r,i),this.ctx.clip(),this.endPath()}this.current=new Mr(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#Dt(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function(e){const{width:t,height:n}=e;if(t>1e3||n>1e3)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=t+1;let i,a,o,l=new Uint8Array(s*(n+1));const c=t+7&-8;let u=new Uint8Array(c*n),h=0;for(const m of e.data){let e=128;for(;e>0;)u[h++]=m&e?0:255,e>>=1}let d=0;for(h=0,0!==u[h]&&(l[0]=1,++d),a=1;a<t;a++)u[h]!==u[h+1]&&(l[a]=u[h]?2:1,++d),h++;for(0!==u[h]&&(l[a]=2,++d),i=1;i<n;i++){h=i*c,o=i*s,u[h-c]!==u[h]&&(l[o]=u[h]?1:8,++d);let e=(u[h]?4:0)+(u[h-c]?8:0);for(a=1;a<t;a++)e=(e>>2)+(u[h+1]?4:0)+(u[h-c+1]?8:0),r[e]&&(l[o+a]=r[e],++d),h++;if(u[h-c]!==u[h]&&(l[o+a]=u[h]?2:4,++d),d>1e3)return null}for(h=c*(n-1),o=i*s,0!==u[h]&&(l[o]=8,++d),a=1;a<t;a++)u[h]!==u[h+1]&&(l[o+a]=u[h]?4:8,++d),h++;if(0!==u[h]&&(l[o+a]=4,++d),d>1e3)return null;const p=new Int32Array([0,s,-1,0,-s,0,0,0,1]),f=new Path2D;for(i=0;d&&i<=n;i++){let e=i*s;const n=e+t;for(;e<n&&!l[e];)e++;if(e===n)continue;f.moveTo(e%s,i);const r=e;let a=l[e];do{const t=p[a];do{e+=t}while(!l[e]);const n=l[e];5!==n&&10!==n?(a=n,l[e]=0):(a=n&51*a>>4,l[e]&=a>>2|a<<2),f.lineTo(e%s,e/s|0),l[e]||--d}while(r!==e);--i}return u=null,l=null,function(e){e.save(),e.scale(1/t,-1/n),e.translate(0,-n),e.fill(f),e.beginPath(),e.restore()}}(e)),r.compiled))return void r.compiled(n);const s=this._createMaskCanvas(e),i=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(i,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const o=$n(a);a.transform(t,n,r,s,0,0);const l=this._createMaskCanvas(e);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let c=0,u=i.length;c<u;c+=2){const e=an.transform(o,[t,n,r,s,i[c],i[c+1]]),[u,h]=an.applyTransform([0,0],e);a.drawImage(l.canvas,u,h)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:e,width:i,height:a,transform:o}=s,l=this.cachedCanvases.getCanvas("maskCanvas",i,a),c=l.context;c.save();Br(c,this.getObject(e,s)),c.globalCompositeOperation="source-in",c.fillStyle=r?n.getPattern(c,this,qn(t),Er):n,c.fillRect(0,0,i,a),c.restore(),t.save(),t.transform(...o),t.scale(1,-1),Lr(t,l.canvas,0,0,i,a,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):jt("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s)return void jt("Dependent image isn't ready yet");const i=s.width,a=s.height,o=[];for(let l=0,c=r.length;l<c;l+=2)o.push({transform:[t,0,0,n,r[l],r[l+1]],x:0,y:0,w:i,h:a});this.paintInlineImageXObjectGroup(s,o)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,r),i=s.context;return i.filter=this.current.transferMaps,i.drawImage(t,0,0),i.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;if(this.save(),!ze){const{filter:e}=r;"none"!==e&&""!==e&&(r.filter="none")}let s;if(r.scale(1/t,-1/n),e.bitmap)s=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)s=e;else{const r=this.cachedCanvases.getCanvas("inlineImage",t,n).context;Fr(r,e),s=this.applyTransferMapsToCanvas(r)}const i=this._scaleImage(s,qn(r));r.imageSmoothingEnabled=jr($n(r),e.interpolate),Lr(r,i.img,0,0,i.paintWidth,i.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const t=e.width,n=e.height,s=this.cachedCanvases.getCanvas("inlineImage",t,n).context;Fr(s,e),r=this.applyTransferMapsToCanvas(s)}for(const s of t)n.save(),n.transform(...s.transform),n.scale(1,-1),Lr(n,r,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===$r?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=$n(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:s}=this.ctx.getTransform();let i,a;if(0===n&&0===r){const n=Math.abs(t),r=Math.abs(s);if(n===r)if(0===e)i=a=1/n;else{const t=n*e;i=a=t<1?1/t:1}else if(0===e)i=1/n,a=1/r;else{const t=n*e,s=r*e;i=t<1?1/t:1,a=s<1?1/s:1}}else{const o=Math.abs(t*s-n*r),l=Math.hypot(t,n),c=Math.hypot(r,s);if(0===e)i=c/o,a=l/o;else{const t=e*o;i=c>t?c/t:1,a=l>t?l/t:1}}this._cachedScaleForStroking[0]=i,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,s]=this.getScaleForStroking();if(t.lineWidth=n||1,1===r&&1===s)return void t.stroke();const i=t.getLineDash();if(e&&t.save(),t.scale(r,s),i.length>0){const e=Math.max(r,s);t.setLineDash(i.map((t=>t/e))),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Lt)void 0!==qr.prototype[n]&&(qr.prototype[Lt[n]]=qr.prototype[n]);class Vr{static#Pt=null;static#Ot="";static get workerPort(){return this.#Pt}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");this.#Pt=e}static get workerSrc(){return this.#Ot}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");this.#Ot=e}}const Yr=1,Kr=2,Xr=1,Qr=2,Jr=3,Zr=4,es=5,ts=6,ns=7,rs=8;function ss(e){switch(e instanceof Error||"object"===typeof e&&null!==e||zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new Zt(e.message);case"MissingPDFException":return new Xt(e.message);case"PasswordException":return new Vt(e.message,e.code);case"UnexpectedResponseException":return new Qt(e.message,e.status);case"UnknownErrorException":return new Yt(e.message,e.details);default:return new Yt(e.message,e.toString())}}class is{constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void this.#Lt(t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],t.callback===Yr)n.resolve(t.data);else{if(t.callback!==Kr)throw new Error("Unexpected callback case");n.reject(ss(t.reason))}return}const r=this.actionHandler[t.action];if(!r)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const e=this.sourceName,s=t.sourceName;new Promise((function(e){e(r(t.data))})).then((function(r){n.postMessage({sourceName:e,targetName:s,callback:Yr,callbackId:t.callbackId,data:r})}),(function(r){n.postMessage({sourceName:e,targetName:s,callback:Kr,callbackId:t.callbackId,reason:ss(r)})}))}else t.streamId?this.#Mt(t):r(t.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(i){s.reject(i)}return s.promise}sendWithStream(e,t,n,r){const s=this.streamId++,i=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[s]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:i,targetName:a,action:e,streamId:s,data:t,desiredSize:n.desiredSize},r),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[s].pullCall=t,o.postMessage({sourceName:i,targetName:a,stream:ts,streamId:s,desiredSize:e.desiredSize}),t.promise},cancel:e=>{Gt(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[s].cancelCall=t,this.streamControllers[s].isClosed=!0,o.postMessage({sourceName:i,targetName:a,stream:Xr,streamId:s,reason:ss(e)}),t.promise}},n)}#Mt(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,i=this,a=this.actionHandler[e.action],o={enqueue(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=i,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:r,stream:Zr,streamId:t,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:Jr,streamId:t}),delete i.streamSinks[t])},error(e){Gt(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:es,streamId:t,reason:ss(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,new Promise((function(t){t(a(e.data,o))})).then((function(){s.postMessage({sourceName:n,targetName:r,stream:rs,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:n,targetName:r,stream:rs,streamId:t,reason:ss(e)})}))}#Lt(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,i=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case rs:e.success?i.startCall.resolve():i.startCall.reject(ss(e.reason));break;case ns:e.success?i.pullCall.resolve():i.pullCall.reject(ss(e.reason));break;case ts:if(!a){s.postMessage({sourceName:n,targetName:r,stream:ns,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise((function(e){e(a.onPull?.())})).then((function(){s.postMessage({sourceName:n,targetName:r,stream:ns,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:n,targetName:r,stream:ns,streamId:t,reason:ss(e)})}));break;case Zr:if(Gt(i,"enqueue should have stream controller"),i.isClosed)break;i.controller.enqueue(e.chunk);break;case Jr:if(Gt(i,"close should have stream controller"),i.isClosed)break;i.isClosed=!0,i.controller.close(),this.#Ft(i,t);break;case es:Gt(i,"error should have stream controller"),i.controller.error(ss(e.reason)),this.#Ft(i,t);break;case Qr:e.success?i.cancelCall.resolve():i.cancelCall.reject(ss(e.reason)),this.#Ft(i,t);break;case Xr:if(!a)break;new Promise((function(t){t(a.onCancel?.(ss(e.reason)))})).then((function(){s.postMessage({sourceName:n,targetName:r,stream:Qr,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:n,targetName:r,stream:Qr,streamId:t,reason:ss(e)})})),a.sinkCapability.reject(ss(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#Ft(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}class as{#Bt;#Ht;constructor(e){let{parsedData:t,rawData:n}=e;this.#Bt=t,this.#Ht=n}getRaw(){return this.#Ht}get(e){return this.#Bt.get(e)??null}getAll(){return nn(this.#Bt)}has(e){return this.#Bt.has(e)}}const os=Symbol("INTERNAL");class ls{#Ut=!1;#jt=!1;#zt=!1;#Gt=!0;constructor(e,t){let{name:n,intent:r,usage:s}=t;this.#Ut=!!(e&Ve),this.#jt=!!(e&Ye),this.name=n,this.intent=r,this.usage=s}get visible(){if(this.#zt)return this.#Gt;if(!this.#Gt)return!1;const{print:e,view:t}=this.usage;return this.#Ut?"OFF"!==t?.viewState:!this.#jt||"OFF"!==e?.printState}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==os&&zt("Internal method `_setVisible` called."),this.#zt=n,this.#Gt=t}}class cs{#Wt=null;#$t=(()=>new Map)();#qt=null;#Vt=null;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve;if(this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,this.#Vt=e.order;for(const n of e.groups)this.#$t.set(n.id,new ls(t,n));if("OFF"===e.baseState)for(const e of this.#$t.values())e._setVisible(os,!1);for(const t of e.on)this.#$t.get(t)._setVisible(os,!0);for(const t of e.off)this.#$t.get(t)._setVisible(os,!1);this.#qt=this.getHash()}}#Yt(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const t=e[r];let s;if(Array.isArray(t))s=this.#Yt(t);else{if(!this.#$t.has(t))return jt(`Optional content group not found: ${t}`),!0;s=this.#$t.get(t).visible}switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===n}isVisible(e){if(0===this.#$t.size)return!0;if(!e)return Ut("Optional content group not defined."),!0;if("OCG"===e.type)return this.#$t.has(e.id)?this.#$t.get(e.id).visible:(jt(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return this.#Yt(e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!this.#$t.has(t))return jt(`Optional content group not found: ${t}`),!0;if(this.#$t.get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!this.#$t.has(t))return jt(`Optional content group not found: ${t}`),!0;if(!this.#$t.get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!this.#$t.has(t))return jt(`Optional content group not found: ${t}`),!0;if(!this.#$t.get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!this.#$t.has(t))return jt(`Optional content group not found: ${t}`),!0;if(this.#$t.get(t).visible)return!1}return!0}return jt(`Unknown optional content policy ${e.policy}.`),!0}return jt(`Unknown group type ${e.type}.`),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.#$t.get(e);n?(n._setVisible(os,!!t,!0),this.#Wt=null):jt(`Optional content group not found: ${e}`)}setOCGState(e){let t,{state:n,preserveRB:r}=e;for(const s of n){switch(s){case"ON":case"OFF":case"Toggle":t=s;continue}const e=this.#$t.get(s);if(e)switch(t){case"ON":e._setVisible(os,!0);break;case"OFF":e._setVisible(os,!1);break;case"Toggle":e._setVisible(os,!e.visible)}}this.#Wt=null}get hasInitialVisibility(){return null===this.#qt||this.getHash()===this.#qt}getOrder(){return this.#$t.size?this.#Vt?this.#Vt.slice():[...this.#$t.keys()]:null}getGroups(){return this.#$t.size>0?nn(this.#$t):null}getGroup(e){return this.#$t.get(e)||null}getHash(){if(null!==this.#Wt)return this.#Wt;const e=new cr;for(const[t,n]of this.#$t)e.update(`${t}:${n.visible}`);return this.#Wt=e.hexdigest()}}class us{constructor(e,t){let{disableRange:n=!1,disableStream:r=!1}=t;Gt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,i?.length>0){const e=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!n,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})})),e.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})})),e.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})})),e.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const r=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{Gt(this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(r),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){void 0===e.total?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Gt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new hs(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new ds(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class hs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=On(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ds{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ps(e){let{getResponseHeader:t,isHttp:n,rangeChunkSize:r,disableRange:s}=e;const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t("Content-Length"),10);if(!Number.isInteger(a))return i;if(i.suggestedLength=a,a<=2*r)return i;if(s||!n)return i;if("bytes"!==t("Accept-Ranges"))return i;return"identity"!==(t("Content-Encoding")||"identity")||(i.allowRangeRequests=!0),i}function fs(e){const t=e("Content-Disposition");if(t){let e=function(e){let t=!0,n=r("filename\\*","i").exec(e);if(n){n=n[1];let e=a(n);return e=unescape(e),e=o(e),e=l(e),i(e)}if(n=function(e){const t=[];let n;const s=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=s.exec(e));){let[,e,r,s]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[r,s]}const i=[];for(let r=0;r<t.length&&r in t;++r){let[e,n]=t[r];n=a(n),e&&(n=unescape(n),0===r&&(n=o(n))),i.push(n)}return i.join("")}(e),n)return i(l(n));if(n=r("filename","i").exec(e),n){n=n[1];let e=a(n);return e=l(e),i(e)}function r(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function s(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const r=new TextDecoder(e,{fatal:!0}),s=tn(n);n=r.decode(s),t=!1}catch{}}return n}function i(e){return t&&/[\x80-\xff]/.test(e)&&(e=s("utf-8",e),t&&(e=s("iso-8859-1",e))),e}function a(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:s(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,r){if("q"===n||"Q"===n)return s(t,r=(r=r.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{r=atob(r)}catch{}return s(t,r)}))}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(On(e))return e}return null}function ms(e,t){return 404===e||0===e&&t.startsWith("file:")?new Xt('Missing PDF "'+t+'".'):new Qt(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e)}function gs(e){return 200===e||206===e}function ys(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function bs(e){const t=new Headers;for(const n in e){const r=e[n];void 0!==r&&t.append(n,r)}return t}function Es(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(jt(`getArrayBuffer - unexpected data format: ${e}`),new Uint8Array(e).buffer)}class vs{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Gt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _s(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Ts(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class _s{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=bs(this._stream.httpHeaders);const n=t.url;fetch(n,ys(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!gs(e.status))throw ms(e.status,n);this._reader=e.body.getReader(),this._headersCapability.resolve();const t=t=>e.headers.get(t),{allowRangeRequests:r,suggestedLength:s}=ps({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=s||this._contentLength,this._filename=fs(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Zt("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Es(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class Ts{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController,this._headers=bs(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${n-1}`);const s=r.url;fetch(s,ys(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!gs(e.status))throw ms(e.status,s);this._readCapability.resolve(),this._reader=e.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Es(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class As{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const r={begin:e,end:t};for(const s in n)r[s]=n[s];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const s in this.httpHeaders){const e=this.httpHeaders[s];void 0!==e&&t.setRequestHeader(s,e)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==r.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===r.status&&this.isHttp)return void n.onError?.(r.status);const s=r.status||200;if(!(200===s&&206===n.expectedStatus)&&s!==n.expectedStatus)return void n.onError?.(r.status);const i=function(e){const t=e.response;return"string"!==typeof t?t:tn(t).buffer}(r);if(206===s){const e=r.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);n.onDone({begin:parseInt(t[1],10),chunk:i})}else i?n.onDone({begin:0,chunk:i}):n.onError?.(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class ws{constructor(e){this._source=e,this._manager=new As(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Gt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Ss(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new ks(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Ss{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=e=>t.getResponseHeader(e),{allowRangeRequests:r,suggestedLength:s}=ps({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=fs(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ms(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ks{constructor(e,t,n){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=ms(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Cs=/^file:\/\/\/[a-zA-Z]:\//;class xs{constructor(e){this.source=e,this.url=function(e){const t=yr.get("url"),n=t.parse(e);return"file:"===n.protocol||n.host?n:/^[a-z]:[/\\]/i.test(e)?t.parse(`file:///${e}`):(n.host||(n.protocol="file:"),n)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Gt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Os(this):new Ds(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new Ls(this,e,t):new Ps(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Is{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(e).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Zt("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Ns{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=e.length,this.onProgress?.({loaded:this._loaded});return{value:new Uint8Array(e).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function Rs(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class Ds extends Is{constructor(e){super(e);const t=t=>{if(404===t.statusCode){const e=new Xt(`Missing PDF "${this._url}".`);return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const n=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:r,suggestedLength:s}=ps({getResponseHeader:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=s||this._contentLength,this._filename=fs(n)};if(this._request=null,"http:"===this._url.protocol){const n=yr.get("http");this._request=n.request(Rs(this._url,e.httpHeaders),t)}else{const n=yr.get("https");this._request=n.request(Rs(this._url,e.httpHeaders),t)}this._request.on("error",(e=>{this._storedError=e,this._headersCapability.reject(e)})),this._request.end()}}class Ps extends Ns{constructor(e,t,n){super(e),this._httpHeaders={};for(const s in e.httpHeaders){const t=e.httpHeaders[s];void 0!==t&&(this._httpHeaders[s]=t)}this._httpHeaders.Range=`bytes=${t}-${n-1}`;const r=e=>{if(404!==e.statusCode)this._setReadableStream(e);else{const e=new Xt(`Missing PDF "${this._url}".`);this._storedError=e}};if(this._request=null,"http:"===this._url.protocol){const e=yr.get("http");this._request=e.request(Rs(this._url,this._httpHeaders),r)}else{const e=yr.get("https");this._request=e.request(Rs(this._url,this._httpHeaders),r)}this._request.on("error",(e=>{this._storedError=e})),this._request.end()}}class Os extends Is{constructor(e){super(e);let t=decodeURIComponent(this._url.path);Cs.test(this._url.href)&&(t=t.replace(/^\//,""));const n=yr.get("fs");n.promises.lstat(t).then((e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(t)),this._headersCapability.resolve()}),(e=>{"ENOENT"===e.code&&(e=new Xt(`Missing PDF "${t}".`)),this._storedError=e,this._headersCapability.reject(e)}))}}class Ls extends Ns{constructor(e,t,n){super(e);let r=decodeURIComponent(this._url.path);Cs.test(this._url.href)&&(r=r.replace(/^\//,""));const s=yr.get("fs");this._setReadableStream(s.createReadStream(r,{start:t,end:n-1}))}}const Ms=30;class Fs{#Kt=(()=>Promise.withResolvers())();#ge=null;#Xt=!1;#Qt=(()=>!!globalThis.FontInspector?.enabled)();#Jt=null;#Zt=null;#en=0;#tn=0;#nn=null;#rn=null;#sn=0;#in=0;#an=(()=>Object.create(null))();#on=[];#ln=null;#cn=[];#un=(()=>new WeakMap)();#hn=null;static#dn=(()=>new Map)();static#pn=(()=>new Map)();static#fn=null;static#mn=(()=>new Set)();constructor(e){let{textContentSource:t,container:n,viewport:r}=e;if(t instanceof ReadableStream)this.#ln=t;else{if("object"!==typeof t)throw new Error('No "textContentSource" parameter specified.');this.#ln=new ReadableStream({start(e){e.enqueue(t),e.close()}})}this.#ge=this.#rn=n,this.#in=r.scale*(globalThis.devicePixelRatio||1),this.#sn=r.rotation,this.#Zt={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:i,pageX:a,pageY:o}=r.rawDims;this.#hn=[1,0,0,-1,-a,o+i],this.#tn=s,this.#en=i,Fs.#gn(),Vn(n,r),this.#Kt.promise.catch((()=>{})).then((()=>{Fs.#mn.delete(this),this.#Zt=null,this.#an=null}))}render(){const e=()=>{this.#nn.read().then((t=>{let{value:n,done:r}=t;r?this.#Kt.resolve():(this.#Jt??=n.lang,Object.assign(this.#an,n.styles),this.#yn(n.items),e())}),this.#Kt.reject)};return this.#nn=this.#ln.getReader(),Fs.#mn.add(this),e(),this.#Kt.promise}update(e){let{viewport:t,onBefore:n=null}=e;const r=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==this.#sn&&(n?.(),this.#sn=s,Vn(this.#rn,{rotation:s})),r!==this.#in){n?.(),this.#in=r;const e={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:Fs.#bn(this.#Jt)};for(const t of this.#cn)e.properties=this.#un.get(t),e.div=t,this.#En(e)}}cancel(){const e=new Zt("TextLayer task cancelled.");this.#nn?.cancel(e).catch((()=>{})),this.#nn=null,this.#Kt.reject(e)}get textDivs(){return this.#cn}get textContentItemsStr(){return this.#on}#yn(e){if(this.#Xt)return;this.#Zt.ctx??=Fs.#bn(this.#Jt);const t=this.#cn,n=this.#on;for(const r of e){if(t.length>1e5)return jt("Ignoring additional textDivs for performance reasons."),void(this.#Xt=!0);if(void 0!==r.str)n.push(r.str),this.#vn(r);else if("beginMarkedContentProps"===r.type||"beginMarkedContent"===r.type){const e=this.#ge;this.#ge=document.createElement("span"),this.#ge.classList.add("markedContent"),null!==r.id&&this.#ge.setAttribute("id",`${r.id}`),e.append(this.#ge)}else"endMarkedContent"===r.type&&(this.#ge=this.#ge.parentNode)}}#vn(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};this.#cn.push(t);const r=an.transform(this.#hn,e.transform);let s=Math.atan2(r[1],r[0]);const i=this.#an[e.fontName];i.vertical&&(s+=Math.PI/2);const a=this.#Qt&&i.fontSubstitution||i.fontFamily,o=Math.hypot(r[2],r[3]),l=o*Fs.#_n(a,this.#Jt);let c,u;0===s?(c=r[4],u=r[5]-l):(c=r[4]+l*Math.sin(s),u=r[5]-l*Math.cos(s));const h="calc(var(--scale-factor)*",d=t.style;this.#ge===this.#rn?(d.left=`${(100*c/this.#tn).toFixed(2)}%`,d.top=`${(100*u/this.#en).toFixed(2)}%`):(d.left=`${h}${c.toFixed(2)}px)`,d.top=`${h}${u.toFixed(2)}px)`),d.fontSize=`${h}${(Fs.#fn*o).toFixed(2)}px)`,d.fontFamily=a,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#Qt&&(t.dataset.fontName=i.fontSubstitutionLoadedName||e.fontName),0!==s&&(n.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(p=!0)}if(p&&(n.canvasWidth=i.vertical?e.height:e.width),this.#un.set(t,n),this.#Zt.div=t,this.#Zt.properties=n,this.#En(this.#Zt),n.hasText&&this.#ge.append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),this.#ge.append(e)}}#En(e){const{div:t,properties:n,ctx:r,prevFontSize:s,prevFontFamily:i}=e,{style:a}=t;let o="";if(Fs.#fn>1&&(o=`scale(${1/Fs.#fn})`),0!==n.canvasWidth&&n.hasText){const{fontFamily:l}=a,{canvasWidth:c,fontSize:u}=n;s===u&&i===l||(r.font=`${u*this.#in}px ${l}`,e.prevFontSize=u,e.prevFontFamily=l);const{width:h}=r.measureText(t.textContent);h>0&&(o=`scaleX(${c*this.#in/h}) ${o}`)}0!==n.angle&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#mn.size>0)){this.#dn.clear();for(const{canvas:e}of this.#pn.values())e.remove();this.#pn.clear()}}static#bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.#pn.get(e||="");if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#pn.set(e,t)}return t}static#gn(){if(null!==this.#fn)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.textContent="X",document.body.append(e),this.#fn=e.getBoundingClientRect().height,e.remove()}static#_n(e,t){const n=this.#dn.get(e);if(n)return n;const r=this.#bn(t),s=r.font;r.canvas.width=r.canvas.height=Ms,r.font=`30px ${e}`;const i=r.measureText("");let a=i.fontBoundingBoxAscent,o=Math.abs(i.fontBoundingBoxDescent);if(a){const t=a/(a+o);return this.#dn.set(e,t),r.canvas.width=r.canvas.height=0,r.font=s,t}r.strokeStyle="red",r.clearRect(0,0,Ms,Ms),r.strokeText("g",0,0);let l=r.getImageData(0,0,Ms,Ms).data;o=0;for(let u=l.length-1-3;u>=0;u-=4)if(l[u]>0){o=Math.ceil(u/4/Ms);break}r.clearRect(0,0,Ms,Ms),r.strokeText("A",0,Ms),l=r.getImageData(0,0,Ms,Ms).data,a=0;for(let u=0,h=l.length;u<h;u+=4)if(l[u]>0){a=Ms-Math.floor(u/4/Ms);break}r.canvas.width=r.canvas.height=0,r.font=s;const c=a?a/(a+o):.8;return this.#dn.set(e,c),c}}function Bs(){Un("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:e,container:t,viewport:n,...r}=arguments[0],s=Object.keys(r);s.length>0&&jt("Ignoring `renderTextLayer` parameters: "+s.join(", "));const i=new Fs({textContentSource:e,container:t,viewport:n}),{textDivs:a,textContentItemsStr:o}=i;return{promise:i.render(),textDivs:a,textContentItemsStr:o}}function Hs(){Un("`updateTextLayer`, please use `TextLayer` instead.")}class Us{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){if(!n)return;let r=null;const s=n.name;if("#text"===s)r=n.value;else{if(!Us.shouldBuildText(s))return;n?.attributes?.textContent?r=n.attributes.textContent:n.value&&(r=n.value)}if(null!==r&&t.push({str:r}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}const js=65536,zs=ze?class extends _n{_createCanvas(e,t){return yr.get("canvas").createCanvas(e,t)}}:class extends _n{constructor(){let{ownerDocument:e=globalThis.document,enableHWA:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}},Gs=ze?class extends Tn{_fetchData(e,t){return br(e).then((e=>({cMapData:e,compressionType:t})))}}:xn,Ws=ze?class extends vn{}:class extends vn{#Tn;#An;#wn;#Sn;#kn;#y=0;constructor(){let{docId:e,ownerDocument:t=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.#wn=e,this.#Sn=t}get#E(){return this.#Tn||=new Map}get#Cn(){return this.#kn||=new Map}get#xn(){if(!this.#An){const e=this.#Sn.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=this.#Sn.createElementNS(Sn,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#An=this.#Sn.createElementNS(Sn,"defs"),e.append(n),n.append(this.#An),this.#Sn.body.append(e)}return this.#An}#In(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const r=n.join(",");return[r,r,r]}const[t,n,r]=e,s=new Array(256),i=new Array(256),a=new Array(256);for(let o=0;o<256;o++)s[o]=t[o]/255,i[o]=n[o]/255,a[o]=r[o]/255;return[s.join(","),i.join(","),a.join(",")]}addFilter(e){if(!e)return"none";let t=this.#E.get(e);if(t)return t;const[n,r,s]=this.#In(e),i=1===e.length?n:`${n}${r}${s}`;if(t=this.#E.get(i),t)return this.#E.set(e,t),t;const a=`g_${this.#wn}_transfer_map_${this.#y++}`,o=`url(#${a})`;this.#E.set(e,o),this.#E.set(i,o);const l=this.#Nn(a);return this.#Rn(n,r,s,l),o}addHCMFilter(e,t){const n=`${e}-${t}`,r="base";let s=this.#Cn.get(r);if(s?.key===n)return s.url;if(s?(s.filter?.remove(),s.key=n,s.url="none",s.filter=null):(s={key:n,url:"none",filter:null},this.#Cn.set(r,s)),!e||!t)return s.url;const i=this.#Dn(e);e=an.makeHexColor(...i);const a=this.#Dn(t);if(t=an.makeHexColor(...a),this.#xn.style.color="","#000000"===e&&"#ffffff"===t||e===t)return s.url;const o=new Array(256);for(let d=0;d<=255;d++){const e=d/255;o[d]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const l=o.join(","),c=`g_${this.#wn}_hcm_filter`,u=s.filter=this.#Nn(c);this.#Rn(l,l,l,u),this.#Pn(u);const h=(e,t)=>{const n=i[e]/255,r=a[e]/255,s=new Array(t+1);for(let i=0;i<=t;i++)s[i]=n+i/t*(r-n);return s.join(",")};return this.#Rn(h(0,5),h(1,5),h(2,5),u),s.url=`url(#${c})`,s.url}addAlphaFilter(e){let t=this.#E.get(e);if(t)return t;const[n]=this.#In([e]),r=`alpha_${n}`;if(t=this.#E.get(r),t)return this.#E.set(e,t),t;const s=`g_${this.#wn}_alpha_map_${this.#y++}`,i=`url(#${s})`;this.#E.set(e,i),this.#E.set(r,i);const a=this.#Nn(s);return this.#On(n,a),i}addLuminosityFilter(e){let t,n,r=this.#E.get(e||"luminosity");if(r)return r;if(e?([t]=this.#In([e]),n=`luminosity_${t}`):n="luminosity",r=this.#E.get(n),r)return this.#E.set(e,r),r;const s=`g_${this.#wn}_luminosity_map_${this.#y++}`,i=`url(#${s})`;this.#E.set(e,i),this.#E.set(n,i);const a=this.#Nn(s);return this.#Ln(a),e&&this.#On(t,a),i}addHighlightHCMFilter(e,t,n,r,s){const i=`${t}-${n}-${r}-${s}`;let a=this.#Cn.get(e);if(a?.key===i)return a.url;if(a?(a.filter?.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},this.#Cn.set(e,a)),!t||!n)return a.url;const[o,l]=[t,n].map(this.#Dn.bind(this));let c=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),[h,d]=[r,s].map(this.#Dn.bind(this));u<c&&([c,u,h,d]=[u,c,d,h]),this.#xn.style.color="";const p=(e,t,n)=>{const r=new Array(256),s=(u-c)/n,i=e/255,a=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(c+l*s),t=i+l*a;for(let n=o;n<=e;n++)r[n]=t;o=e+1}for(let l=o;l<256;l++)r[l]=r[o-1];return r.join(",")},f=`g_${this.#wn}_hcm_${e}_filter`,m=a.filter=this.#Nn(f);return this.#Pn(m),this.#Rn(p(h[0],d[0],5),p(h[1],d[1],5),p(h[2],d[2],5),m),a.url=`url(#${f})`,a.url}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&0!==this.#Cn.size||(this.#An&&(this.#An.parentNode.parentNode.remove(),this.#An=null),this.#Tn&&(this.#Tn.clear(),this.#Tn=null),this.#y=0)}#Ln(e){const t=this.#Sn.createElementNS(Sn,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#Pn(e){const t=this.#Sn.createElementNS(Sn,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#Nn(e){const t=this.#Sn.createElementNS(Sn,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#xn.append(t),t}#Mn(e,t,n){const r=this.#Sn.createElementNS(Sn,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)}#Rn(e,t,n,r){const s=this.#Sn.createElementNS(Sn,"feComponentTransfer");r.append(s),this.#Mn(s,"feFuncR",e),this.#Mn(s,"feFuncG",t),this.#Mn(s,"feFuncB",n)}#On(e,t){const n=this.#Sn.createElementNS(Sn,"feComponentTransfer");t.append(n),this.#Mn(n,"feFuncA",e)}#Dn(e){return this.#xn.style.color=e,Wn(getComputedStyle(this.#xn).getPropertyValue("color"))}},$s=ze?class extends An{_fetchData(e){return br(e)}}:In;function qs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof e||e instanceof URL?e={url:e}:(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const t=new Ys,{docId:n}=t,r=e.url?function(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(ze&&"string"===typeof e)return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(e.url):null,s=e.data?function(e){if(ze&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return tn(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(e?.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(e.data):null,i=e.httpHeaders||null,a=!0===e.withCredentials,o=e.password??null,l=e.range instanceof Ks?e.range:null,c=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:js;let u=e.worker instanceof ei?e.worker:null;const h=e.verbosity,d="string"!==typeof e.docBaseUrl||Pn(e.docBaseUrl)?null:e.docBaseUrl,p="string"===typeof e.cMapUrl?e.cMapUrl:null,f=!1!==e.cMapPacked,m=e.CMapReaderFactory||Gs,g="string"===typeof e.standardFontDataUrl?e.standardFontDataUrl:null,y=e.StandardFontDataFactory||$s,b=!0!==e.stopAtErrors,E=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,v=!1!==e.isEvalSupported,_="boolean"===typeof e.isOffscreenCanvasSupported?e.isOffscreenCanvasSupported:!ze,T=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,A="boolean"===typeof e.disableFontFace?e.disableFontFace:ze,w=!0===e.fontExtraProperties,S=!0===e.enableXfa,k=e.ownerDocument||globalThis.document,C=!0===e.disableRange,x=!0===e.disableStream,I=!0===e.disableAutoFetch,N=!0===e.pdfBug,R=!0===e.enableHWA,D=l?l.length:e.length??NaN,P="boolean"===typeof e.useSystemFonts?e.useSystemFonts:!ze&&!A,O="boolean"===typeof e.useWorkerFetch?e.useWorkerFetch:m===xn&&y===In&&p&&g&&Bn(p,document.baseURI)&&Bn(g,document.baseURI),L=e.canvasFactory||new zs({ownerDocument:k,enableHWA:R}),M=e.filterFactory||new Ws({docId:n,ownerDocument:k});Bt(h);const F={canvasFactory:L,filterFactory:M};if(O||(F.cMapReaderFactory=new m({baseUrl:p,isCompressed:f}),F.standardFontDataFactory=new y({baseUrl:g})),!u){const e={verbosity:h,port:Vr.workerPort};u=e.port?ei.fromPort(e):new ei(e),t._worker=u}const B={docId:n,apiVersion:"4.4.168",data:s,password:o,disableAutoFetch:I,rangeChunkSize:c,length:D,docBaseUrl:d,enableXfa:S,evaluatorOptions:{maxImageSize:E,disableFontFace:A,ignoreErrors:b,isEvalSupported:v,isOffscreenCanvasSupported:_,canvasMaxAreaInBytes:T,fontExtraProperties:w,useSystemFonts:P,cMapUrl:O?p:null,standardFontDataUrl:O?g:null}},H={disableFontFace:A,fontExtraProperties:w,ownerDocument:k,pdfBug:N,styleElement:null,loadingParams:{disableAutoFetch:I,enableXfa:S}};return u.promise.then((function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const e=u.messageHandler.sendWithPromise("GetDocRequest",B,s?[s.buffer]:null);let o;if(l)o=new us(l,{disableRange:C,disableStream:x});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");o=(e=>{if(ze){return function(){return"undefined"!==typeof fetch&&"undefined"!==typeof Response&&"body"in Response.prototype}()&&Bn(e.url)?new vs(e):new xs(e)}return Bn(e.url)?new vs(e):new ws(e)})({url:r,length:D,httpHeaders:i,withCredentials:a,rangeChunkSize:c,disableRange:C,disableStream:x})}return e.then((e=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const r=new is(n,e,u.port),s=new ti(r,t,o,H,F);t._transport=s,r.send("Ready",null)}))})).catch(t._capability.reject),t}function Vs(e){return"object"===typeof e&&Number.isInteger(e?.num)&&e.num>=0&&Number.isInteger(e?.gen)&&e.gen>=0}class Ys{static#wn=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+Ys.#wn++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await(this._transport?.destroy())}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class Ks{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then((()=>{for(const n of this._progressListeners)n(e,t)}))}onDataProgressiveRead(e){this._readyCapability.promise.then((()=>{for(const t of this._progressiveReadListeners)t(e)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const e of this._progressiveDoneListeners)e()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Xs{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return $t(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Qs{#Fn=null;#Bn=!1;constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new Fn:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new ri,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Rn({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return $t(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render(e){let{canvasContext:t,viewport:n,intent:r="display",annotationMode:s=Ze.ENABLE,transform:i=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null}=e;this._stats?.time("Overall");const h=this._transport.getRenderingIntent(r,s,u),{renderingIntent:d,cacheKey:p}=h;this.#Bn=!1,this.#Hn(),o||=this._transport.getOptionalContentConfig(d);let f=this._intentStates.get(p);f||(f=Object.create(null),this._intentStates.set(p,f)),f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null);const m=!!(d&Ye);f.displayReadyCapability||(f.displayReadyCapability=Promise.withResolvers(),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));const g=e=>{f.renderTasks.delete(y),(this._maybeCleanupAfterRender||m)&&(this.#Bn=!0),this.#Un(!m),e?(y.capability.reject(e),this._abortOperatorList({intentState:f,reason:e instanceof Error?e:new Error(e)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},y=new ii({callback:g,params:{canvasContext:t,viewport:n,transform:i,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:f.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:c});(f.renderTasks||=new Set).add(y);const b=y.task;return Promise.all([f.displayReadyCapability.promise,o]).then((e=>{let[t,n]=e;if(this.destroyed)g();else{if(this._stats?.time("Rendering"),!(n.renderingIntent&d))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");y.initializeGraphics({transparency:t,optionalContentConfig:n}),y.operatorListChanged()}})).catch(g),b}getOperatorList(){let{intent:e="display",annotationMode:t=Ze.ENABLE,printAnnotationStorage:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this._transport.getRenderingIntent(e,t,n,!0);let s,i=this._intentStates.get(r.cacheKey);return i||(i=Object.create(null),this._intentStates.set(r.cacheKey,i)),i.opListReadCapability||(s=Object.create(null),s.operatorListChanged=function(){i.operatorList.lastChunk&&(i.opListReadCapability.resolve(i.operatorList),i.renderTasks.delete(s))},i.opListReadCapability=Promise.withResolvers(),(i.renderTasks||=new Set).add(s),i.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(r)),i.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((e=>Us.textContent(e)));const t=this.streamTextContent(e);return new Promise((function(e,n){const r=t.getReader(),s={items:[],styles:Object.create(null),lang:null};!function t(){r.read().then((function(n){let{value:r,done:i}=n;i?e(s):(s.lang??=r.lang,Object.assign(s.styles,r.styles),s.items.push(...r.items),t())}),n)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#Bn=!1,this.#Hn(),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#Bn=!0;const t=this.#Un(!1);return e&&t&&(this._stats&&=new Fn),t}#Un(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.#Hn(),!this.#Bn||this.destroyed)return!1;if(e)return this.#Fn=setTimeout((()=>{this.#Fn=null,this.#Un(!1)}),5e3),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#Bn=!1,!0}#Hn(){this.#Fn&&(clearTimeout(this.#Fn),this.#Fn=null)}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#Un(!0)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:r}=e;const{map:s,transfer:i}=r,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:s},i).getReader(),o=this._intentStates.get(n);o.streamReader=a;const l=()=>{a.read().then((e=>{let{value:t,done:n}=e;n?o.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,o),l())}),(e=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(const e of o.renderTasks)e.operatorListChanged();this.#Un(!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(e);else{if(!o.opListReadCapability)throw e;o.opListReadCapability.reject(e)}}}))};l()}_abortOperatorList(e){let{intentState:t,reason:n,force:r=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!r){if(t.renderTasks.size>0)return;if(n instanceof Dn){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})}),e))}}if(t.streamReader.cancel(new Zt(n.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}class Js{#jn=(()=>new Set)();#zn=(()=>Promise.resolve())();postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};this.#zn.then((()=>{for(const e of this.#jn)e.call(this,n)}))}addEventListener(e,t){this.#jn.add(t)}removeEventListener(e,t){this.#jn.delete(t)}terminate(){this.#jn.clear()}}const Zs={isWorkerDisabled:!1,fakeWorkerId:0};ze&&(Zs.isWorkerDisabled=!0,Vr.workerSrc||="./pdf.worker.mjs"),Zs.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch{return!1}const r=new URL(t,n);return n.origin===r.origin},Zs.createCDNWrapper=function(e){const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};class ei{static#Gn;constructor(){let{name:e=null,port:t=null,verbosity:n=Ht()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(ei.#Gn?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(ei.#Gn||=new WeakMap).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return ze?Promise.all([yr.promise,this._readyCapability.promise]):this._readyCapability.promise}#Wn(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new is("main","worker",e),this._messageHandler.on("ready",(function(){})),this.#Wn()}_initialize(){if(Zs.isWorkerDisabled||ei.#$n)return void this._setupFakeWorker();let{workerSrc:e}=ei;try{Zs.isSameOrigin(window.location.href,e)||(e=Zs.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new is("main","worker",t),r=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",(()=>{this._webWorker||r()}),{signal:s.signal}),n.on("test",(e=>{s.abort(),!this.destroyed&&e?(this._messageHandler=n,this._port=t,this._webWorker=t,this.#Wn()):r()})),n.on("ready",(e=>{if(s.abort(),this.destroyed)r();else try{i()}catch{this._setupFakeWorker()}}));const i=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void i()}catch{Ut("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Zs.isWorkerDisabled||(jt("Setting up fake worker."),Zs.isWorkerDisabled=!0),ei._setupFakeWorkerGlobal.then((e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new Js;this._port=t;const n="fake"+Zs.fakeWorkerId++,r=new is(n+"_worker",n,t);e.setup(r,t),this._messageHandler=new is(n,n+"_worker",t),this.#Wn()})).catch((e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),ei.#Gn?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#Gn?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ei(e)}static get workerSrc(){if(Vr.workerSrc)return Vr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#$n(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return $t(this,"_setupFakeWorkerGlobal",(async()=>{if(this.#$n)return this.#$n;return(await import(this.workerSrc)).WorkerMessageHandler})())}}class ti{#qn=(()=>new Map)();#Vn=(()=>new Map)();#Yn=(()=>new Map)();#Kn=(()=>new Map)();#Xn=null;constructor(e,t,n,r,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new ri,this.fontLoader=new pr({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#Qn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.#qn.get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return this.#qn.set(e,r),r}get annotationStorage(){return $t(this,"annotationStorage",new hr)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ze.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=Ve,i=ur;switch(e){case"any":s=qe;break;case"display":break;case"print":s=Ye;break;default:jt(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case Ze.DISABLE:s+=Qe;break;case Ze.ENABLE:break;case Ze.ENABLE_FORMS:s+=Ke;break;case Ze.ENABLE_STORAGE:s+=Xe;i=(s&Ye&&n instanceof dr?n:this.annotationStorage).serializable;break;default:jt(`getRenderingIntent - invalid annotationMode: ${t}`)}return r&&(s+=Je),{renderingIntent:s,cacheKey:`${s}_${i.hash}`,annotationStorageSerializable:i}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#Xn?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of this.#Vn.values())e.push(n._destroy());this.#Vn.clear(),this.#Yn.clear(),this.#Kn.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#qn.clear(),this.filterFactory.destroy(),Fs.cleanup(),this._networkStream?.cancelAllRequests(new Zt("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{Gt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then((function(e){let{value:n,done:r}=e;r?t.close():(Gt(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(e=>{const n=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then((()=>{r.isStreamingSupported&&r.isRangeSupported||(this._lastProgress&&t.onProgress?.(this._lastProgress),r.onProgress=e=>{t.onProgress?.({loaded:e.loaded,total:e.total})}),n.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})}),n.reject),n.promise})),e.on("GetRangeReader",((e,t)=>{Gt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then((function(e){let{value:n,done:r}=e;r?t.close():(Gt(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{n.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}):t.close()})),e.on("GetDoc",(e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new Xs(n,this))})),e.on("DocException",(function(e){let n;switch(e.name){case"PasswordException":n=new Vt(e.message,e.code);break;case"InvalidPDFException":n=new Kt(e.message);break;case"MissingPDFException":n=new Xt(e.message);break;case"UnexpectedResponseException":n=new Qt(e.message,e.status);break;case"UnknownErrorException":n=new Yt(e.message,e.details);break;default:zt("DocException - expected a valid Error.")}t._capability.reject(n)})),e.on("PasswordRequest",(e=>{if(this.#Xn=Promise.withResolvers(),t.onPassword){const r=e=>{e instanceof Error?this.#Xn.reject(e):this.#Xn.resolve({password:e})};try{t.onPassword(r,e.code)}catch(n){this.#Xn.reject(n)}}else this.#Xn.reject(new Vt(e.message,e.code));return this.#Xn.promise})),e.on("DataLoaded",(e=>{t.onProgress?.({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(e=>{if(this.destroyed)return;this.#Vn.get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(t=>{let[n,r,s]=t;if(this.destroyed)return null;if(this.commonObjs.has(n))return null;switch(r){case"Font":const{disableFontFace:t,fontExtraProperties:i,pdfBug:a}=this._params;if("error"in s){const e=s.error;jt(`Error during font loading: ${e}`),this.commonObjs.resolve(n,e);break}const o=a&&globalThis.FontInspector?.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,l=new fr(s,{disableFontFace:t,inspectFont:o});this.fontLoader.bind(l).catch((()=>e.sendWithPromise("FontFallback",{id:n}))).finally((()=>{!i&&l.data&&(l.data=null),this.commonObjs.resolve(n,l)}));break;case"CopyLocalImage":const{imageRef:c}=s;Gt(c,"The imageRef must be defined.");for(const e of this.#Vn.values())for(const[,t]of e.objs)if(t?.ref===c)return t.dataLen?(this.commonObjs.resolve(n,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null})),e.on("obj",(e=>{let[t,n,r,s]=e;if(this.destroyed)return;const i=this.#Vn.get(n);if(!i.objs.has(t))if(0!==i._intentStates.size)switch(r){case"Image":i.objs.resolve(t,s),s?.dataLen>1e7&&(i._maybeCleanupAfterRender=!0);break;case"Pattern":i.objs.resolve(t,s);break;default:throw new Error(`Got unknown object type ${r}`)}else s?.bitmap?.close()})),e.on("DocProgress",(e=>{this.destroyed||t.onProgress?.({loaded:e.loaded,total:e.total})})),e.on("FetchBuiltInCMap",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),e.on("FetchStandardFontData",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&jt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally((()=>{this.annotationStorage.resetModified()}))}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#Yn.get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&this.#Kn.set(n.refStr,e);const r=new Qs(t,n,this,this._params.pdfBug);return this.#Vn.set(t,r),r}));return this.#Yn.set(t,r),r}getPageIndex(e){return Vs(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#Qn("GetFieldObjects")}hasJSActions(){return this.#Qn("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#Qn("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#Qn("GetOptionalContentConfig").then((t=>new cs(t,e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#qn.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then((e=>({info:e[0],metadata:e[1]?new as(e[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})));return this.#qn.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#Vn.values()){if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`)}this.commonObjs.clear(),e||this.fontLoader.clear(),this.#qn.clear(),this.filterFactory.destroy(!0),Fs.cleanup()}}cachedPageNumber(e){if(!Vs(e))return null;const t=0===e.gen?`${e.num}R`:`${e.num}R${e.gen}`;return this.#Kn.get(t)??null}}const ni=Symbol("INITIAL_DATA");class ri{#Jn=(()=>Object.create(null))();#Zn(e){return this.#Jn[e]||={...Promise.withResolvers(),data:ni}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=this.#Zn(e);return n.promise.then((()=>t(n.data))),null}const n=this.#Jn[e];if(!n||n.data===ni)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#Jn[e];return!!t&&t.data!==ni}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.#Zn(e);n.data=t,n.resolve()}clear(){for(const e in this.#Jn){const{data:t}=this.#Jn[e];t?.bitmap?.close()}this.#Jn=Object.create(null)}*[Symbol.iterator](){for(const e in this.#Jn){const{data:t}=this.#Jn[e];t!==ni&&(yield[e,t])}}}class si{#er=null;constructor(e){this.#er=e,this.onContinue=null}get promise(){return this.#er.capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.#er.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#er.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#er;return e.form||e.canvas&&t?.size>0}}class ii{#tr=null;static#nr=(()=>new WeakSet)();constructor(e){let{callback:t,params:n,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:d=null}=e;this.callback=t,this.params=n,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new si(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(e){let{transparency:t=!1,optionalContentConfig:n}=e;if(this.cancelled)return;if(this._canvas){if(ii.#nr.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ii.#nr.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:s,transform:i,background:a}=this.params;this.gfx=new qr(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:s,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#tr&&(window.cancelAnimationFrame(this.#tr),this.#tr=null),ii.#nr.delete(this._canvas),this.callback(e||new Dn(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#tr=window.requestAnimationFrame((()=>{this.#tr=null,this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ii.#nr.delete(this._canvas),this.callback())))}}const ai="4.4.168",oi="19fbc8998";function li(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function ci(e){return Math.max(0,Math.min(255,255*e))}class ui{static CMYK_G(e){let[t,n,r,s]=e;return["G",1-Math.min(1,.3*t+.59*r+.11*n+s)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=ci(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=li(t);return`#${n}${n}${n}`}static RGB_G(e){let[t,n,r]=e;return["G",.3*t+.59*n+.11*r]}static RGB_rgb(e){return e.map(ci)}static RGB_HTML(e){return`#${e.map(li).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,r,s]=e;return["RGB",1-Math.min(1,t+s),1-Math.min(1,r+s),1-Math.min(1,n+s)]}static CMYK_rgb(e){let[t,n,r,s]=e;return[ci(1-Math.min(1,t+s)),ci(1-Math.min(1,r+s)),ci(1-Math.min(1,n+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,r]=e;const s=1-t,i=1-n,a=1-r;return["CMYK",s,i,a,Math.min(s,i,a)]}}class hi{static setupStorage(e,t,n,r,s){const i=r.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==i.value&&(e.textContent=i.value),"print"===s)break;e.addEventListener("input",(e=>{r.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(i.value===n.attributes.xfaOn?e.setAttribute("checked",!0):i.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===s)break;e.addEventListener("change",(e=>{r.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{if(null!==i.value&&e.setAttribute("value",i.value),"print"===s)break;e.addEventListener("input",(e=>{r.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==i.value){e.setAttribute("value",i.value);for(const e of n.children)e.attributes.value===i.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",(e=>{const n=e.target.options,s=-1===n.selectedIndex?"":n[n.selectedIndex].value;r.setValue(t,{value:s})}))}}static setAttributes(e){let{html:t,element:n,storage:r=null,intent:s,linkService:i}=e;const{attributes:a}=n,o=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name=`${a.name}-${s}`);for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&i.addLinkAttributes(t,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(t,a.dataId,n,r)}static render(e){const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,s=e.intent||"display",i=document.createElement(r.name);r.attributes&&this.setAttributes({html:i,element:r,intent:s,linkService:n});const a="richText"!==s,o=e.div;if(o.append(i),e.viewport){const t=`matrix(${e.viewport.transform.join(",")})`;o.style.transform=t}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===r.children.length){if(r.value){const e=document.createTextNode(r.value);i.append(e),a&&Us.shouldBuildText(r.name)&&l.push(e)}return{textDivs:l}}const c=[[r,-1,i]];for(;c.length>0;){const[e,r,i]=c.at(-1);if(r+1===e.children.length){c.pop();continue}const o=e.children[++c.at(-1)[1]];if(null===o)continue;const{name:u}=o;if("#text"===u){const e=document.createTextNode(o.value);l.push(e),i.append(e);continue}const h=o?.attributes?.xmlns?document.createElementNS(o.attributes.xmlns,u):document.createElement(u);if(i.append(h),o.attributes&&this.setAttributes({html:h,element:o,storage:t,intent:s,linkService:n}),o.children?.length>0)c.push([o,-1,h]);else if(o.value){const e=document.createTextNode(o.value);a&&Us.shouldBuildText(u)&&l.push(e),h.append(e)}}for(const u of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const di=1e3,pi=new WeakSet;function fi(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class mi{static create(e){switch(e.data.annotationType){case ht:return new yi(e);case ut:return new bi(e);case Ct:switch(e.data.fieldType){case"Tx":return new vi(e);case"Btn":return e.data.radioButton?new Ai(e):e.data.checkBox?new Ti(e):new wi(e);case"Ch":return new Si(e);case"Sig":return new _i(e)}return new Ei(e);case St:return new ki(e);case dt:return new xi(e);case pt:return new Ii(e);case ft:return new Ni(e);case mt:return new Ri(e);case yt:return new Di(e);case At:return new Oi(e);case wt:return new Li(e);case gt:return new Pi(e);case bt:return new Mi(e);case Et:return new Fi(e);case vt:return new Bi(e);case _t:return new Hi(e);case Tt:return new Ui(e);case kt:return new ji(e);default:return new gi(e)}}}class gi{#rr=null;#sr=!1;#ir=null;constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:r}=e;return!!(t?.str||n?.str||r?.str)}get hasPopupData(){return gi._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#rr||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#ar(t),this.#ir?.popup.updateEdited(e)}resetEdited(){this.#rr&&(this.#ar(this.#rr.rect),this.#ir?.popup.resetEdited(),this.#rr=null)}#ar(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:i,pageX:a,pageY:o}}}}=this;n?.splice(0,4,...e);const{width:l,height:c}=fi(e);t.left=100*(e[0]-a)/s+"%",t.top=100*(i-e[3]+o)/i+"%",0===r?(t.width=100*l/s+"%",t.height=100*c/i+"%"):this.setRotation(r)}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Ei||(s.tabIndex=di);const{style:i}=s;if(i.zIndex=this.parent.zIndex++,t.popupRef&&s.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof ki){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,s),s}const{width:a,height:o}=fi(t.rect);if(!e&&t.borderStyle.width>0){i.borderWidth=`${t.borderStyle.width}px`;const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t=`calc(${e}px * var(--scale-factor)) / calc(${n}px * var(--scale-factor))`;i.borderRadius=t}else if(this instanceof Ai){const e=`calc(${a}px * var(--scale-factor)) / calc(${o}px * var(--scale-factor))`;i.borderRadius=e}switch(t.borderStyle.style){case xt:i.borderStyle="solid";break;case It:i.borderStyle="dashed";break;case Nt:jt("Unimplemented border style: beveled");break;case Rt:jt("Unimplemented border style: inset");break;case Dt:i.borderBottomStyle="solid"}const r=t.borderColor||null;r?(this.#sr=!0,i.borderColor=an.makeHexColor(0|r[0],0|r[1],0|r[2])):i.borderWidth=0}const l=an.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:u,pageX:h,pageY:d}=r.rawDims;i.left=100*(l[0]-h)/c+"%",i.top=100*(l[1]-d)/u+"%";const{rotation:p}=t;return t.hasOwnCanvas||0===p?(i.width=100*a/c+"%",i.height=100*o/u+"%"):this.setRotation(p,s),s}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:i}=fi(this.data.rect);let a,o;e%180===0?(a=100*s/n,o=100*i/r):(a=100*i/n,o=100*s/r),t.style.width=`${a}%`,t.style.height=`${o}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const r=n.detail[e],s=r[0],i=r.slice(1);n.target.style[t]=ui[`${s}_HTML`](i),this.annotationStorage.setValue(this.data.id,{[t]:ui[`${s}_rgb`](i)})};return $t(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout((()=>e.target.focus({preventScroll:!1})),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||n[r];s?.(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,s]of Object.entries(t)){const i=n[r];if(i){i({detail:{[r]:s},target:e}),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,s]=this.data.rect.map((e=>Math.fround(e)));if(8===e.length){const[i,a,o,l]=e.subarray(2,6);if(r===i&&s===a&&t===o&&n===l)return}const{style:i}=this.container;let a;if(this.#sr){const{borderColor:e,borderWidth:t}=i;i.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${e}" stroke-width="${t}">`],this.container.classList.add("hasBorder")}const o=r-t,l=s-n,{svgFactory:c}=this,u=c.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0);const h=c.createElement("defs");u.append(h);const d=c.createElement("clipPath"),p=`clippath_${this.data.id}`;d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),h.append(d);for(let f=2,m=e.length;f<m;f+=8){const n=e[f],r=e[f+1],i=e[f+2],u=e[f+3],h=c.createElement("rect"),p=(i-t)/o,m=(s-r)/l,g=(n-i)/o,y=(r-u)/l;h.setAttribute("x",p),h.setAttribute("y",m),h.setAttribute("width",g),h.setAttribute("height",y),d.append(h),a?.push(`<rect vector-effect="non-scaling-stroke" x="${p}" y="${m}" width="${g}" height="${y}"/>`)}this.#sr&&(a.push("</g></svg>')"),i.backgroundImage=a.join("")),this.container.append(u),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const n=this.#ir=new ki({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(n.render())}render(){zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:e,id:s,exportValues:i}of r){if(-1===e)continue;if(s===t)continue;const r="string"===typeof i?i:null,a=document.querySelector(`[data-element-id="${s}"]`);!a||pi.has(a)?n.push({id:s,exportValue:r,domElement:a}):jt(`_getElementsByName - element not allowed: ${s}`)}return n}for(const r of document.getElementsByName(e)){const{exportValue:e}=r,s=r.getAttribute("data-element-id");s!==t&&(pi.has(r)&&n.push({id:s,exportValue:e,domElement:r}))}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",(()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})}))}}class yi extends gi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(this.#or(n,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(this.#lr(n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}#cr(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&this.#cr()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#cr()}#or(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,n),!1),this.#cr()}#lr(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#cr()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const s=n.get(r);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}e.onclick||(e.onclick=()=>!1),this.#cr()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#cr(),!this._fieldObjects)return jt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{n?.();const{fields:e,refs:r,include:s}=t,i=[];if(0!==e.length||0!==r.length){const t=new Set(r);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===s&&i.push(n)}else for(const t of Object.values(this._fieldObjects))i.push(...t);const a=this.annotationStorage,o=[];for(const t of i){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;a.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}default:continue}const n=document.querySelector(`[data-element-id="${e}"]`);n&&(pi.has(n)?n.dispatchEvent(new Event("resetform")):jt(`_bindResetFormAction - element not allowed: ${e}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}),!1}}}class bi extends gi{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Ei extends gi{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&("CANVAS"===e.previousSibling?.nodeName&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return rn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,s){n.includes("mouse")?e.addEventListener(n,(e=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(n,(e=>{if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(e)}})}))}_setEventListeners(e,t,n,r){for(const[s,i]of n)("Action"===i||this.data.actions?.[i])&&("Focus"!==i&&"Blur"!==i||(t||={focused:!1}),this._setEventListener(e,t,s,i,r),"Focus"!==i||this.data.actions?.Blur?"Blur"!==i||this.data.actions?.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":an.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||9,s=e.style;let i;const a=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/($e*r))||1);i=Math.min(r,a(t/$e))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);i=Math.min(r,a(e/$e))}s.fontSize=`calc(${i}px * var(--scale-factor))`,s.color=an.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class vi extends Ei{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,r){const s=this.annotationStorage;for(const i of this._getElementsByName(e.name,e.id))i.domElement&&(i.domElement[t]=n),s.setValue(i.id,{[r]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const r=e.getValue(t,{value:this.data.fieldValue});let s=r.value||"";const i=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;i&&s.length>i&&(s=s.slice(0,i));let a=r.formattedValue||this.data.textContent?.join("\n")||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const o={userValue:s,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=a??s,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",a??s),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),pi.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=di,this._setRequired(n,this.data.required),i&&(n.maxLength=i),n.addEventListener("input",(r=>{e.setValue(t,{value:r.target.value}),this.setPropertyOnSiblings(n,"value",r.target.value,"value"),o.formattedValue=null})),n.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue??"";n.value=o.userValue=t,o.formattedValue=null}));let l=e=>{const{formattedValue:t}=o;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",(e=>{if(o.focused)return;const{target:t}=e;o.userValue&&(t.value=o.userValue),o.lastCommittedValue=t.value,o.commitKey=1,this.data.actions?.Focus||(o.focused=!0)})),n.addEventListener("updatefromsandbox",(n=>{this.showElementAndHideCanvas(n.target);const r={value(n){o.userValue=n.detail.value??"",e.setValue(t,{value:o.userValue.toString()}),n.target.value=o.userValue},formattedValue(n){const{formattedValue:r}=n.detail;o.formattedValue=r,null!==r&&void 0!==r&&n.target!==document.activeElement&&(n.target.value=r),e.setValue(t,{formattedValue:r})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{const{charLimit:r}=n.detail,{target:s}=n;if(0===r)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",r);let i=o.userValue;!i||i.length<=r||(i=i.slice(0,r),s.value=o.userValue=i,e.setValue(t,{value:i}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(r,n)})),n.addEventListener("keydown",(e=>{o.commitKey=1;let n=-1;if("Escape"===e.key?n=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(o.commitKey=3):n=2,-1===n)return;const{value:r}=e.target;o.lastCommittedValue!==r&&(o.lastCommittedValue=r,o.userValue=r,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:n,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}));const r=l;l=null,n.addEventListener("blur",(e=>{if(!o.focused||!e.relatedTarget)return;this.data.actions?.Blur||(o.focused=!1);const{value:n}=e.target;o.userValue=n,o.lastCommittedValue!==n&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:n,willCommit:!0,commitKey:o.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}),r(e)})),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",(e=>{o.lastCommittedValue=null;const{data:n,target:r}=e,{value:s,selectionStart:i,selectionEnd:a}=r;let l=i,c=a;switch(e.inputType){case"deleteWordBackward":{const e=s.substring(0,i).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=s.substring(i).match(/^[^\w]*\w*/);e&&(c+=e[0].length);break}case"deleteContentBackward":i===a&&(l-=1);break;case"deleteContentForward":i===a&&(c+=1)}e.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,change:n||"",willCommit:!1,selStart:l,selEnd:c}})})),this._setEventListeners(n,o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}if(l&&n.addEventListener("blur",l),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/i;n.classList.add("comb"),n.style.letterSpacing=`calc(${e}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class _i extends Ei{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Ti extends Ei{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof r&&(r="Off"!==r,e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return pi.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=di,s.addEventListener("change",(r=>{const{name:s,checked:i}=r.target;for(const a of this._getElementsByName(s,n)){const n=i&&a.exportValue===t.exportValue;a.domElement&&(a.domElement.checked=n),e.setValue(a.id,{value:n})}e.setValue(n,{value:i})})),s.addEventListener("resetform",(e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue})),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",(t=>{const r={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(r,t)})),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Ai extends Ei{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof r&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const i of this._getElementsByName(t.fieldName,n))e.setValue(i.id,{value:!1});const s=document.createElement("input");if(pi.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=di,s.addEventListener("change",(t=>{const{name:r,checked:s}=t.target;for(const i of this._getElementsByName(r,n))e.setValue(i.id,{value:!1});e.setValue(n,{value:s})})),s.addEventListener("resetform",(e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue})),this.enableScripting&&this.hasJSActions){const r=t.buttonValue;s.addEventListener("updatefromsandbox",(t=>{const s={value:t=>{const s=r===t.detail.value;for(const r of this._getElementsByName(t.target.name)){const t=s&&r.id===n;r.domElement&&(r.domElement.checked=t),e.setValue(r.id,{value:t})}}};this._dispatchEventFromSandbox(s,t)})),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class wi extends yi{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({},e)}))),e}}class Si extends Ei{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");pi.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=di;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue;for(const n of r.options)n.selected=n.value===t}));for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),s=!1),r.append(e)}let i=null;if(s){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),r.prepend(e),i=()=>{e.remove(),r.removeEventListener("input",i),i=null},r.addEventListener("input",i)}const a=e=>{const t=e?"value":"textContent",{options:n,multiple:s}=r;return s?Array.prototype.filter.call(n,(e=>e.selected)).map((e=>e[t])):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=a(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,(e=>({displayValue:e.textContent,exportValue:e.value})))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",(n=>{const s={value(n){i?.();const s=n.detail.value,l=new Set(Array.isArray(s)?s:[s]);for(const e of r.options)e.selected=l.has(e.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(e){r.multiple=!0},remove(n){const s=r.options,i=n.detail.remove;if(s[i].selected=!1,r.remove(i),s.length>0){-1===Array.prototype.findIndex.call(s,(e=>e.selected))&&(s[0].selected=!0)}e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==r.length;)r.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(n){const{index:s,displayValue:i,exportValue:c}=n.detail.insert,u=r.children[s],h=document.createElement("option");h.textContent=i,h.value=c,u?u.before(h):r.append(h),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:s}=n.detail;for(;0!==r.length;)r.remove(0);for(const e of s){const{displayValue:t,exportValue:n}=e,s=document.createElement("option");s.textContent=t,s.value=n,r.append(s)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const r=new Set(n.detail.indices);for(const e of n.target.options)e.selected=r.has(e.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(s,n)})),r.addEventListener("input",(n=>{const r=a(!0),s=a(!1);e.setValue(t,{value:r}),n.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:s,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(e=>e.target.value))):r.addEventListener("input",(function(n){e.setValue(t,{value:a(!0)})})),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class ki extends gi{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:gi._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Ci({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map((e=>`${un}${e}`)).join(",")),this.container}}class Ci{#ur=this.#hr.bind(this);#dr=this.#pr.bind(this);#fr=this.#mr.bind(this);#gr=this.#yr.bind(this);#br=null;#ge=null;#Er=null;#vr=null;#_r=null;#Tr=null;#Ar=null;#wr=!1;#Sr=null;#w=null;#kr=null;#Cr=null;#xr=null;#rr=null;#Ir=!1;constructor(e){let{container:t,color:n,elements:r,titleObj:s,modificationDate:i,contentsObj:a,richText:o,parent:l,rect:c,parentRect:u,open:h}=e;this.#ge=t,this.#xr=s,this.#Er=a,this.#Cr=o,this.#Tr=l,this.#br=n,this.#kr=c,this.#Ar=u,this.#_r=r,this.#vr=zn.toDateObject(i),this.trigger=r.flatMap((e=>e.getElementsToTriggerPopup()));for(const d of this.trigger)d.addEventListener("click",this.#gr),d.addEventListener("mouseenter",this.#fr),d.addEventListener("mouseleave",this.#dr),d.classList.add("popupTriggerArea");for(const d of r)d.container?.addEventListener("keydown",this.#ur);this.#ge.hidden=!0,h&&this.#yr()}render(){if(this.#Sr)return;const e=this.#Sr=document.createElement("div");if(e.className="popup",this.#br){const t=e.style.outlineColor=an.makeHexColor(...this.#br);if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))e.style.backgroundColor=`color-mix(in srgb, ${t} 30%, white)`;else{const t=.7;e.style.backgroundColor=an.makeHexColor(...this.#br.map((e=>Math.floor(t*(255-e)+e))))}}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),({dir:n.dir,str:n.textContent}=this.#xr),e.append(t),this.#vr){const e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),e.setAttribute("data-l10n-args",JSON.stringify({date:this.#vr.toLocaleDateString(),time:this.#vr.toLocaleTimeString()})),t.append(e)}const r=this.#Nr;if(r)hi.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const t=this._formatContents(this.#Er);e.append(t)}this.#ge.append(e)}get#Nr(){const e=this.#Cr,t=this.#Er;return!e?.str||t?.str&&t.str!==e.str?null:this.#Cr.html||null}get#Rr(){return this.#Nr?.attributes?.style?.fontSize||0}get#Dr(){return this.#Nr?.attributes?.style?.color||null}#Pr(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:this.#Dr,fontSize:this.#Rr?`calc(${this.#Rr}px * var(--scale-factor))`:""}};for(const s of e.split("\n"))t.push({name:"span",value:s,attributes:r});return n}_formatContents(e){let{str:t,dir:n}=e;const r=document.createElement("p");r.classList.add("popupContent"),r.dir=n;const s=t.split(/(?:\r\n?|\n)/);for(let i=0,a=s.length;i<a;++i){const e=s[i];r.append(document.createTextNode(e)),i<a-1&&r.append(document.createElement("br"))}return r}#hr(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&this.#wr)&&this.#yr()}updateEdited(e){let{rect:t,popupContent:n}=e;this.#rr||={contentsObj:this.#Er,richText:this.#Cr},t&&(this.#w=null),n&&(this.#Cr=this.#Pr(n),this.#Er=null),this.#Sr?.remove(),this.#Sr=null}resetEdited(){this.#rr&&(({contentsObj:this.#Er,richText:this.#Cr}=this.#rr),this.#rr=null,this.#Sr?.remove(),this.#Sr=null,this.#w=null)}#Or(){if(null!==this.#w)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:s}}}=this.#Tr;let i=!!this.#Ar,a=i?this.#Ar:this.#kr;for(const d of this.#_r)if(!a||null!==an.intersect(d.data.rect,a)){a=d.data.rect,i=!0;break}const o=an.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),l=i?a[2]-a[0]+5:0,c=o[0]+l,u=o[1];this.#w=[100*(c-r)/t,100*(u-s)/n];const{style:h}=this.#ge;h.left=`${this.#w[0]}%`,h.top=`${this.#w[1]}%`}#yr(){this.#wr=!this.#wr,this.#wr?(this.#mr(),this.#ge.addEventListener("click",this.#gr),this.#ge.addEventListener("keydown",this.#ur)):(this.#pr(),this.#ge.removeEventListener("click",this.#gr),this.#ge.removeEventListener("keydown",this.#ur))}#mr(){this.#Sr||this.render(),this.isVisible?this.#wr&&this.#ge.classList.add("focused"):(this.#Or(),this.#ge.hidden=!1,this.#ge.style.zIndex=parseInt(this.#ge.style.zIndex)+1e3)}#pr(){this.#ge.classList.remove("focused"),!this.#wr&&this.isVisible&&(this.#ge.hidden=!0,this.#ge.style.zIndex=parseInt(this.#ge.style.zIndex)-1e3)}forceHide(){this.#Ir=this.isVisible,this.#Ir&&(this.#ge.hidden=!0)}maybeShow(){this.#Ir&&(this.#Sr||this.#mr(),this.#Ir=!1,this.#ge.hidden=!1)}get isVisible(){return!1===this.#ge.hidden}}class xi extends gi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=et.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Ii extends gi{#Lr=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:n}=fi(e.rect),r=this.svgFactory.create(t,n,!0),s=this.#Lr=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Lr}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ni extends gi{#Mr=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:n}=fi(e.rect),r=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,i=this.#Mr=this.svgFactory.createElement("svg:rect");return i.setAttribute("x",s/2),i.setAttribute("y",s/2),i.setAttribute("width",t-s),i.setAttribute("height",n-s),i.setAttribute("stroke-width",s||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),r.append(i),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Mr}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ri extends gi{#Fr=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:n}=fi(e.rect),r=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,i=this.#Fr=this.svgFactory.createElement("svg:ellipse");return i.setAttribute("cx",t/2),i.setAttribute("cy",n/2),i.setAttribute("rx",t/2-s/2),i.setAttribute("ry",n/2-s/2),i.setAttribute("stroke-width",s||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),r.append(i),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Fr}addHighlightArea(){this.container.classList.add("highlightArea")}}class Di extends gi{#Br=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:r}}=this;if(!t)return this.container;const{width:s,height:i}=fi(e),a=this.svgFactory.create(s,i,!0);let o=[];for(let c=0,u=t.length;c<u;c+=2){const n=t[c]-e[0],r=e[3]-t[c+1];o.push(`${n},${r}`)}o=o.join(" ");const l=this.#Br=this.svgFactory.createElement(this.svgElementName);return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Br}addHighlightArea(){this.container.classList.add("highlightArea")}}class Pi extends Di{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Oi extends gi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Li extends gi{#Hr=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=et.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:n,popupRef:r}}=this,{width:s,height:i}=fi(e),a=this.svgFactory.create(s,i,!0);for(const o of t){let t=[];for(let n=0,r=o.length;n<r;n+=2){const r=o[n]-e[0],s=e[3]-o[n+1];t.push(`${r},${s}`)}t=t.join(" ");const s=this.svgFactory.createElement(this.svgElementName);this.#Hr.push(s),s.setAttribute("points",t),s.setAttribute("stroke-width",n.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),!r&&this.hasPopupData&&this._createPopup(),a.append(s)}return this.container.append(a),this.container}getElementsToTriggerPopup(){return this.#Hr}addHighlightArea(){this.container.classList.add("highlightArea")}}class Mi extends gi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Fi extends gi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Bi extends gi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Hi extends gi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ui extends gi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ji extends gi{#Ur=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(100*t.fillAlpha)}%);`)),n.addEventListener("dblclick",this.#jr.bind(this)),this.#Ur=n;const{isMac:r}=rn.platform;return e.addEventListener("keydown",(e=>{"Enter"===e.key&&(r?e.metaKey:e.ctrlKey)&&this.#jr()})),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#Ur}addHighlightArea(){this.container.classList.add("highlightArea")}#jr(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class zi{#zr=null;#Gr=null;#Wr=(()=>new Map)();constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:a}=e;this.div=t,this.#zr=n,this.#Gr=r,this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}#$r(e,t){const n=e.firstChild||e;n.id=`${un}${t}`,this.div.append(e),this.#zr?.moveElementInDOM(this.div,e,n,!1)}async render(e){const{annotations:t}=e,n=this.div;Vn(n,this.viewport);const r=new Map,s={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new Nn,annotationStorage:e.annotationStorage||new hr,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const i of t){if(i.noHTML)continue;const e=i.annotationType===St;if(e){const e=r.get(i.id);if(!e)continue;s.elements=e}else{const{width:e,height:t}=fi(i.rect);if(e<=0||t<=0)continue}s.data=i;const t=mi.create(s);if(!t.isRenderable)continue;if(!e&&i.popupRef){const e=r.get(i.popupRef);e?e.push(t):r.set(i.popupRef,[t])}const n=t.render();i.hidden&&(n.style.visibility="hidden"),this.#$r(n,i.id),t.annotationEditorType>0&&(this.#Wr.set(t.data.id,t),this._annotationEditorUIManager?.renderAnnotationElement(t))}this.#qr()}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,Vn(n,{rotation:t.rotation}),this.#qr(),n.hidden=!1}#qr(){if(!this.#Gr)return;const e=this.div;for(const[t,n]of this.#Gr){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:s}=r;s?"CANVAS"===s.nodeName?s.replaceWith(n):s.classList.contains("annotationContent")?s.after(n):s.before(n):r.append(n)}this.#Gr.clear()}getEditableAnnotations(){return Array.from(this.#Wr.values())}getEditableAnnotation(e){return this.#Wr.get(e)}}const Gi=/\r\n?|\n/g;class Wi extends sr{#Vr=this.editorDivBlur.bind(this);#Yr=this.editorDivFocus.bind(this);#Kr=this.editorDivInput.bind(this);#Xr=this.editorDivKeydown.bind(this);#Qr=this.editorDivPaste.bind(this);#br;#Jr="";#Zr=`${this.id}-editor`;#Rr;#es=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Wi.prototype,t=e=>e.isEmpty(),n=nr.TRANSLATE_SMALL,r=nr.TRANSLATE_BIG;return $t(this,"_keyboardManager",new er([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";static _editorType=(()=>et.FREETEXT)();constructor(e){super({...e,name:"freeTextEditor"}),this.#br=e.color||Wi._defaultColor||sr._defaultLineColor,this.#Rr=e.fontSize||Wi._defaultFontSize}static initialize(e,t){sr.initialize(e,t,{strings:["pdfjs-free-text-default-content"]});const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case tt.FREETEXT_SIZE:Wi._defaultFontSize=t;break;case tt.FREETEXT_COLOR:Wi._defaultColor=t}}updateParams(e,t){switch(e){case tt.FREETEXT_SIZE:this.#ts(t);break;case tt.FREETEXT_COLOR:this.#ns(t)}}static get defaultPropertiesToUpdate(){return[[tt.FREETEXT_SIZE,Wi._defaultFontSize],[tt.FREETEXT_COLOR,Wi._defaultColor||sr._defaultLineColor]]}get propertiesToUpdate(){return[[tt.FREETEXT_SIZE,this.#Rr],[tt.FREETEXT_COLOR,this.#br]]}#ts(e){const t=e=>{this.editorDiv.style.fontSize=`calc(${e}px * var(--scale-factor))`,this.translate(0,-(e-this.#Rr)*this.parentScale),this.#Rr=e,this.#rs()},n=this.#Rr;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:tt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#ns(e){const t=e=>{this.#br=this.editorDiv.style.color=e},n=this.#br;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:tt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Wi._internalPadding*e,-(Wi._internalPadding+this.#Rr)*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(et.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const e=this._uiManager._signal;this.editorDiv.addEventListener("keydown",this.#Xr,{signal:e}),this.editorDiv.addEventListener("focus",this.#Yr,{signal:e}),this.editorDiv.addEventListener("blur",this.#Vr,{signal:e}),this.editorDiv.addEventListener("input",this.#Kr,{signal:e}),this.editorDiv.addEventListener("paste",this.#Qr,{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#Zr),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#Xr),this.editorDiv.removeEventListener("focus",this.#Yr),this.editorDiv.removeEventListener("blur",this.#Vr),this.editorDiv.removeEventListener("input",this.#Kr),this.editorDiv.removeEventListener("paste",this.#Qr),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#ss(){const e=[];this.editorDiv.normalize();for(const t of this.editorDiv.childNodes)e.push(Wi.#is(t));return e.join("\n")}#rs(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,r=t.style.display,s=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=r,t.classList.toggle("hidden",s)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#Jr,t=this.#Jr=this.#ss().trimEnd();if(e===t)return;const n=e=>{this.#Jr=e,e?(this.#as(),this._uiManager.rebuild(this),this.#rs()):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#rs()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Wi._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#Zr),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),sr._l10nPromise.get("pdfjs-free-text-default-content").then((e=>this.editorDiv?.setAttribute("default-content",e))),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#Rr}px * var(--scale-factor))`,n.color=this.#br,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Xn(this,this.div,["dblclick","keydown"]),this.width){const[n,r]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this.#es;let[i,a]=this.getInitialTranslation();[i,a]=this.pageTranslationToScreen(i,a);const[o,l]=this.pageDimensions,[c,u]=this.pageTranslation;let h,d;switch(this.rotation){case 0:h=e+(s[0]-c)/o,d=t+this.height-(s[1]-u)/l;break;case 90:h=e+(s[0]-c)/o,d=t-(s[1]-u)/l,[i,a]=[a,-i];break;case 180:h=e-this.width+(s[0]-c)/o,d=t-(s[1]-u)/l,[i,a]=[-i,-a];break;case 270:h=e+(s[0]-c-this.height*l)/o,d=t+(s[1]-u-this.width*o)/l,[i,a]=[-a,i]}this.setAt(h*n,d*r,i,a)}else this.setAt(e*n,t*r,this.width*n,this.height*r);this.#as(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#is(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Gi,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const r=Wi.#os(t.getData("text")||"").replaceAll(Gi,"\n");if(!r)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const i=s.getRangeAt(0);if(!r.includes("\n"))return i.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),void s.collapseToStart();const{startContainer:a,startOffset:o}=i,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const e=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(Gi,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(Wi.#is(n)):t=c}l.push(a.nodeValue.slice(0,o).replaceAll(Gi,""))}else if(a===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(Wi.#is(n))}this.#Jr=`${l.join("\n")}${r}${c.join("\n")}`,this.#as();const u=new Range;let h=l.reduce(((e,t)=>e+t.length),0);for(const{firstChild:d}of this.editorDiv.childNodes)if(d.nodeType===Node.TEXT_NODE){const e=d.nodeValue.length;if(h<=e){u.setStart(d,h),u.setEnd(d,h);break}h-=e}s.removeAllRanges(),s.addRange(u)}#as(){if(this.editorDiv.replaceChildren(),this.#Jr)for(const e of this.#Jr.split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#ls(){return this.#Jr.replaceAll("\xa0"," ")}static#os(e){return e.replaceAll(" ","\xa0")}get contentDiv(){return this.editorDiv}static deserialize(e,t,n){let r=null;if(e instanceof xi){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:s,rotation:i,id:a},textContent:o,textPosition:l,parent:{page:{pageNumber:c}}}=e;if(!o||0===o.length)return null;r=e={annotationType:et.FREETEXT,color:Array.from(n),fontSize:t,value:o.join("\n"),position:l,pageIndex:c-1,rect:s.slice(0),rotation:i,id:a,deleted:!1}}const s=super.deserialize(e,t,n);return s.#Rr=e.fontSize,s.#br=an.makeHexColor(...e.color),s.#Jr=Wi.#os(e.value),s.annotationElementId=e.id||null,s.#es=r,s}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=Wi._internalPadding*this.parentScale,n=this.getRect(t,t),r=sr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#br),s={annotationType:et.FREETEXT,color:r,fontSize:this.#Rr,value:this.#ls(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!this.#cs(s)?null:(s.id=this.annotationElementId,s)}#cs(e){const{value:t,fontSize:n,color:r,pageIndex:s}=this.#es;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some(((e,t)=>e!==r[t]))||e.pageIndex!==s}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:n}=t;n.fontSize=`calc(${this.#Rr}px * var(--scale-factor))`,n.color=this.#br,t.replaceChildren();for(const s of this.#Jr.split("\n")){const e=document.createElement("div");e.append(s?document.createTextNode(s):document.createElement("br")),t.append(e)}const r=Wi._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:this.#Jr}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class $i{#us;#hs=[];#ds=[];constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=1/0,i=-1/0,a=1/0,o=-1/0;const l=10**-4;for(const{x:m,y:g,width:y,height:b}of e){const e=Math.floor((m-t)/l)*l,n=Math.ceil((m+y+t)/l)*l,r=Math.floor((g-t)/l)*l,c=Math.ceil((g+b+t)/l)*l,u=[e,r,c,!0],h=[n,r,c,!1];this.#hs.push(u,h),s=Math.min(s,e),i=Math.max(i,n),a=Math.min(a,r),o=Math.max(o,c)}const c=i-s+2*n,u=o-a+2*n,h=s-n,d=a-n,p=this.#hs.at(r?-1:-2),f=[p[0],p[2]];for(const m of this.#hs){const[e,t,n]=m;m[0]=(e-h)/c,m[1]=(t-d)/u,m[2]=(n-d)/u}this.#us={x:h,y:d,width:c,height:u,lastPoint:f}}getOutlines(){this.#hs.sort(((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]));const e=[];for(const t of this.#hs)t[3]?(e.push(...this.#ps(t)),this.#fs(t)):(this.#ms(t),e.push(...this.#ps(t)));return this.#gs(e)}#gs(e){const t=[],n=new Set;for(const i of e){const[e,n,r]=i;t.push([e,n,i],[e,r,i])}t.sort(((e,t)=>e[1]-t[1]||e[0]-t[0]));for(let i=0,a=t.length;i<a;i+=2){const e=t[i][2],r=t[i+1][2];e.push(r),r.push(e),n.add(e),n.add(r)}const r=[];let s;for(;n.size>0;){const e=n.values().next().value;let[t,i,a,o,l]=e;n.delete(e);let c=t,u=i;for(s=[t,a],r.push(s);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,i,a,o,l]=e,c!==t&&(s.push(c,u,t,u===i?i:a),c=t),u=u===i?a:i}s.push(c,u)}return new Vi(r,this.#us)}#ys(e){const t=this.#ds;let n=0,r=t.length-1;for(;n<=r;){const s=n+r>>1,i=t[s][0];if(i===e)return s;i<e?n=s+1:r=s-1}return r+1}#fs(e){let[,t,n]=e;const r=this.#ys(t);this.#ds.splice(r,0,[t,n])}#ms(e){let[,t,n]=e;const r=this.#ys(t);for(let s=r;s<this.#ds.length;s++){const[e,r]=this.#ds[s];if(e!==t)break;if(e===t&&r===n)return void this.#ds.splice(s,1)}for(let s=r-1;s>=0;s--){const[e,r]=this.#ds[s];if(e!==t)break;if(e===t&&r===n)return void this.#ds.splice(s,1)}}#ps(e){const[t,n,r]=e,s=[[t,n,r]],i=this.#ys(r);for(let a=0;a<i;a++){const[e,n]=this.#ds[a];for(let r=0,i=s.length;r<i;r++){const[,a,o]=s[r];if(!(n<=a||o<=e))if(a>=e)if(o>n)s[r][1]=n;else{if(1===i)return[];s.splice(r,1),r--,i--}else s[r][2]=e,o>n&&s.push([t,n,o])}}return s}}class qi{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof Ki}}class Vi extends qi{#us;#bs;constructor(e,t){super(),this.#bs=e,this.#us=t}toSVGPath(){const e=[];for(const t of this.#bs){let[n,r]=t;e.push(`M${n} ${r}`);for(let s=2;s<t.length;s+=2){const i=t[s],a=t[s+1];i===n?(e.push(`V${a}`),r=a):a===r&&(e.push(`H${i}`),n=i)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,r,s,i]=e;const a=[],o=s-n,l=i-r;for(const c of this.#bs){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*o,e[t+1]=i-c[t+1]*l;a.push(e)}return a}get box(){return this.#us}}class Yi{#us;#Es=[];#vs;#_s;#Ts=[];#As=(()=>new Float64Array(18))();#ws;#Ss;#ks;#Cs;#xs;#Is;#Ns=[];static#Rs=8;static#Ds=2;static#Ps=(()=>Yi.#Rs+Yi.#Ds)();constructor(e,t,n,r,s){let{x:i,y:a}=e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.#us=t,this.#Is=r*n,this.#_s=s,this.#As.set([NaN,NaN,NaN,NaN,i,a],6),this.#vs=o,this.#Cs=Yi.#Rs*n,this.#ks=Yi.#Ps*n,this.#xs=n,this.#Ns.push(i,a)}get free(){return!0}isEmpty(){return isNaN(this.#As[8])}#Os(){const e=this.#As.subarray(4,6),t=this.#As.subarray(16,18),[n,r,s,i]=this.#us;return[(this.#ws+(e[0]-t[0])/2-n)/s,(this.#Ss+(e[1]-t[1])/2-r)/i,(this.#ws+(t[0]-e[0])/2-n)/s,(this.#Ss+(t[1]-e[1])/2-r)/i]}add(e){let{x:t,y:n}=e;this.#ws=t,this.#Ss=n;const[r,s,i,a]=this.#us;let[o,l,c,u]=this.#As.subarray(8,12);const h=t-c,d=n-u,p=Math.hypot(h,d);if(p<this.#ks)return!1;const f=p-this.#Cs,m=f/p,g=m*h,y=m*d;let b=o,E=l;o=c,l=u,c+=g,u+=y,this.#Ns?.push(t,n);const v=g/f,_=-y/f*this.#Is,T=v*this.#Is;if(this.#As.set(this.#As.subarray(2,8),0),this.#As.set([c+_,u+T],4),this.#As.set(this.#As.subarray(14,18),12),this.#As.set([c-_,u-T],16),isNaN(this.#As[6]))return 0===this.#Ts.length&&(this.#As.set([o+_,l+T],2),this.#Ts.push(NaN,NaN,NaN,NaN,(o+_-r)/i,(l+T-s)/a),this.#As.set([o-_,l-T],14),this.#Es.push(NaN,NaN,NaN,NaN,(o-_-r)/i,(l-T-s)/a)),this.#As.set([b,E,o,l,c,u],6),!this.isEmpty();this.#As.set([b,E,o,l,c,u],6);return Math.abs(Math.atan2(E-l,b-o)-Math.atan2(y,g))<Math.PI/2?([o,l,c,u]=this.#As.subarray(2,6),this.#Ts.push(NaN,NaN,NaN,NaN,((o+c)/2-r)/i,((l+u)/2-s)/a),[o,l,b,E]=this.#As.subarray(14,18),this.#Es.push(NaN,NaN,NaN,NaN,((b+o)/2-r)/i,((E+l)/2-s)/a),!0):([b,E,o,l,c,u]=this.#As.subarray(0,6),this.#Ts.push(((b+5*o)/6-r)/i,((E+5*l)/6-s)/a,((5*o+c)/6-r)/i,((5*l+u)/6-s)/a,((o+c)/2-r)/i,((l+u)/2-s)/a),[c,u,o,l,b,E]=this.#As.subarray(12,18),this.#Es.push(((b+5*o)/6-r)/i,((E+5*l)/6-s)/a,((5*o+c)/6-r)/i,((5*l+u)/6-s)/a,((o+c)/2-r)/i,((l+u)/2-s)/a),!0)}toSVGPath(){if(this.isEmpty())return"";const e=this.#Ts,t=this.#Es,n=this.#As.subarray(4,6),r=this.#As.subarray(16,18),[s,i,a,o]=this.#us,[l,c,u,h]=this.#Os();if(isNaN(this.#As[6])&&!this.isEmpty())return`M${(this.#As[2]-s)/a} ${(this.#As[3]-i)/o} L${(this.#As[4]-s)/a} ${(this.#As[5]-i)/o} L${l} ${c} L${u} ${h} L${(this.#As[16]-s)/a} ${(this.#As[17]-i)/o} L${(this.#As[14]-s)/a} ${(this.#As[15]-i)/o} Z`;const d=[];d.push(`M${e[4]} ${e[5]}`);for(let p=6;p<e.length;p+=6)isNaN(e[p])?d.push(`L${e[p+4]} ${e[p+5]}`):d.push(`C${e[p]} ${e[p+1]} ${e[p+2]} ${e[p+3]} ${e[p+4]} ${e[p+5]}`);d.push(`L${(n[0]-s)/a} ${(n[1]-i)/o} L${l} ${c} L${u} ${h} L${(r[0]-s)/a} ${(r[1]-i)/o}`);for(let p=t.length-6;p>=6;p-=6)isNaN(t[p])?d.push(`L${t[p+4]} ${t[p+5]}`):d.push(`C${t[p]} ${t[p+1]} ${t[p+2]} ${t[p+3]} ${t[p+4]} ${t[p+5]}`);return d.push(`L${t[4]} ${t[5]} Z`),d.join(" ")}getOutlines(){const e=this.#Ts,t=this.#Es,n=this.#As,r=n.subarray(4,6),s=n.subarray(16,18),[i,a,o,l]=this.#us,c=new Float64Array((this.#Ns?.length??0)+2);for(let g=0,y=c.length-2;g<y;g+=2)c[g]=(this.#Ns[g]-i)/o,c[g+1]=(this.#Ns[g+1]-a)/l;c[c.length-2]=(this.#ws-i)/o,c[c.length-1]=(this.#Ss-a)/l;const[u,h,d,p]=this.#Os();if(isNaN(n[6])&&!this.isEmpty()){const e=new Float64Array(36);return e.set([NaN,NaN,NaN,NaN,(n[2]-i)/o,(n[3]-a)/l,NaN,NaN,NaN,NaN,(n[4]-i)/o,(n[5]-a)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(n[16]-i)/o,(n[17]-a)/l,NaN,NaN,NaN,NaN,(n[14]-i)/o,(n[15]-a)/l],0),new Ki(e,c,this.#us,this.#xs,this.#vs,this.#_s)}const f=new Float64Array(this.#Ts.length+24+this.#Es.length);let m=e.length;for(let g=0;g<m;g+=2)isNaN(e[g])?f[g]=f[g+1]=NaN:(f[g]=e[g],f[g+1]=e[g+1]);f.set([NaN,NaN,NaN,NaN,(r[0]-i)/o,(r[1]-a)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(s[0]-i)/o,(s[1]-a)/l],m),m+=24;for(let g=t.length-6;g>=6;g-=6)for(let e=0;e<6;e+=2)isNaN(t[g+e])?(f[m]=f[m+1]=NaN,m+=2):(f[m]=t[g+e],f[m+1]=t[g+e+1],m+=2);return f.set([NaN,NaN,NaN,NaN,t[4],t[5]],m),new Ki(f,c,this.#us,this.#xs,this.#vs,this.#_s)}}class Ki extends qi{#us;#Ls=null;#vs;#_s;#Ns;#xs;#Ms;constructor(e,t,n,r,s,i){super(),this.#Ms=e,this.#Ns=t,this.#us=n,this.#xs=r,this.#vs=s,this.#_s=i,this.#Fs(i);const{x:a,y:o,width:l,height:c}=this.#Ls;for(let u=0,h=e.length;u<h;u+=2)e[u]=(e[u]-a)/l,e[u+1]=(e[u+1]-o)/c;for(let u=0,h=t.length;u<h;u+=2)t[u]=(t[u]-a)/l,t[u+1]=(t[u+1]-o)/c}toSVGPath(){const e=[`M${this.#Ms[4]} ${this.#Ms[5]}`];for(let t=6,n=this.#Ms.length;t<n;t+=6)isNaN(this.#Ms[t])?e.push(`L${this.#Ms[t+4]} ${this.#Ms[t+5]}`):e.push(`C${this.#Ms[t]} ${this.#Ms[t+1]} ${this.#Ms[t+2]} ${this.#Ms[t+3]} ${this.#Ms[t+4]} ${this.#Ms[t+5]}`);return e.push("Z"),e.join(" ")}serialize(e,t){let[n,r,s,i]=e;const a=s-n,o=i-r;let l,c;switch(t){case 0:l=this.#Bs(this.#Ms,n,i,a,-o),c=this.#Bs(this.#Ns,n,i,a,-o);break;case 90:l=this.#Hs(this.#Ms,n,r,a,o),c=this.#Hs(this.#Ns,n,r,a,o);break;case 180:l=this.#Bs(this.#Ms,s,r,-a,o),c=this.#Bs(this.#Ns,s,r,-a,o);break;case 270:l=this.#Hs(this.#Ms,s,i,-a,-o),c=this.#Hs(this.#Ns,s,i,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}#Bs(e,t,n,r,s){const i=new Float64Array(e.length);for(let a=0,o=e.length;a<o;a+=2)i[a]=t+e[a]*r,i[a+1]=n+e[a+1]*s;return i}#Hs(e,t,n,r,s){const i=new Float64Array(e.length);for(let a=0,o=e.length;a<o;a+=2)i[a]=t+e[a+1]*r,i[a+1]=n+e[a]*s;return i}#Fs(e){const t=this.#Ms;let n=t[4],r=t[5],s=n,i=r,a=n,o=r,l=n,c=r;const u=e?Math.max:Math.min;for(let m=6,g=t.length;m<g;m+=6){if(isNaN(t[m]))s=Math.min(s,t[m+4]),i=Math.min(i,t[m+5]),a=Math.max(a,t[m+4]),o=Math.max(o,t[m+5]),c<t[m+5]?(l=t[m+4],c=t[m+5]):c===t[m+5]&&(l=u(l,t[m+4]));else{const e=an.bezierBoundingBox(n,r,...t.slice(m,m+6));s=Math.min(s,e[0]),i=Math.min(i,e[1]),a=Math.max(a,e[2]),o=Math.max(o,e[3]),c<e[3]?(l=e[2],c=e[3]):c===e[3]&&(l=u(l,e[2]))}n=t[m+4],r=t[m+5]}const h=s-this.#vs,d=i-this.#vs,p=a-s+2*this.#vs,f=o-i+2*this.#vs;this.#Ls={x:h,y:d,width:p,height:f,lastPoint:[l,c]}}get box(){return this.#Ls}getNewOutline(e,t){const{x:n,y:r,width:s,height:i}=this.#Ls,[a,o,l,c]=this.#us,u=s*l,h=i*c,d=n*l+a,p=r*c+o,f=new Yi({x:this.#Ns[0]*u+d,y:this.#Ns[1]*h+p},this.#us,this.#xs,e,this.#_s,t??this.#vs);for(let m=2;m<this.#Ns.length;m+=2)f.add({x:this.#Ns[m]*u+d,y:this.#Ns[m+1]*h+p});return f.getOutlines()}}class Xi{#ur=this.#hr.bind(this);#Us=this.#o.bind(this);#js=null;#zs=null;#Gs;#Ws=null;#$s=!1;#qs=!1;#i=null;#Vs;#p=null;#Ys;static get _keyboardManager(){return $t(this,"_keyboardManager",new er([[["Escape","mac+Escape"],Xi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Xi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Xi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Xi.prototype._moveToPrevious],[["Home","mac+Home"],Xi.prototype._moveToBeginning],[["End","mac+End"],Xi.prototype._moveToEnd]]))}constructor(e){let{editor:t=null,uiManager:n=null}=e;t?(this.#qs=!1,this.#Ys=tt.HIGHLIGHT_COLOR,this.#i=t):(this.#qs=!0,this.#Ys=tt.HIGHLIGHT_DEFAULT_COLOR),this.#p=t?._uiManager||n,this.#Vs=this.#p._eventBus,this.#Gs=t?.color||this.#p?.highlightColors.values().next().value||"#FFFF98"}renderButton(){const e=this.#js=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#p._signal;e.addEventListener("click",this.#Ks.bind(this),{signal:t}),e.addEventListener("keydown",this.#ur,{signal:t});const n=this.#zs=document.createElement("span");return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=this.#Gs,e.append(n),e}renderMainDropdown(){const e=this.#Ws=this.#Xs();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#Xs(){const e=document.createElement("div"),t=this.#p._signal;e.addEventListener("contextmenu",Hn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of this.#p.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=n,s.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${n}`);const i=document.createElement("span");s.append(i),i.className="swatch",i.style.backgroundColor=r,s.setAttribute("aria-selected",r===this.#Gs),s.addEventListener("click",this.#Qs.bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",this.#ur,{signal:t}),e}#Qs(e,t){t.stopPropagation(),this.#Vs.dispatch("switchannotationeditorparams",{source:this,type:this.#Ys,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#js)return void this.#Ks(e);const t=e.target.getAttribute("data-color");t&&this.#Qs(t,e)}_moveToNext(e){this.#Js?e.target!==this.#js?e.target.nextSibling?.focus():this.#Ws.firstChild?.focus():this.#Ks(e)}_moveToPrevious(e){e.target!==this.#Ws?.firstChild&&e.target!==this.#js?(this.#Js||this.#Ks(e),e.target.previousSibling?.focus()):this.#Js&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){this.#Js?this.#Ws.firstChild?.focus():this.#Ks(e)}_moveToEnd(e){this.#Js?this.#Ws.lastChild?.focus():this.#Ks(e)}#hr(e){Xi._keyboardManager.exec(this,e)}#Ks(e){if(this.#Js)return void this.hideDropdown();if(this.#$s=0===e.detail,window.addEventListener("pointerdown",this.#Us,{signal:this.#p._signal}),this.#Ws)return void this.#Ws.classList.remove("hidden");const t=this.#Ws=this.#Xs();this.#js.append(t)}#o(e){this.#Ws?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#Ws?.classList.add("hidden"),window.removeEventListener("pointerdown",this.#Us)}get#Js(){return this.#Ws&&!this.#Ws.classList.contains("hidden")}_hideDropdownFromKeyboard(){this.#qs||(this.#Js?(this.hideDropdown(),this.#js.focus({preventScroll:!0,focusVisible:this.#$s})):this.#i?.unselect())}updateColor(e){if(this.#zs&&(this.#zs.style.backgroundColor=e),!this.#Ws)return;const t=this.#p.highlightColors.values();for(const n of this.#Ws.children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#js?.remove(),this.#js=null,this.#zs=null,this.#Ws?.remove(),this.#Ws=null}}class Qi extends sr{#Zs=null;#ei=0;#ti;#ni=null;#s=null;#ri=null;#si=null;#ii=0;#ai=null;#oi=null;#y=null;#li=!1;#oe=this.#ci.bind(this);#ui=null;#hi;#di=null;#pi="";#Is;#fi="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _l10nPromise;static _type="highlight";static _editorType=(()=>et.HIGHLIGHT)();static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Qi.prototype;return $t(this,"_keyboardManager",new er([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Qi._defaultColor,this.#Is=e.thickness||Qi._defaultThickness,this.#hi=e.opacity||Qi._defaultOpacity,this.#ti=e.boxes||null,this.#fi=e.methodOfCreation||"",this.#pi=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#li=!0,this.#mi(e),this.#gi()):(this.#Zs=e.anchorNode,this.#ei=e.anchorOffset,this.#si=e.focusNode,this.#ii=e.focusOffset,this.#yi(),this.#gi(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#li?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#Is,methodOfCreation:this.#fi}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#yi(){const e=new $i(this.#ti,.001);this.#oi=e.getOutlines(),({x:this.x,y:this.y,width:this.width,height:this.height}=this.#oi.box);const t=new $i(this.#ti,.0025,.001,"ltr"===this._uiManager.direction);this.#ri=t.getOutlines();const{lastPoint:n}=this.#ri.box;this.#ui=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#mi(e){let{highlightOutlines:t,highlightId:n,clipPathId:r}=e;this.#oi=t;if(this.#ri=t.getNewOutline(this.#Is/2+1.5,.0025),n>=0)this.#y=n,this.#ni=r,this.parent.drawLayer.finalizeLine(n,t),this.#di=this.parent.drawLayer.highlightOutline(this.#ri);else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#y,t),this.parent.drawLayer.updateBox(this.#y,Qi.#bi(this.#oi.box,(e-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#di,this.#ri),this.parent.drawLayer.updateBox(this.#di,Qi.#bi(this.#ri.box,e))}const{x:s,y:i,width:a,height:o}=t.box;switch(this.rotation){case 0:this.x=s,this.y=i,this.width=a,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=i,this.y=1-s,this.width=a*t/e,this.height=o*e/t;break}case 180:this.x=1-s,this.y=1-i,this.width=a,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-i,this.y=s,this.width=a*t/e,this.height=o*e/t;break}}const{lastPoint:l}=this.#ri.box;this.#ui=[(l[0]-s)/a,(l[1]-i)/o]}static initialize(e,t){sr.initialize(e,t),Qi._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case tt.HIGHLIGHT_DEFAULT_COLOR:Qi._defaultColor=t;break;case tt.HIGHLIGHT_THICKNESS:Qi._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return this.#ui}updateParams(e,t){switch(e){case tt.HIGHLIGHT_COLOR:this.#ns(t);break;case tt.HIGHLIGHT_THICKNESS:this.#Ei(t)}}static get defaultPropertiesToUpdate(){return[[tt.HIGHLIGHT_DEFAULT_COLOR,Qi._defaultColor],[tt.HIGHLIGHT_THICKNESS,Qi._defaultThickness]]}get propertiesToUpdate(){return[[tt.HIGHLIGHT_COLOR,this.color||Qi._defaultColor],[tt.HIGHLIGHT_THICKNESS,this.#Is||Qi._defaultThickness],[tt.HIGHLIGHT_FREE,this.#li]]}#ns(e){const t=e=>{this.color=e,this.parent?.drawLayer.changeColor(this.#y,e),this.#s?.updateColor(e)},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:tt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#Ei(e){const t=this.#Is,n=e=>{this.#Is=e,this.#vi(e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:tt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(this.#s=new Xi({editor:this}),e.addColorPicker(this.#s)),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#_i())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#_i())}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#Ti(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#gi(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#Ti():e&&(this.#gi(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#vi(e){if(!this.#li)return;this.#mi({highlightOutlines:this.#oi.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}#Ti(){null!==this.#y&&this.parent&&(this.parent.drawLayer.remove(this.#y),this.#y=null,this.parent.drawLayer.remove(this.#di),this.#di=null)}#gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===this.#y&&(({id:this.#y,clipPathId:this.#ni}=e.drawLayer.highlight(this.#oi,this.color,this.#hi)),this.#di=e.drawLayer.highlightOutline(this.#ri),this.#ai&&(this.#ai.style.clipPath=this.#ni))}static#bi(e,t){let{x:n,y:r,width:s,height:i}=e;switch(t){case 90:return{x:1-r-i,y:n,width:i,height:s};case 180:return{x:1-n-s,y:1-r-i,width:s,height:i};case 270:return{x:r,y:1-n-s,width:i,height:s}}return{x:n,y:r,width:s,height:i}}rotate(e){const{drawLayer:t}=this.parent;let n;this.#li?(e=(e-this.rotation+360)%360,n=Qi.#bi(this.#oi.box,e)):n=Qi.#bi(this,e),t.rotate(this.#y,e),t.rotate(this.#di,e),t.updateBox(this.#y,n),t.updateBox(this.#di,Qi.#bi(this.#ri.box,e))}render(){if(this.div)return this.div;const e=super.render();this.#pi&&(e.setAttribute("aria-label",this.#pi),e.setAttribute("role","mark")),this.#li?e.classList.add("free"):this.div.addEventListener("keydown",this.#oe,{signal:this._uiManager._signal});const t=this.#ai=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#ni;const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),Xn(this,this.#ai,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(this.#di,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#di,"hovered")}#ci(e){Qi._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#Ai(!0);break;case 1:case 3:this.#Ai(!1)}}#Ai(e){if(!this.#Zs)return;const t=window.getSelection();e?t.setPosition(this.#Zs,this.#ei):t.setPosition(this.#si,this.#ii)}select(){super.select(),this.#di&&(this.parent?.drawLayer.removeClass(this.#di,"hovered"),this.parent?.drawLayer.addClass(this.#di,"selected"))}unselect(){super.unselect(),this.#di&&(this.parent?.drawLayer.removeClass(this.#di,"selected"),this.#li||this.#Ai(!1))}get _mustFixPosition(){return!this.#li}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.show(this.#y,e),this.parent.drawLayer.show(this.#di,e))}#_i(){return this.#li?this.rotation:0}#wi(){if(this.#li)return null;const[e,t]=this.pageDimensions,n=this.#ti,r=new Float32Array(8*n.length);let s=0;for(const{x:i,y:a,width:o,height:l}of n){const n=i*e,c=(1-a-l)*t;r[s]=r[s+4]=n,r[s+1]=r[s+3]=c,r[s+2]=r[s+6]=n+o*e,r[s+5]=r[s+7]=c+l*t,s+=8}return r}#Si(e){return this.#oi.serialize(e,this.#_i())}static startHighlighting(e,t,n){let{target:r,x:s,y:i}=n;const{x:a,y:o,width:l,height:c}=r.getBoundingClientRect(),u=t=>{this.#ki(e,t)},h=e._signal,d={capture:!0,passive:!1,signal:h},p=e=>{e.preventDefault(),e.stopPropagation()},f=t=>{r.removeEventListener("pointermove",u),window.removeEventListener("blur",f),window.removeEventListener("pointerup",f),window.removeEventListener("pointerdown",p,d),window.removeEventListener("contextmenu",Hn),this.#Ci(e,t)};window.addEventListener("blur",f,{signal:h}),window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("pointerdown",p,d),window.addEventListener("contextmenu",Hn,{signal:h}),r.addEventListener("pointermove",u,{signal:h}),this._freeHighlight=new Yi({x:s,y:i},[a,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static#ki(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#Ci(e,t){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,t,n){const r=super.deserialize(e,t,n),{rect:[s,i,a,o],color:l,quadPoints:c}=e;r.color=an.makeHexColor(...l),r.#hi=e.opacity;const[u,h]=r.pageDimensions;r.width=(a-s)/u,r.height=(o-i)/h;const d=r.#ti=[];for(let p=0;p<c.length;p+=8)d.push({x:(c[4]-a)/u,y:(o-(1-c[p+5]))/h,width:(c[p+2]-c[p])/u,height:(c[p+5]-c[p+1])/h});return r.#yi(),r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;const t=this.getRect(0,0),n=sr._colorManager.convert(this.color);return{annotationType:et.HIGHLIGHT,color:n,opacity:this.#hi,thickness:this.#Is,quadPoints:this.#wi(),outlines:this.#Si(t),pageIndex:this.pageIndex,rect:t,rotation:this.#_i(),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}class Ji extends sr{#xi=0;#Ii=0;#Ni=this.canvasPointermove.bind(this);#Ri=this.canvasPointerleave.bind(this);#Di=this.canvasPointerup.bind(this);#Pi=this.canvasPointerdown.bind(this);#Oi=null;#Li=(()=>new Path2D)();#Mi=!1;#Fi=!1;#Bi=!1;#Hi=null;#Ui=0;#ji=0;#zi=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=(()=>et.INK)();constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){sr.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case tt.INK_THICKNESS:Ji._defaultThickness=t;break;case tt.INK_COLOR:Ji._defaultColor=t;break;case tt.INK_OPACITY:Ji._defaultOpacity=t/100}}updateParams(e,t){switch(e){case tt.INK_THICKNESS:this.#Ei(t);break;case tt.INK_COLOR:this.#ns(t);break;case tt.INK_OPACITY:this.#Gi(t)}}static get defaultPropertiesToUpdate(){return[[tt.INK_THICKNESS,Ji._defaultThickness],[tt.INK_COLOR,Ji._defaultColor||sr._defaultLineColor],[tt.INK_OPACITY,Math.round(100*Ji._defaultOpacity)]]}get propertiesToUpdate(){return[[tt.INK_THICKNESS,this.thickness||Ji._defaultThickness],[tt.INK_COLOR,this.color||Ji._defaultColor||sr._defaultLineColor],[tt.INK_OPACITY,Math.round(100*(this.opacity??Ji._defaultOpacity))]]}#Ei(e){const t=e=>{this.thickness=e,this.#Wi()},n=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:tt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#ns(e){const t=e=>{this.color=e,this.#$i()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:tt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#Gi(e){const t=e=>{this.opacity=e,this.#$i()};e/=100;const n=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:tt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#qi(),this.#Vi()),this.isAttachedToDOM||(this.parent.add(this),this.#Yi()),this.#Wi()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#Oi&&(clearTimeout(this.#Oi),this.#Oi=null),this.#Hi?.disconnect(),this.#Hi=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,n=this.width*e,r=this.height*t;this.setDimensions(n,r)}enableEditMode(){this.#Mi||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#Pi,{signal:this._uiManager._signal}))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#Pi))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#Ki(){const{parentRotation:e,parentDimensions:[t,n]}=this;switch(e){case 90:return[0,n,n,t];case 180:return[t,n,t,n];case 270:return[t,0,n,t];default:return[0,0,t,n]}}#Xi(){const{ctx:e,color:t,opacity:n,thickness:r,parentScale:s,scaleFactor:i}=this;e.lineWidth=r*s/i,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${function(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")}(n)}`}#Qi(e,t){const n=this._uiManager._signal;this.canvas.addEventListener("contextmenu",Hn,{signal:n}),this.canvas.addEventListener("pointerleave",this.#Ri,{signal:n}),this.canvas.addEventListener("pointermove",this.#Ni,{signal:n}),this.canvas.addEventListener("pointerup",this.#Di,{signal:n}),this.canvas.removeEventListener("pointerdown",this.#Pi),this.isEditing=!0,this.#Bi||(this.#Bi=!0,this.#Yi(),this.thickness||=Ji._defaultThickness,this.color||=Ji._defaultColor||sr._defaultLineColor,this.opacity??=Ji._defaultOpacity),this.currentPath.push([e,t]),this.#Fi=!1,this.#Xi(),this.#zi=()=>{this.#Ji(),this.#zi&&window.requestAnimationFrame(this.#zi)},window.requestAnimationFrame(this.#zi)}#Zi(e,t){const[n,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&t===r)return;const s=this.currentPath;let i=this.#Li;if(s.push([e,t]),this.#Fi=!0,s.length<=2)return i.moveTo(...s[0]),void i.lineTo(e,t);3===s.length&&(this.#Li=i=new Path2D,i.moveTo(...s[0])),this.#ea(i,...s.at(-3),...s.at(-2),e,t)}#ta(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);this.#Li.lineTo(...e)}#na(e,t){let n;if(this.#zi=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#Zi(e,t),this.#ta(),1!==this.currentPath.length)n=this.#ra();else{const r=[e,t];n=[[r,r.slice(),r.slice(),r]]}const r=this.#Li,s=this.currentPath;this.currentPath=[],this.#Li=new Path2D;this.addCommands({cmd:()=>{this.allRawPaths.push(s),this.paths.push(n),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#qi(),this.#Vi()),this.#Wi())},mustExec:!0})}#Ji(){if(!this.#Fi)return;this.#Fi=!1;const e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),n=t.map((e=>e[0])),r=t.map((e=>e[1])),{ctx:s}=(Math.min(...n),Math.max(...n),Math.min(...r),Math.max(...r),this);s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height);for(const i of this.bezierPath2D)s.stroke(i);s.stroke(this.#Li),s.restore()}#ea(e,t,n,r,s,i,a){const o=(t+r)/2,l=(n+s)/2,c=(r+i)/2,u=(s+a)/2;e.bezierCurveTo(o+2*(r-o)/3,l+2*(s-l)/3,c+2*(r-c)/3,u+2*(s-u)/3,c,u)}#ra(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let n,[r,s]=e[0];for(n=1;n<e.length-2;n++){const[i,a]=e[n],[o,l]=e[n+1],c=(i+o)/2,u=(a+l)/2,h=[r+2*(i-r)/3,s+2*(a-s)/3],d=[c+2*(i-c)/3,u+2*(a-u)/3];t.push([[r,s],h,d,[c,u]]),[r,s]=[c,u]}const[i,a]=e[n],[o,l]=e[n+1],c=[r+2*(i-r)/3,s+2*(a-s)/3],u=[o+2*(i-o)/3,l+2*(a-l)/3];return t.push([[r,s],c,u,[o,l]]),t}#$i(){if(this.isEmpty())return void this.#sa();this.#Xi();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#sa();for(const n of this.bezierPath2D)t.stroke(n)}commit(){this.#Mi||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#Mi=!0,this.div.classList.add("disabled"),this.#Wi(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){0===e.button&&this.isInEditMode()&&!this.#Mi&&(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#Qi(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#Zi(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#ia(e)}canvasPointerleave(e){this.#ia(e)}#ia(e){this.canvas.removeEventListener("pointerleave",this.#Ri),this.canvas.removeEventListener("pointermove",this.#Ni),this.canvas.removeEventListener("pointerup",this.#Di),this.canvas.addEventListener("pointerdown",this.#Pi,{signal:this._uiManager._signal}),this.#Oi&&clearTimeout(this.#Oi),this.#Oi=setTimeout((()=>{this.#Oi=null,this.canvas.removeEventListener("contextmenu",Hn)}),10),this.#na(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#qi(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#Vi(){this.#Hi=new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)})),this.#Hi.observe(this.div),this._uiManager._signal.addEventListener("abort",(()=>{this.#Hi?.disconnect(),this.#Hi=null}),{once:!0})}get isResizable(){return!this.isEmpty()&&this.#Mi}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,r,s,i]=this.#Ki();if(this.setAt(n,r,0,0),this.setDims(s,i),this.#qi(),this.width){const[n,r]=this.parentDimensions;this.setAspectRatio(this.width*n,this.height*r),this.setAt(e*n,t*r,this.width*n,this.height*r),this.#Bi=!0,this.#Yi(),this.setDims(this.width*n,this.height*r),this.#$i(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#Vi(),this.div}#Yi(){if(!this.#Bi)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#sa()}setDimensions(e,t){const n=Math.round(e),r=Math.round(t);if(this.#Ui===n&&this.#ji===r)return;this.#Ui=n,this.#ji=r,this.canvas.style.visibility="hidden";const[s,i]=this.parentDimensions;this.width=e/s,this.height=t/i,this.fixAndSetPosition(),this.#Mi&&this.#aa(e,t),this.#Yi(),this.#$i(),this.canvas.style.visibility="visible",this.fixDims()}#aa(e,t){const n=this.#oa(),r=(e-n)/this.#Ii,s=(t-n)/this.#xi;this.scaleFactor=Math.min(r,s)}#sa(){const e=this.#oa()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#la(e){const t=new Path2D;for(let n=0,r=e.length;n<r;n++){const[r,s,i,a]=e[n];0===n&&t.moveTo(...r),t.bezierCurveTo(s[0],s[1],i[0],i[1],a[0],a[1])}return t}static#ca(e,t,n){const[r,s,i,a]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]+=r,e[t+1]=a-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]+r,e[t+1]=n+s}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=i-e[t],e[t+1]+=s;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=i-e[t+1],e[t+1]=a-n}break;default:throw new Error("Invalid rotation")}return e}static#ua(e,t,n){const[r,s,i,a]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]-=r,e[t+1]=a-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]-s,e[t+1]=n-r}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=i-e[t],e[t+1]-=s;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=a-e[t+1],e[t+1]=i-n}break;default:throw new Error("Invalid rotation")}return e}#ha(e,t,n,r){const s=[],i=this.thickness/2,a=e*t+i,o=e*n+i;for(const l of this.paths){const t=[],n=[];for(let r=0,s=l.length;r<s;r++){const[i,c,u,h]=l[r];if(i[0]===h[0]&&i[1]===h[1]&&1===s){const r=e*i[0]+a,s=e*i[1]+o;t.push(r,s),n.push(r,s);break}const d=e*i[0]+a,p=e*i[1]+o,f=e*c[0]+a,m=e*c[1]+o,g=e*u[0]+a,y=e*u[1]+o,b=e*h[0]+a,E=e*h[1]+o;0===r&&(t.push(d,p),n.push(d,p)),t.push(f,m,g,y,b,E),n.push(f,m),r===s-1&&n.push(b,E)}s.push({bezier:Ji.#ca(t,r,this.rotation),points:Ji.#ca(n,r,this.rotation)})}return s}#da(){let e=1/0,t=-1/0,n=1/0,r=-1/0;for(const s of this.paths)for(const[i,a,o,l]of s){const s=an.bezierBoundingBox(...i,...a,...o,...l);e=Math.min(e,s[0]),n=Math.min(n,s[1]),t=Math.max(t,s[2]),r=Math.max(r,s[3])}return[e,n,t,r]}#oa(){return this.#Mi?Math.ceil(this.thickness*this.parentScale):0}#Wi(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!this.#Mi)return void this.#$i();const t=this.#da(),n=this.#oa();this.#Ii=Math.max(sr.MIN_SIZE,t[2]-t[0]),this.#xi=Math.max(sr.MIN_SIZE,t[3]-t[1]);const r=Math.ceil(n+this.#Ii*this.scaleFactor),s=Math.ceil(n+this.#xi*this.scaleFactor),[i,a]=this.parentDimensions;this.width=r/i,this.height=s/a,this.setAspectRatio(r,s);const o=this.translationX,l=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#Yi(),this.#$i(),this.#Ui=r,this.#ji=s,this.setDims(r,s);const c=e?n/this.scaleFactor/2:0;this.translate(o-this.translationX-c,l-this.translationY-c)}static deserialize(e,t,n){if(e instanceof Li)return null;const r=super.deserialize(e,t,n);r.thickness=e.thickness,r.color=an.makeHexColor(...e.color),r.opacity=e.opacity;const[s,i]=r.pageDimensions,a=r.width*s,o=r.height*i,l=r.parentScale,c=e.thickness/2;r.#Mi=!0,r.#Ui=Math.round(a),r.#ji=Math.round(o);const{paths:u,rect:h,rotation:d}=e;for(let{bezier:f}of u){f=Ji.#ua(f,h,d);const e=[];r.paths.push(e);let t=l*(f[0]-c),n=l*(f[1]-c);for(let r=2,i=f.length;r<i;r+=6){const s=l*(f[r]-c),i=l*(f[r+1]-c),a=l*(f[r+2]-c),o=l*(f[r+3]-c),u=l*(f[r+4]-c),h=l*(f[r+5]-c);e.push([[t,n],[s,i],[a,o],[u,h]]),t=u,n=h}const s=this.#la(e);r.bezierPath2D.push(s)}const p=r.#da();return r.#Ii=Math.max(sr.MIN_SIZE,p[2]-p[0]),r.#xi=Math.max(sr.MIN_SIZE,p[3]-p[1]),r.#aa(a,o),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=sr._colorManager.convert(this.ctx.strokeStyle);return{annotationType:et.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#ha(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class Zi extends sr{#pa=null;#fa=null;#ma=null;#ga=null;#ya=null;#ba="";#Ea=null;#Hi=null;#va=null;#_a=!1;#Ta=!1;static _type="stamp";static _editorType=(()=>et.STAMP)();constructor(e){super({...e,name:"stampEditor"}),this.#ga=e.bitmapUrl,this.#ya=e.bitmapFile}static initialize(e,t){sr.initialize(e,t)}static get supportedTypes(){return $t(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((e=>`image/${e}`)))}static get supportedTypesStr(){return $t(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(et.STAMP,{bitmapFile:e.getAsFile()})}#Aa(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(this.#pa=e.bitmap,t||(this.#fa=e.id,this.#_a=e.isSvg),e.file&&(this.#ba=e.file.name),this.#qi()):this.remove()}#wa(){this.#ma=null,this._uiManager.enableWaiting(!1),this.#Ea&&this.div.focus()}#Sa(){if(this.#fa)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#fa).then((e=>this.#Aa(e,!0))).finally((()=>this.#wa()));if(this.#ga){const e=this.#ga;return this.#ga=null,this._uiManager.enableWaiting(!0),void(this.#ma=this._uiManager.imageManager.getFromUrl(e).then((e=>this.#Aa(e))).finally((()=>this.#wa())))}if(this.#ya){const e=this.#ya;return this.#ya=null,this._uiManager.enableWaiting(!0),void(this.#ma=this._uiManager.imageManager.getFromFile(e).then((e=>this.#Aa(e))).finally((()=>this.#wa())))}const e=document.createElement("input");e.type="file",e.accept=Zi.supportedTypesStr;const t=this._uiManager._signal;this.#ma=new Promise((n=>{e.addEventListener("change",(async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this.#Aa(t)}else this.remove();n()}),{signal:t}),e.addEventListener("cancel",(()=>{this.remove(),n()}),{signal:t})})).finally((()=>this.#wa())),e.click()}remove(){this.#fa&&(this.#pa=null,this._uiManager.imageManager.deleteId(this.#fa),this.#Ea?.remove(),this.#Ea=null,this.#Hi?.disconnect(),this.#Hi=null,this.#va&&(clearTimeout(this.#va),this.#va=null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#fa&&null===this.#Ea&&this.#Sa(),this.isAttachedToDOM||this.parent.add(this))):this.#fa&&this.#Sa()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#ma||this.#pa||this.#ga||this.#ya||this.#fa)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#pa?this.#qi():this.#Sa(),this.width){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r)}return this.div}#qi(){const{div:e}=this;let{width:t,height:n}=this.#pa;const[r,s]=this.pageDimensions,i=.75;if(this.width)t=this.width*r,n=this.height*s;else if(t>i*r||n>i*s){const e=Math.min(i*r/t,i*s/n);t*=e,n*=e}const[a,o]=this.parentDimensions;this.setDims(t*a/r,n*o/s),this._uiManager.enableWaiting(!1);const l=this.#Ea=document.createElement("canvas");e.append(l),e.hidden=!1,this.#ka(t,n),this.#Vi(),this.#Ta||(this.parent.addUndoableEditor(this),this.#Ta=!0),this._reportTelemetry({action:"inserted_image"}),this.#ba&&l.setAttribute("aria-label",this.#ba)}#Ca(e,t){const[n,r]=this.parentDimensions;this.width=e/n,this.height=t/r,this.setDims(e,t),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#va&&clearTimeout(this.#va);this.#va=setTimeout((()=>{this.#va=null,this.#ka(e,t)}),200)}#xa(e,t){const{width:n,height:r}=this.#pa;let s=n,i=r,a=this.#pa;for(;s>2*e||i>2*t;){const n=s,r=i;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),i>2*t&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2));const o=new OffscreenCanvas(s,i);o.getContext("2d").drawImage(a,0,0,n,r,0,0,s,i),a=o.transferToImageBitmap()}return a}#ka(e,t){e=Math.ceil(e),t=Math.ceil(t);const n=this.#Ea;if(!n||n.width===e&&n.height===t)return;n.width=e,n.height=t;const r=this.#_a?this.#pa:this.#xa(e,t);if(this._uiManager.hasMLManager&&!this.hasAltText()){const n=new OffscreenCanvas(e,t).getContext("2d");n.drawImage(r,0,0,r.width,r.height,0,0,e,t),this._uiManager.mlGuess({service:"image-to-text",request:{data:n.getImageData(0,0,e,t).data,width:e,height:t,channels:4}}).then((e=>{const t=e?.output||"";this.parent&&t&&!this.hasAltText()&&(this.altTextData={altText:t,decorative:!1})}))}const s=n.getContext("2d");s.filter=this._uiManager.hcmFilter,s.drawImage(r,0,0,r.width,r.height,0,0,e,t)}getImageForAltText(){return this.#Ea}#Ia(e){if(e){if(this.#_a){const e=this._uiManager.imageManager.getSvgUrl(this.#fa);if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=this.#pa);return e.getContext("2d").drawImage(this.#pa,0,0),e.toDataURL()}if(this.#_a){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*kn.PDF_TO_CSS_UNITS),r=Math.round(this.height*t*kn.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(n,r);return s.getContext("2d").drawImage(this.#pa,0,0,this.#pa.width,this.#pa.height,0,0,n,r),s.transferToImageBitmap()}return structuredClone(this.#pa)}#Vi(){this._uiManager._signal&&(this.#Hi=new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&this.#Ca(t.width,t.height)})),this.#Hi.observe(this.div),this._uiManager._signal.addEventListener("abort",(()=>{this.#Hi?.disconnect(),this.#Hi=null}),{once:!0}))}static deserialize(e,t,n){if(e instanceof Ui)return null;const r=super.deserialize(e,t,n),{rect:s,bitmapUrl:i,bitmapId:a,isSvg:o,accessibilityData:l}=e;a&&n.imageManager.isValidId(a)?r.#fa=a:r.#ga=i,r.#_a=o;const[c,u]=r.pageDimensions;return r.width=(s[2]-s[0])/c,r.height=(s[3]-s[1])/u,l&&(r.altTextData=l),r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;const n={annotationType:et.STAMP,bitmapId:this.#fa,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#_a,structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=this.#Ia(!0),n.accessibilityData=this.altTextData,n;const{decorative:r,altText:s}=this.altTextData;if(!r&&s&&(n.accessibilityData={type:"Figure",alt:s}),null===t)return n;t.stamps||=new Map;const i=this.#_a?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(this.#fa)){if(this.#_a){const e=t.stamps.get(this.#fa);i>e.area&&(e.area=i,e.serialized.bitmap.close(),e.serialized.bitmap=this.#Ia(!1))}}else t.stamps.set(this.#fa,{area:i,serialized:n}),n.bitmap=this.#Ia(!1);return n}}class ea{#zr;#Na=!1;#Ra=null;#Da=null;#Pa=null;#Oa=null;#La=null;#Ma=(()=>new Map)();#Fa=!1;#Ba=!1;#Ha=!1;#Ua=null;#p;static _initialized=!1;static#F=(()=>new Map([Wi,Ji,Zi,Qi].map((e=>[e._editorType,e]))))();constructor(e){let{uiManager:t,pageIndex:n,div:r,accessibilityManager:s,annotationLayer:i,drawLayer:a,textLayer:o,viewport:l,l10n:c}=e;const u=[...ea.#F.values()];if(!ea._initialized){ea._initialized=!0;for(const e of u)e.initialize(c,t)}t.registerEditorTypes(u),this.#p=t,this.pageIndex=n,this.div=r,this.#zr=s,this.#Ra=i,this.viewport=l,this.#Ua=o,this.drawLayer=a,this.#p.addLayer(this)}get isEmpty(){return 0===this.#Ma.size}get isInvisible(){return this.isEmpty&&this.#p.getMode()===et.NONE}updateToolbar(e){this.#p.updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.#p.getMode();switch(this.#ja(),e){case et.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case et.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case et.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of ea.#F.values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#Ua?.div}addInkEditorIfNeeded(e){if(this.#p.getMode()!==et.INK)return;if(!e)for(const t of this.#Ma.values())if(t.isEmpty())return void t.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){this.#p.setEditingState(e)}addCommands(e){this.#p.addCommands(e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#Ra?.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of this.#Ma.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#p.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!this.#Ra)return;const t=this.#Ra.getEditableAnnotations();for(const n of t){if(n.hide(),this.#p.isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}}disable(){this.#Ha=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of this.#Ma.values())r.disableEditing(),r.annotationElementId&&(null===r.serialize()?(t.set(r.annotationElementId,r),this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()):e.set(r.annotationElementId,r));if(this.#Ra){const n=this.#Ra.getEditableAnnotations();for(const r of n){const{id:n}=r.data;if(this.#p.isDeletedAnnotationElement(n))continue;let s=t.get(n);s?(s.resetAnnotationElement(r),s.show(!1),r.show()):(s=e.get(n),s&&(this.#p.addChangedExistingAnnotation(s),s.renderAnnotationElement(r),s.show(!1)),r.show())}}this.#ja(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of ea.#F.values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#Ha=!1}getEditableAnnotation(e){return this.#Ra?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#p.getActive()!==e&&this.#p.setActiveEditor(e)}enableTextSelection(){this.div.tabIndex=-1,this.#Ua?.div&&!this.#Oa&&(this.#Oa=this.#za.bind(this),this.#Ua.div.addEventListener("pointerdown",this.#Oa,{signal:this.#p._signal}),this.#Ua.div.classList.add("highlighting"))}disableTextSelection(){this.div.tabIndex=0,this.#Ua?.div&&this.#Oa&&(this.#Ua.div.removeEventListener("pointerdown",this.#Oa),this.#Oa=null,this.#Ua.div.classList.remove("highlighting"))}#za(e){if(this.#p.unselectAll(),e.target===this.#Ua.div){const{isMac:t}=rn.platform;if(0!==e.button||e.ctrlKey&&t)return;this.#p.showAllEditors("highlight",!0,!0),this.#Ua.div.classList.add("free"),Qi.startHighlighting(this,"ltr"===this.#p.direction,e),this.#Ua.div.addEventListener("pointerup",(()=>{this.#Ua.div.classList.remove("free")}),{once:!0,signal:this.#p._signal}),e.preventDefault()}}enableClick(){if(this.#Pa)return;const e=this.#p._signal;this.#Pa=this.pointerdown.bind(this),this.#Da=this.pointerup.bind(this),this.div.addEventListener("pointerdown",this.#Pa,{signal:e}),this.div.addEventListener("pointerup",this.#Da,{signal:e})}disableClick(){this.#Pa&&(this.div.removeEventListener("pointerdown",this.#Pa),this.div.removeEventListener("pointerup",this.#Da),this.#Pa=null,this.#Da=null)}attach(e){this.#Ma.set(e.id,e);const{annotationElementId:t}=e;t&&this.#p.isDeletedAnnotationElement(t)&&this.#p.removeDeletedAnnotationElement(e)}detach(e){this.#Ma.delete(e.id),this.#zr?.removePointerInTextLayer(e.contentDiv),!this.#Ha&&e.annotationElementId&&this.#p.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#p.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,this.#Ba||this.addInkEditorIfNeeded(!1)}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#p.addDeletedAnnotationElement(e.annotationElementId),sr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),this.#p.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),this.#p.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#La&&(e._focusEventsAllowed=!1,this.#La=setTimeout((()=>{this.#La=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0,signal:this.#p._signal}),t.focus())}),0)),e._structTreeParentId=this.#zr?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return this.#p.getId()}get#Ga(){return ea.#F.get(this.#p.getMode())}get _signal(){return this.#p._signal}#Wa(e){const t=this.#Ga;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#Ga?.canCreateNewEmptyEditor()}pasteEditor(e,t){this.#p.updateToolbar(e),this.#p.updateMode(e);const{offsetX:n,offsetY:r}=this.#$a(),s=this.getNextId(),i=this.#Wa({parent:this,id:s,x:n,y:r,uiManager:this.#p,isCentered:!0,...t});i&&this.add(i)}deserialize(e){return ea.#F.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#p)||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getNextId(),s=this.#Wa({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:this.#p,isCentered:t,...n});return s&&this.add(s),s}#$a(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),s=Math.max(0,e),i=Math.max(0,t),a=(s+Math.min(window.innerWidth,e+n))/2-e,o=(i+Math.min(window.innerHeight,t+r))/2-t,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}addNewEditor(){this.createAndAddNewEditor(this.#$a(),!0)}setSelected(e){this.#p.setSelected(e)}toggleSelected(e){this.#p.toggleSelected(e)}isSelected(e){return this.#p.isSelected(e)}unselect(e){this.#p.unselect(e)}pointerup(e){const{isMac:t}=rn.platform;0!==e.button||e.ctrlKey&&t||e.target===this.div&&this.#Fa&&(this.#Fa=!1,this.#Na?this.#p.getMode()!==et.STAMP?this.createAndAddNewEditor(e,!1):this.#p.unselectAll():this.#Na=!0)}pointerdown(e){if(this.#p.getMode()===et.HIGHLIGHT&&this.enableTextSelection(),this.#Fa)return void(this.#Fa=!1);const{isMac:t}=rn.platform;if(0!==e.button||e.ctrlKey&&t)return;if(e.target!==this.div)return;this.#Fa=!0;const n=this.#p.getActive();this.#Na=!n||n.isEmpty()}findNewParent(e,t,n){const r=this.#p.findParent(t,n);return null!==r&&r!==this&&(r.changeParent(e),!0)}destroy(){this.#p.getActive()?.parent===this&&(this.#p.commitOrRemove(),this.#p.setActiveEditor(null)),this.#La&&(clearTimeout(this.#La),this.#La=null);for(const e of this.#Ma.values())this.#zr?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#Ma.clear(),this.#p.removeLayer(this)}#ja(){this.#Ba=!0;for(const e of this.#Ma.values())e.isEmpty()&&e.remove();this.#Ba=!1}render(e){let{viewport:t}=e;this.viewport=t,Vn(this.div,t);for(const n of this.#p.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;this.#p.commitOrRemove(),this.#ja();const n=this.viewport.rotation,r=t.rotation;if(this.viewport=t,Vn(this.div,{rotation:r}),n!==r)for(const s of this.#Ma.values())s.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#p.viewParameters.realScale}}class ta{#Tr=null;#y=0;#qa=(()=>new Map)();#Va=(()=>new Map)();constructor(e){let{pageIndex:t}=e;this.pageIndex=t}setParent(e){if(this.#Tr){if(this.#Tr!==e){if(this.#qa.size>0)for(const t of this.#qa.values())t.remove(),e.append(t);this.#Tr=e}}else this.#Tr=e}static get _svgFactory(){return $t(this,"_svgFactory",new Nn)}static#Ya(e){let{x:t=0,y:n=0,width:r=1,height:s=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{style:i}=e;i.top=100*n+"%",i.left=100*t+"%",i.width=100*r+"%",i.height=100*s+"%"}#Ka(e){const t=ta._svgFactory.create(1,1,!0);return this.#Tr.append(t),t.setAttribute("aria-hidden",!0),ta.#Ya(t,e),t}#Xa(e,t){const n=ta._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const s=ta._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r}highlight(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=this.#y++,i=this.#Ka(e.box);i.classList.add("highlight"),e.free&&i.classList.add("free");const a=ta._svgFactory.createElement("defs");i.append(a);const o=ta._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("d",e.toSVGPath()),r&&this.#Va.set(s,o);const c=this.#Xa(a,l),u=ta._svgFactory.createElement("use");return i.append(u),i.setAttribute("fill",t),i.setAttribute("fill-opacity",n),u.setAttribute("href",`#${l}`),this.#qa.set(s,i),{id:s,clipPathId:`url(#${c})`}}highlightOutline(e){const t=this.#y++,n=this.#Ka(e.box);n.classList.add("highlightOutline");const r=ta._svgFactory.createElement("defs");n.append(r);const s=ta._svgFactory.createElement("path");r.append(s);const i=`path_p${this.pageIndex}_${t}`;let a;if(s.setAttribute("id",i),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke"),e.free){n.classList.add("free");const e=ta._svgFactory.createElement("mask");r.append(e),a=`mask_p${this.pageIndex}_${t}`,e.setAttribute("id",a),e.setAttribute("maskUnits","objectBoundingBox");const s=ta._svgFactory.createElement("rect");e.append(s),s.setAttribute("width","1"),s.setAttribute("height","1"),s.setAttribute("fill","white");const o=ta._svgFactory.createElement("use");e.append(o),o.setAttribute("href",`#${i}`),o.setAttribute("stroke","none"),o.setAttribute("fill","black"),o.setAttribute("fill-rule","nonzero"),o.classList.add("mask")}const o=ta._svgFactory.createElement("use");n.append(o),o.setAttribute("href",`#${i}`),a&&o.setAttribute("mask",`url(#${a})`);const l=o.cloneNode();return n.append(l),o.classList.add("mainOutline"),l.classList.add("secondaryOutline"),this.#qa.set(t,n),t}finalizeLine(e,t){const n=this.#Va.get(e);this.#Va.delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#qa.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),this.#Va.delete(e)}updatePath(e,t){this.#Va.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){ta.#Ya(this.#qa.get(e),t)}show(e,t){this.#qa.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#qa.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#qa.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#qa.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#qa.get(e).classList.add(t)}removeClass(e,t){this.#qa.get(e).classList.remove(t)}remove(e){null!==this.#Tr&&(this.#qa.get(e).remove(),this.#qa.delete(e))}destroy(){this.#Tr=null;for(const e of this.#qa.values())e.remove();this.#qa.clear()}}var na=je.AnnotationLayer,ra=je.AnnotationMode,sa=je.GlobalWorkerOptions,ia=je.PDFDataRangeTransport,aa=je.TextLayer,oa=je.getDocument;const la=(0,s.createContext)(null);function ca(e){let{children:t,type:n}=e;return(0,Se.jsx)("div",{className:`react-pdf__message react-pdf__message--${n}`,children:t})}class ua{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Le(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){Le(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise((t=>{Le(this.pdfDocument,"PDF document not loaded."),Le(e,"Destination is not specified."),"string"===typeof e?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)})).then((e=>{Le(Array.isArray(e),`"${e}" is not a valid destination array.`);const t=e[0];new Promise((e=>{Le(this.pdfDocument,"PDF document not loaded."),t instanceof Object?this.pdfDocument.getPageIndex(t).then((t=>{e(t)})).catch((()=>{Le(!1,`"${t}" is not a valid page reference.`)})):"number"===typeof t?e(t):Le(!1,`"${t}" is not a valid destination reference.`)})).then((t=>{const n=t+1;Le(this.pdfViewer,"PDF viewer is not initialized."),Le(n>=1&&n<=this.pagesCount,`"${n}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:t,pageNumber:n})}))}))}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Le(this.pdfViewer,"PDF viewer is not initialized."),Le(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||"noopener noreferrer nofollow",e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const ha={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},da="undefined"!==typeof window,pa=da&&"file:"===window.location.protocol;function fa(e){return function(e){return"undefined"!==typeof e}(e)&&null!==e}function ma(e){return function(e){return"string"===typeof e}(e)&&/^data:/.test(e)}function ga(e){Le(ma(e),"Invalid data URI.");const[t="",n=""]=e.split(",");return-1!==t.split(";").indexOf("base64")?atob(n):unescape(n)}function ya(){return da&&window.devicePixelRatio||1}const ba="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Ea(){Me(!pa,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${ba}`)}function va(e){(null===e||void 0===e?void 0:e.cancel)&&e.cancel()}function _a(e,t){return Object.defineProperty(e,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get(){return this.view[3]},configurable:!0}),e}function Ta(e,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function Aa(){return(0,s.useReducer)(Ta,{value:void 0,error:void 0})}var wa=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))},Sa=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};const{Tm:ka}=e,Ca=(e,t)=>{switch(t){case ha.NEED_PASSWORD:e(prompt("Enter the password to open this PDF file."));break;case ha.INCORRECT_PASSWORD:e(prompt("Invalid password. Please try again."));break}};function xa(e){return"object"===typeof e&&null!==e&&("data"in e||"range"in e||"url"in e)}const Ia=(0,s.forwardRef)((function(e,t){var{children:n,className:r,error:i="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:c,imageResourcesPath:u,loading:h="Loading PDF\u2026",noData:d="No PDF file specified.",onItemClick:p,onLoadError:f,onLoadProgress:m,onLoadSuccess:g,onPassword:y=Ca,onSourceError:b,onSourceSuccess:E,options:v,renderMode:_,rotate:T}=e,A=Sa(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[w,S]=Aa(),{value:k,error:C}=w,[x,I]=Aa(),{value:N,error:R}=x,D=(0,s.useRef)(new ua),P=(0,s.useRef)([]),O=(0,s.useRef)(void 0),L=(0,s.useRef)(void 0);l&&l!==O.current&&xa(l)&&(Me(!He(l,O.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),O.current=l),v&&v!==L.current&&(Me(!He(v,L.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),L.current=v);const M=(0,s.useRef)({scrollPageIntoView:e=>{const{dest:t,pageNumber:n,pageIndex:r=n-1}=e;if(p)return void p({dest:t,pageIndex:r,pageNumber:n});const s=P.current[r];s?s.scrollIntoView():Me(!1,`An internal link leading to page ${n} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});(0,s.useImperativeHandle)(t,(()=>({linkService:D,pages:P,viewer:M})),[]),(0,s.useEffect)((function(){S({type:"RESET"})}),[l,S]);const F=(0,s.useCallback)((()=>wa(this,void 0,void 0,(function*(){if(!l)return null;if("string"===typeof l){if(ma(l)){return{data:ga(l)}}return Ea(),{url:l}}if(l instanceof ka)return{range:l};if(l instanceof ArrayBuffer)return{data:l};if(da&&function(e){return Le(da,"isBlob can only be used in a browser environment"),e instanceof Blob}(l)){const e=yield function(e){return new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return n(new Error("Error while reading a file."));t(r.result)},r.onerror=e=>{if(!e.target)return n(new Error("Error while reading a file."));const{error:t}=e.target;if(!t)return n(new Error("Error while reading a file."));switch(t.code){case t.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case t.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case t.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},r.readAsArrayBuffer(e)}))}(l);return{data:e}}if(Le("object"===typeof l,"Invalid parameter in file, need either Uint8Array, string or a parameter object"),Le(xa(l),"Invalid parameter object: need either .data, .range or .url"),"url"in l&&"string"===typeof l.url){if(ma(l.url)){const{url:e}=l,t=Sa(l,["url"]),n=ga(e);return Object.assign({data:n},t)}Ea()}return l}))),[l]);(0,s.useEffect)((()=>{const e=Ne(F());return e.promise.then((e=>{S({type:"RESOLVE",value:e})})).catch((e=>{S({type:"REJECT",error:e})})),()=>{va(e)}}),[F,S]),(0,s.useEffect)((()=>{"undefined"!==typeof k&&(!1!==k?E&&E():C&&(Me(!1,C.toString()),b&&b(C)))}),[k]),(0,s.useEffect)((function(){I({type:"RESET"})}),[I,k]),(0,s.useEffect)((function(){if(!k)return;const e=v?Object.assign(Object.assign({},k),v):k,t=oa(e);m&&(t.onProgress=m),y&&(t.onPassword=y);const n=t,r=n.promise.then((e=>{I({type:"RESOLVE",value:e})})).catch((e=>{n.destroyed||I({type:"REJECT",error:e})}));return()=>{r.finally((()=>n.destroy()))}}),[v,I,k]),(0,s.useEffect)((()=>{"undefined"!==typeof N&&(!1!==N?N&&(g&&g(N),P.current=new Array(N.numPages),D.current.setDocument(N)):R&&(Me(!1,R.toString()),f&&f(R)))}),[N]),(0,s.useEffect)((function(){D.current.setViewer(M.current),D.current.setExternalLinkRel(a),D.current.setExternalLinkTarget(o)}),[a,o]);const B=(0,s.useCallback)(((e,t)=>{P.current[e]=t}),[]),H=(0,s.useCallback)((e=>{delete P.current[e]}),[]),U=(0,s.useMemo)((()=>({imageResourcesPath:u,linkService:D.current,onItemClick:p,pdf:N,registerPage:B,renderMode:_,rotate:T,unregisterPage:H})),[u,p,N,B,_,T,H]),j=(0,s.useMemo)((()=>Ie(A,(()=>N))),[A,N]);return(0,Se.jsx)("div",Object.assign({className:De("react-pdf__Document",r),ref:c,style:{"--scale-factor":"1"}},j,{children:l?void 0===N||null===N?(0,Se.jsx)(ca,{type:"loading",children:"function"===typeof h?h():h}):!1===N?(0,Se.jsx)(ca,{type:"error",children:"function"===typeof i?i():i}):(0,Se.jsx)(la.Provider,{value:U,children:n}):(0,Se.jsx)(ca,{type:"no-data",children:"function"===typeof d?d():d})}))})),Na=Ia;function Ra(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(Boolean);return n.length<=1?n[0]||null:function(e){n.forEach((function(t){"function"===typeof t?t(e):t&&(t.current=e)}))}}const Da=(0,s.createContext)(null),Pa={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Oa=/^H(\d+)$/;function La(e){return"children"in e}function Ma(e){return!!La(e)&&(1===e.children.length&&0 in e.children&&"id"in e.children[0])}function Fa(e){const t={};if(La(e)){const{role:n}=e,r=n.match(Oa);if(r)t.role="heading",t["aria-level"]=Number(r[1]);else if(function(e){return e in Pa}(n)){const e=Pa[n];e&&(t.role=e)}}return t}function Ba(e){const t={};if(La(e)){if(void 0!==e.alt&&(t["aria-label"]=e.alt),void 0!==e.lang&&(t.lang=e.lang),Ma(e)){const[n]=e.children;if(n){const e=Ba(n);return Object.assign(Object.assign({},t),e)}}}else"id"in e&&(t["aria-owns"]=e.id);return t}function Ha(e){return e?Object.assign(Object.assign({},Fa(e)),Ba(e)):null}function Ua(e){let{className:t,node:n}=e;const r=(0,s.useMemo)((()=>Ha(n)),[n]),i=(0,s.useMemo)((()=>La(n)?Ma(n)?null:n.children.map(((e,t)=>(0,Se.jsx)(Ua,{node:e},t))):null),[n]);return(0,Se.jsx)("span",Object.assign({className:t},r,{children:i}))}function ja(){return(0,s.useContext)(Da)}function za(){const e=ja();Le(e,"Unable to find Page context.");const{onGetStructTreeError:t,onGetStructTreeSuccess:n}=e,[r,i]=Aa(),{value:a,error:o}=r,{customTextRenderer:l,page:c}=e;return(0,s.useEffect)((function(){i({type:"RESET"})}),[i,c]),(0,s.useEffect)((function(){if(l)return;if(!c)return;const e=Ne(c.getStructTree()),t=e;return e.promise.then((e=>{i({type:"RESOLVE",value:e})})).catch((e=>{i({type:"REJECT",error:e})})),()=>va(t)}),[l,c,i]),(0,s.useEffect)((()=>{void 0!==a&&(!1!==a?a&&n&&n(a):o&&(Me(!1,o.toString()),t&&t(o)))}),[a]),a?(0,Se.jsx)(Ua,{className:"react-pdf__Page__structTree structTree",node:a}):null}const Ga=ra;function Wa(e){const t=ja();Le(t,"Unable to find Page context.");const n=Object.assign(Object.assign({},t),e),{_className:r,canvasBackground:i,devicePixelRatio:a=ya(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:h,rotate:d,scale:p}=n,{canvasRef:f}=e;Le(c,"Attempted to render page canvas, but no page was specified.");const m=(0,s.useRef)(null);function g(e){(function(e){return"RenderingCancelledException"===e.name})(e)||(Me(!1,e.toString()),o&&o(e))}const y=(0,s.useMemo)((()=>c.getViewport({scale:p*a,rotation:d})),[a,c,d,p]),b=(0,s.useMemo)((()=>c.getViewport({scale:p,rotation:d})),[c,d,p]);(0,s.useEffect)((function(){if(!c)return;c.cleanup();const{current:e}=m;if(!e)return;e.width=y.width,e.height=y.height,e.style.width=`${Math.floor(b.width)}px`,e.style.height=`${Math.floor(b.height)}px`,e.style.visibility="hidden";const t={annotationMode:u?Ga.ENABLE_FORMS:Ga.ENABLE,canvasContext:e.getContext("2d",{alpha:!1}),viewport:y};i&&(t.background=i);const n=c.render(t),r=n;return n.promise.then((()=>{e.style.visibility="",c&&l&&l(_a(c,p))})).catch(g),()=>va(r)}),[i,c,u,y,b]);const E=(0,s.useCallback)((()=>{const{current:e}=m;e&&(e.width=0,e.height=0)}),[]);return(0,s.useEffect)((()=>E),[E]),(0,Se.jsx)("canvas",{className:`${r}__canvas`,dir:"ltr",ref:Ra(f,m),style:{display:"block",userSelect:"none"},children:h?(0,Se.jsx)(za,{}):null})}function $a(){const e=ja();Le(e,"Unable to find Page context.");const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:r,onRenderTextLayerError:i,onRenderTextLayerSuccess:a,page:o,pageIndex:l,pageNumber:c,rotate:u,scale:h}=e;Le(o,"Attempted to load page text content, but no page was specified.");const[d,p]=Aa(),{value:f,error:m}=d,g=(0,s.useRef)(null),y=(0,s.useRef)(void 0);Me(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,s.useEffect)((function(){p({type:"RESET"})}),[o,p]),(0,s.useEffect)((function(){if(!o)return;const e=Ne(o.getTextContent()),t=e;return e.promise.then((e=>{p({type:"RESOLVE",value:e})})).catch((e=>{p({type:"REJECT",error:e})})),()=>va(t)}),[o,p]),(0,s.useEffect)((()=>{void 0!==f&&(!1!==f?f&&r&&r(f):m&&(Me(!1,m.toString()),n&&n(m)))}),[f]);const b=(0,s.useCallback)((()=>{a&&a()}),[a]),E=(0,s.useCallback)((e=>{Me(!1,e.toString()),i&&i(e)}),[i]);const v=(0,s.useMemo)((()=>o.getViewport({scale:h,rotation:u})),[o,u,h]);return(0,s.useLayoutEffect)((function(){if(!o||!f)return;const{current:e}=g;if(!e)return;e.innerHTML="";const n=o.streamTextContent({includeMarkedContent:!0}),r=new aa({container:e,textContentSource:n,viewport:v}),s=r;return r.render().then((()=>{const n=document.createElement("div");n.className="endOfContent",e.append(n),y.current=n;const r=e.querySelectorAll('[role="presentation"]');if(t){let e=0;f.items.forEach(((n,s)=>{if(!function(e){return"str"in e}(n))return;const i=r[e];if(!i)return;const a=t(Object.assign({pageIndex:l,pageNumber:c,itemIndex:s},n));i.innerHTML=a,e+=n.str&&n.hasEOL?2:1}))}b()})).catch(E),()=>va(s)}),[t,E,b,o,l,c,f,v]),(0,Se.jsx)("div",{className:De("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){const e=y.current;e&&e.classList.remove("active")},onMouseDown:function(){const e=y.current;e&&e.classList.add("active")},ref:g})}function qa(){return(0,s.useContext)(la)}function Va(){const e=qa(),t=ja();Le(t,"Unable to find Page context.");const n=Object.assign(Object.assign({},e),t),{imageResourcesPath:r,linkService:i,onGetAnnotationsError:a,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:u,pdf:h,renderForms:d,rotate:p,scale:f=1}=n;Le(h,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),Le(u,"Attempted to load page annotations, but no page was specified."),Le(i,"Attempted to load page annotations, but no linkService was specified.");const[m,g]=Aa(),{value:y,error:b}=m,E=(0,s.useRef)(null);Me(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,s.useEffect)((function(){g({type:"RESET"})}),[g,u]),(0,s.useEffect)((function(){if(!u)return;const e=Ne(u.getAnnotations()),t=e;return e.promise.then((e=>{g({type:"RESOLVE",value:e})})).catch((e=>{g({type:"REJECT",error:e})})),()=>{va(t)}}),[g,u]),(0,s.useEffect)((()=>{void 0!==y&&(!1!==y?y&&o&&o(y):b&&(Me(!1,b.toString()),a&&a(b)))}),[y]);const v=(0,s.useMemo)((()=>u.getViewport({scale:f,rotation:p})),[u,p,f]);return(0,s.useEffect)((function(){if(!h||!u||!i||!y)return;const{current:e}=E;if(!e)return;const t=v.clone({dontFlip:!0}),n={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:e,l10n:null,page:u,viewport:t},s={annotations:y,annotationStorage:h.annotationStorage,div:e,imageResourcesPath:r,linkService:i,page:u,renderForms:d,viewport:t};e.innerHTML="";try{new na(n).render(s),c&&c()}catch(a){!function(e){Me(!1,`${e}`),l&&l(e)}(a)}return()=>{}}),[y,r,i,u,h,d,v]),(0,Se.jsx)("div",{className:De("react-pdf__Page__annotations","annotationLayer"),ref:E})}var Ya=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};const Ka=1;function Xa(e){const t=qa(),n=Object.assign(Object.assign({},t),e),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:a,canvasRef:o,children:l,className:c,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:p="Failed to load the page.",height:f,inputRef:m,loading:g="Loading page\u2026",noData:y="No page specified.",onGetAnnotationsError:b,onGetAnnotationsSuccess:E,onGetStructTreeError:v,onGetStructTreeSuccess:_,onGetTextError:T,onGetTextSuccess:A,onLoadError:w,onLoadSuccess:S,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:C,onRenderError:x,onRenderSuccess:I,onRenderTextLayerError:N,onRenderTextLayerSuccess:R,pageIndex:D,pageNumber:P,pdf:O,registerPage:L,renderAnnotationLayer:M=!0,renderForms:F=!1,renderMode:B="canvas",renderTextLayer:H=!0,rotate:U,scale:j=Ka,unregisterPage:z,width:G}=n,W=Ya(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[$,q]=Aa(),{value:V,error:Y}=$,K=(0,s.useRef)(null);Le(O,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const X=fa(P)?P-1:null!==D&&void 0!==D?D:null,Q=null!==P&&void 0!==P?P:fa(D)?D+1:null,J=null!==U&&void 0!==U?U:V?V.rotate:null,Z=(0,s.useMemo)((()=>{if(!V)return null;let e=1;const t=null!==j&&void 0!==j?j:Ka;if(G||f){const t=V.getViewport({scale:1,rotation:J});G?e=G/t.width:f&&(e=f/t.height)}return t*e}),[f,V,J,j,G]);(0,s.useEffect)((function(){return()=>{fa(X)&&i&&z&&z(X)}}),[i,O,X,z]),(0,s.useEffect)((function(){q({type:"RESET"})}),[q,O,X]),(0,s.useEffect)((function(){if(!O||!Q)return;const e=Ne(O.getPage(Q)),t=e;return e.promise.then((e=>{q({type:"RESOLVE",value:e})})).catch((e=>{q({type:"REJECT",error:e})})),()=>va(t)}),[q,O,Q]),(0,s.useEffect)((()=>{void 0!==V&&(!1!==V?function(){if(S){if(!V||!Z)return;S(_a(V,Z))}if(i&&L){if(!fa(X)||!K.current)return;L(X,K.current)}}():Y&&(Me(!1,Y.toString()),w&&w(Y)))}),[V,Z]);const ee=(0,s.useMemo)((()=>V&&fa(X)&&Q&&fa(J)&&fa(Z)?{_className:r,canvasBackground:a,customTextRenderer:h,devicePixelRatio:d,onGetAnnotationsError:b,onGetAnnotationsSuccess:E,onGetStructTreeError:v,onGetStructTreeSuccess:_,onGetTextError:T,onGetTextSuccess:A,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:C,onRenderError:x,onRenderSuccess:I,onRenderTextLayerError:N,onRenderTextLayerSuccess:R,page:V,pageIndex:X,pageNumber:Q,renderForms:F,renderTextLayer:H,rotate:J,scale:Z}:null),[r,a,h,d,b,E,v,_,T,A,k,C,x,I,N,R,V,X,Q,F,H,J,Z]),te=(0,s.useMemo)((()=>Ie(W,(()=>V?Z?_a(V,Z):void 0:V))),[W,V,Z]),ne=`${X}@${Z}/${J}`;function re(){switch(B){case"custom":return Le(u,'renderMode was set to "custom", but no customRenderer was passed.'),(0,Se.jsx)(u,{},`${ne}_custom`);case"none":return null;default:return(0,Se.jsx)(Wa,{canvasRef:o},`${ne}_canvas`)}}return(0,Se.jsx)("div",Object.assign({className:De(r,c),"data-page-number":Q,ref:Ra(m,K),style:{"--scale-factor":`${Z}`,backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},te,{children:Q?null===O||void 0===V||null===V?(0,Se.jsx)(ca,{type:"loading",children:"function"===typeof g?g():g}):!1===O||!1===V?(0,Se.jsx)(ca,{type:"error",children:"function"===typeof p?p():p}):(0,Se.jsxs)(Da.Provider,{value:ee,children:[re(),H?(0,Se.jsx)($a,{},`${ne}_text`):null,M?(0,Se.jsx)(Va,{},`${ne}_annotations`):null,l]}):(0,Se.jsx)(ca,{type:"no-data",children:"function"===typeof y?y():y})}))}const Qa=function(e){const t=e.trim().split("\n").filter((e=>""!==e.trim())),n=[];let r=0;return t.forEach((e=>{const t=e.match(/(\d{2}):(\d{2})/);if(t){const e=parseInt(t[1],10),n=parseInt(t[2],10);r=60*e+n}else{const t=e.trim();t&&n.push({time:r,text:t})}})),n}(I),Ja={Zebra:[26,56,2],Markhor:[58,90,4],"Snow Bird":[93,127,6],"Snowshoe Hare":[128,164,12],Walrus:[166,218,18],Venus:[220,247,20],Mandrill:[252,306,24]};console.log(Qa);const Za="./currentPlay/National_Geographic_Little_Kids_USA_-_November-December_2024.pdf",eo="./currentPlay/National Geographic Little Kids_ November_December 2024.wav",to={chatContainer:"Chat_chatContainer__EOy9H",inputForm:"Chat_inputForm__unrU8",input:"Chat_input__WH-t4",button:"Chat_button__myYtN",messages:"Chat_messages__trZGi",userMessage:"Chat_userMessage__6BBsi",assistantMessage:"Chat_assistantMessage__26N2J",codeMessage:"Chat_codeMessage__b9AKQ",audioMessage:"Chat_audioMessage__QYWGX","cv-item":"Chat_cv-item__hPwxl",close:"Chat_close__MmDIQ",user:"Chat_user__SdlrX",speaker:"Chat_speaker__msd8I",assistant:"Chat_assistant__lhUAj","speaker-content":"Chat_speaker-content__90-Kg"};function no(e){const t=[],n=String(e||"");let r=n.indexOf(","),s=0,i=!1;for(;!i;){-1===r&&(r=n.length,i=!0);const e=n.slice(s,r).trim();!e&&i||t.push(e),s=r+1,r=n.indexOf(",",s)}return t}function ro(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}const so=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,io=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ao={};function oo(e,t){return((t||ao).jsx?io:so).test(e)}const lo=/[ \t\n\f\r]/g;function co(e){return""===e.replace(lo,"")}class uo{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function ho(e,t){const n={},r={};let s=-1;for(;++s<e.length;)Object.assign(n,e[s].property),Object.assign(r,e[s].normal);return new uo(n,r,t)}function po(e){return e.toLowerCase()}uo.prototype.property={},uo.prototype.normal={},uo.prototype.space=null;class fo{constructor(e,t){this.property=e,this.attribute=t}}fo.prototype.space=null,fo.prototype.boolean=!1,fo.prototype.booleanish=!1,fo.prototype.overloadedBoolean=!1,fo.prototype.number=!1,fo.prototype.commaSeparated=!1,fo.prototype.spaceSeparated=!1,fo.prototype.commaOrSpaceSeparated=!1,fo.prototype.mustUseProperty=!1,fo.prototype.defined=!1;let mo=0;const go=Ao(),yo=Ao(),bo=Ao(),Eo=Ao(),vo=Ao(),_o=Ao(),To=Ao();function Ao(){return 2**++mo}const wo=Object.keys(t);class So extends fo{constructor(e,n,r,s){let i=-1;if(super(e,n),ko(this,"space",s),"number"===typeof r)for(;++i<wo.length;){const e=wo[i];ko(this,wo[i],(r&t[e])===t[e])}}}function ko(e,t,n){n&&(e[t]=n)}So.prototype.defined=!0;const Co={}.hasOwnProperty;function xo(e){const t={},n={};let r;for(r in e.properties)if(Co.call(e.properties,r)){const s=e.properties[r],i=new So(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[po(r)]=r,n[po(i.attribute)]=r}return new uo(t,n,e.space)}const Io=xo({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),No=xo({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Ro(e,t){return t in e?e[t]:t}function Do(e,t){return Ro(e,t.toLowerCase())}const Po=xo({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Do,properties:{xmlns:null,xmlnsXLink:null}}),Oo=xo({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:yo,ariaAutoComplete:null,ariaBusy:yo,ariaChecked:yo,ariaColCount:Eo,ariaColIndex:Eo,ariaColSpan:Eo,ariaControls:vo,ariaCurrent:null,ariaDescribedBy:vo,ariaDetails:null,ariaDisabled:yo,ariaDropEffect:vo,ariaErrorMessage:null,ariaExpanded:yo,ariaFlowTo:vo,ariaGrabbed:yo,ariaHasPopup:null,ariaHidden:yo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:vo,ariaLevel:Eo,ariaLive:null,ariaModal:yo,ariaMultiLine:yo,ariaMultiSelectable:yo,ariaOrientation:null,ariaOwns:vo,ariaPlaceholder:null,ariaPosInSet:Eo,ariaPressed:yo,ariaReadOnly:yo,ariaRelevant:null,ariaRequired:yo,ariaRoleDescription:vo,ariaRowCount:Eo,ariaRowIndex:Eo,ariaRowSpan:Eo,ariaSelected:yo,ariaSetSize:Eo,ariaSort:null,ariaValueMax:Eo,ariaValueMin:Eo,ariaValueNow:Eo,ariaValueText:null,role:null}}),Lo=xo({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Do,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:_o,acceptCharset:vo,accessKey:vo,action:null,allow:null,allowFullScreen:go,allowPaymentRequest:go,allowUserMedia:go,alt:null,as:null,async:go,autoCapitalize:null,autoComplete:vo,autoFocus:go,autoPlay:go,blocking:vo,capture:null,charSet:null,checked:go,cite:null,className:vo,cols:Eo,colSpan:null,content:null,contentEditable:yo,controls:go,controlsList:vo,coords:Eo|_o,crossOrigin:null,data:null,dateTime:null,decoding:null,default:go,defer:go,dir:null,dirName:null,disabled:go,download:bo,draggable:yo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:go,formTarget:null,headers:vo,height:Eo,hidden:go,high:Eo,href:null,hrefLang:null,htmlFor:vo,httpEquiv:vo,id:null,imageSizes:null,imageSrcSet:null,inert:go,inputMode:null,integrity:null,is:null,isMap:go,itemId:null,itemProp:vo,itemRef:vo,itemScope:go,itemType:vo,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:go,low:Eo,manifest:null,max:null,maxLength:Eo,media:null,method:null,min:null,minLength:Eo,multiple:go,muted:go,name:null,nonce:null,noModule:go,noValidate:go,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:go,optimum:Eo,pattern:null,ping:vo,placeholder:null,playsInline:go,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:go,referrerPolicy:null,rel:vo,required:go,reversed:go,rows:Eo,rowSpan:Eo,sandbox:vo,scope:null,scoped:go,seamless:go,selected:go,shadowRootClonable:go,shadowRootDelegatesFocus:go,shadowRootMode:null,shape:null,size:Eo,sizes:null,slot:null,span:Eo,spellCheck:yo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Eo,step:null,style:null,tabIndex:Eo,target:null,title:null,translate:null,type:null,typeMustMatch:go,useMap:null,value:yo,width:Eo,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:vo,axis:null,background:null,bgColor:null,border:Eo,borderColor:null,bottomMargin:Eo,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:go,declare:go,event:null,face:null,frame:null,frameBorder:null,hSpace:Eo,leftMargin:Eo,link:null,longDesc:null,lowSrc:null,marginHeight:Eo,marginWidth:Eo,noResize:go,noHref:go,noShade:go,noWrap:go,object:null,profile:null,prompt:null,rev:null,rightMargin:Eo,rules:null,scheme:null,scrolling:yo,standby:null,summary:null,text:null,topMargin:Eo,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Eo,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:go,disableRemotePlayback:go,prefix:null,property:null,results:Eo,security:null,unselectable:null}}),Mo=xo({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Ro,properties:{about:To,accentHeight:Eo,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Eo,amplitude:Eo,arabicForm:null,ascent:Eo,attributeName:null,attributeType:null,azimuth:Eo,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Eo,by:null,calcMode:null,capHeight:Eo,className:vo,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Eo,diffuseConstant:Eo,direction:null,display:null,dur:null,divisor:Eo,dominantBaseline:null,download:go,dx:null,dy:null,edgeMode:null,editable:null,elevation:Eo,enableBackground:null,end:null,event:null,exponent:Eo,externalResourcesRequired:null,fill:null,fillOpacity:Eo,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:_o,g2:_o,glyphName:_o,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Eo,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Eo,horizOriginX:Eo,horizOriginY:Eo,id:null,ideographic:Eo,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Eo,k:Eo,k1:Eo,k2:Eo,k3:Eo,k4:Eo,kernelMatrix:To,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Eo,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Eo,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Eo,overlineThickness:Eo,paintOrder:null,panose1:null,path:null,pathLength:Eo,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:vo,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Eo,pointsAtY:Eo,pointsAtZ:Eo,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:To,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:To,rev:To,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:To,requiredFeatures:To,requiredFonts:To,requiredFormats:To,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Eo,specularExponent:Eo,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Eo,strikethroughThickness:Eo,string:null,stroke:null,strokeDashArray:To,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Eo,strokeOpacity:Eo,strokeWidth:null,style:null,surfaceScale:Eo,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:To,tabIndex:Eo,tableValues:null,target:null,targetX:Eo,targetY:Eo,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:To,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Eo,underlineThickness:Eo,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Eo,values:null,vAlphabetic:Eo,vMathematical:Eo,vectorEffect:null,vHanging:Eo,vIdeographic:Eo,version:null,vertAdvY:Eo,vertOriginX:Eo,vertOriginY:Eo,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Eo,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Fo=ho([No,Io,Po,Oo,Lo],"html"),Bo=ho([No,Io,Po,Oo,Mo],"svg"),Ho=/^data[-\w.:]+$/i,Uo=/-[a-z]/g,jo=/[A-Z]/g;function zo(e,t){const n=po(t);let r=t,s=fo;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Ho.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Uo,Wo);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Uo.test(e)){let n=e.replace(jo,Go);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}s=So}return new s(r,t)}function Go(e){return"-"+e.toLowerCase()}function Wo(e){return e.charAt(1).toUpperCase()}const $o={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};function qo(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Vo(e){return e.join(" ").trim()}var Yo=n(222);const Ko=Yo.default||Yo,Xo=Jo("end"),Qo=Jo("start");function Jo(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"===typeof n.line&&n.line>0&&"number"===typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"===typeof n.offset&&n.offset>-1?n.offset:void 0}}}function Zo(e){return e&&"object"===typeof e?"position"in e||"type"in e?tl(e.position):"start"in e||"end"in e?tl(e):"line"in e||"column"in e?el(e):"":""}function el(e){return nl(e&&e.line)+":"+nl(e&&e.column)}function tl(e){return el(e&&e.start)+"-"+el(e&&e.end)}function nl(e){return e&&"number"===typeof e?e:1}class rl extends Error{constructor(e,t,n){super(),"string"===typeof t&&(n=t,t=void 0);let r="",s={},i=!1;if(t&&(s="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"===typeof e?r=e:!s.cause&&e&&(i=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&"string"===typeof n){const e=n.indexOf(":");-1===e?s.ruleId=n:(s.source=n.slice(0,e),s.ruleId=n.slice(e+1))}if(!s.place&&s.ancestors&&s.ancestors){const e=s.ancestors[s.ancestors.length-1];e&&(s.place=e.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=a?a.line:void 0,this.name=Zo(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=i&&s.cause&&"string"===typeof s.cause.stack?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}rl.prototype.file="",rl.prototype.name="",rl.prototype.reason="",rl.prototype.message="",rl.prototype.stack="",rl.prototype.column=void 0,rl.prototype.line=void 0,rl.prototype.ancestors=void 0,rl.prototype.cause=void 0,rl.prototype.fatal=void 0,rl.prototype.place=void 0,rl.prototype.ruleId=void 0,rl.prototype.source=void 0;const sl={}.hasOwnProperty,il=new Map,al=/[A-Z]/g,ol=/-([a-z])/g,ll=new Set(["table","tbody","thead","tfoot","tr"]),cl=new Set(["td","th"]),ul="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function hl(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!==typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,s,i){const a=Array.isArray(s.children),o=Qo(n);return t(r,s,i,a,{columnNumber:o?o.column-1:void 0,fileName:e,lineNumber:o?o.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!==typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!==typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,s,i){const a=Array.isArray(s.children)?n:t;return i?a(r,s,i):a(r,s)}}(0,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?Bo:Fo,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},i=dl(s,e,void 0);return i&&"string"!==typeof i?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function dl(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let s=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(s=Bo,e.schema=s);e.ancestors.push(t);const i=yl(e,t.tagName,!1),a=function(e,t){const n={};let r,s;for(s in t.properties)if("children"!==s&&sl.call(t.properties,s)){const i=gl(e,s,t.properties[s]);if(i){const[s,a]=i;e.tableCellAlignToStyle&&"align"===s&&"string"===typeof a&&cl.has(t.tagName)?r=a:n[s]=a}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let o=ml(e,t);ll.has(t.tagName)&&(o=o.filter((function(e){return"string"!==typeof e||!("object"===typeof(t=e)?"text"===t.type&&co(t.value):co(t));var t})));return pl(e,a,i,t),fl(a,o),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}bl(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let s=r;"svg"===t.name&&"html"===r.space&&(s=Bo,e.schema=s);e.ancestors.push(t);const i=null===t.name?e.Fragment:yl(e,t.name,!0),a=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];t.type;const s=t.expression;s.type;const i=s.properties[0];i.type,Object.assign(n,e.evaluater.evaluateExpression(i.argument))}else bl(e,t.position);else{const s=r.name;let i;if(r.value&&"object"===typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];t.type,i=e.evaluater.evaluateExpression(t.expression)}else bl(e,t.position);else i=null===r.value||r.value;n[s]=i}return n}(e,t),o=ml(e,t);return pl(e,a,i,t),fl(a,o),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);bl(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return fl(r,ml(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function pl(e,t,n,r){"string"!==typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function fl(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function ml(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:il;for(;++r<t.children.length;){const i=t.children[r];let a;if(e.passKeys){const e="element"===i.type?i.tagName:"mdxJsxFlowElement"===i.type||"mdxJsxTextElement"===i.type?i.name:void 0;if(e){const t=s.get(e)||0;a=e+"-"+t,s.set(e,t+1)}}const o=dl(e,i,a);void 0!==o&&n.push(o)}return n}function gl(e,t,n){const r=zo(e.schema,t);if(!(null===n||void 0===n||"number"===typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?ro(n):Vo(n)),"style"===r.property){let t="object"===typeof n?n:function(e,t){const n={};try{Ko(t,r)}catch(s){if(!e.ignoreInvalidStyle){const t=s,n=new rl("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ul+"#cannot-parse-style-attribute",n}}return n;function r(e,t){let r=e;"--"!==r.slice(0,2)&&("-ms-"===r.slice(0,4)&&(r="ms-"+r.slice(4)),r=r.replace(ol,vl)),n[r]=t}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)sl.call(e,n)&&(t[El(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?$o[r.property]||r.property:r.attribute,n]}}function yl(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,s=-1;for(;++s<e.length;){const t=oo(e[s])?{type:"Identifier",name:e[s]}:{type:"Literal",value:e[s]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(s&&"Literal"===t.type),optional:!1}:t}r=n}else r=oo(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return sl.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);bl(e)}function bl(e,t){const n=new rl("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ul+"#cannot-handle-mdx-estrees-without-createevaluater",n}function El(e){let t=e.replace(al,_l);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function vl(e,t){return t.toUpperCase()}function _l(e){return"-"+e.toLowerCase()}const Tl={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Al={};function wl(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Sl(e.children,t,n)}return Array.isArray(e)?Sl(e,t,n):""}function Sl(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=wl(e[s],t,n);return r.join("")}function kl(e,t,n,r){const s=e.length;let i,a=0;if(t=t<0?-t>s?0:s+t:t>s?s:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<r.length;)i=r.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}function Cl(e,t){return e.length>0?(kl(e,e.length,0,t),e):t}class xl{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null===t||void 0===t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&Il(this.left,n),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Il(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Il(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Il(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Il(this.left,t.reverse())}}}function Il(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Nl(e){const t={};let n,r,s,i,a,o,l,c=-1;const u=new xl(e);for(;++c<u.length;){for(;c in t;)c=t[c];if(n=u.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&(o=n[1]._tokenizer.events,s=0,s<o.length&&"lineEndingBlank"===o[s][1].type&&(s+=2),s<o.length&&"content"===o[s][1].type))for(;++s<o.length&&"content"!==o[s][1].type;)"chunkText"===o[s][1].type&&(o[s][1]._isInFirstContentOfListItem=!0,s++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,Rl(u,c)),c=t[c],l=!0);else if(n[1]._container){for(s=c,r=void 0;s--&&(i=u.get(s),"lineEnding"===i[1].type||"lineEndingBlank"===i[1].type);)"enter"===i[0]&&(r&&(u.get(r)[1].type="lineEndingBlank"),i[1].type="lineEnding",r=s);r&&(n[1].end={...u.get(r)[1].start},a=u.slice(r,c),a.unshift(n),u.splice(r,c-r+1,a))}}return kl(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function Rl(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const i=[],a=n._tokenizer||r.parser[n.contentType](n.start),o=a.events,l=[],c={};let u,h,d=-1,p=n,f=0,m=0;const g=[m];for(;p;){for(;e.get(++s)[1]!==p;);i.push(s),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),h&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++d<o.length;)"exit"===o[d][0]&&"enter"===o[d-1][0]&&o[d][1].type===o[d-1][1].type&&o[d][1].start.line!==o[d][1].end.line&&(m=d+1,g.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),d=g.length;d--;){const t=o.slice(g[d],g[d+1]),n=i.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),d=-1;++d<l.length;)c[f+l[d][0]]=f+l[d][1],f+=l[d][1]-l[d][0]-1;return c}const Dl={}.hasOwnProperty;function Pl(e,t){let n;for(n in t){const r=(Dl.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let i;if(s)for(i in s){Dl.call(r,i)||(r[i]=[]);const e=s[i];Ol(r[i],Array.isArray(e)?e:e?[e]:[])}}}function Ol(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);kl(e,0,0,r)}const Ll=Vl(/[A-Za-z]/),Ml=Vl(/[\dA-Za-z]/),Fl=Vl(/[#-'*+\--9=?A-Z^-~]/);function Bl(e){return null!==e&&(e<32||127===e)}const Hl=Vl(/\d/),Ul=Vl(/[\dA-Fa-f]/),jl=Vl(/[!-/:-@[-`{-~]/);function zl(e){return null!==e&&e<-2}function Gl(e){return null!==e&&(e<0||32===e)}function Wl(e){return-2===e||-1===e||32===e}const $l=Vl(/\p{P}|\p{S}/u),ql=Vl(/\s/);function Vl(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Yl(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return function(r){if(Wl(r))return e.enter(n),a(r);return t(r)};function a(r){return Wl(r)&&i++<s?(e.consume(r),a):(e.exit(n),t(r))}}const Kl={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Yl(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,s(t)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):zl(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),s)}}};const Xl={tokenize:function(e){const t=this,n=[];let r,s,i,a=0;return o;function o(r){if(a<n.length){const s=n[a];return t.containerState=s[1],e.attempt(s[0].continuation,l,c)(r)}return c(r)}function l(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&b();const n=t.events.length;let s,i=n;for(;i--;)if("exit"===t.events[i][0]&&"chunkFlow"===t.events[i][1].type){s=t.events[i][1].end;break}y(a);let o=n;for(;o<t.events.length;)t.events[o][1].end={...s},o++;return kl(t.events,i+1,0,t.events.slice(n)),t.events.length=o,c(e)}return o(e)}function c(s){if(a===n.length){if(!r)return d(s);if(r.currentConstruct&&r.currentConstruct.concrete)return f(s);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Ql,u,h)(s)}function u(e){return r&&b(),y(a),d(e)}function h(e){return t.parser.lazy[t.now().line]=a!==n.length,i=t.now().offset,f(e)}function d(n){return t.containerState={},e.attempt(Ql,p,f)(n)}function p(e){return a++,n.push([t.currentConstruct,t.containerState]),d(e)}function f(n){return null===n?(r&&b(),y(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):zl(n)?(e.consume(n),g(e.exit("chunkFlow")),a=0,t.interrupt=void 0,o):(e.consume(n),m)}function g(e,n){const o=t.sliceStream(e);if(n&&o.push(null),e.previous=s,s&&(s.next=e),s=e,r.defineSkip(e.start),r.write(o),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<i&&(!r.events[e][1].end||r.events[e][1].end.offset>i))return;const n=t.events.length;let s,o,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(s){o=t.events[l][1].end;break}s=!0}for(y(a),e=n;e<t.events.length;)t.events[e][1].end={...o},e++;kl(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function y(r){let s=n.length;for(;s-- >r;){const r=n[s];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function b(){r.write([null]),s=void 0,r=void 0,t.containerState._closeFlow=void 0}}},Ql={tokenize:function(e,t,n){return Yl(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const Jl={partial:!0,tokenize:function(e,t,n){return function(t){return Wl(t)?Yl(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||zl(e)?t(e):n(e)}}};const Zl={resolve:function(e){return Nl(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?s(t):zl(t)?e.check(ec,i,s)(t):(e.consume(t),r)}function s(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function i(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},ec={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Yl(e,s,"linePrefix")};function s(s){if(null===s||zl(s))return n(s);const i=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}};const tc={tokenize:function(e){const t=this,n=e.attempt(Jl,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,Yl(e,e.attempt(this.parser.constructs.flow,r,e.attempt(Zl,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const nc={resolveAll:ac()},rc=ic("string"),sc=ic("text");function ic(e){return{resolveAll:ac("text"===e?oc:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],s=t.attempt(r,i,a);return i;function i(e){return l(e)?s(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),o;t.consume(e)}function o(e){return l(e)?(t.exit("data"),s(e)):(t.consume(e),o)}function l(e){if(null===e)return!0;const t=r[e];let s=-1;if(t)for(;++s<t.length;){const e=t[s];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function ac(e){return function(t,n){let r,s=-1;for(;++s<=t.length;)void 0===r?t[s]&&"data"===t[s][1].type&&(r=s,s++):t[s]&&"data"===t[s][1].type||(s!==r+2&&(t[r][1].end=t[s-1][1].end,t.splice(r+2,s-r-2),s=r+2),r=void 0);return e?e(t,n):t}}function oc(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],s=t.sliceStream(r);let i,a=s.length,o=-1,l=0;for(;a--;){const e=s[a];if("string"===typeof e){for(o=e.length;32===e.charCodeAt(o-1);)l++,o--;if(o)break;o=-1}else if(-2===e)i=!0,l++;else if(-1!==e){a++;break}}if(l){const s={type:n===e.length||i||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...s.start},r.start.offset===r.end.offset?Object.assign(r,s):(e.splice(n,0,["enter",s,t],["exit",s,t]),n+=2)}n++}return e}const lc={name:"thematicBreak",tokenize:function(e,t,n){let r,s=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,i(e)}(t)};function i(i){return i===r?(e.enter("thematicBreakSequence"),a(i)):s>=3&&(null===i||zl(i))?(e.exit("thematicBreak"),t(i)):n(i)}function a(t){return t===r?(e.consume(t),s++,a):(e.exit("thematicBreakSequence"),Wl(t)?Yl(e,i,"whitespace")(t):i(t))}}};const cc={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Jl,s,i);function s(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Yl(e,t,"listItemIndent",r.containerState.size+1)(n)}function i(n){return r.containerState.furtherBlankLines||!Wl(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(hc,t,a)(n))}function a(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,Yl(e,e.attempt(cc,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0,a=0;return function(t){const s=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===s?!r.containerState.marker||t===r.containerState.marker:Hl(t)){if(r.containerState.type||(r.containerState.type=s,e.enter(s,{_container:!0})),"listUnordered"===s)return e.enter("listItemPrefix"),42===t||45===t?e.check(lc,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),o(t)}return n(t)};function o(t){return Hl(t)&&++a<10?(e.consume(t),o):(!r.interrupt||a<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Jl,r.interrupt?n:c,e.attempt(uc,h,u))}function c(e){return r.containerState.initialBlankLine=!0,i++,h(e)}function u(t){return Wl(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),h):n(t)}function h(n){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},uc={partial:!0,tokenize:function(e,t,n){const r=this;return Yl(e,(function(e){const s=r.events[r.events.length-1];return!Wl(e)&&s&&"listItemPrefixWhitespace"===s[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},hc={partial:!0,tokenize:function(e,t,n){const r=this;return Yl(e,(function(e){const s=r.events[r.events.length-1];return s&&"listItemIndent"===s[1].type&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)}};const dc={continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(Wl(t))return Yl(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return s(t)};function s(r){return e.attempt(dc,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),s}return n(t)};function s(n){return Wl(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};function pc(e,t,n,r,s,i,a,o,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(s),e.enter(i),e.consume(t),e.exit(i),h;if(null===t||32===t||41===t||Bl(t))return n(t);return e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),f(t)};function h(n){return 62===n?(e.enter(i),e.consume(n),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),d(n))}function d(t){return 62===t?(e.exit("chunkString"),e.exit(o),h(t)):null===t||60===t||zl(t)?n(t):(e.consume(t),92===t?p:d)}function p(t){return 60===t||62===t||92===t?(e.consume(t),d):d(t)}function f(s){return u||null!==s&&41!==s&&!Gl(s)?u<c&&40===s?(e.consume(s),u++,f):41===s?(e.consume(s),u--,f):null===s||32===s||40===s||Bl(s)?n(s):(e.consume(s),92===s?m:f):(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(s))}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function fc(e,t,n,r,s,i){const a=this;let o,l=0;return function(t){return e.enter(r),e.enter(s),e.consume(t),e.exit(s),e.enter(i),c};function c(h){return l>999||null===h||91===h||93===h&&!o||94===h&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(h):93===h?(e.exit(i),e.enter(s),e.consume(h),e.exit(s),e.exit(r),t):zl(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(t){return null===t||91===t||93===t||zl(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),o||(o=!Wl(t)),92===t?h:u)}function h(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function mc(e,t,n,r,s,i){let a;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(s),e.consume(t),e.exit(s),a=40===t?41:t,o;return n(t)};function o(n){return n===a?(e.enter(s),e.consume(n),e.exit(s),e.exit(r),t):(e.enter(i),l(n))}function l(t){return t===a?(e.exit(i),o(a)):null===t?n(t):zl(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Yl(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===a||null===t||zl(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===a||92===t?(e.consume(t),c):c(t)}}function gc(e,t){let n;return function r(s){if(zl(s))return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r;if(Wl(s))return Yl(e,r,n?"linePrefix":"lineSuffix")(s);return t(s)}}function yc(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const bc={name:"definition",tokenize:function(e,t,n){const r=this;let s;return function(t){return e.enter("definition"),function(t){return fc.call(r,e,i,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function i(t){return s=yc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return Gl(t)?gc(e,o)(t):o(t)}function o(t){return pc(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(Ec,c,c)(t)}function c(t){return Wl(t)?Yl(e,u,"whitespace")(t):u(t)}function u(i){return null===i||zl(i)?(e.exit("definition"),r.parser.defined.push(s),t(i)):n(i)}}},Ec={partial:!0,tokenize:function(e,t,n){return function(t){return Gl(t)?gc(e,r)(t):n(t)};function r(t){return mc(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function s(t){return Wl(t)?Yl(e,i,"whitespace")(t):i(t)}function i(e){return null===e||zl(e)?t(e):n(e)}}};const vc={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),Yl(e,s,"linePrefix",5)(t)};function s(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?i(e):n(e)}function i(t){return null===t?o(t):zl(t)?e.attempt(_c,i,o)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||zl(t)?(e.exit("codeFlowValue"),i(t)):(e.consume(t),a)}function o(n){return e.exit("codeIndented"),t(n)}}},_c={partial:!0,tokenize:function(e,t,n){const r=this;return s;function s(t){return r.parser.lazy[r.now().line]?n(t):zl(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):Yl(e,i,"linePrefix",5)(t)}function i(e){const i=r.events[r.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(e):zl(e)?s(e):n(e)}}};const Tc={name:"headingAtx",resolve:function(e,t){let n,r,s=e.length-2,i=3;"whitespace"===e[i][1].type&&(i+=2);s-2>i&&"whitespace"===e[s][1].type&&(s-=2);"atxHeadingSequence"===e[s][1].type&&(i===s-1||s-4>i&&"whitespace"===e[s-2][1].type)&&(s-=i+1===s?2:4);s>i&&(n={type:"atxHeadingText",start:e[i][1].start,end:e[s][1].end},r={type:"chunkText",start:e[i][1].start,end:e[s][1].end,contentType:"text"},kl(e,i,s-i+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),s(t)}(t)};function s(t){return 35===t&&r++<6?(e.consume(t),s):null===t||Gl(t)?(e.exit("atxHeadingSequence"),i(t)):n(t)}function i(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||zl(n)?(e.exit("atxHeading"),t(n)):Wl(n)?Yl(e,i,"whitespace")(n):(e.enter("atxHeadingText"),o(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),i(t))}function o(t){return null===t||35===t||Gl(t)?(e.exit("atxHeadingText"),i(t)):(e.consume(t),o)}}};const Ac={name:"setextUnderline",resolveTo:function(e,t){let n,r,s,i=e.length;for(;i--;)if("enter"===e[i][0]){if("content"===e[i][1].type){n=i;break}"paragraph"===e[i][1].type&&(r=i)}else"content"===e[i][1].type&&e.splice(i,1),s||"definition"!==e[i][1].type||(s=i);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};e[r][1].type="setextHeadingText",s?(e.splice(r,0,["enter",a,t]),e.splice(s+1,0,["exit",e[n][1],t]),e[n][1].end={...e[s][1].end}):e[n][1]=a;return e.push(["exit",a,t]),e},tokenize:function(e,t,n){const r=this;let s;return function(t){let a,o=r.events.length;for(;o--;)if("lineEnding"!==r.events[o][1].type&&"linePrefix"!==r.events[o][1].type&&"content"!==r.events[o][1].type){a="paragraph"===r.events[o][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),s=t,function(t){return e.enter("setextHeadingLineSequence"),i(t)}(t);return n(t)};function i(t){return t===s?(e.consume(t),i):(e.exit("setextHeadingLineSequence"),Wl(t)?Yl(e,a,"lineSuffix")(t):a(t))}function a(r){return null===r||zl(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}};const wc=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Sc=["pre","script","style","textarea"],kc={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const r=this;let s,i,a,o,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(o){return 33===o?(e.consume(o),u):47===o?(e.consume(o),i=!0,p):63===o?(e.consume(o),s=3,r.interrupt?t:O):Ll(o)?(e.consume(o),a=String.fromCharCode(o),f):n(o)}function u(i){return 45===i?(e.consume(i),s=2,h):91===i?(e.consume(i),s=5,o=0,d):Ll(i)?(e.consume(i),s=4,r.interrupt?t:O):n(i)}function h(s){return 45===s?(e.consume(s),r.interrupt?t:O):n(s)}function d(s){const i="CDATA[";return s===i.charCodeAt(o++)?(e.consume(s),6===o?r.interrupt?t:k:d):n(s)}function p(t){return Ll(t)?(e.consume(t),a=String.fromCharCode(t),f):n(t)}function f(o){if(null===o||47===o||62===o||Gl(o)){const l=47===o,c=a.toLowerCase();return l||i||!Sc.includes(c)?wc.includes(a.toLowerCase())?(s=6,l?(e.consume(o),m):r.interrupt?t(o):k(o)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(o):i?g(o):y(o)):(s=1,r.interrupt?t(o):k(o))}return 45===o||Ml(o)?(e.consume(o),a+=String.fromCharCode(o),f):n(o)}function m(s){return 62===s?(e.consume(s),r.interrupt?t:k):n(s)}function g(t){return Wl(t)?(e.consume(t),g):w(t)}function y(t){return 47===t?(e.consume(t),w):58===t||95===t||Ll(t)?(e.consume(t),b):Wl(t)?(e.consume(t),y):w(t)}function b(t){return 45===t||46===t||58===t||95===t||Ml(t)?(e.consume(t),b):E(t)}function E(t){return 61===t?(e.consume(t),v):Wl(t)?(e.consume(t),E):y(t)}function v(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,_):Wl(t)?(e.consume(t),v):T(t)}function _(t){return t===l?(e.consume(t),l=null,A):null===t||zl(t)?n(t):(e.consume(t),_)}function T(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||Gl(t)?E(t):(e.consume(t),T)}function A(e){return 47===e||62===e||Wl(e)?y(e):n(e)}function w(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return null===t||zl(t)?k(t):Wl(t)?(e.consume(t),S):n(t)}function k(t){return 45===t&&2===s?(e.consume(t),N):60===t&&1===s?(e.consume(t),R):62===t&&4===s?(e.consume(t),L):63===t&&3===s?(e.consume(t),O):93===t&&5===s?(e.consume(t),P):!zl(t)||6!==s&&7!==s?null===t||zl(t)?(e.exit("htmlFlowData"),C(t)):(e.consume(t),k):(e.exit("htmlFlowData"),e.check(Cc,M,C)(t))}function C(t){return e.check(xc,x,M)(t)}function x(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return null===t||zl(t)?C(t):(e.enter("htmlFlowData"),k(t))}function N(t){return 45===t?(e.consume(t),O):k(t)}function R(t){return 47===t?(e.consume(t),a="",D):k(t)}function D(t){if(62===t){const n=a.toLowerCase();return Sc.includes(n)?(e.consume(t),L):k(t)}return Ll(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),D):k(t)}function P(t){return 93===t?(e.consume(t),O):k(t)}function O(t){return 62===t?(e.consume(t),L):45===t&&2===s?(e.consume(t),O):k(t)}function L(t){return null===t||zl(t)?(e.exit("htmlFlowData"),M(t)):(e.consume(t),L)}function M(n){return e.exit("htmlFlow"),t(n)}}},Cc={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(Jl,t,n)}}},xc={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(zl(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s;return n(t)};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}};const Ic={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},Nc={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,s={partial:!0,tokenize:function(e,t,n){let s=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),Wl(t)?Yl(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===i?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===i?(s++,e.consume(t),u):s>=o?(e.exit("codeFencedFenceSequence"),Wl(t)?Yl(e,h,"whitespace")(t):h(t)):n(t)}function h(r){return null===r||zl(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let i,a=0,o=0;return function(t){return function(t){const n=r.events[r.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,i=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===i?(o++,e.consume(t),l):o<3?n(t):(e.exit("codeFencedFenceSequence"),Wl(t)?Yl(e,c,"whitespace")(t):c(t))}function c(n){return null===n||zl(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(Ic,p,b)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||zl(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):Wl(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Yl(e,h,"whitespace")(t)):96===t&&t===i?n(t):(e.consume(t),u)}function h(t){return null===t||zl(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),d(t))}function d(t){return null===t||zl(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===i?n(t):(e.consume(t),d)}function p(t){return e.attempt(s,b,f)(t)}function f(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(t){return a>0&&Wl(t)?Yl(e,g,"linePrefix",a+1)(t):g(t)}function g(t){return null===t||zl(t)?e.check(Ic,p,b)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||zl(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function b(n){return e.exit("codeFenced"),t(n)}}};const Rc=document.createElement("i");function Dc(e){const t="&"+e+";";Rc.innerHTML=t;const n=Rc.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const Pc={name:"characterReference",tokenize:function(e,t,n){const r=this;let s,i,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),o};function o(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,i=Ml,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,i=Ul,c):(e.enter("characterReferenceValue"),s=7,i=Hl,c(t))}function c(o){if(59===o&&a){const s=e.exit("characterReferenceValue");return i!==Ml||Dc(r.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)}return i(o)&&a++<s?(e.consume(o),c):n(o)}}};const Oc={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return jl(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const Lc={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Yl(e,t,"linePrefix")}}};function Mc(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const Fc={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}e.length!==n.length&&kl(e,0,e.length,n);return e},resolveTo:function(e,t){let n,r,s,i,a=e.length,o=0;for(;a--;)if(n=e[a][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(s){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=a,"labelLink"!==n.type)){o=2;break}}else"labelEnd"===n.type&&(s=a);const l={type:"labelLink"===e[r][1].type?"link":"image",start:{...e[r][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[r][1].start},end:{...e[s][1].end}},u={type:"labelText",start:{...e[r+o+2][1].end},end:{...e[s-2][1].start}};return i=[["enter",l,t],["enter",c,t]],i=Cl(i,e.slice(r+1,r+o+3)),i=Cl(i,[["enter",u,t]]),i=Cl(i,Mc(t.parser.constructs.insideSpan.null,e.slice(r+o+4,s-3),t)),i=Cl(i,[["exit",u,t],e[s-2],e[s-1],["exit",c,t]]),i=Cl(i,e.slice(s+1)),i=Cl(i,[["exit",l,t]]),kl(e,r,e.length,i),e},tokenize:function(e,t,n){const r=this;let s,i,a=r.events.length;for(;a--;)if(("labelImage"===r.events[a][1].type||"labelLink"===r.events[a][1].type)&&!r.events[a][1]._balanced){s=r.events[a][1];break}return function(t){if(!s)return n(t);if(s._inactive)return u(t);return i=r.parser.defined.includes(yc(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),o};function o(t){return 40===t?e.attempt(Bc,c,i?c:u)(t):91===t?e.attempt(Hc,c,i?l:u)(t):i?c(t):u(t)}function l(t){return e.attempt(Uc,c,u)(t)}function c(e){return t(e)}function u(e){return s._balanced=!0,n(e)}}},Bc={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return Gl(t)?gc(e,s)(t):s(t)}function s(t){return 41===t?c(t):pc(e,i,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return Gl(t)?gc(e,o)(t):c(t)}function a(e){return n(e)}function o(t){return 34===t||39===t||40===t?mc(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return Gl(t)?gc(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Hc={tokenize:function(e,t,n){const r=this;return function(t){return fc.call(r,e,s,i,"reference","referenceMarker","referenceString")(t)};function s(e){return r.parser.defined.includes(yc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function i(e){return n(e)}}},Uc={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const jc={name:"labelStartImage",resolveAll:Fc.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),s};function s(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),i):n(t)}function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};function zc(e){return null===e||Gl(e)||ql(e)?1:$l(e)?2:void 0}const Gc={name:"attention",resolveAll:function(e,t){let n,r,s,i,a,o,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;o=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const h={...e[n][1].end},d={...e[u][1].start};Wc(h,-o),Wc(d,o),i={type:o>1?"strongSequence":"emphasisSequence",start:h,end:{...e[n][1].end}},a={type:o>1?"strongSequence":"emphasisSequence",start:{...e[u][1].start},end:d},s={type:o>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[u][1].start}},r={type:o>1?"strong":"emphasis",start:{...i.start},end:{...a.end}},e[n][1].end={...i.start},e[u][1].start={...a.end},l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=Cl(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=Cl(l,[["enter",r,t],["enter",i,t],["exit",i,t],["enter",s,t]]),l=Cl(l,Mc(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=Cl(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=Cl(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,kl(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=zc(r);let i;return function(t){return i=t,e.enter("attentionSequence"),a(t)};function a(o){if(o===i)return e.consume(o),a;const l=e.exit("attentionSequence"),c=zc(o),u=!c||2===c&&s||n.includes(o),h=!s||2===s&&c||n.includes(r);return l._open=Boolean(42===i?u:u&&(s||!h)),l._close=Boolean(42===i?h:h&&(c||!u)),t(o)}}};function Wc(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const $c={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s};function s(t){return Ll(t)?(e.consume(t),i):64===t?n(t):l(t)}function i(e){return 43===e||45===e||46===e||Ml(e)?(r=1,a(e)):l(e)}function a(t){return 58===t?(e.consume(t),r=0,o):(43===t||45===t||46===t||Ml(t))&&r++<32?(e.consume(t),a):(r=0,l(t))}function o(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||Bl(r)?n(r):(e.consume(r),o)}function l(t){return 64===t?(e.consume(t),c):Fl(t)?(e.consume(t),l):n(t)}function c(e){return Ml(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):h(n)}function h(t){if((45===t||Ml(t))&&r++<63){const n=45===t?h:u;return e.consume(t),n}return n(t)}}};const qc={name:"htmlText",tokenize:function(e,t,n){const r=this;let s,i,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),o};function o(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),v):63===t?(e.consume(t),b):Ll(t)?(e.consume(t),A):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),i=0,p):Ll(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),d):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),h):zl(t)?(a=u,D(t)):(e.consume(t),u)}function h(t){return 45===t?(e.consume(t),d):u(t)}function d(e){return 62===e?R(e):45===e?h(e):u(e)}function p(t){const r="CDATA[";return t===r.charCodeAt(i++)?(e.consume(t),6===i?f:p):n(t)}function f(t){return null===t?n(t):93===t?(e.consume(t),m):zl(t)?(a=f,D(t)):(e.consume(t),f)}function m(t){return 93===t?(e.consume(t),g):f(t)}function g(t){return 62===t?R(t):93===t?(e.consume(t),g):f(t)}function y(t){return null===t||62===t?R(t):zl(t)?(a=y,D(t)):(e.consume(t),y)}function b(t){return null===t?n(t):63===t?(e.consume(t),E):zl(t)?(a=b,D(t)):(e.consume(t),b)}function E(e){return 62===e?R(e):b(e)}function v(t){return Ll(t)?(e.consume(t),_):n(t)}function _(t){return 45===t||Ml(t)?(e.consume(t),_):T(t)}function T(t){return zl(t)?(a=T,D(t)):Wl(t)?(e.consume(t),T):R(t)}function A(t){return 45===t||Ml(t)?(e.consume(t),A):47===t||62===t||Gl(t)?w(t):n(t)}function w(t){return 47===t?(e.consume(t),R):58===t||95===t||Ll(t)?(e.consume(t),S):zl(t)?(a=w,D(t)):Wl(t)?(e.consume(t),w):R(t)}function S(t){return 45===t||46===t||58===t||95===t||Ml(t)?(e.consume(t),S):k(t)}function k(t){return 61===t?(e.consume(t),C):zl(t)?(a=k,D(t)):Wl(t)?(e.consume(t),k):w(t)}function C(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),s=t,x):zl(t)?(a=C,D(t)):Wl(t)?(e.consume(t),C):(e.consume(t),I)}function x(t){return t===s?(e.consume(t),s=void 0,N):null===t?n(t):zl(t)?(a=x,D(t)):(e.consume(t),x)}function I(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||Gl(t)?w(t):(e.consume(t),I)}function N(e){return 47===e||62===e||Gl(e)?w(e):n(e)}function R(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function D(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),P}function P(t){return Wl(t)?Yl(e,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):O(t)}function O(t){return e.enter("htmlTextData"),a(t)}}};const Vc={name:"labelStartLink",resolveAll:Fc.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),s};function s(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const Yc={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return zl(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const Kc={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,s=3;if(("lineEnding"===e[s][1].type||"space"===e[s][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=s;++t<r;)if("codeTextData"===e[t][1].type){e[s][1].type="codeTextPadding",e[r][1].type="codeTextPadding",s+=2,r-=2;break}t=s-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,s,i=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),i++,a):(e.exit("codeTextSequence"),o(t))}function o(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),o):96===t?(s=e.enter("codeTextSequence"),r=0,c(t)):zl(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||zl(t)?(e.exit("codeTextData"),o(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(s.type="codeTextData",l(n))}}};const Xc={42:cc,43:cc,45:cc,48:cc,49:cc,50:cc,51:cc,52:cc,53:cc,54:cc,55:cc,56:cc,57:cc,62:dc},Qc={91:bc},Jc={[-2]:vc,[-1]:vc,32:vc},Zc={35:Tc,42:lc,45:[Ac,lc],60:kc,61:Ac,95:lc,96:Nc,126:Nc},eu={38:Pc,92:Oc},tu={[-5]:Lc,[-4]:Lc,[-3]:Lc,33:jc,38:Pc,42:Gc,60:[$c,qc],91:Vc,92:[Yc,Oc],93:Fc,95:Gc,96:Kc},nu={null:[Gc,nc]},ru={null:[42,95]},su={null:[]};function iu(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],o=[],l=!0;const c={attempt:b((function(e,t){E(e,t.from)})),check:b(y),consume:function(e){zl(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,v()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++));u.previous=e,l=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=f(),u.events.push(["enter",n,u]),o.push(n),n},exit:function(e){const t=o.pop();return t.end=f(),u.events.push(["exit",t,u]),t},interrupt:b(y,{interrupt:!0})},u={code:null,containerState:{},defineSkip:function(e){s[e.line]=e.column,v()},events:[],now:f,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let a;if("string"===typeof i)a=i;else switch(i){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&s)continue;a=" ";break;default:a=String.fromCharCode(i)}s=-2===i,r.push(a)}return r.join("")}(p(e),t)},sliceStream:p,write:function(e){if(a=Cl(a,e),m(),null!==a[a.length-1])return[];return E(t,0),u.events=Mc(i,u.events,u),u.events}};let h,d=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function p(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let a;if(n===s)a=[e[n].slice(r,i)];else{if(a=e.slice(n,s),r>-1){const e=a[0];"string"===typeof e?a[0]=e.slice(r):a.shift()}i>0&&a.push(e[s].slice(0,i))}return a}(a,e)}function f(){const{_bufferIndex:e,_index:t,line:n,column:s,offset:i}=r;return{_bufferIndex:e,_index:t,line:n,column:s,offset:i}}function m(){let e;for(;r._index<a.length;){const t=a[r._index];if("string"===typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)g(t.charCodeAt(r._bufferIndex));else g(t)}}function g(e){l=void 0,h=e,d=d(e)}function y(e,t){t.restore()}function b(e,t){return function(n,s,i){let a,h,d,p;return Array.isArray(n)?m(n):"tokenize"in n?m([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return m([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function m(e){return a=e,h=0,0===e.length?i:g(e[h])}function g(e){return function(n){p=function(){const e=f(),t=u.previous,n=u.currentConstruct,s=u.events.length,i=Array.from(o);return{from:s,restore:a};function a(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=s,o=i,v()}}(),d=e,e.partial||(u.currentConstruct=e);if(e.name&&u.parser.constructs.disable.null.includes(e.name))return b(n);return e.tokenize.call(t?Object.assign(Object.create(u),t):u,c,y,b)(n)}}function y(t){return l=!0,e(d,p),s}function b(e){return l=!0,p.restore(),++h<a.length?g(a[h]):i}}}function E(e,t){e.resolveAll&&!i.includes(e)&&i.push(e),e.resolve&&kl(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function v(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function au(e){const t=function(e){const t={};let n=-1;for(;++n<e.length;)Pl(t,e[n]);return t}([r,...(e||{}).extensions||[]]),n={constructs:t,content:s(Kl),defined:[],document:s(Xl),flow:s(tc),lazy:{},string:s(rc),text:s(sc)};return n;function s(e){return function(t){return iu(n,e,t)}}}const ou=/[\0\t\n\r]/g;function lu(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCodePoint(n)}const cu=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function uu(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return lu(n.slice(t?2:1),t?16:10)}return Dc(n)||e}const hu={}.hasOwnProperty;function du(e,t,n){return"string"!==typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(te),autolinkProtocol:S,autolinkEmail:S,atxHeading:i(Q),blockQuote:i(q),characterEscape:S,characterReference:S,codeFenced:i(V),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(V,a),codeText:i(Y,a),codeTextData:S,data:S,codeFlowValue:S,definition:i(K),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(X),hardBreakEscape:i(J),hardBreakTrailing:i(J),htmlFlow:i(Z,a),htmlFlowData:S,htmlText:i(Z,a),htmlTextData:S,image:i(ee),label:a,link:i(te),listItem:i(re),listItemValue:d,listOrdered:i(ne,h),listUnordered:i(ne),paragraph:i(se),reference:H,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(Q),strong:i(ie),thematicBreak:i(oe)},exit:{atxHeading:l(),atxHeadingSequence:_,autolink:l(),autolinkEmail:$,autolinkProtocol:W,blockQuote:l(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:j,characterReferenceMarkerNumeric:j,characterReferenceValue:z,characterReference:G,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:f,codeFlowValue:k,codeIndented:l(y),codeText:l(R),codeTextData:k,data:k,definition:l(),definitionDestinationString:v,definitionLabelString:b,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(x),hardBreakTrailing:l(x),htmlFlow:l(I),htmlFlowData:k,htmlText:l(N),htmlTextData:k,image:l(P),label:L,labelText:O,lineEnding:C,link:l(D),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:U,resourceDestinationString:M,resourceTitleString:F,resource:B,setextHeading:l(w),setextHeadingLineSequence:A,setextHeadingText:T,strong:l(),thematicBreak:l()}};fu(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const i={stack:[r],tokenStack:[],config:t,enter:o,exit:c,buffer:a,resume:u,data:n},l=[];let h=-1;for(;++h<e.length;)if("listOrdered"===e[h][1].type||"listUnordered"===e[h][1].type)if("enter"===e[h][0])l.push(h);else{h=s(e,l.pop(),h)}for(h=-1;++h<e.length;){const n=t[e[h][0]];hu.call(n,e[h][1].type)&&n[e[h][1].type].call(Object.assign({sliceSerialize:e[h][2].sliceSerialize},i),e[h][1])}if(i.tokenStack.length>0){const e=i.tokenStack[i.tokenStack.length-1];(e[1]||gu).call(i,void 0,e[0])}for(r.position={start:pu(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:pu(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},h=-1;++h<t.transforms.length;)r=t.transforms[h](r)||r;return r}function s(e,t,n){let r,s,i,a,o=t-1,l=-1,c=!1;for(;++o<=n;){const t=e[o];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||a||l||i||(i=o),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let a=o;for(s=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;s&&(e[s][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",s=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}i&&(!s||i<s)&&(r._spread=!0),r.end=Object.assign({},s?e[s][1].start:t[1].end),e.splice(s||o,0,["exit",r,t[2]]),o++,n++}if("listItemPrefix"===t[1].type){const s={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=s,e.splice(o,0,["enter",s,t[2]]),o++,n++,i=void 0,a=!0}}}return e[t][1]._spread=c,n}function i(e,t){return n;function n(n){o.call(this,e(n),n),t&&t.call(this,n)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:pu(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+Zo({start:e.start,end:e.end})+"): it\u2019s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||gu).call(this,e,r[0])}n.position.end=pu(e.end)}function u(){return function(e,t){const n=t||Al;return wl(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function d(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function p(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function f(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function b(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=yc(this.sliceSerialize(e)).toLowerCase()}function E(){const e=this.resume();this.stack[this.stack.length-1].title=e}function v(){const e=this.resume();this.stack[this.stack.length-1].url=e}function _(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function A(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function w(){this.data.setextHeadingSlurpLineEnding=void 0}function S(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ae(),n.position={start:pu(e.start),end:void 0},t.push(n)),this.stack.push(n)}function k(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=pu(e.end)}function C(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=pu(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(S.call(this,e),k.call(this,e))}function x(){this.data.atHardBreak=!0}function I(){const e=this.resume();this.stack[this.stack.length-1].value=e}function N(){const e=this.resume();this.stack[this.stack.length-1].value=e}function R(){const e=this.resume();this.stack[this.stack.length-1].value=e}function D(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function P(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function O(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(cu,uu)}(t),n.identifier=yc(t).toLowerCase()}function L(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function M(){const e=this.resume();this.stack[this.stack.length-1].url=e}function F(){const e=this.resume();this.stack[this.stack.length-1].title=e}function B(){this.data.inReference=void 0}function H(){this.data.referenceType="collapsed"}function U(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=yc(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function j(e){this.data.characterReferenceType=e.type}function z(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=lu(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=Dc(t)}this.stack[this.stack.length-1].value+=r}function G(e){this.stack.pop().position.end=pu(e.end)}function W(e){k.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function $(e){k.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function q(){return{type:"blockquote",children:[]}}function V(){return{type:"code",lang:null,meta:null,value:""}}function Y(){return{type:"inlineCode",value:""}}function K(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function X(){return{type:"emphasis",children:[]}}function Q(){return{type:"heading",depth:0,children:[]}}function J(){return{type:"break"}}function Z(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function se(){return{type:"paragraph",children:[]}}function ie(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function oe(){return{type:"thematicBreak"}}}(n)(function(e){for(;!Nl(e););return e}(au(n).document().write(function(){let e,t=1,n="",r=!0;return function(s,i,a){const o=[];let l,c,u,h,d;for(s=n+("string"===typeof s?s.toString():new TextDecoder(i||void 0).decode(s)),u=0,n="",r&&(65279===s.charCodeAt(0)&&u++,r=void 0);u<s.length;){if(ou.lastIndex=u,l=ou.exec(s),h=l&&void 0!==l.index?l.index:s.length,d=s.charCodeAt(h),!l){n=s.slice(u);break}if(10===d&&u===h&&e)o.push(-3),e=void 0;else switch(e&&(o.push(-5),e=void 0),u<h&&(o.push(s.slice(u,h)),t+=h-u),d){case 0:o.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),o.push(-2);t++<c;)o.push(-1);break;case 10:o.push(-4),t=1;break;default:e=!0,t=1}u=h+1}return a&&(e&&o.push(-5),n&&o.push(n),o.push(null)),o}}()(e,t,!0))))}function pu(e){return{line:e.line,column:e.column,offset:e.offset}}function fu(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?fu(e,r):mu(e,r)}}function mu(e,t){let n;for(n in t)if(hu.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function gu(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Zo({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Zo({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Zo({start:t.start,end:t.end})+") is still open")}function yu(e){const t=this;t.parser=function(n){return du(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const bu="object"===typeof self?self:globalThis,Eu=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=s=>{if(e.has(s))return e.get(s);const[i,a]=t[s];switch(i){case 0:case-1:return n(a,s);case 1:{const e=n([],s);for(const t of a)e.push(r(t));return e}case 2:{const e=n({},s);for(const[t,n]of a)e[r(t)]=r(n);return e}case 3:return n(new Date(a),s);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),s)}case 5:{const e=n(new Map,s);for(const[t,n]of a)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,s);for(const t of a)e.add(r(t));return e}case 7:{const{name:e,message:t}=a;return n(new bu[e](t),s)}case 8:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s)}return n(new bu[i](a),s)};return r})(new Map,e)(0),vu="",{toString:_u}={},{keys:Tu}=Object,Au=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=_u.call(e).slice(8,-1);switch(n){case"Array":return[1,vu];case"Object":return[2,vu];case"Date":return[3,vu];case"RegExp":return[4,vu];case"Map":return[5,vu];case"Set":return[6,vu]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},wu=e=>{let[t,n]=e;return 0===t&&("function"===n||"symbol"===n)},Su=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return((e,t,n,r)=>{const s=(e,t)=>{const s=r.push(e)-1;return n.set(t,s),s},i=r=>{if(n.has(r))return n.get(r);let[a,o]=Au(r);switch(a){case 0:{let t=r;switch(o){case"bigint":a=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+o);t=null;break;case"undefined":return s([-1],r)}return s([a,t],r)}case 1:{if(o)return s([o,[...r]],r);const e=[],t=s([a,e],r);for(const n of r)e.push(i(n));return t}case 2:{if(o)switch(o){case"BigInt":return s([o,r.toString()],r);case"Boolean":case"Number":case"String":return s([o,r.valueOf()],r)}if(t&&"toJSON"in r)return i(r.toJSON());const n=[],l=s([a,n],r);for(const t of Tu(r))!e&&wu(Au(r[t]))||n.push([i(t),i(r[t])]);return l}case 3:return s([a,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return s([a,{source:e,flags:t}],r)}case 5:{const t=[],n=s([a,t],r);for(const[s,a]of r)(e||!wu(Au(s))&&!wu(Au(a)))&&t.push([i(s),i(a)]);return n}case 6:{const t=[],n=s([a,t],r);for(const s of r)!e&&wu(Au(s))||t.push(i(s));return n}}const{message:l}=r;return s([a,{name:o,message:l}],r)};return i})(!(t||n),!!t,new Map,r)(e),r},ku="function"===typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?Eu(Su(e,t)):structuredClone(e):(e,t)=>Eu(Su(e,t));function Cu(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(37===i&&Ml(e.charCodeAt(n+1))&&Ml(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const t=e.charCodeAt(n+1);i<56320&&t>56319&&t<57344?(a=String.fromCharCode(i,t),s=1):a="\ufffd"}else a=String.fromCharCode(i);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function xu(e,t){const n=[{type:"text",value:"\u21a9"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Iu(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const Nu=function(e){if(null===e||void 0===e)return Du;if("function"===typeof e)return Ru(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Nu(e[n]);return Ru(r);function r(){let e=-1;for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];for(;++e<t.length;)if(t[e].apply(this,r))return!0;return!1}}(e):function(e){const t=e;return Ru(n);function n(n){const r=n;let s;for(s in e)if(r[s]!==t[s])return!1;return!0}}(e);if("string"===typeof e)return function(e){return Ru(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function Ru(e){return function(t,n,r){return Boolean(Pu(t)&&e.call(this,t,"number"===typeof n?n:void 0,r||void 0))}}function Du(){return!0}function Pu(e){return null!==e&&"object"===typeof e&&"type"in e}const Ou=[],Lu=!0,Mu=!1,Fu="skip";function Bu(e,t,n,r){let s;"function"===typeof t&&"function"!==typeof n?(r=n,n=t):s=t;const i=Nu(s),a=r?-1:1;!function e(s,o,l){const c=s&&"object"===typeof s?s:{};if("string"===typeof c.type){const e="string"===typeof c.tagName?c.tagName:"string"===typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+s.type+(e?"<"+e+">":"")+")"})}return u;function u(){let c,u,h,d=Ou;if((!t||i(s,o,l[l.length-1]||void 0))&&(d=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[Lu,e];return null===e||void 0===e?Ou:[e]}(n(s,l)),d[0]===Mu))return d;if("children"in s&&s.children){const t=s;if(t.children&&d[0]!==Fu)for(u=(r?t.children.length:-1)+a,h=l.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(c=e(n,u,h)(),c[0]===Mu)return c;u="number"===typeof c[1]?c[1]:u+a}}return d}}(e,void 0,[])()}function Hu(e,t,n,r){let s,i,a;"function"===typeof t&&"function"!==typeof n?(i=void 0,a=t,s=n):(i=t,a=n,s=r),Bu(e,i,(function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return a(e,r,n)}),s)}function Uu(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&"text"===i.type?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&"text"===a.type?a.value+=r:s.push({type:"text",value:r}),s}function ju(e){const t=e.spread;return null===t||void 0===t?e.children.length>1:t}const zu=9,Gu=32;function Wu(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push($u(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push($u(t.slice(s),s>0,!1)),i.join("")}function $u(e,t,n){let r=0,s=e.length;if(t){let t=e.codePointAt(r);for(;t===zu||t===Gu;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(s-1);for(;t===zu||t===Gu;)s--,t=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}const qu={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=Cu(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let a,o=e.footnoteCounts.get(r);void 0===o?(o=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=i+1,o+=1,e.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Uu(e,t);const s={src:Cu(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)},image:function(e,t){const n={src:Cu(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Uu(e,t);const s={href:Cu(r.url||"")};null!==r.title&&void 0!==r.title&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},link:function(e,t){const n={href:Cu(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),s=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=ju(n[r])}return t}(n):ju(t),i={},a=[];if("boolean"===typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const e=r[o];(s||0!==o||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||s?a.push(e):a.push(...e.children)}const l=r[r.length-1];l&&(s||"element"!==l.type||"p"!==l.tagName)&&a.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},r=e.all(t);let s=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++s<r.length;){const e=r[s];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),s.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},i=Qo(t.children[1]),a=Xo(t.children[t.children.length-1]);i&&a&&(r.position={start:i,end:a}),s.push(r)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,s=0===(r?r.indexOf(t):1)?"th":"td",i=n&&"table"===n.type?n.align:void 0,a=i?i.length:t.children.length;let o=-1;const l=[];for(;++o<a;){const n=t.children[o],r={},a=i?i[o]:void 0;a&&(r.align=a);let c={type:"element",tagName:s,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:Wu(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Vu,yaml:Vu,definition:Vu,footnoteDefinition:Vu};function Vu(){}const Yu={}.hasOwnProperty,Ku={};function Xu(e,t){e.position&&(t.position=function(e){const t=Qo(e),n=Xo(e);if(t&&n)return{start:t,end:n}}(e))}function Qu(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,s=e.data.hProperties;if("string"===typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&s&&Object.assign(n.properties,ku(s)),"children"in n&&n.children&&null!==r&&void 0!==r&&(n.children=r)}return n}function Ju(e,t){const n=t.data||{},r=!("value"in t)||Yu.call(n,"hProperties")||Yu.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function Zu(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function eh(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function th(e,t){const n=function(e,t){const n=t||Ku,r=new Map,s=new Map,i=new Map,a={...qu,...n.handlers},o={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const s=o.one(n[r],e);if(s){if(r&&"break"===n[r-1].type&&(Array.isArray(s)||"text"!==s.type||(s.value=eh(s.value)),!Array.isArray(s)&&"element"===s.type)){const e=s.children[0];e&&"text"===e.type&&(e.value=eh(e.value))}Array.isArray(s)?t.push(...s):t.push(s)}}}return t},applyData:Qu,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:function(e,t){const n=e.type,r=o.handlers[n];if(Yu.call(o.handlers,n)&&r)return r(o,e,t);if(o.options.passThrough&&o.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,r=ku(n);return r.children=o.all(e),r}return ku(e)}return(o.options.unknownHandler||Ju)(o,e,t)},options:n,patch:Xu,wrap:Zu};return Hu(e,(function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:s,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}})),o}(e,t),r=n.one(e,void 0),s=function(e){const t="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||xu,r=e.options.footnoteBackLabel||Iu,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const s=e.footnoteById.get(e.footnoteOrder[l]);if(!s)continue;const i=e.all(s),a=String(s.identifier).toUpperCase(),c=Cu(a.toLowerCase());let u=0;const h=[],d=e.footnoteCounts.get(a);for(;void 0!==d&&++u<=d;){h.length>0&&h.push({type:"text",value:" "});let e="string"===typeof n?n:n(l,u);"string"===typeof e&&(e={type:"text",value:e}),h.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"===typeof r?r:r(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const p=i[i.length-1];if(p&&"element"===p.type&&"p"===p.tagName){const e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...h)}else i.push(...h);const f={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(i,!0)};e.patch(s,f),o.push(f)}if(0!==o.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...ku(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:"\n"}]}}(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:"\n"},s),i}function nh(e,t){return e&&"run"in e?async function(n,r){const s=th(n,{file:r,...t});await e.run(s,r)}:function(n,r){return th(n,{file:r,...e||t})}}function rh(e){if(e)throw e}var sh=n(240);function ih(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ah(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let s=-1;const i=n.pop();if("function"!==typeof i)throw new TypeError("Expected function as last argument, not "+i);!function t(r){const a=e[++s];let o=-1;if(r)i(r);else{for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];for(;++o<n.length;)null!==c[o]&&void 0!==c[o]||(c[o]=n[o]);n=c,a?function(e,t){let n;return s;function s(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];const l=e.length>s.length;let c;l&&s.push(i);try{c=e.apply(this,s)}catch(r){if(l&&n)throw r;return i(r)}l||(c&&c.then&&"function"===typeof c.then?c.then(a,i):c instanceof Error?i(c):a(c))}function i(e){if(!n){n=!0;for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];t(e,...s)}}function a(e){i(null,e)}}(a,t)(...c):i(null,...c)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const oh={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');lh(e);let n,r=0,s=-1,i=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;i--;)if(47===e.codePointAt(i)){if(n){r=i+1;break}}else s<0&&(n=!0,s=i+1);return s<0?"":e.slice(r,s)}if(t===e)return"";let a=-1,o=t.length-1;for(;i--;)if(47===e.codePointAt(i)){if(n){r=i+1;break}}else a<0&&(n=!0,a=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(s=i):(o=-1,s=a));r===s?s=a:s<0&&(s=e.length);return e.slice(r,s)},dirname:function(e){if(lh(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){lh(e);let t,n=e.length,r=-1,s=0,i=-1,a=0;for(;n--;){const o=e.codePointAt(n);if(47!==o)r<0&&(t=!0,r=n+1),46===o?i<0?i=n:1!==a&&(a=1):i>-1&&(a=-1);else if(t){s=n+1;break}}if(i<0||r<0||0===a||1===a&&i===r-1&&i===s+1)return"";return e.slice(i,r)},join:function(){let e,t=-1;for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];for(;++t<r.length;)lh(r[t]),r[t]&&(e=void 0===e?r[t]:e+"/"+r[t]);return void 0===e?".":function(e){lh(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,s="",i=0,a=-1,o=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===o);else if(a!==l-1&&2===o){if(s.length<2||2!==i||46!==s.codePointAt(s.length-1)||46!==s.codePointAt(s.length-2))if(s.length>2){if(r=s.lastIndexOf("/"),r!==s.length-1){r<0?(s="",i=0):(s=s.slice(0,r),i=s.length-1-s.lastIndexOf("/")),a=l,o=0;continue}}else if(s.length>0){s="",i=0,a=l,o=0;continue}t&&(s=s.length>0?s+"/..":"..",i=2)}else s.length>0?s+="/"+e.slice(a+1,l):s=e.slice(a+1,l),i=l-a-1;a=l,o=0}else 46===n&&o>-1?o++:o=-1}return s}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function lh(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const ch={cwd:function(){return"/"}};function uh(e){return Boolean(null!==e&&"object"===typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function hh(e){if("string"===typeof e)e=new URL(e);else if(!uh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const dh=["history","path","basename","stem","extname","dirname"];class ph{constructor(e){let t;t=e?uh(e)?{path:e}:"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":ch.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<dh.length;){const e=dh[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)dh.includes(n)||(this[n]=t[n])}get basename(){return"string"===typeof this.path?oh.basename(this.path):void 0}set basename(e){mh(e,"basename"),fh(e,"basename"),this.path=oh.join(this.dirname||"",e)}get dirname(){return"string"===typeof this.path?oh.dirname(this.path):void 0}set dirname(e){gh(this.basename,"dirname"),this.path=oh.join(e||"",this.basename)}get extname(){return"string"===typeof this.path?oh.extname(this.path):void 0}set extname(e){if(fh(e,"extname"),gh(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=oh.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){uh(e)&&(e=hh(e)),mh(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"===typeof this.path?oh.basename(this.path,this.extname):void 0}set stem(e){mh(e,"stem"),fh(e,"stem"),this.path=oh.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new rl(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"===typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function fh(e,t){if(e&&e.includes(oh.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+oh.sep+"`")}function mh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function gh(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const yh=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},bh={}.hasOwnProperty;class Eh extends yh{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ah()}copy(){const e=new Eh;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(sh(!0,{},this.namespace)),e}data(e,t){return"string"===typeof e?2===arguments.length?(Ah("data",this.frozen),this.namespace[e]=t,this):bh.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Ah("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"===typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=kh(e),n=this.parser||this.Parser;return _h("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),_h("process",this.parser||this.Parser),Th("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,s){const i=kh(e),a=n.parse(i);function o(e,n){e||!n?s(e):r?r(n):t(void 0,n)}n.run(a,i,(function(e,t,r){if(e||!t||!r)return o(e);const s=t,i=n.stringify(s,r);var a;"string"===typeof(a=i)||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(a)?r.value=i:r.result=i,o(e,r)}))}}processSync(e){let t,n=!1;return this.freeze(),_h("processSync",this.parser||this.Parser),Th("processSync",this.compiler||this.Compiler),this.process(e,(function(e,r){n=!0,rh(e),t=r})),Sh("processSync","process",n),t}run(e,t,n){wh(e),this.freeze();const r=this.transformers;return n||"function"!==typeof t||(n=t,t=void 0),n?s(void 0,n):new Promise(s);function s(s,i){const a=kh(t);r.run(e,a,(function(t,r,a){const o=r||e;t?i(t):s?s(o):n(void 0,o,a)}))}}runSync(e,t){let n,r=!1;return this.run(e,t,(function(e,t){rh(e),n=t,r=!0})),Sh("runSync","run",r),n}stringify(e,t){this.freeze();const n=kh(t),r=this.compiler||this.Compiler;return Th("stringify",r),wh(e),r(e,n)}use(e){const t=this.attachers,n=this.namespace;if(Ah("use",this.frozen),null===e||void 0===e);else if("function"===typeof e){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];c(e,s)}else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?l(e):o(e)}return this;function a(e){if("function"===typeof e)c(e,[]);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;c(t,n)}else o(e)}}function o(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(n.settings=sh(!0,n.settings,e.settings))}function l(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){a(e[t])}}}function c(e,n){let r=-1,s=-1;for(;++r<t.length;)if(t[r][0]===e){s=r;break}if(-1===s)t.push([e,...n]);else if(n.length>0){let[r,...i]=n;const a=t[s][1];ih(a)&&ih(r)&&(r=sh(!0,a,r)),t[s]=[e,r,...i]}}}}const vh=(new Eh).freeze();function _h(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function Th(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function Ah(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function wh(e){if(!ih(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Sh(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function kh(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new ph(e)}const Ch=[],xh={allowDangerousHtml:!0},Ih=/^(https?|ircs?|mailto|xmpp)$/i,Nh=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Rh(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",s=e.className,i=e.components,a=e.disallowedElements,o=e.rehypePlugins||Ch,l=e.remarkPlugins||Ch,c=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...xh}:xh,u=e.skipHtml,h=e.unwrapDisallowed,d=e.urlTransform||Dh,p=vh().use(yu).use(l).use(nh,c).use(o),f=new ph;"string"===typeof r&&(f.value=r);for(const y of Nh)Object.hasOwn(e,y.from)&&(y.from,y.to&&y.to,y.id);const m=p.parse(f);let g=p.runSync(m,f);return s&&(g={type:"element",tagName:"div",properties:{className:s},children:"root"===g.type?g.children:[g]}),Hu(g,(function(e,r,s){if("raw"===e.type&&s&&"number"===typeof r)return u?s.children.splice(r,1):s.children[r]={type:"text",value:e.value},r;if("element"===e.type){let t;for(t in Tl)if(Object.hasOwn(Tl,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=Tl[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=d(String(n||""),t,e))}}if("element"===e.type){let i=t?!t.includes(e.tagName):!!a&&a.includes(e.tagName);if(!i&&n&&"number"===typeof r&&(i=!n(e,r,s)),i&&s&&"number"===typeof r)return h&&e.children?s.children.splice(r,1,...e.children):s.children.splice(r,1),r}})),hl(g,{Fragment:Se.Fragment,components:i,ignoreInvalidStyle:!0,jsx:Se.jsx,jsxs:Se.jsxs,passKeys:!0,passNode:!0})}function Dh(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t<0||s>-1&&t>s||n>-1&&t>n||r>-1&&t>r||Ih.test(e.slice(0,t))?e:""}const Ph=/[#.]/g;const Oh={}.hasOwnProperty;function Lh(e,t,n){const r=n&&function(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}(n);return function(n,s){let i,a=-1;for(var o=arguments.length,l=new Array(o>2?o-2:0),c=2;c<o;c++)l[c-2]=arguments[c];if(void 0===n||null===n){i={type:"root",children:[]};const e=s;l.unshift(e)}else if(i=function(e,t){const n=e||"",r={};let s,i,a=0;for(;a<n.length;){Ph.lastIndex=a;const e=Ph.exec(n),t=n.slice(a,e?e.index:n.length);t&&(s?"#"===s?r.id=t:Array.isArray(r.className)?r.className.push(t):r.className=[t]:i=t,a+=t.length),e&&(s=e[0],a++)}return{type:"element",tagName:i||t||"div",properties:r,children:[]}}(n,t),i.tagName=i.tagName.toLowerCase(),r&&Oh.call(r,i.tagName)&&(i.tagName=r[i.tagName]),function(e){if(null===e||"object"!==typeof e||Array.isArray(e))return!0;if("string"!==typeof e.type)return!1;const t=e,n=Object.keys(e);for(const r of n){const e=t[r];if(e&&"object"===typeof e){if(!Array.isArray(e))return!0;const t=e;for(const e of t)if("number"!==typeof e&&"string"!==typeof e)return!0}}if("children"in e&&Array.isArray(e.children))return!0;return!1}(s))l.unshift(s);else{let t;for(t in s)Oh.call(s,t)&&Mh(e,i.properties,t,s[t])}for(;++a<l.length;)Fh(i.children,l[a]);return"element"===i.type&&"template"===i.tagName&&(i.content={type:"root",children:i.children},i.children=[]),i}}function Mh(e,t,n,r){const s=zo(e,n);let i,a=-1;if(void 0!==r&&null!==r){if("number"===typeof r){if(Number.isNaN(r))return;i=r}else i="boolean"===typeof r?r:"string"===typeof r?s.spaceSeparated?qo(r):s.commaSeparated?no(r):s.commaOrSpaceSeparated?qo(no(r).join(" ")):Bh(s,s.property,r):Array.isArray(r)?r.concat():"style"===s.property?function(e){const t=[];let n;for(n in e)Oh.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}(r):String(r);if(Array.isArray(i)){const e=[];for(;++a<i.length;){const t=Bh(s,s.property,i[a]);e[a]=t}i=e}if("className"===s.property&&Array.isArray(t.className)){const e=i;i=t.className.concat(e)}t[s.property]=i}}function Fh(e,t){let n=-1;if(void 0===t||null===t);else if("string"===typeof t||"number"===typeof t)e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)Fh(e,t[n]);else{if("object"!==typeof t||!("type"in t))throw new Error("Expected node, nodes, or string, got `"+t+"`");"root"===t.type?Fh(e,t.children):e.push(t)}}function Bh(e,t,n){if("string"===typeof n){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(""===n||po(n)===po(t)))return!0}return n}const Hh=Lh(Fo,"div"),Uh=Lh(Bo,"g",["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]);function jh(e,t){const n=e.indexOf("\r",t),r=e.indexOf("\n",t);return-1===r?n:-1===n||n+1===r?r:n<r?n:r}const zh={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Gh={}.hasOwnProperty,Wh=Object.prototype;function $h(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},Vh(e,r,n),n}case"#document":case"#document-fragment":{const r=t,s="mode"in r&&("quirks"===r.mode||"limited-quirks"===r.mode);if(n={type:"root",children:qh(e,t.childNodes),data:{quirksMode:s}},e.file&&e.location){const t=String(e.file),r=function(e){const t=String(e),n=[];return{toOffset:function(e){if(e&&"number"===typeof e.line&&"number"===typeof e.column&&!Number.isNaN(e.line)&&!Number.isNaN(e.column)){for(;n.length<e.line;){const e=n[n.length-1],r=jh(t,e),s=-1===r?t.length+1:r+1;if(e===s)break;n.push(s)}const r=(e.line>1?n[e.line-2]:0)+e.column-1;if(r<n[e.line-1])return r}},toPoint:function(e){if("number"===typeof e&&e>-1&&e<=t.length){let r=0;for(;;){let s=n[r];if(void 0===s){const e=jh(t,n[r-1]);s=-1===e?t.length+1:e+1,n[r]=s}if(s>e)return{line:r+1,column:e-(r>0?n[r-1]:0)+1,offset:e};r++}}}}}(t),s=r.toPoint(0),i=r.toPoint(t.length);n.position={start:s,end:i}}return n}case"#documentType":return n={type:"doctype"},Vh(e,t,n),n;case"#text":{const r=t;return n={type:"text",value:r.value},Vh(e,r,n),n}default:return n=function(e,t){const n=e.schema;e.schema=t.namespaceURI===zh.svg?Bo:Fo;let r=-1;const s={};for(;++r<t.attrs.length;){const e=t.attrs[r],n=(e.prefix?e.prefix+":":"")+e.name;Gh.call(Wh,n)||(s[n]=e.value)}const i="svg"===e.schema.space?Uh:Hh,a=i(t.tagName,s,qh(e,t.childNodes));if(Vh(e,t,a),"template"===a.tagName){const n=t,r=n.sourceCodeLocation,s=r&&r.startTag&&Yh(r.startTag),i=r&&r.endTag&&Yh(r.endTag),o=$h(e,n.content);s&&i&&e.file&&(o.position={start:s.end,end:i.start}),a.content=o}return e.schema=n,a}(e,t),n}}function qh(e,t){let n=-1;const r=[];for(;++n<t.length;){const s=$h(e,t[n]);r.push(s)}return r}function Vh(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=function(e,t,n){const r=Yh(n);if("element"===t.type){const s=t.children[t.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),e.verbose){const r={};let s;if(n.attrs)for(s in n.attrs)Gh.call(n.attrs,s)&&(r[zo(e.schema,s).property]=Yh(n.attrs[s]));n.startTag;const i=Yh(n.startTag),a=n.endTag?Yh(n.endTag):void 0,o={opening:i};a&&(o.closing=a),o.properties=r,t.data={position:o}}}return r}(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Yh(e){const t=Kh({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Kh({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Kh(e){return e.line&&e.column?e:void 0}const Xh={}.hasOwnProperty;function Qh(e,t){const n=t||{};function r(t){let n=r.invalid;const s=r.handlers;if(t&&Xh.call(t,e)){const i=String(t[e]);n=Xh.call(s,i)?s[i]:r.unknown}if(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return n.call(this,t,...a)}}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Jh={},Zh={}.hasOwnProperty,ed=Qh("type",{handlers:{root:function(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=nd(e.children,n,t),rd(e,n),n},element:function(e,t){const n=t;let r=n;"element"===e.type&&"svg"===e.tagName.toLowerCase()&&"html"===n.space&&(r=Bo);const s=[];let i;if(e.properties)for(i in e.properties)if("children"!==i&&Zh.call(e.properties,i)){const t=td(r,i,e.properties[i]);t&&s.push(t)}const a=r.space;const o={nodeName:e.tagName,tagName:e.tagName,attrs:s,namespaceURI:zh[a],childNodes:[],parentNode:null};o.childNodes=nd(e.children,o,r),rd(e,o),"template"===e.tagName&&e.content&&(o.content=function(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=nd(e.children,n,t),rd(e,n),n}(e.content,r));return o},text:function(e){const t={nodeName:"#text",value:e.value,parentNode:null};return rd(e,t),t},comment:function(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return rd(e,t),t},doctype:function(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return rd(e,t),t}}});function td(e,t,n){const r=zo(e,t);if(!1===n||null===n||void 0===n||"number"===typeof n&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?ro(n):Vo(n));const s={name:r.attribute,value:!0===n?"":String(n)};if(r.space&&"html"!==r.space&&"svg"!==r.space){const e=s.name.indexOf(":");e<0?s.prefix="":(s.name=s.name.slice(e+1),s.prefix=r.attribute.slice(0,e)),s.namespace=zh[r.space]}return s}function nd(e,t,n){let r=-1;const s=[];if(e)for(;++r<e.length;){const i=ed(e[r],n);i.parentNode=t,s.push(i)}return s}function rd(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const sd=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],id=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ad="\ufffd";var od;!function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"}(od||(od={}));const ld="--",cd="[CDATA[",ud="doctype",hd="script",dd="public",pd="system";function fd(e){return e>=55296&&e<=57343}function md(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159}function gd(e){return e>=64976&&e<=65007||id.has(e)}var yd;!function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(yd||(yd={}));class bd{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,t){const{line:n,col:r,offset:s}=this,i=r+t,a=s+t;return{code:e,startLine:n,endLine:n,startCol:i,endCol:i,startOffset:a,endOffset:a}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const t=this.html.charCodeAt(this.pos+1);if(function(e){return e>=56320&&e<=57343}(t))return this.pos++,this._addGap(),1024*(e-55296)+9216+t}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,od.EOF;return this._err(yd.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let n=0;n<e.length;n++){if((32|this.html.charCodeAt(this.pos+n))!==e.charCodeAt(n))return!1}return!0}peek(e){const t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,od.EOF;const n=this.html.charCodeAt(t);return n===od.CARRIAGE_RETURN?od.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,od.EOF;let e=this.html.charCodeAt(this.pos);if(e===od.CARRIAGE_RETURN)return this.isEol=!0,this.skipNextNewLine=!0,od.LINE_FEED;if(e===od.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine))return this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance();this.skipNextNewLine=!1,fd(e)&&(e=this._processSurrogate(e));return null===this.handler.onParseError||e>31&&e<127||e===od.LINE_FEED||e===od.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e}_checkForProblematicCharacters(e){md(e)?this._err(yd.controlCharacterInInputStream):gd(e)&&this._err(yd.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Ed;function vd(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}!function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"}(Ed||(Ed={}));const _d=new Uint16Array('\u1d41<\xd5\u0131\u028a\u049d\u057b\u05d0\u0675\u06de\u07a2\u07d6\u080f\u0a4a\u0a91\u0da1\u0e6d\u0f09\u0f26\u10ca\u1228\u12e1\u1415\u149d\u14c3\u14df\u1525\0\0\0\0\0\0\u156b\u16cd\u198d\u1c12\u1ddd\u1f7e\u2060\u21b0\u228d\u23c0\u23fb\u2442\u2824\u2912\u2d08\u2e48\u2fce\u3016\u32ba\u3639\u37ac\u38fe\u3a28\u3a71\u3ae0\u3b2e\u0800EMabcfglmnoprstu\\bfms\x7f\x84\x8b\x90\x95\x98\xa6\xb3\xb9\xc8\xcflig\u803b\xc6\u40c6P\u803b&\u4026cute\u803b\xc1\u40c1reve;\u4102\u0100iyx}rc\u803b\xc2\u40c2;\u4410r;\uc000\ud835\udd04rave\u803b\xc0\u40c0pha;\u4391acr;\u4100d;\u6a53\u0100gp\x9d\xa1on;\u4104f;\uc000\ud835\udd38plyFunction;\u6061ing\u803b\xc5\u40c5\u0100cs\xbe\xc3r;\uc000\ud835\udc9cign;\u6254ilde\u803b\xc3\u40c3ml\u803b\xc4\u40c4\u0400aceforsu\xe5\xfb\xfe\u0117\u011c\u0122\u0127\u012a\u0100cr\xea\xf2kslash;\u6216\u0176\xf6\xf8;\u6ae7ed;\u6306y;\u4411\u0180crt\u0105\u010b\u0114ause;\u6235noullis;\u612ca;\u4392r;\uc000\ud835\udd05pf;\uc000\ud835\udd39eve;\u42d8c\xf2\u0113mpeq;\u624e\u0700HOacdefhilorsu\u014d\u0151\u0156\u0180\u019e\u01a2\u01b5\u01b7\u01ba\u01dc\u0215\u0273\u0278\u027ecy;\u4427PY\u803b\xa9\u40a9\u0180cpy\u015d\u0162\u017aute;\u4106\u0100;i\u0167\u0168\u62d2talDifferentialD;\u6145leys;\u612d\u0200aeio\u0189\u018e\u0194\u0198ron;\u410cdil\u803b\xc7\u40c7rc;\u4108nint;\u6230ot;\u410a\u0100dn\u01a7\u01adilla;\u40b8terDot;\u40b7\xf2\u017fi;\u43a7rcle\u0200DMPT\u01c7\u01cb\u01d1\u01d6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01e2\u01f8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020foubleQuote;\u601duote;\u6019\u0200lnpu\u021e\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6a74\u0180git\u022f\u0236\u023aruent;\u6261nt;\u622fourIntegral;\u622e\u0100fr\u024c\u024e;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6a2fcr;\uc000\ud835\udc9ep\u0100;C\u0284\u0285\u62d3ap;\u624d\u0580DJSZacefios\u02a0\u02ac\u02b0\u02b4\u02b8\u02cb\u02d7\u02e1\u02e6\u0333\u048d\u0100;o\u0179\u02a5trahd;\u6911cy;\u4402cy;\u4405cy;\u440f\u0180grs\u02bf\u02c4\u02c7ger;\u6021r;\u61a1hv;\u6ae4\u0100ay\u02d0\u02d5ron;\u410e;\u4414l\u0100;t\u02dd\u02de\u6207a;\u4394r;\uc000\ud835\udd07\u0100af\u02eb\u0327\u0100cm\u02f0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031ccute;\u40b4o\u0174\u030b\u030d;\u42d9bleAcute;\u42ddrave;\u4060ilde;\u42dcond;\u62c4ferentialD;\u6146\u0470\u033d\0\0\0\u0342\u0354\0\u0405f;\uc000\ud835\udd3b\u0180;DE\u0348\u0349\u034d\u40a8ot;\u60dcqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03cf\u03e2\u03f8ontourIntegra\xec\u0239o\u0274\u0379\0\0\u037b\xbb\u0349nArrow;\u61d3\u0100eo\u0387\u03a4ft\u0180ART\u0390\u0396\u03a1rrow;\u61d0ightArrow;\u61d4e\xe5\u02cang\u0100LR\u03ab\u03c4eft\u0100AR\u03b3\u03b9rrow;\u67f8ightArrow;\u67faightArrow;\u67f9ight\u0100AT\u03d8\u03derrow;\u61d2ee;\u62a8p\u0241\u03e9\0\0\u03efrrow;\u61d1ownArrow;\u61d5erticalBar;\u6225n\u0300ABLRTa\u0412\u042a\u0430\u045e\u047f\u037crrow\u0180;BU\u041d\u041e\u0422\u6193ar;\u6913pArrow;\u61f5reve;\u4311eft\u02d2\u043a\0\u0446\0\u0450ightVector;\u6950eeVector;\u695eector\u0100;B\u0459\u045a\u61bdar;\u6956ight\u01d4\u0467\0\u0471eeVector;\u695fector\u0100;B\u047a\u047b\u61c1ar;\u6957ee\u0100;A\u0486\u0487\u62a4rrow;\u61a7\u0100ct\u0492\u0497r;\uc000\ud835\udc9frok;\u4110\u0800NTacdfglmopqstux\u04bd\u04c0\u04c4\u04cb\u04de\u04e2\u04e7\u04ee\u04f5\u0521\u052f\u0536\u0552\u055d\u0560\u0565G;\u414aH\u803b\xd0\u40d0cute\u803b\xc9\u40c9\u0180aiy\u04d2\u04d7\u04dcron;\u411arc\u803b\xca\u40ca;\u442dot;\u4116r;\uc000\ud835\udd08rave\u803b\xc8\u40c8ement;\u6208\u0100ap\u04fa\u04fecr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65fberySmallSquare;\u65ab\u0100gp\u0526\u052aon;\u4118f;\uc000\ud835\udd3csilon;\u4395u\u0100ai\u053c\u0549l\u0100;T\u0542\u0543\u6a75ilde;\u6242librium;\u61cc\u0100ci\u0557\u055ar;\u6130m;\u6a73a;\u4397ml\u803b\xcb\u40cb\u0100ip\u056a\u056fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058d\u05b2\u05ccy;\u4424r;\uc000\ud835\udd09lled\u0253\u0597\0\0\u05a3mallSquare;\u65fcerySmallSquare;\u65aa\u0370\u05ba\0\u05bf\0\0\u05c4f;\uc000\ud835\udd3dAll;\u6200riertrf;\u6131c\xf2\u05cb\u0600JTabcdfgorst\u05e8\u05ec\u05ef\u05fa\u0600\u0612\u0616\u061b\u061d\u0623\u066c\u0672cy;\u4403\u803b>\u403emma\u0100;d\u05f7\u05f8\u4393;\u43dcreve;\u411e\u0180eiy\u0607\u060c\u0610dil;\u4122rc;\u411c;\u4413ot;\u4120r;\uc000\ud835\udd0a;\u62d9pf;\uc000\ud835\udd3eeater\u0300EFGLST\u0635\u0644\u064e\u0656\u065b\u0666qual\u0100;L\u063e\u063f\u6265ess;\u62dbullEqual;\u6267reater;\u6aa2ess;\u6277lantEqual;\u6a7eilde;\u6273cr;\uc000\ud835\udca2;\u626b\u0400Aacfiosu\u0685\u068b\u0696\u069b\u069e\u06aa\u06be\u06caRDcy;\u442a\u0100ct\u0690\u0694ek;\u42c7;\u405eirc;\u4124r;\u610clbertSpace;\u610b\u01f0\u06af\0\u06b2f;\u610dizontalLine;\u6500\u0100ct\u06c3\u06c5\xf2\u06a9rok;\u4126mp\u0144\u06d0\u06d8ownHum\xf0\u012fqual;\u624f\u0700EJOacdfgmnostu\u06fa\u06fe\u0703\u0707\u070e\u071a\u071e\u0721\u0728\u0744\u0778\u078b\u078f\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803b\xcd\u40cd\u0100iy\u0713\u0718rc\u803b\xce\u40ce;\u4418ot;\u4130r;\u6111rave\u803b\xcc\u40cc\u0180;ap\u0720\u072f\u073f\u0100cg\u0734\u0737r;\u412ainaryI;\u6148lie\xf3\u03dd\u01f4\u0749\0\u0762\u0100;e\u074d\u074e\u622c\u0100gr\u0753\u0758ral;\u622bsection;\u62c2isible\u0100CT\u076c\u0772omma;\u6063imes;\u6062\u0180gpt\u077f\u0783\u0788on;\u412ef;\uc000\ud835\udd40a;\u4399cr;\u6110ilde;\u4128\u01eb\u079a\0\u079ecy;\u4406l\u803b\xcf\u40cf\u0280cfosu\u07ac\u07b7\u07bc\u07c2\u07d0\u0100iy\u07b1\u07b5rc;\u4134;\u4419r;\uc000\ud835\udd0dpf;\uc000\ud835\udd41\u01e3\u07c7\0\u07ccr;\uc000\ud835\udca5rcy;\u4408kcy;\u4404\u0380HJacfos\u07e4\u07e8\u07ec\u07f1\u07fd\u0802\u0808cy;\u4425cy;\u440cppa;\u439a\u0100ey\u07f6\u07fbdil;\u4136;\u441ar;\uc000\ud835\udd0epf;\uc000\ud835\udd42cr;\uc000\ud835\udca6\u0580JTaceflmost\u0825\u0829\u082c\u0850\u0863\u09b3\u09b8\u09c7\u09cd\u0a37\u0a47cy;\u4409\u803b<\u403c\u0280cmnpr\u0837\u083c\u0841\u0844\u084dute;\u4139bda;\u439bg;\u67ealacetrf;\u6112r;\u619e\u0180aey\u0857\u085c\u0861ron;\u413ddil;\u413b;\u441b\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087e\u08a9\u08b1\u08e0\u08e6\u08fc\u092f\u095b\u0390\u096a\u0100nr\u0883\u088fgleBracket;\u67e8row\u0180;BR\u0899\u089a\u089e\u6190ar;\u61e4ightArrow;\u61c6eiling;\u6308o\u01f5\u08b7\0\u08c3bleBracket;\u67e6n\u01d4\u08c8\0\u08d2eeVector;\u6961ector\u0100;B\u08db\u08dc\u61c3ar;\u6959loor;\u630aight\u0100AV\u08ef\u08f5rrow;\u6194ector;\u694e\u0100er\u0901\u0917e\u0180;AV\u0909\u090a\u0910\u62a3rrow;\u61a4ector;\u695aiangle\u0180;BE\u0924\u0925\u0929\u62b2ar;\u69cfqual;\u62b4p\u0180DTV\u0937\u0942\u094cownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61bfar;\u6958ector\u0100;B\u0965\u0966\u61bcar;\u6952ight\xe1\u039cs\u0300EFGLST\u097e\u098b\u0995\u099d\u09a2\u09adqualGreater;\u62daullEqual;\u6266reater;\u6276ess;\u6aa1lantEqual;\u6a7dilde;\u6272r;\uc000\ud835\udd0f\u0100;e\u09bd\u09be\u62d8ftarrow;\u61daidot;\u413f\u0180npw\u09d4\u0a16\u0a1bg\u0200LRlr\u09de\u09f7\u0a02\u0a10eft\u0100AR\u09e6\u09ecrrow;\u67f5ightArrow;\u67f7ightArrow;\u67f6eft\u0100ar\u03b3\u0a0aight\xe1\u03bfight\xe1\u03caf;\uc000\ud835\udd43er\u0100LR\u0a22\u0a2ceftArrow;\u6199ightArrow;\u6198\u0180cht\u0a3e\u0a40\u0a42\xf2\u084c;\u61b0rok;\u4141;\u626a\u0400acefiosu\u0a5a\u0a5d\u0a60\u0a77\u0a7c\u0a85\u0a8b\u0a8ep;\u6905y;\u441c\u0100dl\u0a65\u0a6fiumSpace;\u605flintrf;\u6133r;\uc000\ud835\udd10nusPlus;\u6213pf;\uc000\ud835\udd44c\xf2\u0a76;\u439c\u0480Jacefostu\u0aa3\u0aa7\u0aad\u0ac0\u0b14\u0b19\u0d91\u0d97\u0d9ecy;\u440acute;\u4143\u0180aey\u0ab4\u0ab9\u0aberon;\u4147dil;\u4145;\u441d\u0180gsw\u0ac7\u0af0\u0b0eative\u0180MTV\u0ad3\u0adf\u0ae8ediumSpace;\u600bhi\u0100cn\u0ae6\u0ad8\xeb\u0ad9eryThi\xee\u0ad9ted\u0100GL\u0af8\u0b06reaterGreate\xf2\u0673essLes\xf3\u0a48Line;\u400ar;\uc000\ud835\udd11\u0200Bnpt\u0b22\u0b28\u0b37\u0b3areak;\u6060BreakingSpace;\u40a0f;\u6115\u0680;CDEGHLNPRSTV\u0b55\u0b56\u0b6a\u0b7c\u0ba1\u0beb\u0c04\u0c5e\u0c84\u0ca6\u0cd8\u0d61\u0d85\u6aec\u0100ou\u0b5b\u0b64ngruent;\u6262pCap;\u626doubleVerticalBar;\u6226\u0180lqx\u0b83\u0b8a\u0b9bement;\u6209ual\u0100;T\u0b92\u0b93\u6260ilde;\uc000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0bb6\u0bb7\u0bbd\u0bc9\u0bd3\u0bd8\u0be5\u626fqual;\u6271ullEqual;\uc000\u2267\u0338reater;\uc000\u226b\u0338ess;\u6279lantEqual;\uc000\u2a7e\u0338ilde;\u6275ump\u0144\u0bf2\u0bfdownHump;\uc000\u224e\u0338qual;\uc000\u224f\u0338e\u0100fs\u0c0a\u0c27tTriangle\u0180;BE\u0c1a\u0c1b\u0c21\u62eaar;\uc000\u29cf\u0338qual;\u62ecs\u0300;EGLST\u0c35\u0c36\u0c3c\u0c44\u0c4b\u0c58\u626equal;\u6270reater;\u6278ess;\uc000\u226a\u0338lantEqual;\uc000\u2a7d\u0338ilde;\u6274ested\u0100GL\u0c68\u0c79reaterGreater;\uc000\u2aa2\u0338essLess;\uc000\u2aa1\u0338recedes\u0180;ES\u0c92\u0c93\u0c9b\u6280qual;\uc000\u2aaf\u0338lantEqual;\u62e0\u0100ei\u0cab\u0cb9verseElement;\u620cghtTriangle\u0180;BE\u0ccb\u0ccc\u0cd2\u62ebar;\uc000\u29d0\u0338qual;\u62ed\u0100qu\u0cdd\u0d0cuareSu\u0100bp\u0ce8\u0cf9set\u0100;E\u0cf0\u0cf3\uc000\u228f\u0338qual;\u62e2erset\u0100;E\u0d03\u0d06\uc000\u2290\u0338qual;\u62e3\u0180bcp\u0d13\u0d24\u0d4eset\u0100;E\u0d1b\u0d1e\uc000\u2282\u20d2qual;\u6288ceeds\u0200;EST\u0d32\u0d33\u0d3b\u0d46\u6281qual;\uc000\u2ab0\u0338lantEqual;\u62e1ilde;\uc000\u227f\u0338erset\u0100;E\u0d58\u0d5b\uc000\u2283\u20d2qual;\u6289ilde\u0200;EFT\u0d6e\u0d6f\u0d75\u0d7f\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uc000\ud835\udca9ilde\u803b\xd1\u40d1;\u439d\u0700Eacdfgmoprstuv\u0dbd\u0dc2\u0dc9\u0dd5\u0ddb\u0de0\u0de7\u0dfc\u0e02\u0e20\u0e22\u0e32\u0e3f\u0e44lig;\u4152cute\u803b\xd3\u40d3\u0100iy\u0dce\u0dd3rc\u803b\xd4\u40d4;\u441eblac;\u4150r;\uc000\ud835\udd12rave\u803b\xd2\u40d2\u0180aei\u0dee\u0df2\u0df6cr;\u414cga;\u43a9cron;\u439fpf;\uc000\ud835\udd46enCurly\u0100DQ\u0e0e\u0e1aoubleQuote;\u601cuote;\u6018;\u6a54\u0100cl\u0e27\u0e2cr;\uc000\ud835\udcaaash\u803b\xd8\u40d8i\u016c\u0e37\u0e3cde\u803b\xd5\u40d5es;\u6a37ml\u803b\xd6\u40d6er\u0100BP\u0e4b\u0e60\u0100ar\u0e50\u0e53r;\u603eac\u0100ek\u0e5a\u0e5c;\u63deet;\u63b4arenthesis;\u63dc\u0480acfhilors\u0e7f\u0e87\u0e8a\u0e8f\u0e92\u0e94\u0e9d\u0eb0\u0efcrtialD;\u6202y;\u441fr;\uc000\ud835\udd13i;\u43a6;\u43a0usMinus;\u40b1\u0100ip\u0ea2\u0eadncareplan\xe5\u069df;\u6119\u0200;eio\u0eb9\u0eba\u0ee0\u0ee4\u6abbcedes\u0200;EST\u0ec8\u0ec9\u0ecf\u0eda\u627aqual;\u6aaflantEqual;\u627cilde;\u627eme;\u6033\u0100dp\u0ee9\u0eeeuct;\u620fortion\u0100;a\u0225\u0ef9l;\u621d\u0100ci\u0f01\u0f06r;\uc000\ud835\udcab;\u43a8\u0200Ufos\u0f11\u0f16\u0f1b\u0f1fOT\u803b"\u4022r;\uc000\ud835\udd14pf;\u611acr;\uc000\ud835\udcac\u0600BEacefhiorsu\u0f3e\u0f43\u0f47\u0f60\u0f73\u0fa7\u0faa\u0fad\u1096\u10a9\u10b4\u10bearr;\u6910G\u803b\xae\u40ae\u0180cnr\u0f4e\u0f53\u0f56ute;\u4154g;\u67ebr\u0100;t\u0f5c\u0f5d\u61a0l;\u6916\u0180aey\u0f67\u0f6c\u0f71ron;\u4158dil;\u4156;\u4420\u0100;v\u0f78\u0f79\u611cerse\u0100EU\u0f82\u0f99\u0100lq\u0f87\u0f8eement;\u620builibrium;\u61cbpEquilibrium;\u696fr\xbb\u0f79o;\u43a1ght\u0400ACDFTUVa\u0fc1\u0feb\u0ff3\u1022\u1028\u105b\u1087\u03d8\u0100nr\u0fc6\u0fd2gleBracket;\u67e9row\u0180;BL\u0fdc\u0fdd\u0fe1\u6192ar;\u61e5eftArrow;\u61c4eiling;\u6309o\u01f5\u0ff9\0\u1005bleBracket;\u67e7n\u01d4\u100a\0\u1014eeVector;\u695dector\u0100;B\u101d\u101e\u61c2ar;\u6955loor;\u630b\u0100er\u102d\u1043e\u0180;AV\u1035\u1036\u103c\u62a2rrow;\u61a6ector;\u695biangle\u0180;BE\u1050\u1051\u1055\u62b3ar;\u69d0qual;\u62b5p\u0180DTV\u1063\u106e\u1078ownVector;\u694feeVector;\u695cector\u0100;B\u1082\u1083\u61bear;\u6954ector\u0100;B\u1091\u1092\u61c0ar;\u6953\u0100pu\u109b\u109ef;\u611dndImplies;\u6970ightarrow;\u61db\u0100ch\u10b9\u10bcr;\u611b;\u61b1leDelayed;\u69f4\u0680HOacfhimoqstu\u10e4\u10f1\u10f7\u10fd\u1119\u111e\u1151\u1156\u1161\u1167\u11b5\u11bb\u11bf\u0100Cc\u10e9\u10eeHcy;\u4429y;\u4428FTcy;\u442ccute;\u415a\u0280;aeiy\u1108\u1109\u110e\u1113\u1117\u6abcron;\u4160dil;\u415erc;\u415c;\u4421r;\uc000\ud835\udd16ort\u0200DLRU\u112a\u1134\u113e\u1149ownArrow\xbb\u041eeftArrow\xbb\u089aightArrow\xbb\u0fddpArrow;\u6191gma;\u43a3allCircle;\u6218pf;\uc000\ud835\udd4a\u0272\u116d\0\0\u1170t;\u621aare\u0200;ISU\u117b\u117c\u1189\u11af\u65a1ntersection;\u6293u\u0100bp\u118f\u119eset\u0100;E\u1197\u1198\u628fqual;\u6291erset\u0100;E\u11a8\u11a9\u6290qual;\u6292nion;\u6294cr;\uc000\ud835\udcaear;\u62c6\u0200bcmp\u11c8\u11db\u1209\u120b\u0100;s\u11cd\u11ce\u62d0et\u0100;E\u11cd\u11d5qual;\u6286\u0100ch\u11e0\u1205eeds\u0200;EST\u11ed\u11ee\u11f4\u11ff\u627bqual;\u6ab0lantEqual;\u627dilde;\u627fTh\xe1\u0f8c;\u6211\u0180;es\u1212\u1213\u1223\u62d1rset\u0100;E\u121c\u121d\u6283qual;\u6287et\xbb\u1213\u0580HRSacfhiors\u123e\u1244\u1249\u1255\u125e\u1271\u1276\u129f\u12c2\u12c8\u12d1ORN\u803b\xde\u40deADE;\u6122\u0100Hc\u124e\u1252cy;\u440by;\u4426\u0100bu\u125a\u125c;\u4009;\u43a4\u0180aey\u1265\u126a\u126fron;\u4164dil;\u4162;\u4422r;\uc000\ud835\udd17\u0100ei\u127b\u1289\u01f2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128e\u1298kSpace;\uc000\u205f\u200aSpace;\u6009lde\u0200;EFT\u12ab\u12ac\u12b2\u12bc\u623cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uc000\ud835\udd4bipleDot;\u60db\u0100ct\u12d6\u12dbr;\uc000\ud835\udcafrok;\u4166\u0ae1\u12f7\u130e\u131a\u1326\0\u132c\u1331\0\0\0\0\0\u1338\u133d\u1377\u1385\0\u13ff\u1404\u140a\u1410\u0100cr\u12fb\u1301ute\u803b\xda\u40dar\u0100;o\u1307\u1308\u619fcir;\u6949r\u01e3\u1313\0\u1316y;\u440eve;\u416c\u0100iy\u131e\u1323rc\u803b\xdb\u40db;\u4423blac;\u4170r;\uc000\ud835\udd18rave\u803b\xd9\u40d9acr;\u416a\u0100di\u1341\u1369er\u0100BP\u1348\u135d\u0100ar\u134d\u1350r;\u405fac\u0100ek\u1357\u1359;\u63dfet;\u63b5arenthesis;\u63ddon\u0100;P\u1370\u1371\u62c3lus;\u628e\u0100gp\u137b\u137fon;\u4172f;\uc000\ud835\udd4c\u0400ADETadps\u1395\u13ae\u13b8\u13c4\u03e8\u13d2\u13d7\u13f3rrow\u0180;BD\u1150\u13a0\u13a4ar;\u6912ownArrow;\u61c5ownArrow;\u6195quilibrium;\u696eee\u0100;A\u13cb\u13cc\u62a5rrow;\u61a5own\xe1\u03f3er\u0100LR\u13de\u13e8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13f9\u13fa\u43d2on;\u43a5ing;\u416ecr;\uc000\ud835\udcb0ilde;\u4168ml\u803b\xdc\u40dc\u0480Dbcdefosv\u1427\u142c\u1430\u1433\u143e\u1485\u148a\u1490\u1496ash;\u62abar;\u6aeby;\u4412ash\u0100;l\u143b\u143c\u62a9;\u6ae6\u0100er\u1443\u1445;\u62c1\u0180bty\u144c\u1450\u147aar;\u6016\u0100;i\u144f\u1455cal\u0200BLST\u1461\u1465\u146a\u1474ar;\u6223ine;\u407ceparator;\u6758ilde;\u6240ThinSpace;\u600ar;\uc000\ud835\udd19pf;\uc000\ud835\udd4dcr;\uc000\ud835\udcb1dash;\u62aa\u0280cefos\u14a7\u14ac\u14b1\u14b6\u14bcirc;\u4174dge;\u62c0r;\uc000\ud835\udd1apf;\uc000\ud835\udd4ecr;\uc000\ud835\udcb2\u0200fios\u14cb\u14d0\u14d2\u14d8r;\uc000\ud835\udd1b;\u439epf;\uc000\ud835\udd4fcr;\uc000\ud835\udcb3\u0480AIUacfosu\u14f1\u14f5\u14f9\u14fd\u1504\u150f\u1514\u151a\u1520cy;\u442fcy;\u4407cy;\u442ecute\u803b\xdd\u40dd\u0100iy\u1509\u150drc;\u4176;\u442br;\uc000\ud835\udd1cpf;\uc000\ud835\udd50cr;\uc000\ud835\udcb4ml;\u4178\u0400Hacdefos\u1535\u1539\u153f\u154b\u154f\u155d\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417d;\u4417ot;\u417b\u01f2\u1554\0\u155boWidt\xe8\u0ad9a;\u4396r;\u6128pf;\u6124cr;\uc000\ud835\udcb5\u0be1\u1583\u158a\u1590\0\u15b0\u15b6\u15bf\0\0\0\0\u15c6\u15db\u15eb\u165f\u166d\0\u1695\u169b\u16b2\u16b9\0\u16becute\u803b\xe1\u40e1reve;\u4103\u0300;Ediuy\u159c\u159d\u15a1\u15a3\u15a8\u15ad\u623e;\uc000\u223e\u0333;\u623frc\u803b\xe2\u40e2te\u80bb\xb4\u0306;\u4430lig\u803b\xe6\u40e6\u0100;r\xb2\u15ba;\uc000\ud835\udd1erave\u803b\xe0\u40e0\u0100ep\u15ca\u15d6\u0100fp\u15cf\u15d4sym;\u6135\xe8\u15d3ha;\u43b1\u0100ap\u15dfc\u0100cl\u15e4\u15e7r;\u4101g;\u6a3f\u0264\u15f0\0\0\u160a\u0280;adsv\u15fa\u15fb\u15ff\u1601\u1607\u6227nd;\u6a55;\u6a5clope;\u6a58;\u6a5a\u0380;elmrsz\u1618\u1619\u161b\u161e\u163f\u164f\u1659\u6220;\u69a4e\xbb\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163a\u163c\u163e;\u69a8;\u69a9;\u69aa;\u69ab;\u69ac;\u69ad;\u69ae;\u69aft\u0100;v\u1645\u1646\u621fb\u0100;d\u164c\u164d\u62be;\u699d\u0100pt\u1654\u1657h;\u6222\xbb\xb9arr;\u637c\u0100gp\u1663\u1667on;\u4105f;\uc000\ud835\udd52\u0380;Eaeiop\u12c1\u167b\u167d\u1682\u1684\u1687\u168a;\u6a70cir;\u6a6f;\u624ad;\u624bs;\u4027rox\u0100;e\u12c1\u1692\xf1\u1683ing\u803b\xe5\u40e5\u0180cty\u16a1\u16a6\u16a8r;\uc000\ud835\udcb6;\u402amp\u0100;e\u12c1\u16af\xf1\u0288ilde\u803b\xe3\u40e3ml\u803b\xe4\u40e4\u0100ci\u16c2\u16c8onin\xf4\u0272nt;\u6a11\u0800Nabcdefiklnoprsu\u16ed\u16f1\u1730\u173c\u1743\u1748\u1778\u177d\u17e0\u17e6\u1839\u1850\u170d\u193d\u1948\u1970ot;\u6aed\u0100cr\u16f6\u171ek\u0200ceps\u1700\u1705\u170d\u1713ong;\u624cpsilon;\u43f6rime;\u6035im\u0100;e\u171a\u171b\u623dq;\u62cd\u0176\u1722\u1726ee;\u62bded\u0100;g\u172c\u172d\u6305e\xbb\u172drk\u0100;t\u135c\u1737brk;\u63b6\u0100oy\u1701\u1741;\u4431quo;\u601e\u0280cmprt\u1753\u175b\u1761\u1764\u1768aus\u0100;e\u010a\u0109ptyv;\u69b0s\xe9\u170cno\xf5\u0113\u0180ahw\u176f\u1771\u1773;\u43b2;\u6136een;\u626cr;\uc000\ud835\udd1fg\u0380costuvw\u178d\u179d\u17b3\u17c1\u17d5\u17db\u17de\u0180aiu\u1794\u1796\u179a\xf0\u0760rc;\u65efp\xbb\u1371\u0180dpt\u17a4\u17a8\u17adot;\u6a00lus;\u6a01imes;\u6a02\u0271\u17b9\0\0\u17becup;\u6a06ar;\u6605riangle\u0100du\u17cd\u17d2own;\u65bdp;\u65b3plus;\u6a04e\xe5\u1444\xe5\u14adarow;\u690d\u0180ako\u17ed\u1826\u1835\u0100cn\u17f2\u1823k\u0180lst\u17fa\u05ab\u1802ozenge;\u69ebriangle\u0200;dlr\u1812\u1813\u1818\u181d\u65b4own;\u65beeft;\u65c2ight;\u65b8k;\u6423\u01b1\u182b\0\u1833\u01b2\u182f\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183e\u184d\u0100;q\u1843\u1846\uc000=\u20e5uiv;\uc000\u2261\u20e5t;\u6310\u0200ptwx\u1859\u185e\u1867\u186cf;\uc000\ud835\udd53\u0100;t\u13cb\u1863om\xbb\u13cctie;\u62c8\u0600DHUVbdhmptuv\u1885\u1896\u18aa\u18bb\u18d7\u18db\u18ec\u18ff\u1905\u190a\u1910\u1921\u0200LRlr\u188e\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18a1\u18a2\u18a4\u18a6\u18a8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18b3\u18b5\u18b7\u18b9;\u655d;\u655a;\u655c;\u6559\u0380;HLRhlr\u18ca\u18cb\u18cd\u18cf\u18d1\u18d3\u18d5\u6551;\u656c;\u6563;\u6560;\u656b;\u6562;\u655fox;\u69c9\u0200LRlr\u18e4\u18e6\u18e8\u18ea;\u6555;\u6552;\u6510;\u650c\u0280;DUdu\u06bd\u18f7\u18f9\u18fb\u18fd;\u6565;\u6568;\u652c;\u6534inus;\u629flus;\u629eimes;\u62a0\u0200LRlr\u1919\u191b\u191d\u191f;\u655b;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193b\u6502;\u656a;\u6561;\u655e;\u653c;\u6524;\u651c\u0100ev\u0123\u1942bar\u803b\xa6\u40a6\u0200ceio\u1951\u1956\u195a\u1960r;\uc000\ud835\udcb7mi;\u604fm\u0100;e\u171a\u171cl\u0180;bh\u1968\u1969\u196b\u405c;\u69c5sub;\u67c8\u016c\u1974\u197el\u0100;e\u1979\u197a\u6022t\xbb\u197ap\u0180;Ee\u012f\u1985\u1987;\u6aae\u0100;q\u06dc\u06db\u0ce1\u19a7\0\u19e8\u1a11\u1a15\u1a32\0\u1a37\u1a50\0\0\u1ab4\0\0\u1ac1\0\0\u1b21\u1b2e\u1b4d\u1b52\0\u1bfd\0\u1c0c\u0180cpr\u19ad\u19b2\u19ddute;\u4107\u0300;abcds\u19bf\u19c0\u19c4\u19ca\u19d5\u19d9\u6229nd;\u6a44rcup;\u6a49\u0100au\u19cf\u19d2p;\u6a4bp;\u6a47ot;\u6a40;\uc000\u2229\ufe00\u0100eo\u19e2\u19e5t;\u6041\xee\u0693\u0200aeiu\u19f0\u19fb\u1a01\u1a05\u01f0\u19f5\0\u19f8s;\u6a4don;\u410ddil\u803b\xe7\u40e7rc;\u4109ps\u0100;s\u1a0c\u1a0d\u6a4cm;\u6a50ot;\u410b\u0180dmn\u1a1b\u1a20\u1a26il\u80bb\xb8\u01adptyv;\u69b2t\u8100\xa2;e\u1a2d\u1a2e\u40a2r\xe4\u01b2r;\uc000\ud835\udd20\u0180cei\u1a3d\u1a40\u1a4dy;\u4447ck\u0100;m\u1a47\u1a48\u6713ark\xbb\u1a48;\u43c7r\u0380;Ecefms\u1a5f\u1a60\u1a62\u1a6b\u1aa4\u1aaa\u1aae\u65cb;\u69c3\u0180;el\u1a69\u1a6a\u1a6d\u42c6q;\u6257e\u0261\u1a74\0\0\u1a88rrow\u0100lr\u1a7c\u1a81eft;\u61baight;\u61bb\u0280RSacd\u1a92\u1a94\u1a96\u1a9a\u1a9f\xbb\u0f47;\u64c8st;\u629birc;\u629aash;\u629dnint;\u6a10id;\u6aefcir;\u69c2ubs\u0100;u\u1abb\u1abc\u6663it\xbb\u1abc\u02ec\u1ac7\u1ad4\u1afa\0\u1b0aon\u0100;e\u1acd\u1ace\u403a\u0100;q\xc7\xc6\u026d\u1ad9\0\0\u1ae2a\u0100;t\u1ade\u1adf\u402c;\u4040\u0180;fl\u1ae8\u1ae9\u1aeb\u6201\xee\u1160e\u0100mx\u1af1\u1af6ent\xbb\u1ae9e\xf3\u024d\u01e7\u1afe\0\u1b07\u0100;d\u12bb\u1b02ot;\u6a6dn\xf4\u0246\u0180fry\u1b10\u1b14\u1b17;\uc000\ud835\udd54o\xe4\u0254\u8100\xa9;s\u0155\u1b1dr;\u6117\u0100ao\u1b25\u1b29rr;\u61b5ss;\u6717\u0100cu\u1b32\u1b37r;\uc000\ud835\udcb8\u0100bp\u1b3c\u1b44\u0100;e\u1b41\u1b42\u6acf;\u6ad1\u0100;e\u1b49\u1b4a\u6ad0;\u6ad2dot;\u62ef\u0380delprvw\u1b60\u1b6c\u1b77\u1b82\u1bac\u1bd4\u1bf9arr\u0100lr\u1b68\u1b6a;\u6938;\u6935\u0270\u1b72\0\0\u1b75r;\u62dec;\u62dfarr\u0100;p\u1b7f\u1b80\u61b6;\u693d\u0300;bcdos\u1b8f\u1b90\u1b96\u1ba1\u1ba5\u1ba8\u622arcap;\u6a48\u0100au\u1b9b\u1b9ep;\u6a46p;\u6a4aot;\u628dr;\u6a45;\uc000\u222a\ufe00\u0200alrv\u1bb5\u1bbf\u1bde\u1be3rr\u0100;m\u1bbc\u1bbd\u61b7;\u693cy\u0180evw\u1bc7\u1bd4\u1bd8q\u0270\u1bce\0\0\u1bd2re\xe3\u1b73u\xe3\u1b75ee;\u62ceedge;\u62cfen\u803b\xa4\u40a4earrow\u0100lr\u1bee\u1bf3eft\xbb\u1b80ight\xbb\u1bbde\xe4\u1bdd\u0100ci\u1c01\u1c07onin\xf4\u01f7nt;\u6231lcty;\u632d\u0980AHabcdefhijlorstuwz\u1c38\u1c3b\u1c3f\u1c5d\u1c69\u1c75\u1c8a\u1c9e\u1cac\u1cb7\u1cfb\u1cff\u1d0d\u1d7b\u1d91\u1dab\u1dbb\u1dc6\u1dcdr\xf2\u0381ar;\u6965\u0200glrs\u1c48\u1c4d\u1c52\u1c54ger;\u6020eth;\u6138\xf2\u1133h\u0100;v\u1c5a\u1c5b\u6010\xbb\u090a\u016b\u1c61\u1c67arow;\u690fa\xe3\u0315\u0100ay\u1c6e\u1c73ron;\u410f;\u4434\u0180;ao\u0332\u1c7c\u1c84\u0100gr\u02bf\u1c81r;\u61catseq;\u6a77\u0180glm\u1c91\u1c94\u1c98\u803b\xb0\u40b0ta;\u43b4ptyv;\u69b1\u0100ir\u1ca3\u1ca8sht;\u697f;\uc000\ud835\udd21ar\u0100lr\u1cb3\u1cb5\xbb\u08dc\xbb\u101e\u0280aegsv\u1cc2\u0378\u1cd6\u1cdc\u1ce0m\u0180;os\u0326\u1cca\u1cd4nd\u0100;s\u0326\u1cd1uit;\u6666amma;\u43ddin;\u62f2\u0180;io\u1ce7\u1ce8\u1cf8\u40f7de\u8100\xf7;o\u1ce7\u1cf0ntimes;\u62c7n\xf8\u1cf7cy;\u4452c\u026f\u1d06\0\0\u1d0arn;\u631eop;\u630d\u0280lptuw\u1d18\u1d1d\u1d22\u1d49\u1d55lar;\u4024f;\uc000\ud835\udd55\u0280;emps\u030b\u1d2d\u1d37\u1d3d\u1d42q\u0100;d\u0352\u1d33ot;\u6251inus;\u6238lus;\u6214quare;\u62a1blebarwedg\xe5\xfan\u0180adh\u112e\u1d5d\u1d67ownarrow\xf3\u1c83arpoon\u0100lr\u1d72\u1d76ef\xf4\u1cb4igh\xf4\u1cb6\u0162\u1d7f\u1d85karo\xf7\u0f42\u026f\u1d8a\0\0\u1d8ern;\u631fop;\u630c\u0180cot\u1d98\u1da3\u1da6\u0100ry\u1d9d\u1da1;\uc000\ud835\udcb9;\u4455l;\u69f6rok;\u4111\u0100dr\u1db0\u1db4ot;\u62f1i\u0100;f\u1dba\u1816\u65bf\u0100ah\u1dc0\u1dc3r\xf2\u0429a\xf2\u0fa6angle;\u69a6\u0100ci\u1dd2\u1dd5y;\u445fgrarr;\u67ff\u0900Dacdefglmnopqrstux\u1e01\u1e09\u1e19\u1e38\u0578\u1e3c\u1e49\u1e61\u1e7e\u1ea5\u1eaf\u1ebd\u1ee1\u1f2a\u1f37\u1f44\u1f4e\u1f5a\u0100Do\u1e06\u1d34o\xf4\u1c89\u0100cs\u1e0e\u1e14ute\u803b\xe9\u40e9ter;\u6a6e\u0200aioy\u1e22\u1e27\u1e31\u1e36ron;\u411br\u0100;c\u1e2d\u1e2e\u6256\u803b\xea\u40ealon;\u6255;\u444dot;\u4117\u0100Dr\u1e41\u1e45ot;\u6252;\uc000\ud835\udd22\u0180;rs\u1e50\u1e51\u1e57\u6a9aave\u803b\xe8\u40e8\u0100;d\u1e5c\u1e5d\u6a96ot;\u6a98\u0200;ils\u1e6a\u1e6b\u1e72\u1e74\u6a99nters;\u63e7;\u6113\u0100;d\u1e79\u1e7a\u6a95ot;\u6a97\u0180aps\u1e85\u1e89\u1e97cr;\u4113ty\u0180;sv\u1e92\u1e93\u1e95\u6205et\xbb\u1e93p\u01001;\u1e9d\u1ea4\u0133\u1ea1\u1ea3;\u6004;\u6005\u6003\u0100gs\u1eaa\u1eac;\u414bp;\u6002\u0100gp\u1eb4\u1eb8on;\u4119f;\uc000\ud835\udd56\u0180als\u1ec4\u1ece\u1ed2r\u0100;s\u1eca\u1ecb\u62d5l;\u69e3us;\u6a71i\u0180;lv\u1eda\u1edb\u1edf\u43b5on\xbb\u1edb;\u43f5\u0200csuv\u1eea\u1ef3\u1f0b\u1f23\u0100io\u1eef\u1e31rc\xbb\u1e2e\u0269\u1ef9\0\0\u1efb\xed\u0548ant\u0100gl\u1f02\u1f06tr\xbb\u1e5dess\xbb\u1e7a\u0180aei\u1f12\u1f16\u1f1als;\u403dst;\u625fv\u0100;D\u0235\u1f20D;\u6a78parsl;\u69e5\u0100Da\u1f2f\u1f33ot;\u6253rr;\u6971\u0180cdi\u1f3e\u1f41\u1ef8r;\u612fo\xf4\u0352\u0100ah\u1f49\u1f4b;\u43b7\u803b\xf0\u40f0\u0100mr\u1f53\u1f57l\u803b\xeb\u40ebo;\u60ac\u0180cip\u1f61\u1f64\u1f67l;\u4021s\xf4\u056e\u0100eo\u1f6c\u1f74ctatio\xee\u0559nential\xe5\u0579\u09e1\u1f92\0\u1f9e\0\u1fa1\u1fa7\0\0\u1fc6\u1fcc\0\u1fd3\0\u1fe6\u1fea\u2000\0\u2008\u205allingdotse\xf1\u1e44y;\u4444male;\u6640\u0180ilr\u1fad\u1fb3\u1fc1lig;\u8000\ufb03\u0269\u1fb9\0\0\u1fbdg;\u8000\ufb00ig;\u8000\ufb04;\uc000\ud835\udd23lig;\u8000\ufb01lig;\uc000fj\u0180alt\u1fd9\u1fdc\u1fe1t;\u666dig;\u8000\ufb02ns;\u65b1of;\u4192\u01f0\u1fee\0\u1ff3f;\uc000\ud835\udd57\u0100ak\u05bf\u1ff7\u0100;v\u1ffc\u1ffd\u62d4;\u6ad9artint;\u6a0d\u0100ao\u200c\u2055\u0100cs\u2011\u2052\u03b1\u201a\u2030\u2038\u2045\u2048\0\u2050\u03b2\u2022\u2025\u2027\u202a\u202c\0\u202e\u803b\xbd\u40bd;\u6153\u803b\xbc\u40bc;\u6155;\u6159;\u615b\u01b3\u2034\0\u2036;\u6154;\u6156\u02b4\u203e\u2041\0\0\u2043\u803b\xbe\u40be;\u6157;\u615c5;\u6158\u01b6\u204c\0\u204e;\u615a;\u615d8;\u615el;\u6044wn;\u6322cr;\uc000\ud835\udcbb\u0880Eabcdefgijlnorstv\u2082\u2089\u209f\u20a5\u20b0\u20b4\u20f0\u20f5\u20fa\u20ff\u2103\u2112\u2138\u0317\u213e\u2152\u219e\u0100;l\u064d\u2087;\u6a8c\u0180cmp\u2090\u2095\u209dute;\u41f5ma\u0100;d\u209c\u1cda\u43b3;\u6a86reve;\u411f\u0100iy\u20aa\u20aerc;\u411d;\u4433ot;\u4121\u0200;lqs\u063e\u0642\u20bd\u20c9\u0180;qs\u063e\u064c\u20c4lan\xf4\u0665\u0200;cdl\u0665\u20d2\u20d5\u20e5c;\u6aa9ot\u0100;o\u20dc\u20dd\u6a80\u0100;l\u20e2\u20e3\u6a82;\u6a84\u0100;e\u20ea\u20ed\uc000\u22db\ufe00s;\u6a94r;\uc000\ud835\udd24\u0100;g\u0673\u061bmel;\u6137cy;\u4453\u0200;Eaj\u065a\u210c\u210e\u2110;\u6a92;\u6aa5;\u6aa4\u0200Eaes\u211b\u211d\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6a8arox\xbb\u2124\u0100;q\u212e\u212f\u6a88\u0100;q\u212e\u211bim;\u62e7pf;\uc000\ud835\udd58\u0100ci\u2143\u2146r;\u610am\u0180;el\u066b\u214e\u2150;\u6a8e;\u6a90\u8300>;cdlqr\u05ee\u2160\u216a\u216e\u2173\u2179\u0100ci\u2165\u2167;\u6aa7r;\u6a7aot;\u62d7Par;\u6995uest;\u6a7c\u0280adels\u2184\u216a\u2190\u0656\u219b\u01f0\u2189\0\u218epro\xf8\u209er;\u6978q\u0100lq\u063f\u2196les\xf3\u2088i\xed\u066b\u0100en\u21a3\u21adrtneqq;\uc000\u2269\ufe00\xc5\u21aa\u0500Aabcefkosy\u21c4\u21c7\u21f1\u21f5\u21fa\u2218\u221d\u222f\u2268\u227dr\xf2\u03a0\u0200ilmr\u21d0\u21d4\u21d7\u21dbrs\xf0\u1484f\xbb\u2024il\xf4\u06a9\u0100dr\u21e0\u21e4cy;\u444a\u0180;cw\u08f4\u21eb\u21efir;\u6948;\u61adar;\u610firc;\u4125\u0180alr\u2201\u220e\u2213rts\u0100;u\u2209\u220a\u6665it\xbb\u220alip;\u6026con;\u62b9r;\uc000\ud835\udd25s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223a\u223e\u2243\u225e\u2263rr;\u61fftht;\u623bk\u0100lr\u2249\u2253eftarrow;\u61a9ightarrow;\u61aaf;\uc000\ud835\udd59bar;\u6015\u0180clt\u226f\u2274\u2278r;\uc000\ud835\udcbdas\xe8\u21f4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xbb\u1c5b\u0ae1\u22a3\0\u22aa\0\u22b8\u22c5\u22ce\0\u22d5\u22f3\0\0\u22f8\u2322\u2367\u2362\u237f\0\u2386\u23aa\u23b4cute\u803b\xed\u40ed\u0180;iy\u0771\u22b0\u22b5rc\u803b\xee\u40ee;\u4438\u0100cx\u22bc\u22bfy;\u4435cl\u803b\xa1\u40a1\u0100fr\u039f\u22c9;\uc000\ud835\udd26rave\u803b\xec\u40ec\u0200;ino\u073e\u22dd\u22e9\u22ee\u0100in\u22e2\u22e6nt;\u6a0ct;\u622dfin;\u69dcta;\u6129lig;\u4133\u0180aop\u22fe\u231a\u231d\u0180cgt\u2305\u2308\u2317r;\u412b\u0180elp\u071f\u230f\u2313in\xe5\u078ear\xf4\u0720h;\u4131f;\u62b7ed;\u41b5\u0280;cfot\u04f4\u232c\u2331\u233d\u2341are;\u6105in\u0100;t\u2338\u2339\u621eie;\u69dddo\xf4\u2319\u0280;celp\u0757\u234c\u2350\u235b\u2361al;\u62ba\u0100gr\u2355\u2359er\xf3\u1563\xe3\u234darhk;\u6a17rod;\u6a3c\u0200cgpt\u236f\u2372\u2376\u237by;\u4451on;\u412ff;\uc000\ud835\udd5aa;\u43b9uest\u803b\xbf\u40bf\u0100ci\u238a\u238fr;\uc000\ud835\udcben\u0280;Edsv\u04f4\u239b\u239d\u23a1\u04f3;\u62f9ot;\u62f5\u0100;v\u23a6\u23a7\u62f4;\u62f3\u0100;i\u0777\u23aelde;\u4129\u01eb\u23b8\0\u23bccy;\u4456l\u803b\xef\u40ef\u0300cfmosu\u23cc\u23d7\u23dc\u23e1\u23e7\u23f5\u0100iy\u23d1\u23d5rc;\u4135;\u4439r;\uc000\ud835\udd27ath;\u4237pf;\uc000\ud835\udd5b\u01e3\u23ec\0\u23f1r;\uc000\ud835\udcbfrcy;\u4458kcy;\u4454\u0400acfghjos\u240b\u2416\u2422\u2427\u242d\u2431\u2435\u243bppa\u0100;v\u2413\u2414\u43ba;\u43f0\u0100ey\u241b\u2420dil;\u4137;\u443ar;\uc000\ud835\udd28reen;\u4138cy;\u4445cy;\u445cpf;\uc000\ud835\udd5ccr;\uc000\ud835\udcc0\u0b80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248d\u2491\u250e\u253d\u255a\u2580\u264e\u265e\u2665\u2679\u267d\u269a\u26b2\u26d8\u275d\u2768\u278b\u27c0\u2801\u2812\u0180art\u2477\u247a\u247cr\xf2\u09c6\xf2\u0395ail;\u691barr;\u690e\u0100;g\u0994\u248b;\u6a8bar;\u6962\u0963\u24a5\0\u24aa\0\u24b1\0\0\0\0\0\u24b5\u24ba\0\u24c6\u24c8\u24cd\0\u24f9ute;\u413amptyv;\u69b4ra\xee\u084cbda;\u43bbg\u0180;dl\u088e\u24c1\u24c3;\u6991\xe5\u088e;\u6a85uo\u803b\xab\u40abr\u0400;bfhlpst\u0899\u24de\u24e6\u24e9\u24eb\u24ee\u24f1\u24f5\u0100;f\u089d\u24e3s;\u691fs;\u691d\xeb\u2252p;\u61abl;\u6939im;\u6973l;\u61a2\u0180;ae\u24ff\u2500\u2504\u6aabil;\u6919\u0100;s\u2509\u250a\u6aad;\uc000\u2aad\ufe00\u0180abr\u2515\u2519\u251drr;\u690crk;\u6772\u0100ak\u2522\u252cc\u0100ek\u2528\u252a;\u407b;\u405b\u0100es\u2531\u2533;\u698bl\u0100du\u2539\u253b;\u698f;\u698d\u0200aeuy\u2546\u254b\u2556\u2558ron;\u413e\u0100di\u2550\u2554il;\u413c\xec\u08b0\xe2\u2529;\u443b\u0200cqrs\u2563\u2566\u256d\u257da;\u6936uo\u0100;r\u0e19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694bh;\u61b2\u0280;fgqs\u258b\u258c\u0989\u25f3\u25ff\u6264t\u0280ahlrt\u2598\u25a4\u25b7\u25c2\u25e8rrow\u0100;t\u0899\u25a1a\xe9\u24f6arpoon\u0100du\u25af\u25b4own\xbb\u045ap\xbb\u0966eftarrows;\u61c7ight\u0180ahs\u25cd\u25d6\u25derrow\u0100;s\u08f4\u08a7arpoon\xf3\u0f98quigarro\xf7\u21f0hreetimes;\u62cb\u0180;qs\u258b\u0993\u25falan\xf4\u09ac\u0280;cdgs\u09ac\u260a\u260d\u261d\u2628c;\u6aa8ot\u0100;o\u2614\u2615\u6a7f\u0100;r\u261a\u261b\u6a81;\u6a83\u0100;e\u2622\u2625\uc000\u22da\ufe00s;\u6a93\u0280adegs\u2633\u2639\u263d\u2649\u264bppro\xf8\u24c6ot;\u62d6q\u0100gq\u2643\u2645\xf4\u0989gt\xf2\u248c\xf4\u099bi\xed\u09b2\u0180ilr\u2655\u08e1\u265asht;\u697c;\uc000\ud835\udd29\u0100;E\u099c\u2663;\u6a91\u0161\u2669\u2676r\u0100du\u25b2\u266e\u0100;l\u0965\u2673;\u696alk;\u6584cy;\u4459\u0280;acht\u0a48\u2688\u268b\u2691\u2696r\xf2\u25c1orne\xf2\u1d08ard;\u696bri;\u65fa\u0100io\u269f\u26a4dot;\u4140ust\u0100;a\u26ac\u26ad\u63b0che\xbb\u26ad\u0200Eaes\u26bb\u26bd\u26c9\u26d4;\u6268p\u0100;p\u26c3\u26c4\u6a89rox\xbb\u26c4\u0100;q\u26ce\u26cf\u6a87\u0100;q\u26ce\u26bbim;\u62e6\u0400abnoptwz\u26e9\u26f4\u26f7\u271a\u272f\u2741\u2747\u2750\u0100nr\u26ee\u26f1g;\u67ecr;\u61fdr\xeb\u08c1g\u0180lmr\u26ff\u270d\u2714eft\u0100ar\u09e6\u2707ight\xe1\u09f2apsto;\u67fcight\xe1\u09fdparrow\u0100lr\u2725\u2729ef\xf4\u24edight;\u61ac\u0180afl\u2736\u2739\u273dr;\u6985;\uc000\ud835\udd5dus;\u6a2dimes;\u6a34\u0161\u274b\u274fst;\u6217\xe1\u134e\u0180;ef\u2757\u2758\u1800\u65cange\xbb\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277c\u2785\u2787r\xf2\u08a8orne\xf2\u1d8car\u0100;d\u0f98\u2783;\u696d;\u600eri;\u62bf\u0300achiqt\u2798\u279d\u0a40\u27a2\u27ae\u27bbquo;\u6039r;\uc000\ud835\udcc1m\u0180;eg\u09b2\u27aa\u27ac;\u6a8d;\u6a8f\u0100bu\u252a\u27b3o\u0100;r\u0e1f\u27b9;\u601arok;\u4142\u8400<;cdhilqr\u082b\u27d2\u2639\u27dc\u27e0\u27e5\u27ea\u27f0\u0100ci\u27d7\u27d9;\u6aa6r;\u6a79re\xe5\u25f2mes;\u62c9arr;\u6976uest;\u6a7b\u0100Pi\u27f5\u27f9ar;\u6996\u0180;ef\u2800\u092d\u181b\u65c3r\u0100du\u2807\u280dshar;\u694ahar;\u6966\u0100en\u2817\u2821rtneqq;\uc000\u2268\ufe00\xc5\u281e\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288e\u2893\u28a0\u28a5\u28a8\u28da\u28e2\u28e4\u0a83\u28f3\u2902Dot;\u623a\u0200clpr\u284e\u2852\u2863\u287dr\u803b\xaf\u40af\u0100et\u2857\u2859;\u6642\u0100;e\u285e\u285f\u6720se\xbb\u285f\u0100;s\u103b\u2868to\u0200;dlu\u103b\u2873\u2877\u287bow\xee\u048cef\xf4\u090f\xf0\u13d1ker;\u65ae\u0100oy\u2887\u288cmma;\u6a29;\u443cash;\u6014asuredangle\xbb\u1626r;\uc000\ud835\udd2ao;\u6127\u0180cdn\u28af\u28b4\u28c9ro\u803b\xb5\u40b5\u0200;acd\u1464\u28bd\u28c0\u28c4s\xf4\u16a7ir;\u6af0ot\u80bb\xb7\u01b5us\u0180;bd\u28d2\u1903\u28d3\u6212\u0100;u\u1d3c\u28d8;\u6a2a\u0163\u28de\u28e1p;\u6adb\xf2\u2212\xf0\u0a81\u0100dp\u28e9\u28eeels;\u62a7f;\uc000\ud835\udd5e\u0100ct\u28f8\u28fdr;\uc000\ud835\udcc2pos\xbb\u159d\u0180;lm\u2909\u290a\u290d\u43bctimap;\u62b8\u0c00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297e\u2989\u2998\u29da\u29e9\u2a15\u2a1a\u2a58\u2a5d\u2a83\u2a95\u2aa4\u2aa8\u2b04\u2b07\u2b44\u2b7f\u2bae\u2c34\u2c67\u2c7c\u2ce9\u0100gt\u2947\u294b;\uc000\u22d9\u0338\u0100;v\u2950\u0bcf\uc000\u226b\u20d2\u0180elt\u295a\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61cdightarrow;\u61ce;\uc000\u22d8\u0338\u0100;v\u297b\u0c47\uc000\u226a\u20d2ightarrow;\u61cf\u0100Dd\u298e\u2993ash;\u62afash;\u62ae\u0280bcnpt\u29a3\u29a7\u29ac\u29b1\u29ccla\xbb\u02deute;\u4144g;\uc000\u2220\u20d2\u0280;Eiop\u0d84\u29bc\u29c0\u29c5\u29c8;\uc000\u2a70\u0338d;\uc000\u224b\u0338s;\u4149ro\xf8\u0d84ur\u0100;a\u29d3\u29d4\u666el\u0100;s\u29d3\u0b38\u01f3\u29df\0\u29e3p\u80bb\xa0\u0b37mp\u0100;e\u0bf9\u0c00\u0280aeouy\u29f4\u29fe\u2a03\u2a10\u2a13\u01f0\u29f9\0\u29fb;\u6a43on;\u4148dil;\u4146ng\u0100;d\u0d7e\u2a0aot;\uc000\u2a6d\u0338p;\u6a42;\u443dash;\u6013\u0380;Aadqsx\u0b92\u2a29\u2a2d\u2a3b\u2a41\u2a45\u2a50rr;\u61d7r\u0100hr\u2a33\u2a36k;\u6924\u0100;o\u13f2\u13f0ot;\uc000\u2250\u0338ui\xf6\u0b63\u0100ei\u2a4a\u2a4ear;\u6928\xed\u0b98ist\u0100;s\u0ba0\u0b9fr;\uc000\ud835\udd2b\u0200Eest\u0bc5\u2a66\u2a79\u2a7c\u0180;qs\u0bbc\u2a6d\u0be1\u0180;qs\u0bbc\u0bc5\u2a74lan\xf4\u0be2i\xed\u0bea\u0100;r\u0bb6\u2a81\xbb\u0bb7\u0180Aap\u2a8a\u2a8d\u2a91r\xf2\u2971rr;\u61aear;\u6af2\u0180;sv\u0f8d\u2a9c\u0f8c\u0100;d\u2aa1\u2aa2\u62fc;\u62facy;\u445a\u0380AEadest\u2ab7\u2aba\u2abe\u2ac2\u2ac5\u2af6\u2af9r\xf2\u2966;\uc000\u2266\u0338rr;\u619ar;\u6025\u0200;fqs\u0c3b\u2ace\u2ae3\u2aeft\u0100ar\u2ad4\u2ad9rro\xf7\u2ac1ightarro\xf7\u2a90\u0180;qs\u0c3b\u2aba\u2aealan\xf4\u0c55\u0100;s\u0c55\u2af4\xbb\u0c36i\xed\u0c5d\u0100;r\u0c35\u2afei\u0100;e\u0c1a\u0c25i\xe4\u0d90\u0100pt\u2b0c\u2b11f;\uc000\ud835\udd5f\u8180\xac;in\u2b19\u2b1a\u2b36\u40acn\u0200;Edv\u0b89\u2b24\u2b28\u2b2e;\uc000\u22f9\u0338ot;\uc000\u22f5\u0338\u01e1\u0b89\u2b33\u2b35;\u62f7;\u62f6i\u0100;v\u0cb8\u2b3c\u01e1\u0cb8\u2b41\u2b43;\u62fe;\u62fd\u0180aor\u2b4b\u2b63\u2b69r\u0200;ast\u0b7b\u2b55\u2b5a\u2b5flle\xec\u0b7bl;\uc000\u2afd\u20e5;\uc000\u2202\u0338lint;\u6a14\u0180;ce\u0c92\u2b70\u2b73u\xe5\u0ca5\u0100;c\u0c98\u2b78\u0100;e\u0c92\u2b7d\xf1\u0c98\u0200Aait\u2b88\u2b8b\u2b9d\u2ba7r\xf2\u2988rr\u0180;cw\u2b94\u2b95\u2b99\u619b;\uc000\u2933\u0338;\uc000\u219d\u0338ghtarrow\xbb\u2b95ri\u0100;e\u0ccb\u0cd6\u0380chimpqu\u2bbd\u2bcd\u2bd9\u2b04\u0b78\u2be4\u2bef\u0200;cer\u0d32\u2bc6\u0d37\u2bc9u\xe5\u0d45;\uc000\ud835\udcc3ort\u026d\u2b05\0\0\u2bd6ar\xe1\u2b56m\u0100;e\u0d6e\u2bdf\u0100;q\u0d74\u0d73su\u0100bp\u2beb\u2bed\xe5\u0cf8\xe5\u0d0b\u0180bcp\u2bf6\u2c11\u2c19\u0200;Ees\u2bff\u2c00\u0d22\u2c04\u6284;\uc000\u2ac5\u0338et\u0100;e\u0d1b\u2c0bq\u0100;q\u0d23\u2c00c\u0100;e\u0d32\u2c17\xf1\u0d38\u0200;Ees\u2c22\u2c23\u0d5f\u2c27\u6285;\uc000\u2ac6\u0338et\u0100;e\u0d58\u2c2eq\u0100;q\u0d60\u2c23\u0200gilr\u2c3d\u2c3f\u2c45\u2c47\xec\u0bd7lde\u803b\xf1\u40f1\xe7\u0c43iangle\u0100lr\u2c52\u2c5ceft\u0100;e\u0c1a\u2c5a\xf1\u0c26ight\u0100;e\u0ccb\u2c65\xf1\u0cd7\u0100;m\u2c6c\u2c6d\u43bd\u0180;es\u2c74\u2c75\u2c79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2c8f\u2c94\u2c99\u2c9e\u2ca3\u2cb0\u2cb6\u2cd3\u2ce3ash;\u62adarr;\u6904p;\uc000\u224d\u20d2ash;\u62ac\u0100et\u2ca8\u2cac;\uc000\u2265\u20d2;\uc000>\u20d2nfin;\u69de\u0180Aet\u2cbd\u2cc1\u2cc5rr;\u6902;\uc000\u2264\u20d2\u0100;r\u2cca\u2ccd\uc000<\u20d2ie;\uc000\u22b4\u20d2\u0100At\u2cd8\u2cdcrr;\u6903rie;\uc000\u22b5\u20d2im;\uc000\u223c\u20d2\u0180Aan\u2cf0\u2cf4\u2d02rr;\u61d6r\u0100hr\u2cfa\u2cfdk;\u6923\u0100;o\u13e7\u13e5ear;\u6927\u1253\u1a95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2d2d\0\u2d38\u2d48\u2d60\u2d65\u2d72\u2d84\u1b07\0\0\u2d8d\u2dab\0\u2dc8\u2dce\0\u2ddc\u2e19\u2e2b\u2e3e\u2e43\u0100cs\u2d31\u1a97ute\u803b\xf3\u40f3\u0100iy\u2d3c\u2d45r\u0100;c\u1a9e\u2d42\u803b\xf4\u40f4;\u443e\u0280abios\u1aa0\u2d52\u2d57\u01c8\u2d5alac;\u4151v;\u6a38old;\u69bclig;\u4153\u0100cr\u2d69\u2d6dir;\u69bf;\uc000\ud835\udd2c\u036f\u2d79\0\0\u2d7c\0\u2d82n;\u42dbave\u803b\xf2\u40f2;\u69c1\u0100bm\u2d88\u0df4ar;\u69b5\u0200acit\u2d95\u2d98\u2da5\u2da8r\xf2\u1a80\u0100ir\u2d9d\u2da0r;\u69beoss;\u69bbn\xe5\u0e52;\u69c0\u0180aei\u2db1\u2db5\u2db9cr;\u414dga;\u43c9\u0180cdn\u2dc0\u2dc5\u01cdron;\u43bf;\u69b6pf;\uc000\ud835\udd60\u0180ael\u2dd4\u2dd7\u01d2r;\u69b7rp;\u69b9\u0380;adiosv\u2dea\u2deb\u2dee\u2e08\u2e0d\u2e10\u2e16\u6228r\xf2\u1a86\u0200;efm\u2df7\u2df8\u2e02\u2e05\u6a5dr\u0100;o\u2dfe\u2dff\u6134f\xbb\u2dff\u803b\xaa\u40aa\u803b\xba\u40bagof;\u62b6r;\u6a56lope;\u6a57;\u6a5b\u0180clo\u2e1f\u2e21\u2e27\xf2\u2e01ash\u803b\xf8\u40f8l;\u6298i\u016c\u2e2f\u2e34de\u803b\xf5\u40f5es\u0100;a\u01db\u2e3as;\u6a36ml\u803b\xf6\u40f6bar;\u633d\u0ae1\u2e5e\0\u2e7d\0\u2e80\u2e9d\0\u2ea2\u2eb9\0\0\u2ecb\u0e9c\0\u2f13\0\0\u2f2b\u2fbc\0\u2fc8r\u0200;ast\u0403\u2e67\u2e72\u0e85\u8100\xb6;l\u2e6d\u2e6e\u40b6le\xec\u0403\u0269\u2e78\0\0\u2e7bm;\u6af3;\u6afdy;\u443fr\u0280cimpt\u2e8b\u2e8f\u2e93\u1865\u2e97nt;\u4025od;\u402eil;\u6030enk;\u6031r;\uc000\ud835\udd2d\u0180imo\u2ea8\u2eb0\u2eb4\u0100;v\u2ead\u2eae\u43c6;\u43d5ma\xf4\u0a76ne;\u660e\u0180;tv\u2ebf\u2ec0\u2ec8\u43c0chfork\xbb\u1ffd;\u43d6\u0100au\u2ecf\u2edfn\u0100ck\u2ed5\u2eddk\u0100;h\u21f4\u2edb;\u610e\xf6\u21f4s\u0480;abcdemst\u2ef3\u2ef4\u1908\u2ef9\u2efd\u2f04\u2f06\u2f0a\u2f0e\u402bcir;\u6a23ir;\u6a22\u0100ou\u1d40\u2f02;\u6a25;\u6a72n\u80bb\xb1\u0e9dim;\u6a26wo;\u6a27\u0180ipu\u2f19\u2f20\u2f25ntint;\u6a15f;\uc000\ud835\udd61nd\u803b\xa3\u40a3\u0500;Eaceinosu\u0ec8\u2f3f\u2f41\u2f44\u2f47\u2f81\u2f89\u2f92\u2f7e\u2fb6;\u6ab3p;\u6ab7u\xe5\u0ed9\u0100;c\u0ece\u2f4c\u0300;acens\u0ec8\u2f59\u2f5f\u2f66\u2f68\u2f7eppro\xf8\u2f43urlye\xf1\u0ed9\xf1\u0ece\u0180aes\u2f6f\u2f76\u2f7approx;\u6ab9qq;\u6ab5im;\u62e8i\xed\u0edfme\u0100;s\u2f88\u0eae\u6032\u0180Eas\u2f78\u2f90\u2f7a\xf0\u2f75\u0180dfp\u0eec\u2f99\u2faf\u0180als\u2fa0\u2fa5\u2faalar;\u632eine;\u6312urf;\u6313\u0100;t\u0efb\u2fb4\xef\u0efbrel;\u62b0\u0100ci\u2fc0\u2fc5r;\uc000\ud835\udcc5;\u43c8ncsp;\u6008\u0300fiopsu\u2fda\u22e2\u2fdf\u2fe5\u2feb\u2ff1r;\uc000\ud835\udd2epf;\uc000\ud835\udd62rime;\u6057cr;\uc000\ud835\udcc6\u0180aeo\u2ff8\u3009\u3013t\u0100ei\u2ffe\u3005rnion\xf3\u06b0nt;\u6a16st\u0100;e\u3010\u3011\u403f\xf1\u1f19\xf4\u0f14\u0a80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30e0\u310e\u312b\u3147\u3162\u3172\u318e\u3206\u3215\u3224\u3229\u3258\u326e\u3272\u3290\u32b0\u32b7\u0180art\u3047\u304a\u304cr\xf2\u10b3\xf2\u03ddail;\u691car\xf2\u1c65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307f\u308f\u3094\u30cc\u0100eu\u306d\u3071;\uc000\u223d\u0331te;\u4155i\xe3\u116emptyv;\u69b3g\u0200;del\u0fd1\u3089\u308b\u308d;\u6992;\u69a5\xe5\u0fd1uo\u803b\xbb\u40bbr\u0580;abcfhlpstw\u0fdc\u30ac\u30af\u30b7\u30b9\u30bc\u30be\u30c0\u30c3\u30c7\u30cap;\u6975\u0100;f\u0fe0\u30b4s;\u6920;\u6933s;\u691e\xeb\u225d\xf0\u272el;\u6945im;\u6974l;\u61a3;\u619d\u0100ai\u30d1\u30d5il;\u691ao\u0100;n\u30db\u30dc\u6236al\xf3\u0f1e\u0180abr\u30e7\u30ea\u30eer\xf2\u17e5rk;\u6773\u0100ak\u30f3\u30fdc\u0100ek\u30f9\u30fb;\u407d;\u405d\u0100es\u3102\u3104;\u698cl\u0100du\u310a\u310c;\u698e;\u6990\u0200aeuy\u3117\u311c\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xec\u0ff2\xe2\u30fa;\u4440\u0200clqs\u3134\u3137\u313d\u3144a;\u6937dhar;\u6969uo\u0100;r\u020e\u020dh;\u61b3\u0180acg\u314e\u315f\u0f44l\u0200;ips\u0f78\u3158\u315b\u109cn\xe5\u10bbar\xf4\u0fa9t;\u65ad\u0180ilr\u3169\u1023\u316esht;\u697d;\uc000\ud835\udd2f\u0100ao\u3177\u3186r\u0100du\u317d\u317f\xbb\u047b\u0100;l\u1091\u3184;\u696c\u0100;v\u318b\u318c\u43c1;\u43f1\u0180gns\u3195\u31f9\u31fcht\u0300ahlrst\u31a4\u31b0\u31c2\u31d8\u31e4\u31eerrow\u0100;t\u0fdc\u31ada\xe9\u30c8arpoon\u0100du\u31bb\u31bfow\xee\u317ep\xbb\u1092eft\u0100ah\u31ca\u31d0rrow\xf3\u0feaarpoon\xf3\u0551ightarrows;\u61c9quigarro\xf7\u30cbhreetimes;\u62ccg;\u42daingdotse\xf1\u1f32\u0180ahm\u320d\u3210\u3213r\xf2\u0feaa\xf2\u0551;\u600foust\u0100;a\u321e\u321f\u63b1che\xbb\u321fmid;\u6aee\u0200abpt\u3232\u323d\u3240\u3252\u0100nr\u3237\u323ag;\u67edr;\u61fer\xeb\u1003\u0180afl\u3247\u324a\u324er;\u6986;\uc000\ud835\udd63us;\u6a2eimes;\u6a35\u0100ap\u325d\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6a12ar\xf2\u31e3\u0200achq\u327b\u3280\u10bc\u3285quo;\u603ar;\uc000\ud835\udcc7\u0100bu\u30fb\u328ao\u0100;r\u0214\u0213\u0180hir\u3297\u329b\u32a0re\xe5\u31f8mes;\u62cai\u0200;efl\u32aa\u1059\u1821\u32ab\u65b9tri;\u69celuhar;\u6968;\u611e\u0d61\u32d5\u32db\u32df\u332c\u3338\u3371\0\u337a\u33a4\0\0\u33ec\u33f0\0\u3428\u3448\u345a\u34ad\u34b1\u34ca\u34f1\0\u3616\0\0\u3633cute;\u415bqu\xef\u27ba\u0500;Eaceinpsy\u11ed\u32f3\u32f5\u32ff\u3302\u330b\u330f\u331f\u3326\u3329;\u6ab4\u01f0\u32fa\0\u32fc;\u6ab8on;\u4161u\xe5\u11fe\u0100;d\u11f3\u3307il;\u415frc;\u415d\u0180Eas\u3316\u3318\u331b;\u6ab6p;\u6abaim;\u62e9olint;\u6a13i\xed\u1204;\u4441ot\u0180;be\u3334\u1d47\u3335\u62c5;\u6a66\u0380Aacmstx\u3346\u334a\u3357\u335b\u335e\u3363\u336drr;\u61d8r\u0100hr\u3350\u3352\xeb\u2228\u0100;o\u0a36\u0a34t\u803b\xa7\u40a7i;\u403bwar;\u6929m\u0100in\u3369\xf0nu\xf3\xf1t;\u6736r\u0100;o\u3376\u2055\uc000\ud835\udd30\u0200acoy\u3382\u3386\u3391\u33a0rp;\u666f\u0100hy\u338b\u338fcy;\u4449;\u4448rt\u026d\u3399\0\0\u339ci\xe4\u1464ara\xec\u2e6f\u803b\xad\u40ad\u0100gm\u33a8\u33b4ma\u0180;fv\u33b1\u33b2\u33b2\u43c3;\u43c2\u0400;deglnpr\u12ab\u33c5\u33c9\u33ce\u33d6\u33de\u33e1\u33e6ot;\u6a6a\u0100;q\u12b1\u12b0\u0100;E\u33d3\u33d4\u6a9e;\u6aa0\u0100;E\u33db\u33dc\u6a9d;\u6a9fe;\u6246lus;\u6a24arr;\u6972ar\xf2\u113d\u0200aeit\u33f8\u3408\u340f\u3417\u0100ls\u33fd\u3404lsetm\xe9\u336ahp;\u6a33parsl;\u69e4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341c\u341d\u6aaa\u0100;s\u3422\u3423\u6aac;\uc000\u2aac\ufe00\u0180flp\u342e\u3433\u3442tcy;\u444c\u0100;b\u3438\u3439\u402f\u0100;a\u343e\u343f\u69c4r;\u633ff;\uc000\ud835\udd64a\u0100dr\u344d\u0402es\u0100;u\u3454\u3455\u6660it\xbb\u3455\u0180csu\u3460\u3479\u349f\u0100au\u3465\u346fp\u0100;s\u1188\u346b;\uc000\u2293\ufe00p\u0100;s\u11b4\u3475;\uc000\u2294\ufe00u\u0100bp\u347f\u348f\u0180;es\u1197\u119c\u3486et\u0100;e\u1197\u348d\xf1\u119d\u0180;es\u11a8\u11ad\u3496et\u0100;e\u11a8\u349d\xf1\u11ae\u0180;af\u117b\u34a6\u05b0r\u0165\u34ab\u05b1\xbb\u117car\xf2\u1148\u0200cemt\u34b9\u34be\u34c2\u34c5r;\uc000\ud835\udcc8tm\xee\xf1i\xec\u3415ar\xe6\u11be\u0100ar\u34ce\u34d5r\u0100;f\u34d4\u17bf\u6606\u0100an\u34da\u34edight\u0100ep\u34e3\u34eapsilo\xee\u1ee0h\xe9\u2eafs\xbb\u2852\u0280bcmnp\u34fb\u355e\u1209\u358b\u358e\u0480;Edemnprs\u350e\u350f\u3511\u3515\u351e\u3523\u352c\u3531\u3536\u6282;\u6ac5ot;\u6abd\u0100;d\u11da\u351aot;\u6ac3ult;\u6ac1\u0100Ee\u3528\u352a;\u6acb;\u628alus;\u6abfarr;\u6979\u0180eiu\u353d\u3552\u3555t\u0180;en\u350e\u3545\u354bq\u0100;q\u11da\u350feq\u0100;q\u352b\u3528m;\u6ac7\u0100bp\u355a\u355c;\u6ad5;\u6ad3c\u0300;acens\u11ed\u356c\u3572\u3579\u357b\u3326ppro\xf8\u32faurlye\xf1\u11fe\xf1\u11f3\u0180aes\u3582\u3588\u331bppro\xf8\u331aq\xf1\u3317g;\u666a\u0680123;Edehlmnps\u35a9\u35ac\u35af\u121c\u35b2\u35b4\u35c0\u35c9\u35d5\u35da\u35df\u35e8\u35ed\u803b\xb9\u40b9\u803b\xb2\u40b2\u803b\xb3\u40b3;\u6ac6\u0100os\u35b9\u35bct;\u6abeub;\u6ad8\u0100;d\u1222\u35c5ot;\u6ac4s\u0100ou\u35cf\u35d2l;\u67c9b;\u6ad7arr;\u697bult;\u6ac2\u0100Ee\u35e4\u35e6;\u6acc;\u628blus;\u6ac0\u0180eiu\u35f4\u3609\u360ct\u0180;en\u121c\u35fc\u3602q\u0100;q\u1222\u35b2eq\u0100;q\u35e7\u35e4m;\u6ac8\u0100bp\u3611\u3613;\u6ad4;\u6ad6\u0180Aan\u361c\u3620\u362drr;\u61d9r\u0100hr\u3626\u3628\xeb\u222e\u0100;o\u0a2b\u0a29war;\u692alig\u803b\xdf\u40df\u0be1\u3651\u365d\u3660\u12ce\u3673\u3679\0\u367e\u36c2\0\0\0\0\0\u36db\u3703\0\u3709\u376c\0\0\0\u3787\u0272\u3656\0\0\u365bget;\u6316;\u43c4r\xeb\u0e5f\u0180aey\u3666\u366b\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uc000\ud835\udd31\u0200eiko\u3686\u369d\u36b5\u36bc\u01f2\u368b\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369b\u43b8ym;\u43d1\u0100cn\u36a2\u36b2k\u0100as\u36a8\u36aeppro\xf8\u12c1im\xbb\u12acs\xf0\u129e\u0100as\u36ba\u36ae\xf0\u12c1rn\u803b\xfe\u40fe\u01ec\u031f\u36c6\u22e7es\u8180\xd7;bd\u36cf\u36d0\u36d8\u40d7\u0100;a\u190f\u36d5r;\u6a31;\u6a30\u0180eps\u36e1\u36e3\u3700\xe1\u2a4d\u0200;bcf\u0486\u36ec\u36f0\u36f4ot;\u6336ir;\u6af1\u0100;o\u36f9\u36fc\uc000\ud835\udd65rk;\u6ada\xe1\u3362rime;\u6034\u0180aip\u370f\u3712\u3764d\xe5\u1248\u0380adempst\u3721\u374d\u3740\u3751\u3757\u375c\u375fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65b5own\xbb\u1dbbeft\u0100;e\u2800\u373e\xf1\u092e;\u625cight\u0100;e\u32aa\u374b\xf1\u105aot;\u65ecinus;\u6a3alus;\u6a39b;\u69cdime;\u6a3bezium;\u63e2\u0180cht\u3772\u377d\u3781\u0100ry\u3777\u377b;\uc000\ud835\udcc9;\u4446cy;\u445brok;\u4167\u0100io\u378b\u378ex\xf4\u1777head\u0100lr\u3797\u37a0eftarro\xf7\u084fightarrow\xbb\u0f5d\u0900AHabcdfghlmoprstuw\u37d0\u37d3\u37d7\u37e4\u37f0\u37fc\u380e\u381c\u3823\u3834\u3851\u385d\u386b\u38a9\u38cc\u38d2\u38ea\u38f6r\xf2\u03edar;\u6963\u0100cr\u37dc\u37e2ute\u803b\xfa\u40fa\xf2\u1150r\u01e3\u37ea\0\u37edy;\u445eve;\u416d\u0100iy\u37f5\u37farc\u803b\xfb\u40fb;\u4443\u0180abh\u3803\u3806\u380br\xf2\u13adlac;\u4171a\xf2\u13c3\u0100ir\u3813\u3818sht;\u697e;\uc000\ud835\udd32rave\u803b\xf9\u40f9\u0161\u3827\u3831r\u0100lr\u382c\u382e\xbb\u0957\xbb\u1083lk;\u6580\u0100ct\u3839\u384d\u026f\u383f\0\0\u384arn\u0100;e\u3845\u3846\u631cr\xbb\u3846op;\u630fri;\u65f8\u0100al\u3856\u385acr;\u416b\u80bb\xa8\u0349\u0100gp\u3862\u3866on;\u4173f;\uc000\ud835\udd66\u0300adhlsu\u114b\u3878\u387d\u1372\u3891\u38a0own\xe1\u13b3arpoon\u0100lr\u3888\u388cef\xf4\u382digh\xf4\u382fi\u0180;hl\u3899\u389a\u389c\u43c5\xbb\u13faon\xbb\u389aparrows;\u61c8\u0180cit\u38b0\u38c4\u38c8\u026f\u38b6\0\0\u38c1rn\u0100;e\u38bc\u38bd\u631dr\xbb\u38bdop;\u630eng;\u416fri;\u65f9cr;\uc000\ud835\udcca\u0180dir\u38d9\u38dd\u38e2ot;\u62f0lde;\u4169i\u0100;f\u3730\u38e8\xbb\u1813\u0100am\u38ef\u38f2r\xf2\u38a8l\u803b\xfc\u40fcangle;\u69a7\u0780ABDacdeflnoprsz\u391c\u391f\u3929\u392d\u39b5\u39b8\u39bd\u39df\u39e4\u39e8\u39f3\u39f9\u39fd\u3a01\u3a20r\xf2\u03f7ar\u0100;v\u3926\u3927\u6ae8;\u6ae9as\xe8\u03e1\u0100nr\u3932\u3937grt;\u699c\u0380eknprst\u34e3\u3946\u394b\u3952\u395d\u3964\u3996app\xe1\u2415othin\xe7\u1e96\u0180hir\u34eb\u2ec8\u3959op\xf4\u2fb5\u0100;h\u13b7\u3962\xef\u318d\u0100iu\u3969\u396dgm\xe1\u33b3\u0100bp\u3972\u3984setneq\u0100;q\u397d\u3980\uc000\u228a\ufe00;\uc000\u2acb\ufe00setneq\u0100;q\u398f\u3992\uc000\u228b\ufe00;\uc000\u2acc\ufe00\u0100hr\u399b\u399fet\xe1\u369ciangle\u0100lr\u39aa\u39afeft\xbb\u0925ight\xbb\u1051y;\u4432ash\xbb\u1036\u0180elr\u39c4\u39d2\u39d7\u0180;be\u2dea\u39cb\u39cfar;\u62bbq;\u625alip;\u62ee\u0100bt\u39dc\u1468a\xf2\u1469r;\uc000\ud835\udd33tr\xe9\u39aesu\u0100bp\u39ef\u39f1\xbb\u0d1c\xbb\u0d59pf;\uc000\ud835\udd67ro\xf0\u0efbtr\xe9\u39b4\u0100cu\u3a06\u3a0br;\uc000\ud835\udccb\u0100bp\u3a10\u3a18n\u0100Ee\u3980\u3a16\xbb\u397en\u0100Ee\u3992\u3a1e\xbb\u3990igzag;\u699a\u0380cefoprs\u3a36\u3a3b\u3a56\u3a5b\u3a54\u3a61\u3a6airc;\u4175\u0100di\u3a40\u3a51\u0100bg\u3a45\u3a49ar;\u6a5fe\u0100;q\u15fa\u3a4f;\u6259erp;\u6118r;\uc000\ud835\udd34pf;\uc000\ud835\udd68\u0100;e\u1479\u3a66at\xe8\u1479cr;\uc000\ud835\udccc\u0ae3\u178e\u3a87\0\u3a8b\0\u3a90\u3a9b\0\0\u3a9d\u3aa8\u3aab\u3aaf\0\0\u3ac3\u3ace\0\u3ad8\u17dc\u17dftr\xe9\u17d1r;\uc000\ud835\udd35\u0100Aa\u3a94\u3a97r\xf2\u03c3r\xf2\u09f6;\u43be\u0100Aa\u3aa1\u3aa4r\xf2\u03b8r\xf2\u09eba\xf0\u2713is;\u62fb\u0180dpt\u17a4\u3ab5\u3abe\u0100fl\u3aba\u17a9;\uc000\ud835\udd69im\xe5\u17b2\u0100Aa\u3ac7\u3acar\xf2\u03cer\xf2\u0a01\u0100cq\u3ad2\u17b8r;\uc000\ud835\udccd\u0100pt\u17d6\u3adcr\xe9\u17d4\u0400acefiosu\u3af0\u3afd\u3b08\u3b0c\u3b11\u3b15\u3b1b\u3b21c\u0100uy\u3af6\u3afbte\u803b\xfd\u40fd;\u444f\u0100iy\u3b02\u3b06rc;\u4177;\u444bn\u803b\xa5\u40a5r;\uc000\ud835\udd36cy;\u4457pf;\uc000\ud835\udd6acr;\uc000\ud835\udcce\u0100cm\u3b26\u3b29y;\u444el\u803b\xff\u40ff\u0500acdefhiosw\u3b42\u3b48\u3b54\u3b58\u3b64\u3b69\u3b6d\u3b74\u3b7a\u3b80cute;\u417a\u0100ay\u3b4d\u3b52ron;\u417e;\u4437ot;\u417c\u0100et\u3b5d\u3b61tr\xe6\u155fa;\u43b6r;\uc000\ud835\udd37cy;\u4436grarr;\u61ddpf;\uc000\ud835\udd6bcr;\uc000\ud835\udccf\u0100jn\u3b85\u3b87;\u600dj;\u600c'.split("").map((e=>e.charCodeAt(0)))),Td=new Uint16Array("\u0200aglq\t\x15\x18\x1b\u026d\x0f\0\0\x12p;\u4026os;\u4027t;\u403et;\u403cuot;\u4022".split("").map((e=>e.charCodeAt(0))));var Ad;const wd=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Sd=null!==(Ad=String.fromCodePoint)&&void 0!==Ad?Ad:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};function kd(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=wd.get(e))&&void 0!==t?t:e}var Cd;!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(Cd||(Cd={}));var xd,Id,Nd;function Rd(e){return e>=Cd.ZERO&&e<=Cd.NINE}function Dd(e){return e>=Cd.UPPER_A&&e<=Cd.UPPER_F||e>=Cd.LOWER_A&&e<=Cd.LOWER_F}function Pd(e){return e===Cd.EQUALS||function(e){return e>=Cd.UPPER_A&&e<=Cd.UPPER_Z||e>=Cd.LOWER_A&&e<=Cd.LOWER_Z||Rd(e)}(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(xd||(xd={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(Id||(Id={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(Nd||(Nd={}));class Od{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=Id.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Nd.Strict}startEntity(e){this.decodeMode=e,this.state=Id.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case Id.EntityStart:return e.charCodeAt(t)===Cd.NUM?(this.state=Id.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=Id.NamedEntity,this.stateNamedEntity(e,t));case Id.NumericStart:return this.stateNumericStart(e,t);case Id.NumericDecimal:return this.stateNumericDecimal(e,t);case Id.NumericHex:return this.stateNumericHex(e,t);case Id.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===Cd.LOWER_X?(this.state=Id.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=Id.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,r){if(t!==n){const s=n-t;this.result=this.result*Math.pow(r,s)+parseInt(e.substr(t,s),r),this.consumed+=s}}stateNumericHex(e,t){const n=t;for(;t<e.length;){const r=e.charCodeAt(t);if(!Rd(r)&&!Dd(r))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(r,3);t+=1}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;for(;t<e.length;){const r=e.charCodeAt(t);if(!Rd(r))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(r,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Cd.SEMI)this.consumed+=1;else if(this.decodeMode===Nd.Strict)return 0;return this.emitCodePoint(kd(this.result),this.consumed),this.errors&&(e!==Cd.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let r=n[this.treeIndex],s=(r&xd.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const i=e.charCodeAt(t);if(this.treeIndex=Md(n,r,this.treeIndex+Math.max(1,s),i),this.treeIndex<0)return 0===this.result||this.decodeMode===Nd.Attribute&&(0===s||Pd(i))?0:this.emitNotTerminatedNamedEntity();if(r=n[this.treeIndex],s=(r&xd.VALUE_LENGTH)>>14,0!==s){if(i===Cd.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Nd.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,r=(n[t]&xd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,r,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:r}=this;return this.emitCodePoint(1===t?r[e]&~xd.VALUE_LENGTH:r[e+1],n),3===t&&this.emitCodePoint(r[e+2],n),n}end(){var e;switch(this.state){case Id.NamedEntity:return 0===this.result||this.decodeMode===Nd.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case Id.NumericDecimal:return this.emitNumericEntity(0,2);case Id.NumericHex:return this.emitNumericEntity(0,3);case Id.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Id.EntityStart:return 0}}}function Ld(e){let t="";const n=new Od(e,(e=>t+=Sd(e)));return function(e,r){let s=0,i=0;for(;(i=e.indexOf("&",i))>=0;){t+=e.slice(s,i),n.startEntity(r);const a=n.write(e,i+1);if(a<0){s=i+n.end();break}s=i+a,i=0===a?s+1:s}const a=t+e.slice(s);return t="",a}}function Md(e,t,n,r){const s=(t&xd.BRANCH_LENGTH)>>7,i=t&xd.JUMP_TABLE;if(0===s)return 0!==i&&r===i?n:-1;if(i){const t=r-i;return t<0||t>=s?-1:e[n+t]-1}let a=n,o=a+s-1;for(;a<=o;){const t=a+o>>>1,n=e[t];if(n<r)a=t+1;else{if(!(n>r))return e[t+s];o=t-1}}return-1}Ld(_d),Ld(Td);var Fd,Bd,Hd,Ud,jd;!function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"}(Fd||(Fd={})),function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"}(Bd||(Bd={})),function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"}(Hd||(Hd={})),function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"}(Ud||(Ud={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"}(jd||(jd={}));const zd=new Map([[Ud.A,jd.A],[Ud.ADDRESS,jd.ADDRESS],[Ud.ANNOTATION_XML,jd.ANNOTATION_XML],[Ud.APPLET,jd.APPLET],[Ud.AREA,jd.AREA],[Ud.ARTICLE,jd.ARTICLE],[Ud.ASIDE,jd.ASIDE],[Ud.B,jd.B],[Ud.BASE,jd.BASE],[Ud.BASEFONT,jd.BASEFONT],[Ud.BGSOUND,jd.BGSOUND],[Ud.BIG,jd.BIG],[Ud.BLOCKQUOTE,jd.BLOCKQUOTE],[Ud.BODY,jd.BODY],[Ud.BR,jd.BR],[Ud.BUTTON,jd.BUTTON],[Ud.CAPTION,jd.CAPTION],[Ud.CENTER,jd.CENTER],[Ud.CODE,jd.CODE],[Ud.COL,jd.COL],[Ud.COLGROUP,jd.COLGROUP],[Ud.DD,jd.DD],[Ud.DESC,jd.DESC],[Ud.DETAILS,jd.DETAILS],[Ud.DIALOG,jd.DIALOG],[Ud.DIR,jd.DIR],[Ud.DIV,jd.DIV],[Ud.DL,jd.DL],[Ud.DT,jd.DT],[Ud.EM,jd.EM],[Ud.EMBED,jd.EMBED],[Ud.FIELDSET,jd.FIELDSET],[Ud.FIGCAPTION,jd.FIGCAPTION],[Ud.FIGURE,jd.FIGURE],[Ud.FONT,jd.FONT],[Ud.FOOTER,jd.FOOTER],[Ud.FOREIGN_OBJECT,jd.FOREIGN_OBJECT],[Ud.FORM,jd.FORM],[Ud.FRAME,jd.FRAME],[Ud.FRAMESET,jd.FRAMESET],[Ud.H1,jd.H1],[Ud.H2,jd.H2],[Ud.H3,jd.H3],[Ud.H4,jd.H4],[Ud.H5,jd.H5],[Ud.H6,jd.H6],[Ud.HEAD,jd.HEAD],[Ud.HEADER,jd.HEADER],[Ud.HGROUP,jd.HGROUP],[Ud.HR,jd.HR],[Ud.HTML,jd.HTML],[Ud.I,jd.I],[Ud.IMG,jd.IMG],[Ud.IMAGE,jd.IMAGE],[Ud.INPUT,jd.INPUT],[Ud.IFRAME,jd.IFRAME],[Ud.KEYGEN,jd.KEYGEN],[Ud.LABEL,jd.LABEL],[Ud.LI,jd.LI],[Ud.LINK,jd.LINK],[Ud.LISTING,jd.LISTING],[Ud.MAIN,jd.MAIN],[Ud.MALIGNMARK,jd.MALIGNMARK],[Ud.MARQUEE,jd.MARQUEE],[Ud.MATH,jd.MATH],[Ud.MENU,jd.MENU],[Ud.META,jd.META],[Ud.MGLYPH,jd.MGLYPH],[Ud.MI,jd.MI],[Ud.MO,jd.MO],[Ud.MN,jd.MN],[Ud.MS,jd.MS],[Ud.MTEXT,jd.MTEXT],[Ud.NAV,jd.NAV],[Ud.NOBR,jd.NOBR],[Ud.NOFRAMES,jd.NOFRAMES],[Ud.NOEMBED,jd.NOEMBED],[Ud.NOSCRIPT,jd.NOSCRIPT],[Ud.OBJECT,jd.OBJECT],[Ud.OL,jd.OL],[Ud.OPTGROUP,jd.OPTGROUP],[Ud.OPTION,jd.OPTION],[Ud.P,jd.P],[Ud.PARAM,jd.PARAM],[Ud.PLAINTEXT,jd.PLAINTEXT],[Ud.PRE,jd.PRE],[Ud.RB,jd.RB],[Ud.RP,jd.RP],[Ud.RT,jd.RT],[Ud.RTC,jd.RTC],[Ud.RUBY,jd.RUBY],[Ud.S,jd.S],[Ud.SCRIPT,jd.SCRIPT],[Ud.SEARCH,jd.SEARCH],[Ud.SECTION,jd.SECTION],[Ud.SELECT,jd.SELECT],[Ud.SOURCE,jd.SOURCE],[Ud.SMALL,jd.SMALL],[Ud.SPAN,jd.SPAN],[Ud.STRIKE,jd.STRIKE],[Ud.STRONG,jd.STRONG],[Ud.STYLE,jd.STYLE],[Ud.SUB,jd.SUB],[Ud.SUMMARY,jd.SUMMARY],[Ud.SUP,jd.SUP],[Ud.TABLE,jd.TABLE],[Ud.TBODY,jd.TBODY],[Ud.TEMPLATE,jd.TEMPLATE],[Ud.TEXTAREA,jd.TEXTAREA],[Ud.TFOOT,jd.TFOOT],[Ud.TD,jd.TD],[Ud.TH,jd.TH],[Ud.THEAD,jd.THEAD],[Ud.TITLE,jd.TITLE],[Ud.TR,jd.TR],[Ud.TRACK,jd.TRACK],[Ud.TT,jd.TT],[Ud.U,jd.U],[Ud.UL,jd.UL],[Ud.SVG,jd.SVG],[Ud.VAR,jd.VAR],[Ud.WBR,jd.WBR],[Ud.XMP,jd.XMP]]);function Gd(e){var t;return null!==(t=zd.get(e))&&void 0!==t?t:jd.UNKNOWN}const Wd=jd,$d={[Fd.HTML]:new Set([Wd.ADDRESS,Wd.APPLET,Wd.AREA,Wd.ARTICLE,Wd.ASIDE,Wd.BASE,Wd.BASEFONT,Wd.BGSOUND,Wd.BLOCKQUOTE,Wd.BODY,Wd.BR,Wd.BUTTON,Wd.CAPTION,Wd.CENTER,Wd.COL,Wd.COLGROUP,Wd.DD,Wd.DETAILS,Wd.DIR,Wd.DIV,Wd.DL,Wd.DT,Wd.EMBED,Wd.FIELDSET,Wd.FIGCAPTION,Wd.FIGURE,Wd.FOOTER,Wd.FORM,Wd.FRAME,Wd.FRAMESET,Wd.H1,Wd.H2,Wd.H3,Wd.H4,Wd.H5,Wd.H6,Wd.HEAD,Wd.HEADER,Wd.HGROUP,Wd.HR,Wd.HTML,Wd.IFRAME,Wd.IMG,Wd.INPUT,Wd.LI,Wd.LINK,Wd.LISTING,Wd.MAIN,Wd.MARQUEE,Wd.MENU,Wd.META,Wd.NAV,Wd.NOEMBED,Wd.NOFRAMES,Wd.NOSCRIPT,Wd.OBJECT,Wd.OL,Wd.P,Wd.PARAM,Wd.PLAINTEXT,Wd.PRE,Wd.SCRIPT,Wd.SECTION,Wd.SELECT,Wd.SOURCE,Wd.STYLE,Wd.SUMMARY,Wd.TABLE,Wd.TBODY,Wd.TD,Wd.TEMPLATE,Wd.TEXTAREA,Wd.TFOOT,Wd.TH,Wd.THEAD,Wd.TITLE,Wd.TR,Wd.TRACK,Wd.UL,Wd.WBR,Wd.XMP]),[Fd.MATHML]:new Set([Wd.MI,Wd.MO,Wd.MN,Wd.MS,Wd.MTEXT,Wd.ANNOTATION_XML]),[Fd.SVG]:new Set([Wd.TITLE,Wd.FOREIGN_OBJECT,Wd.DESC]),[Fd.XLINK]:new Set,[Fd.XML]:new Set,[Fd.XMLNS]:new Set},qd=new Set([Wd.H1,Wd.H2,Wd.H3,Wd.H4,Wd.H5,Wd.H6]);new Set([Ud.STYLE,Ud.SCRIPT,Ud.XMP,Ud.IFRAME,Ud.NOEMBED,Ud.NOFRAMES,Ud.PLAINTEXT]);var Vd;!function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"}(Vd||(Vd={}));const Yd={DATA:Vd.DATA,RCDATA:Vd.RCDATA,RAWTEXT:Vd.RAWTEXT,SCRIPT_DATA:Vd.SCRIPT_DATA,PLAINTEXT:Vd.PLAINTEXT,CDATA_SECTION:Vd.CDATA_SECTION};function Kd(e){return e>=od.LATIN_CAPITAL_A&&e<=od.LATIN_CAPITAL_Z}function Xd(e){return function(e){return e>=od.LATIN_SMALL_A&&e<=od.LATIN_SMALL_Z}(e)||Kd(e)}function Qd(e){return Xd(e)||function(e){return e>=od.DIGIT_0&&e<=od.DIGIT_9}(e)}function Jd(e){return e+32}function Zd(e){return e===od.SPACE||e===od.LINE_FEED||e===od.TABULATION||e===od.FORM_FEED}function ep(e){return Zd(e)||e===od.SOLIDUS||e===od.GREATER_THAN_SIGN}class tp{constructor(e,t){this.options=e,this.handler=t,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Vd.DATA,this.returnState=Vd.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new bd(t),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new Od(_d,((e,t)=>{this.preprocessor.pos=this.entityStartPos+t-1,this._flushCodePointConsumedAsCharacterReference(e)}),t.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(yd.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:e=>{this._err(yd.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+e)},validateNumericCharacterReference:e=>{const t=function(e){return e===od.NULL?yd.nullCharacterReference:e>1114111?yd.characterReferenceOutsideUnicodeRange:fd(e)?yd.surrogateCharacterReference:gd(e)?yd.noncharacterCharacterReference:md(e)||e===od.CARRIAGE_RETURN?yd.controlCharacterReference:null}(e);t&&this._err(t,1)}}:void 0)}_err(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n,r;null===(r=(n=this.handler).onParseError)||void 0===r||r.call(n,this.preprocessor.getError(e,t))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null===e||void 0===e||e())}write(e,t,n){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||null===n||void 0===n||n()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}_createStartTagToken(){this.currentToken={type:Ed.START_TAG,tagName:"",tagID:jd.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Ed.END_TAG,tagName:"",tagID:jd.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:Ed.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:Ed.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;const n=this.currentToken;if(null===vd(n,this.currentAttr.name)){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){(null!==(e=(t=n.location).attrs)&&void 0!==e?e:t.attrs=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(yd.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=Gd(e.tagName),e.type===Ed.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(yd.endTagWithAttributes),e.selfClosing&&this._err(yd.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case Ed.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case Ed.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case Ed.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:Ed.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken){if(this.currentCharacterToken.type===e)return void(this.currentCharacterToken.chars+=t);this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk()}this._createCharacterToken(e,t)}_emitCodePoint(e){const t=Zd(e)?Ed.WHITESPACE_CHARACTER:e===od.NULL?Ed.NULL_CHARACTER:Ed.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(Ed.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=Vd.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Nd.Attribute:Nd.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===Vd.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Vd.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Vd.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case Vd.DATA:this._stateData(e);break;case Vd.RCDATA:this._stateRcdata(e);break;case Vd.RAWTEXT:this._stateRawtext(e);break;case Vd.SCRIPT_DATA:this._stateScriptData(e);break;case Vd.PLAINTEXT:this._statePlaintext(e);break;case Vd.TAG_OPEN:this._stateTagOpen(e);break;case Vd.END_TAG_OPEN:this._stateEndTagOpen(e);break;case Vd.TAG_NAME:this._stateTagName(e);break;case Vd.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case Vd.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case Vd.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case Vd.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case Vd.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case Vd.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case Vd.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case Vd.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case Vd.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case Vd.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case Vd.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case Vd.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case Vd.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case Vd.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case Vd.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case Vd.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case Vd.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case Vd.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case Vd.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case Vd.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case Vd.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case Vd.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case Vd.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case Vd.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case Vd.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case Vd.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case Vd.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case Vd.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case Vd.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case Vd.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case Vd.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case Vd.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case Vd.BOGUS_COMMENT:this._stateBogusComment(e);break;case Vd.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case Vd.COMMENT_START:this._stateCommentStart(e);break;case Vd.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case Vd.COMMENT:this._stateComment(e);break;case Vd.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case Vd.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case Vd.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case Vd.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case Vd.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case Vd.COMMENT_END:this._stateCommentEnd(e);break;case Vd.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case Vd.DOCTYPE:this._stateDoctype(e);break;case Vd.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case Vd.DOCTYPE_NAME:this._stateDoctypeName(e);break;case Vd.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case Vd.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case Vd.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case Vd.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case Vd.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case Vd.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case Vd.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case Vd.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case Vd.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case Vd.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case Vd.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case Vd.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case Vd.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case Vd.CDATA_SECTION:this._stateCdataSection(e);break;case Vd.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case Vd.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case Vd.CHARACTER_REFERENCE:this._stateCharacterReference();break;case Vd.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;default:throw new Error("Unknown state")}}_stateData(e){switch(e){case od.LESS_THAN_SIGN:this.state=Vd.TAG_OPEN;break;case od.AMPERSAND:this._startCharacterReference();break;case od.NULL:this._err(yd.unexpectedNullCharacter),this._emitCodePoint(e);break;case od.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case od.AMPERSAND:this._startCharacterReference();break;case od.LESS_THAN_SIGN:this.state=Vd.RCDATA_LESS_THAN_SIGN;break;case od.NULL:this._err(yd.unexpectedNullCharacter),this._emitChars(ad);break;case od.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case od.LESS_THAN_SIGN:this.state=Vd.RAWTEXT_LESS_THAN_SIGN;break;case od.NULL:this._err(yd.unexpectedNullCharacter),this._emitChars(ad);break;case od.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case od.LESS_THAN_SIGN:this.state=Vd.SCRIPT_DATA_LESS_THAN_SIGN;break;case od.NULL:this._err(yd.unexpectedNullCharacter),this._emitChars(ad);break;case od.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case od.NULL:this._err(yd.unexpectedNullCharacter),this._emitChars(ad);break;case od.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Xd(e))this._createStartTagToken(),this.state=Vd.TAG_NAME,this._stateTagName(e);else switch(e){case od.EXCLAMATION_MARK:this.state=Vd.MARKUP_DECLARATION_OPEN;break;case od.SOLIDUS:this.state=Vd.END_TAG_OPEN;break;case od.QUESTION_MARK:this._err(yd.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Vd.BOGUS_COMMENT,this._stateBogusComment(e);break;case od.EOF:this._err(yd.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(yd.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Vd.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Xd(e))this._createEndTagToken(),this.state=Vd.TAG_NAME,this._stateTagName(e);else switch(e){case od.GREATER_THAN_SIGN:this._err(yd.missingEndTagName),this.state=Vd.DATA;break;case od.EOF:this._err(yd.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(yd.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Vd.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const t=this.currentToken;switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:this.state=Vd.BEFORE_ATTRIBUTE_NAME;break;case od.SOLIDUS:this.state=Vd.SELF_CLOSING_START_TAG;break;case od.GREATER_THAN_SIGN:this.state=Vd.DATA,this.emitCurrentTagToken();break;case od.NULL:this._err(yd.unexpectedNullCharacter),t.tagName+=ad;break;case od.EOF:this._err(yd.eofInTag),this._emitEOFToken();break;default:t.tagName+=String.fromCodePoint(Kd(e)?Jd(e):e)}}_stateRcdataLessThanSign(e){e===od.SOLIDUS?this.state=Vd.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Vd.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Xd(e)?(this.state=Vd.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=Vd.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();this.currentToken.tagName=this.lastStartTagName;switch(this.preprocessor.peek(this.lastStartTagName.length)){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Vd.BEFORE_ATTRIBUTE_NAME,!1;case od.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Vd.SELF_CLOSING_START_TAG,!1;case od.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Vd.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Vd.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===od.SOLIDUS?this.state=Vd.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Vd.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Xd(e)?(this.state=Vd.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=Vd.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Vd.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case od.SOLIDUS:this.state=Vd.SCRIPT_DATA_END_TAG_OPEN;break;case od.EXCLAMATION_MARK:this.state=Vd.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=Vd.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Xd(e)?(this.state=Vd.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=Vd.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Vd.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===od.HYPHEN_MINUS?(this.state=Vd.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Vd.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===od.HYPHEN_MINUS?(this.state=Vd.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Vd.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case od.HYPHEN_MINUS:this.state=Vd.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case od.LESS_THAN_SIGN:this.state=Vd.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case od.NULL:this._err(yd.unexpectedNullCharacter),this._emitChars(ad);break;case od.EOF:this._err(yd.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case od.HYPHEN_MINUS:this.state=Vd.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case od.LESS_THAN_SIGN:this.state=Vd.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case od.NULL:this._err(yd.unexpectedNullCharacter),this.state=Vd.SCRIPT_DATA_ESCAPED,this._emitChars(ad);break;case od.EOF:this._err(yd.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=Vd.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case od.HYPHEN_MINUS:this._emitChars("-");break;case od.LESS_THAN_SIGN:this.state=Vd.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case od.GREATER_THAN_SIGN:this.state=Vd.SCRIPT_DATA,this._emitChars(">");break;case od.NULL:this._err(yd.unexpectedNullCharacter),this.state=Vd.SCRIPT_DATA_ESCAPED,this._emitChars(ad);break;case od.EOF:this._err(yd.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=Vd.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===od.SOLIDUS?this.state=Vd.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Xd(e)?(this._emitChars("<"),this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=Vd.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Xd(e)?(this.state=Vd.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=Vd.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Vd.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(hd,!1)&&ep(this.preprocessor.peek(hd.length))){this._emitCodePoint(e);for(let e=0;e<hd.length;e++)this._emitCodePoint(this._consume());this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Vd.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case od.HYPHEN_MINUS:this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case od.LESS_THAN_SIGN:this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case od.NULL:this._err(yd.unexpectedNullCharacter),this._emitChars(ad);break;case od.EOF:this._err(yd.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case od.HYPHEN_MINUS:this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case od.LESS_THAN_SIGN:this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case od.NULL:this._err(yd.unexpectedNullCharacter),this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ad);break;case od.EOF:this._err(yd.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case od.HYPHEN_MINUS:this._emitChars("-");break;case od.LESS_THAN_SIGN:this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case od.GREATER_THAN_SIGN:this.state=Vd.SCRIPT_DATA,this._emitChars(">");break;case od.NULL:this._err(yd.unexpectedNullCharacter),this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ad);break;case od.EOF:this._err(yd.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===od.SOLIDUS?(this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(hd,!1)&&ep(this.preprocessor.peek(hd.length))){this._emitCodePoint(e);for(let e=0;e<hd.length;e++)this._emitCodePoint(this._consume());this.state=Vd.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Vd.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:break;case od.SOLIDUS:case od.GREATER_THAN_SIGN:case od.EOF:this.state=Vd.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case od.EQUALS_SIGN:this._err(yd.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Vd.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=Vd.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:case od.SOLIDUS:case od.GREATER_THAN_SIGN:case od.EOF:this._leaveAttrName(),this.state=Vd.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case od.EQUALS_SIGN:this._leaveAttrName(),this.state=Vd.BEFORE_ATTRIBUTE_VALUE;break;case od.QUOTATION_MARK:case od.APOSTROPHE:case od.LESS_THAN_SIGN:this._err(yd.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case od.NULL:this._err(yd.unexpectedNullCharacter),this.currentAttr.name+=ad;break;default:this.currentAttr.name+=String.fromCodePoint(Kd(e)?Jd(e):e)}}_stateAfterAttributeName(e){switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:break;case od.SOLIDUS:this.state=Vd.SELF_CLOSING_START_TAG;break;case od.EQUALS_SIGN:this.state=Vd.BEFORE_ATTRIBUTE_VALUE;break;case od.GREATER_THAN_SIGN:this.state=Vd.DATA,this.emitCurrentTagToken();break;case od.EOF:this._err(yd.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=Vd.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:break;case od.QUOTATION_MARK:this.state=Vd.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case od.APOSTROPHE:this.state=Vd.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case od.GREATER_THAN_SIGN:this._err(yd.missingAttributeValue),this.state=Vd.DATA,this.emitCurrentTagToken();break;default:this.state=Vd.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case od.QUOTATION_MARK:this.state=Vd.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case od.AMPERSAND:this._startCharacterReference();break;case od.NULL:this._err(yd.unexpectedNullCharacter),this.currentAttr.value+=ad;break;case od.EOF:this._err(yd.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case od.APOSTROPHE:this.state=Vd.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case od.AMPERSAND:this._startCharacterReference();break;case od.NULL:this._err(yd.unexpectedNullCharacter),this.currentAttr.value+=ad;break;case od.EOF:this._err(yd.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:this._leaveAttrValue(),this.state=Vd.BEFORE_ATTRIBUTE_NAME;break;case od.AMPERSAND:this._startCharacterReference();break;case od.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=Vd.DATA,this.emitCurrentTagToken();break;case od.NULL:this._err(yd.unexpectedNullCharacter),this.currentAttr.value+=ad;break;case od.QUOTATION_MARK:case od.APOSTROPHE:case od.LESS_THAN_SIGN:case od.EQUALS_SIGN:case od.GRAVE_ACCENT:this._err(yd.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case od.EOF:this._err(yd.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:this._leaveAttrValue(),this.state=Vd.BEFORE_ATTRIBUTE_NAME;break;case od.SOLIDUS:this._leaveAttrValue(),this.state=Vd.SELF_CLOSING_START_TAG;break;case od.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=Vd.DATA,this.emitCurrentTagToken();break;case od.EOF:this._err(yd.eofInTag),this._emitEOFToken();break;default:this._err(yd.missingWhitespaceBetweenAttributes),this.state=Vd.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case od.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=Vd.DATA,this.emitCurrentTagToken();break;case od.EOF:this._err(yd.eofInTag),this._emitEOFToken();break;default:this._err(yd.unexpectedSolidusInTag),this.state=Vd.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const t=this.currentToken;switch(e){case od.GREATER_THAN_SIGN:this.state=Vd.DATA,this.emitCurrentComment(t);break;case od.EOF:this.emitCurrentComment(t),this._emitEOFToken();break;case od.NULL:this._err(yd.unexpectedNullCharacter),t.data+=ad;break;default:t.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(ld,!0)?(this._createCommentToken(ld.length+1),this.state=Vd.COMMENT_START):this._consumeSequenceIfMatch(ud,!1)?(this.currentLocation=this.getCurrentLocation(ud.length+1),this.state=Vd.DOCTYPE):this._consumeSequenceIfMatch(cd,!0)?this.inForeignNode?this.state=Vd.CDATA_SECTION:(this._err(yd.cdataInHtmlContent),this._createCommentToken(cd.length+1),this.currentToken.data="[CDATA[",this.state=Vd.BOGUS_COMMENT):this._ensureHibernation()||(this._err(yd.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Vd.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case od.HYPHEN_MINUS:this.state=Vd.COMMENT_START_DASH;break;case od.GREATER_THAN_SIGN:{this._err(yd.abruptClosingOfEmptyComment),this.state=Vd.DATA;const e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=Vd.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const t=this.currentToken;switch(e){case od.HYPHEN_MINUS:this.state=Vd.COMMENT_END;break;case od.GREATER_THAN_SIGN:this._err(yd.abruptClosingOfEmptyComment),this.state=Vd.DATA,this.emitCurrentComment(t);break;case od.EOF:this._err(yd.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=Vd.COMMENT,this._stateComment(e)}}_stateComment(e){const t=this.currentToken;switch(e){case od.HYPHEN_MINUS:this.state=Vd.COMMENT_END_DASH;break;case od.LESS_THAN_SIGN:t.data+="<",this.state=Vd.COMMENT_LESS_THAN_SIGN;break;case od.NULL:this._err(yd.unexpectedNullCharacter),t.data+=ad;break;case od.EOF:this._err(yd.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const t=this.currentToken;switch(e){case od.EXCLAMATION_MARK:t.data+="!",this.state=Vd.COMMENT_LESS_THAN_SIGN_BANG;break;case od.LESS_THAN_SIGN:t.data+="<";break;default:this.state=Vd.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===od.HYPHEN_MINUS?this.state=Vd.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Vd.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===od.HYPHEN_MINUS?this.state=Vd.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Vd.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==od.GREATER_THAN_SIGN&&e!==od.EOF&&this._err(yd.nestedComment),this.state=Vd.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const t=this.currentToken;switch(e){case od.HYPHEN_MINUS:this.state=Vd.COMMENT_END;break;case od.EOF:this._err(yd.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=Vd.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const t=this.currentToken;switch(e){case od.GREATER_THAN_SIGN:this.state=Vd.DATA,this.emitCurrentComment(t);break;case od.EXCLAMATION_MARK:this.state=Vd.COMMENT_END_BANG;break;case od.HYPHEN_MINUS:t.data+="-";break;case od.EOF:this._err(yd.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--",this.state=Vd.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const t=this.currentToken;switch(e){case od.HYPHEN_MINUS:t.data+="--!",this.state=Vd.COMMENT_END_DASH;break;case od.GREATER_THAN_SIGN:this._err(yd.incorrectlyClosedComment),this.state=Vd.DATA,this.emitCurrentComment(t);break;case od.EOF:this._err(yd.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--!",this.state=Vd.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:this.state=Vd.BEFORE_DOCTYPE_NAME;break;case od.GREATER_THAN_SIGN:this.state=Vd.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case od.EOF:{this._err(yd.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(yd.missingWhitespaceBeforeDoctypeName),this.state=Vd.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(Kd(e))this._createDoctypeToken(String.fromCharCode(Jd(e))),this.state=Vd.DOCTYPE_NAME;else switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:break;case od.NULL:this._err(yd.unexpectedNullCharacter),this._createDoctypeToken(ad),this.state=Vd.DOCTYPE_NAME;break;case od.GREATER_THAN_SIGN:{this._err(yd.missingDoctypeName),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=Vd.DATA;break}case od.EOF:{this._err(yd.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=Vd.DOCTYPE_NAME}}_stateDoctypeName(e){const t=this.currentToken;switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:this.state=Vd.AFTER_DOCTYPE_NAME;break;case od.GREATER_THAN_SIGN:this.state=Vd.DATA,this.emitCurrentDoctype(t);break;case od.NULL:this._err(yd.unexpectedNullCharacter),t.name+=ad;break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.name+=String.fromCodePoint(Kd(e)?Jd(e):e)}}_stateAfterDoctypeName(e){const t=this.currentToken;switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:break;case od.GREATER_THAN_SIGN:this.state=Vd.DATA,this.emitCurrentDoctype(t);break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(dd,!1)?this.state=Vd.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(pd,!1)?this.state=Vd.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(yd.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=Vd.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const t=this.currentToken;switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:this.state=Vd.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case od.QUOTATION_MARK:this._err(yd.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=Vd.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case od.APOSTROPHE:this._err(yd.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=Vd.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case od.GREATER_THAN_SIGN:this._err(yd.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=Vd.DATA,this.emitCurrentDoctype(t);break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(yd.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=Vd.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:break;case od.QUOTATION_MARK:t.publicId="",this.state=Vd.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case od.APOSTROPHE:t.publicId="",this.state=Vd.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case od.GREATER_THAN_SIGN:this._err(yd.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=Vd.DATA,this.emitCurrentDoctype(t);break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(yd.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=Vd.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case od.QUOTATION_MARK:this.state=Vd.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case od.NULL:this._err(yd.unexpectedNullCharacter),t.publicId+=ad;break;case od.GREATER_THAN_SIGN:this._err(yd.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=Vd.DATA;break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case od.APOSTROPHE:this.state=Vd.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case od.NULL:this._err(yd.unexpectedNullCharacter),t.publicId+=ad;break;case od.GREATER_THAN_SIGN:this._err(yd.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=Vd.DATA;break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:this.state=Vd.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case od.GREATER_THAN_SIGN:this.state=Vd.DATA,this.emitCurrentDoctype(t);break;case od.QUOTATION_MARK:this._err(yd.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=Vd.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case od.APOSTROPHE:this._err(yd.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=Vd.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(yd.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=Vd.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const t=this.currentToken;switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:break;case od.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=Vd.DATA;break;case od.QUOTATION_MARK:t.systemId="",this.state=Vd.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case od.APOSTROPHE:t.systemId="",this.state=Vd.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(yd.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=Vd.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const t=this.currentToken;switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:this.state=Vd.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case od.QUOTATION_MARK:this._err(yd.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=Vd.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case od.APOSTROPHE:this._err(yd.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=Vd.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case od.GREATER_THAN_SIGN:this._err(yd.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=Vd.DATA,this.emitCurrentDoctype(t);break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(yd.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=Vd.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:break;case od.QUOTATION_MARK:t.systemId="",this.state=Vd.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case od.APOSTROPHE:t.systemId="",this.state=Vd.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case od.GREATER_THAN_SIGN:this._err(yd.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=Vd.DATA,this.emitCurrentDoctype(t);break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(yd.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=Vd.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case od.QUOTATION_MARK:this.state=Vd.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case od.NULL:this._err(yd.unexpectedNullCharacter),t.systemId+=ad;break;case od.GREATER_THAN_SIGN:this._err(yd.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=Vd.DATA;break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case od.APOSTROPHE:this.state=Vd.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case od.NULL:this._err(yd.unexpectedNullCharacter),t.systemId+=ad;break;case od.GREATER_THAN_SIGN:this._err(yd.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=Vd.DATA;break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case od.SPACE:case od.LINE_FEED:case od.TABULATION:case od.FORM_FEED:break;case od.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=Vd.DATA;break;case od.EOF:this._err(yd.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(yd.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Vd.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const t=this.currentToken;switch(e){case od.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=Vd.DATA;break;case od.NULL:this._err(yd.unexpectedNullCharacter);break;case od.EOF:this.emitCurrentDoctype(t),this._emitEOFToken()}}_stateCdataSection(e){switch(e){case od.RIGHT_SQUARE_BRACKET:this.state=Vd.CDATA_SECTION_BRACKET;break;case od.EOF:this._err(yd.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===od.RIGHT_SQUARE_BRACKET?this.state=Vd.CDATA_SECTION_END:(this._emitChars("]"),this.state=Vd.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case od.GREATER_THAN_SIGN:this.state=Vd.DATA;break;case od.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=Vd.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0){if(!this.preprocessor.lastChunkWritten)return this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,void(this.preprocessor.endOfChunkHit=!0);e=this.entityDecoder.end()}0===e?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(od.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&Qd(this.preprocessor.peek(1))?Vd.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){Qd(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===od.SEMICOLON&&this._err(yd.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const np=new Set([jd.DD,jd.DT,jd.LI,jd.OPTGROUP,jd.OPTION,jd.P,jd.RB,jd.RP,jd.RT,jd.RTC]),rp=new Set([...np,jd.CAPTION,jd.COLGROUP,jd.TBODY,jd.TD,jd.TFOOT,jd.TH,jd.THEAD,jd.TR]),sp=new Set([jd.APPLET,jd.CAPTION,jd.HTML,jd.MARQUEE,jd.OBJECT,jd.TABLE,jd.TD,jd.TEMPLATE,jd.TH]),ip=new Set([...sp,jd.OL,jd.UL]),ap=new Set([...sp,jd.BUTTON]),op=new Set([jd.ANNOTATION_XML,jd.MI,jd.MN,jd.MO,jd.MS,jd.MTEXT]),lp=new Set([jd.DESC,jd.FOREIGN_OBJECT,jd.TITLE]),cp=new Set([jd.TR,jd.TEMPLATE,jd.HTML]),up=new Set([jd.TBODY,jd.TFOOT,jd.THEAD,jd.TEMPLATE,jd.HTML]),hp=new Set([jd.TABLE,jd.TEMPLATE,jd.HTML]),dp=new Set([jd.TD,jd.TH]);class pp{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,t,n){this.treeAdapter=t,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=jd.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===jd.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fd.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&(this.current=t)}insertAfter(e,t,n){const r=this._indexOf(e)+1;this.items.splice(r,0,t),this.tagIDs.splice(r,0,n),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}popUntilTagNamePopped(e){let t=this.stackTop+1;do{t=this.tagIDs.lastIndexOf(e,t-1)}while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==Fd.HTML);this.shortenToLength(t<0?0:t)}shortenToLength(e){for(;this.stackTop>=e;){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}popUntilElementPopped(e){const t=this._indexOf(e);this.shortenToLength(t<0?0:t)}popUntilPopped(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n<0?0:n)}popUntilNumberedHeaderPopped(){this.popUntilPopped(qd,Fd.HTML)}popUntilTableCellPopped(){this.popUntilPopped(dp,Fd.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,t){for(let n=this.stackTop;n>=0;n--)if(e.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===t)return n;return-1}clearBackTo(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(hp,Fd.HTML)}clearBackToTableBodyContext(){this.clearBackTo(up,Fd.HTML)}clearBackToTableRowContext(){this.clearBackTo(cp,Fd.HTML)}remove(e){const t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===jd.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const t=this._indexOf(e)-1;return t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===jd.HTML}hasInDynamicScope(e,t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case Fd.HTML:if(r===e)return!0;if(t.has(r))return!1;break;case Fd.SVG:if(lp.has(r))return!1;break;case Fd.MATHML:if(op.has(r))return!1}}return!0}hasInScope(e){return this.hasInDynamicScope(e,sp)}hasInListItemScope(e){return this.hasInDynamicScope(e,ip)}hasInButtonScope(e){return this.hasInDynamicScope(e,ap)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case Fd.HTML:if(qd.has(t))return!0;if(sp.has(t))return!1;break;case Fd.SVG:if(lp.has(t))return!1;break;case Fd.MATHML:if(op.has(t))return!1}}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===Fd.HTML)switch(this.tagIDs[t]){case e:return!0;case jd.TABLE:case jd.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===Fd.HTML)switch(this.tagIDs[e]){case jd.TBODY:case jd.THEAD:case jd.TFOOT:return!0;case jd.TABLE:case jd.HTML:return!1}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===Fd.HTML)switch(this.tagIDs[t]){case e:return!0;case jd.OPTION:case jd.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;np.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;rp.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&rp.has(this.currentTagId);)this.pop()}}var fp;!function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"}(fp||(fp={}));const mp={type:fp.Marker};class gp{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,t){const n=[],r=t.length,s=this.treeAdapter.getTagName(e),i=this.treeAdapter.getNamespaceURI(e);for(let a=0;a<this.entries.length;a++){const e=this.entries[a];if(e.type===fp.Marker)break;const{element:t}=e;if(this.treeAdapter.getTagName(t)===s&&this.treeAdapter.getNamespaceURI(t)===i){const e=this.treeAdapter.getAttrList(t);e.length===r&&n.push({idx:a,attrs:e})}}return n}_ensureNoahArkCondition(e){if(this.entries.length<3)return;const t=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,t);if(n.length<3)return;const r=new Map(t.map((e=>[e.name,e.value])));let s=0;for(let i=0;i<n.length;i++){const e=n[i];e.attrs.every((e=>r.get(e.name)===e.value))&&(s+=1,s>=3&&this.entries.splice(e.idx,1))}}insertMarker(){this.entries.unshift(mp)}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:fp.Element,element:e,token:t})}insertElementAfterBookmark(e,t){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:fp.Element,element:e,token:t})}removeEntry(e){const t=this.entries.indexOf(e);t>=0&&this.entries.splice(t,1)}clearToLastMarker(){const e=this.entries.indexOf(mp);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const t=this.entries.find((t=>t.type===fp.Marker||this.treeAdapter.getTagName(t.element)===e));return t&&t.type===fp.Element?t:null}getElementEntry(e){return this.entries.find((t=>t.type===fp.Element&&t.element===e))}}const yp={createDocument:()=>({nodeName:"#document",mode:Hd.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(e,t,n)=>({nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}),createCommentNode:e=>({nodeName:"#comment",data:e,parentNode:null}),createTextNode:e=>({nodeName:"#text",value:e,parentNode:null}),appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(e,t,n,r){const s=e.childNodes.find((e=>"#documentType"===e.nodeName));if(s)s.name=t,s.publicId=n,s.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};yp.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode:e=>e.mode,detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(yp.isTextNode(n))return void(n.value+=t)}yp.appendChild(e,yp.createTextNode(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&yp.isTextNode(r)?r.value+=t:yp.insertBefore(e,yp.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map((e=>e.name)));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attrs,getTagName:e=>e.tagName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.value,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName:e=>e.name,getDocumentTypeNodePublicId:e=>e.publicId,getDocumentTypeNodeSystemId:e=>e.systemId,isTextNode:e=>"#text"===e.nodeName,isCommentNode:e=>"#comment"===e.nodeName,isDocumentTypeNode:e=>"#documentType"===e.nodeName,isElementNode:e=>Object.prototype.hasOwnProperty.call(e,"tagName"),setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},bp="html",Ep="about:legacy-compat",vp="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",_p=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Tp=[..._p,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Ap=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),wp=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Sp=[...wp,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function kp(e,t){return t.some((t=>e.startsWith(t)))}const Cp={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},xp="definitionurl",Ip="definitionURL",Np=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),Rp=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Fd.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Fd.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Fd.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Fd.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Fd.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Fd.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Fd.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Fd.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Fd.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Fd.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Fd.XMLNS}]]),Dp=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e]))),Pp=new Set([jd.B,jd.BIG,jd.BLOCKQUOTE,jd.BODY,jd.BR,jd.CENTER,jd.CODE,jd.DD,jd.DIV,jd.DL,jd.DT,jd.EM,jd.EMBED,jd.H1,jd.H2,jd.H3,jd.H4,jd.H5,jd.H6,jd.HEAD,jd.HR,jd.I,jd.IMG,jd.LI,jd.LISTING,jd.MENU,jd.META,jd.NOBR,jd.OL,jd.P,jd.PRE,jd.RUBY,jd.S,jd.SMALL,jd.SPAN,jd.STRONG,jd.STRIKE,jd.SUB,jd.SUP,jd.TABLE,jd.TT,jd.U,jd.UL,jd.VAR]);function Op(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===xp){e.attrs[t].name=Ip;break}}function Lp(e){for(let t=0;t<e.attrs.length;t++){const n=Np.get(e.attrs[t].name);null!=n&&(e.attrs[t].name=n)}}function Mp(e){for(let t=0;t<e.attrs.length;t++){const n=Rp.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Fp(e,t,n,r){return(!r||r===Fd.HTML)&&function(e,t,n){if(t===Fd.MATHML&&e===jd.ANNOTATION_XML)for(let r=0;r<n.length;r++)if(n[r].name===Bd.ENCODING){const e=n[r].value.toLowerCase();return e===Cp.TEXT_HTML||e===Cp.APPLICATION_XML}return t===Fd.SVG&&(e===jd.FOREIGN_OBJECT||e===jd.DESC||e===jd.TITLE)}(e,t,n)||(!r||r===Fd.MATHML)&&function(e,t){return t===Fd.MATHML&&(e===jd.MI||e===jd.MO||e===jd.MN||e===jd.MS||e===jd.MTEXT)}(e,t)}const Bp="hidden",Hp=8,Up=3;var jp;!function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"}(jp||(jp={}));const zp={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Gp=new Set([jd.TABLE,jd.TBODY,jd.TFOOT,jd.THEAD,jd.TR]),Wp={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:yp,onParseError:null};class $p{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.fragmentContext=n,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=jp.INITIAL,this.originalInsertionMode=jp.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Wp,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!==t&&void 0!==t?t:this.treeAdapter.createDocument(),this.tokenizer=new tp(this.options,this),this.activeFormattingElements=new gp(this.treeAdapter),this.fragmentContextID=n?Gd(this.treeAdapter.getTagName(n)):jd.UNKNOWN,this._setContextModes(null!==n&&void 0!==n?n:this.document,this.fragmentContextID),this.openElements=new pp(this.document,this.treeAdapter,this)}static parse(e,t){const n=new this(t);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,t){const n={...Wp,...t};null!==e&&void 0!==e||(e=n.treeAdapter.createElement(Ud.TEMPLATE,Fd.HTML,[]));const r=n.treeAdapter.createElement("documentmock",Fd.HTML,[]),s=new this(n,r,e);return s.fragmentContextID===jd.TEMPLATE&&s.tmplInsertionModeStack.unshift(jp.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,n){var r;if(!this.onParseError)return;const s=null!==(r=e.location)&&void 0!==r?r:zp,i={code:t,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:n?s.startLine:s.endLine,endCol:n?s.startCol:s.endCol,endOffset:n?s.startOffset:s.endOffset};this.onParseError(i)}onItemPush(e,t,n){var r,s;null===(s=(r=this.treeAdapter).onItemPush)||void 0===s||s.call(r,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var n,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null===(r=(n=this.treeAdapter).onItemPop)||void 0===r||r.call(n,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):({current:e,currentTagId:t}=this.openElements),this._setContextModes(e,t)}}_setContextModes(e,t){const n=e===this.document||this.treeAdapter.getNamespaceURI(e)===Fd.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,Fd.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=jp.TEXT}switchToPlaintextParsing(){this.insertionMode=jp.TEXT,this.originalInsertionMode=jp.IN_BODY,this.tokenizer.state=Yd.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===Ud.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===Fd.HTML)switch(this.fragmentContextID){case jd.TITLE:case jd.TEXTAREA:this.tokenizer.state=Yd.RCDATA;break;case jd.STYLE:case jd.XMP:case jd.IFRAME:case jd.NOEMBED:case jd.NOFRAMES:case jd.NOSCRIPT:this.tokenizer.state=Yd.RAWTEXT;break;case jd.SCRIPT:this.tokenizer.state=Yd.SCRIPT_DATA;break;case jd.PLAINTEXT:this.tokenizer.state=Yd.PLAINTEXT}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",r=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,n,r),e.location){const t=this.treeAdapter.getChildNodes(this.document).find((e=>this.treeAdapter.isDocumentTypeNode(e)));t&&this.treeAdapter.setNodeSourceCodeLocation(t,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){const n=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(t,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,t){const n=this.treeAdapter.createElement(e,Fd.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,Fd.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(Ud.HTML,Fd.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,jd.HTML)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let t,n;if(this._shouldFosterParentOnInsertion()?(({parent:t,beforeElement:n}=this._findFosterParentingLocation()),n?this.treeAdapter.insertTextBefore(t,e.chars,n):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const r=this.treeAdapter.getChildNodes(t),s=n?r.lastIndexOf(n):r.length,i=r[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(i)){const{endLine:t,endCol:n,endOffset:r}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(i,{endLine:t,endCol:n,endOffset:r})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,e.location)}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,r=this.treeAdapter.getTagName(e),s=t.type===Ed.END_TAG&&r===t.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,s)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,n;return 0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,n=this.fragmentContextID):({current:t,currentTagId:n}=this.openElements),(e.tagID!==jd.SVG||this.treeAdapter.getTagName(t)!==Ud.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==Fd.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===jd.MGLYPH||e.tagID===jd.MALIGNMARK)&&!this._isIntegrationPoint(n,t,Fd.HTML))}_processToken(e){switch(e.type){case Ed.CHARACTER:this.onCharacter(e);break;case Ed.NULL_CHARACTER:this.onNullCharacter(e);break;case Ed.COMMENT:this.onComment(e);break;case Ed.DOCTYPE:this.onDoctype(e);break;case Ed.START_TAG:this._processStartTag(e);break;case Ed.END_TAG:this.onEndTag(e);break;case Ed.EOF:this.onEof(e);break;case Ed.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e)}}_isIntegrationPoint(e,t,n){return Fp(e,this.treeAdapter.getNamespaceURI(t),this.treeAdapter.getAttrList(t),n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex((e=>e.type===fp.Marker||this.openElements.contains(e.element)));for(let n=t<0?e-1:t-1;n>=0;n--){const e=this.activeFormattingElements.entries[n];this._insertElement(e.token,this.treeAdapter.getNamespaceURI(e.element)),e.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=jp.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(jd.P),this.openElements.popUntilTagNamePopped(jd.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case jd.TR:return void(this.insertionMode=jp.IN_ROW);case jd.TBODY:case jd.THEAD:case jd.TFOOT:return void(this.insertionMode=jp.IN_TABLE_BODY);case jd.CAPTION:return void(this.insertionMode=jp.IN_CAPTION);case jd.COLGROUP:return void(this.insertionMode=jp.IN_COLUMN_GROUP);case jd.TABLE:return void(this.insertionMode=jp.IN_TABLE);case jd.BODY:return void(this.insertionMode=jp.IN_BODY);case jd.FRAMESET:return void(this.insertionMode=jp.IN_FRAMESET);case jd.SELECT:return void this._resetInsertionModeForSelect(e);case jd.TEMPLATE:return void(this.insertionMode=this.tmplInsertionModeStack[0]);case jd.HTML:return void(this.insertionMode=this.headElement?jp.AFTER_HEAD:jp.BEFORE_HEAD);case jd.TD:case jd.TH:if(e>0)return void(this.insertionMode=jp.IN_CELL);break;case jd.HEAD:if(e>0)return void(this.insertionMode=jp.IN_HEAD)}this.insertionMode=jp.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.tagIDs[t];if(e===jd.TEMPLATE)break;if(e===jd.TABLE)return void(this.insertionMode=jp.IN_SELECT_IN_TABLE)}this.insertionMode=jp.IN_SELECT}_isElementCausesFosterParenting(e){return Gp.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case jd.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===Fd.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case jd.TABLE:{const n=this.treeAdapter.getParentNode(t);return n?{parent:n,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){const n=this.treeAdapter.getNamespaceURI(e);return $d[n].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e);else switch(this.insertionMode){case jp.INITIAL:tf(this,e);break;case jp.BEFORE_HTML:nf(this,e);break;case jp.BEFORE_HEAD:rf(this,e);break;case jp.IN_HEAD:of(this,e);break;case jp.IN_HEAD_NO_SCRIPT:lf(this,e);break;case jp.AFTER_HEAD:cf(this,e);break;case jp.IN_BODY:case jp.IN_CAPTION:case jp.IN_CELL:case jp.IN_TEMPLATE:df(this,e);break;case jp.TEXT:case jp.IN_SELECT:case jp.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case jp.IN_TABLE:case jp.IN_TABLE_BODY:case jp.IN_ROW:_f(this,e);break;case jp.IN_TABLE_TEXT:kf(this,e);break;case jp.IN_COLUMN_GROUP:Nf(this,e);break;case jp.AFTER_BODY:Hf(this,e);break;case jp.AFTER_AFTER_BODY:Uf(this,e)}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){t.chars=ad,e._insertCharacters(t)}(this,e);else switch(this.insertionMode){case jp.INITIAL:tf(this,e);break;case jp.BEFORE_HTML:nf(this,e);break;case jp.BEFORE_HEAD:rf(this,e);break;case jp.IN_HEAD:of(this,e);break;case jp.IN_HEAD_NO_SCRIPT:lf(this,e);break;case jp.AFTER_HEAD:cf(this,e);break;case jp.TEXT:this._insertCharacters(e);break;case jp.IN_TABLE:case jp.IN_TABLE_BODY:case jp.IN_ROW:_f(this,e);break;case jp.IN_COLUMN_GROUP:Nf(this,e);break;case jp.AFTER_BODY:Hf(this,e);break;case jp.AFTER_AFTER_BODY:Uf(this,e)}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML)Zp(this,e);else switch(this.insertionMode){case jp.INITIAL:case jp.BEFORE_HTML:case jp.BEFORE_HEAD:case jp.IN_HEAD:case jp.IN_HEAD_NO_SCRIPT:case jp.AFTER_HEAD:case jp.IN_BODY:case jp.IN_TABLE:case jp.IN_CAPTION:case jp.IN_COLUMN_GROUP:case jp.IN_TABLE_BODY:case jp.IN_ROW:case jp.IN_CELL:case jp.IN_SELECT:case jp.IN_SELECT_IN_TABLE:case jp.IN_TEMPLATE:case jp.IN_FRAMESET:case jp.AFTER_FRAMESET:Zp(this,e);break;case jp.IN_TABLE_TEXT:Cf(this,e);break;case jp.AFTER_BODY:!function(e,t){e._appendCommentNode(t,e.openElements.items[0])}(this,e);break;case jp.AFTER_AFTER_BODY:case jp.AFTER_AFTER_FRAMESET:!function(e,t){e._appendCommentNode(t,e.document)}(this,e)}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case jp.INITIAL:!function(e,t){e._setDocumentType(t);const n=t.forceQuirks?Hd.QUIRKS:function(e){if(e.name!==bp)return Hd.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===vp)return Hd.QUIRKS;let{publicId:n}=e;if(null!==n){if(n=n.toLowerCase(),Ap.has(n))return Hd.QUIRKS;let e=null===t?Tp:_p;if(kp(n,e))return Hd.QUIRKS;if(e=null===t?wp:Sp,kp(n,e))return Hd.LIMITED_QUIRKS}return Hd.NO_QUIRKS}(t);(function(e){return e.name===bp&&null===e.publicId&&(null===e.systemId||e.systemId===Ep)})(t)||e._err(t,yd.nonConformingDoctype);e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=jp.BEFORE_HTML}(this,e);break;case jp.BEFORE_HEAD:case jp.IN_HEAD:case jp.IN_HEAD_NO_SCRIPT:case jp.AFTER_HEAD:this._err(e,yd.misplacedDoctype);break;case jp.IN_TABLE_TEXT:Cf(this,e)}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,yd.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?function(e,t){if(function(e){const t=e.tagID;return t===jd.FONT&&e.attrs.some((e=>{let{name:t}=e;return t===Bd.COLOR||t===Bd.SIZE||t===Bd.FACE}))||Pp.has(t)}(t))jf(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Fd.MATHML?Op(t):r===Fd.SVG&&(!function(e){const t=Dp.get(e.tagName);null!=t&&(e.tagName=t,e.tagID=Gd(e.tagName))}(t),Lp(t)),Mp(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case jp.INITIAL:tf(this,e);break;case jp.BEFORE_HTML:!function(e,t){t.tagID===jd.HTML?(e._insertElement(t,Fd.HTML),e.insertionMode=jp.BEFORE_HEAD):nf(e,t)}(this,e);break;case jp.BEFORE_HEAD:!function(e,t){switch(t.tagID){case jd.HTML:yf(e,t);break;case jd.HEAD:e._insertElement(t,Fd.HTML),e.headElement=e.openElements.current,e.insertionMode=jp.IN_HEAD;break;default:rf(e,t)}}(this,e);break;case jp.IN_HEAD:sf(this,e);break;case jp.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case jd.HTML:yf(e,t);break;case jd.BASEFONT:case jd.BGSOUND:case jd.HEAD:case jd.LINK:case jd.META:case jd.NOFRAMES:case jd.STYLE:sf(e,t);break;case jd.NOSCRIPT:e._err(t,yd.nestedNoscriptInHead);break;default:lf(e,t)}}(this,e);break;case jp.AFTER_HEAD:!function(e,t){switch(t.tagID){case jd.HTML:yf(e,t);break;case jd.BODY:e._insertElement(t,Fd.HTML),e.framesetOk=!1,e.insertionMode=jp.IN_BODY;break;case jd.FRAMESET:e._insertElement(t,Fd.HTML),e.insertionMode=jp.IN_FRAMESET;break;case jd.BASE:case jd.BASEFONT:case jd.BGSOUND:case jd.LINK:case jd.META:case jd.NOFRAMES:case jd.SCRIPT:case jd.STYLE:case jd.TEMPLATE:case jd.TITLE:e._err(t,yd.abandonedHeadElementChild),e.openElements.push(e.headElement,jd.HEAD),sf(e,t),e.openElements.remove(e.headElement);break;case jd.HEAD:e._err(t,yd.misplacedStartTagForHeadElement);break;default:cf(e,t)}}(this,e);break;case jp.IN_BODY:yf(this,e);break;case jp.IN_TABLE:Tf(this,e);break;case jp.IN_TABLE_TEXT:Cf(this,e);break;case jp.IN_CAPTION:!function(e,t){const n=t.tagID;xf.has(n)?e.openElements.hasInTableScope(jd.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(jd.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=jp.IN_TABLE,Tf(e,t)):yf(e,t)}(this,e);break;case jp.IN_COLUMN_GROUP:If(this,e);break;case jp.IN_TABLE_BODY:Rf(this,e);break;case jp.IN_ROW:Pf(this,e);break;case jp.IN_CELL:!function(e,t){const n=t.tagID;xf.has(n)?(e.openElements.hasInTableScope(jd.TD)||e.openElements.hasInTableScope(jd.TH))&&(e._closeTableCell(),Pf(e,t)):yf(e,t)}(this,e);break;case jp.IN_SELECT:Lf(this,e);break;case jp.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===jd.CAPTION||n===jd.TABLE||n===jd.TBODY||n===jd.TFOOT||n===jd.THEAD||n===jd.TR||n===jd.TD||n===jd.TH?(e.openElements.popUntilTagNamePopped(jd.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Lf(e,t)}(this,e);break;case jp.IN_TEMPLATE:!function(e,t){switch(t.tagID){case jd.BASE:case jd.BASEFONT:case jd.BGSOUND:case jd.LINK:case jd.META:case jd.NOFRAMES:case jd.SCRIPT:case jd.STYLE:case jd.TEMPLATE:case jd.TITLE:sf(e,t);break;case jd.CAPTION:case jd.COLGROUP:case jd.TBODY:case jd.TFOOT:case jd.THEAD:e.tmplInsertionModeStack[0]=jp.IN_TABLE,e.insertionMode=jp.IN_TABLE,Tf(e,t);break;case jd.COL:e.tmplInsertionModeStack[0]=jp.IN_COLUMN_GROUP,e.insertionMode=jp.IN_COLUMN_GROUP,If(e,t);break;case jd.TR:e.tmplInsertionModeStack[0]=jp.IN_TABLE_BODY,e.insertionMode=jp.IN_TABLE_BODY,Rf(e,t);break;case jd.TD:case jd.TH:e.tmplInsertionModeStack[0]=jp.IN_ROW,e.insertionMode=jp.IN_ROW,Pf(e,t);break;default:e.tmplInsertionModeStack[0]=jp.IN_BODY,e.insertionMode=jp.IN_BODY,yf(e,t)}}(this,e);break;case jp.AFTER_BODY:!function(e,t){t.tagID===jd.HTML?yf(e,t):Hf(e,t)}(this,e);break;case jp.IN_FRAMESET:!function(e,t){switch(t.tagID){case jd.HTML:yf(e,t);break;case jd.FRAMESET:e._insertElement(t,Fd.HTML);break;case jd.FRAME:e._appendElement(t,Fd.HTML),t.ackSelfClosing=!0;break;case jd.NOFRAMES:sf(e,t)}}(this,e);break;case jp.AFTER_FRAMESET:!function(e,t){switch(t.tagID){case jd.HTML:yf(e,t);break;case jd.NOFRAMES:sf(e,t)}}(this,e);break;case jp.AFTER_AFTER_BODY:!function(e,t){t.tagID===jd.HTML?yf(e,t):Uf(e,t)}(this,e);break;case jp.AFTER_AFTER_FRAMESET:!function(e,t){switch(t.tagID){case jd.HTML:yf(e,t);break;case jd.NOFRAMES:sf(e,t)}}(this,e)}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?function(e,t){if(t.tagID===jd.P||t.tagID===jd.BR)return jf(e),void e._endTagOutsideForeignContent(t);for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Fd.HTML){e._endTagOutsideForeignContent(t);break}const s=e.treeAdapter.getTagName(r);if(s.toLowerCase()===t.tagName){t.tagName=s,e.openElements.shortenToLength(n);break}}}(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case jp.INITIAL:tf(this,e);break;case jp.BEFORE_HTML:!function(e,t){const n=t.tagID;n!==jd.HTML&&n!==jd.HEAD&&n!==jd.BODY&&n!==jd.BR||nf(e,t)}(this,e);break;case jp.BEFORE_HEAD:!function(e,t){const n=t.tagID;n===jd.HEAD||n===jd.BODY||n===jd.HTML||n===jd.BR?rf(e,t):e._err(t,yd.endTagWithoutMatchingOpenElement)}(this,e);break;case jp.IN_HEAD:!function(e,t){switch(t.tagID){case jd.HEAD:e.openElements.pop(),e.insertionMode=jp.AFTER_HEAD;break;case jd.BODY:case jd.BR:case jd.HTML:of(e,t);break;case jd.TEMPLATE:af(e,t);break;default:e._err(t,yd.endTagWithoutMatchingOpenElement)}}(this,e);break;case jp.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case jd.NOSCRIPT:e.openElements.pop(),e.insertionMode=jp.IN_HEAD;break;case jd.BR:lf(e,t);break;default:e._err(t,yd.endTagWithoutMatchingOpenElement)}}(this,e);break;case jp.AFTER_HEAD:!function(e,t){switch(t.tagID){case jd.BODY:case jd.HTML:case jd.BR:cf(e,t);break;case jd.TEMPLATE:af(e,t);break;default:e._err(t,yd.endTagWithoutMatchingOpenElement)}}(this,e);break;case jp.IN_BODY:Ef(this,e);break;case jp.TEXT:!function(e,t){var n;t.tagID===jd.SCRIPT&&(null===(n=e.scriptHandler)||void 0===n||n.call(e,e.openElements.current));e.openElements.pop(),e.insertionMode=e.originalInsertionMode}(this,e);break;case jp.IN_TABLE:Af(this,e);break;case jp.IN_TABLE_TEXT:Cf(this,e);break;case jp.IN_CAPTION:!function(e,t){const n=t.tagID;switch(n){case jd.CAPTION:case jd.TABLE:e.openElements.hasInTableScope(jd.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(jd.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=jp.IN_TABLE,n===jd.TABLE&&Af(e,t));break;case jd.BODY:case jd.COL:case jd.COLGROUP:case jd.HTML:case jd.TBODY:case jd.TD:case jd.TFOOT:case jd.TH:case jd.THEAD:case jd.TR:break;default:Ef(e,t)}}(this,e);break;case jp.IN_COLUMN_GROUP:!function(e,t){switch(t.tagID){case jd.COLGROUP:e.openElements.currentTagId===jd.COLGROUP&&(e.openElements.pop(),e.insertionMode=jp.IN_TABLE);break;case jd.TEMPLATE:af(e,t);break;case jd.COL:break;default:Nf(e,t)}}(this,e);break;case jp.IN_TABLE_BODY:Df(this,e);break;case jp.IN_ROW:Of(this,e);break;case jp.IN_CELL:!function(e,t){const n=t.tagID;switch(n){case jd.TD:case jd.TH:e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=jp.IN_ROW);break;case jd.TABLE:case jd.TBODY:case jd.TFOOT:case jd.THEAD:case jd.TR:e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Of(e,t));break;case jd.BODY:case jd.CAPTION:case jd.COL:case jd.COLGROUP:case jd.HTML:break;default:Ef(e,t)}}(this,e);break;case jp.IN_SELECT:Mf(this,e);break;case jp.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===jd.CAPTION||n===jd.TABLE||n===jd.TBODY||n===jd.TFOOT||n===jd.THEAD||n===jd.TR||n===jd.TD||n===jd.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(jd.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Mf(e,t)}(this,e);break;case jp.IN_TEMPLATE:!function(e,t){t.tagID===jd.TEMPLATE&&af(e,t)}(this,e);break;case jp.AFTER_BODY:Bf(this,e);break;case jp.IN_FRAMESET:!function(e,t){t.tagID!==jd.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagId===jd.FRAMESET||(e.insertionMode=jp.AFTER_FRAMESET))}(this,e);break;case jp.AFTER_FRAMESET:!function(e,t){t.tagID===jd.HTML&&(e.insertionMode=jp.AFTER_AFTER_FRAMESET)}(this,e);break;case jp.AFTER_AFTER_BODY:Uf(this,e)}}onEof(e){switch(this.insertionMode){case jp.INITIAL:tf(this,e);break;case jp.BEFORE_HTML:nf(this,e);break;case jp.BEFORE_HEAD:rf(this,e);break;case jp.IN_HEAD:of(this,e);break;case jp.IN_HEAD_NO_SCRIPT:lf(this,e);break;case jp.AFTER_HEAD:cf(this,e);break;case jp.IN_BODY:case jp.IN_TABLE:case jp.IN_CAPTION:case jp.IN_COLUMN_GROUP:case jp.IN_TABLE_BODY:case jp.IN_ROW:case jp.IN_CELL:case jp.IN_SELECT:case jp.IN_SELECT_IN_TABLE:vf(this,e);break;case jp.TEXT:!function(e,t){e._err(t,yd.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}(this,e);break;case jp.IN_TABLE_TEXT:Cf(this,e);break;case jp.IN_TEMPLATE:Ff(this,e);break;case jp.AFTER_BODY:case jp.IN_FRAMESET:case jp.AFTER_FRAMESET:case jp.AFTER_AFTER_BODY:case jp.AFTER_AFTER_FRAMESET:ef(this,e)}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===od.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode)this._insertCharacters(e);else switch(this.insertionMode){case jp.IN_HEAD:case jp.IN_HEAD_NO_SCRIPT:case jp.AFTER_HEAD:case jp.TEXT:case jp.IN_COLUMN_GROUP:case jp.IN_SELECT:case jp.IN_SELECT_IN_TABLE:case jp.IN_FRAMESET:case jp.AFTER_FRAMESET:this._insertCharacters(e);break;case jp.IN_BODY:case jp.IN_CAPTION:case jp.IN_CELL:case jp.IN_TEMPLATE:case jp.AFTER_BODY:case jp.AFTER_AFTER_BODY:case jp.AFTER_AFTER_FRAMESET:hf(this,e);break;case jp.IN_TABLE:case jp.IN_TABLE_BODY:case jp.IN_ROW:_f(this,e);break;case jp.IN_TABLE_TEXT:Sf(this,e)}}}function qp(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):bf(e,t),n}function Vp(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const s=e.openElements.items[r];if(s===t.element)break;e._isSpecialElement(s,e.openElements.tagIDs[r])&&(n=s)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Yp(e,t,n){let r=t,s=e.openElements.getCommonAncestor(t);for(let i=0,a=s;a!==n;i++,a=s){s=e.openElements.getCommonAncestor(a);const n=e.activeFormattingElements.getElementEntry(a),o=n&&i>=Up;!n||o?(o&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(a)):(a=Kp(e,n),r===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(a,r),r=a)}return r}function Kp(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Xp(e,t,n){const r=Gd(e.treeAdapter.getTagName(t));if(e._isElementCausesFosterParenting(r))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);r===jd.TEMPLATE&&s===Fd.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Qp(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:s}=n,i=e.treeAdapter.createElement(s.tagName,r,s.attrs);e._adoptNodes(t,i),e.treeAdapter.appendChild(t,i),e.activeFormattingElements.insertElementAfterBookmark(i,s),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,i,s.tagID)}function Jp(e,t){for(let n=0;n<Hp;n++){const n=qp(e,t);if(!n)break;const r=Vp(e,n);if(!r)break;e.activeFormattingElements.bookmark=n;const s=Yp(e,r,n.element),i=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(s),i&&Xp(e,i,s),Qp(e,r,n)}}function Zp(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function ef(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const n=e.openElements.items[0],r=e.treeAdapter.getNodeSourceCodeLocation(n);if(r&&!r.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){const n=e.openElements.items[1],r=e.treeAdapter.getNodeSourceCodeLocation(n);r&&!r.endTag&&e._setEndLocation(n,t)}}}}function tf(e,t){e._err(t,yd.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Hd.QUIRKS),e.insertionMode=jp.BEFORE_HTML,e._processToken(t)}function nf(e,t){e._insertFakeRootElement(),e.insertionMode=jp.BEFORE_HEAD,e._processToken(t)}function rf(e,t){e._insertFakeElement(Ud.HEAD,jd.HEAD),e.headElement=e.openElements.current,e.insertionMode=jp.IN_HEAD,e._processToken(t)}function sf(e,t){switch(t.tagID){case jd.HTML:yf(e,t);break;case jd.BASE:case jd.BASEFONT:case jd.BGSOUND:case jd.LINK:case jd.META:e._appendElement(t,Fd.HTML),t.ackSelfClosing=!0;break;case jd.TITLE:e._switchToTextParsing(t,Yd.RCDATA);break;case jd.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(t,Yd.RAWTEXT):(e._insertElement(t,Fd.HTML),e.insertionMode=jp.IN_HEAD_NO_SCRIPT);break;case jd.NOFRAMES:case jd.STYLE:e._switchToTextParsing(t,Yd.RAWTEXT);break;case jd.SCRIPT:e._switchToTextParsing(t,Yd.SCRIPT_DATA);break;case jd.TEMPLATE:e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=jp.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(jp.IN_TEMPLATE);break;case jd.HEAD:e._err(t,yd.misplacedStartTagForHeadElement);break;default:of(e,t)}}function af(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==jd.TEMPLATE&&e._err(t,yd.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(jd.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,yd.endTagWithoutMatchingOpenElement)}function of(e,t){e.openElements.pop(),e.insertionMode=jp.AFTER_HEAD,e._processToken(t)}function lf(e,t){const n=t.type===Ed.EOF?yd.openElementsLeftAfterEof:yd.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=jp.IN_HEAD,e._processToken(t)}function cf(e,t){e._insertFakeElement(Ud.BODY,jd.BODY),e.insertionMode=jp.IN_BODY,uf(e,t)}function uf(e,t){switch(t.type){case Ed.CHARACTER:df(e,t);break;case Ed.WHITESPACE_CHARACTER:hf(e,t);break;case Ed.COMMENT:Zp(e,t);break;case Ed.START_TAG:yf(e,t);break;case Ed.END_TAG:Ef(e,t);break;case Ed.EOF:vf(e,t)}}function hf(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function df(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function pf(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fd.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function ff(e){const t=vd(e,Bd.TYPE);return null!=t&&t.toLowerCase()===Bp}function mf(e,t){e._switchToTextParsing(t,Yd.RAWTEXT)}function gf(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fd.HTML)}function yf(e,t){switch(t.tagID){case jd.I:case jd.S:case jd.B:case jd.U:case jd.EM:case jd.TT:case jd.BIG:case jd.CODE:case jd.FONT:case jd.SMALL:case jd.STRIKE:case jd.STRONG:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fd.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case jd.A:!function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ud.A);n&&(Jp(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fd.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case jd.H1:case jd.H2:case jd.H3:case jd.H4:case jd.H5:case jd.H6:!function(e,t){e.openElements.hasInButtonScope(jd.P)&&e._closePElement(),qd.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Fd.HTML)}(e,t);break;case jd.P:case jd.DL:case jd.OL:case jd.UL:case jd.DIV:case jd.DIR:case jd.NAV:case jd.MAIN:case jd.MENU:case jd.ASIDE:case jd.CENTER:case jd.FIGURE:case jd.FOOTER:case jd.HEADER:case jd.HGROUP:case jd.DIALOG:case jd.DETAILS:case jd.ADDRESS:case jd.ARTICLE:case jd.SEARCH:case jd.SECTION:case jd.SUMMARY:case jd.FIELDSET:case jd.BLOCKQUOTE:case jd.FIGCAPTION:!function(e,t){e.openElements.hasInButtonScope(jd.P)&&e._closePElement(),e._insertElement(t,Fd.HTML)}(e,t);break;case jd.LI:case jd.DD:case jd.DT:!function(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const t=e.openElements.tagIDs[r];if(n===jd.LI&&t===jd.LI||(n===jd.DD||n===jd.DT)&&(t===jd.DD||t===jd.DT)){e.openElements.generateImpliedEndTagsWithExclusion(t),e.openElements.popUntilTagNamePopped(t);break}if(t!==jd.ADDRESS&&t!==jd.DIV&&t!==jd.P&&e._isSpecialElement(e.openElements.items[r],t))break}e.openElements.hasInButtonScope(jd.P)&&e._closePElement(),e._insertElement(t,Fd.HTML)}(e,t);break;case jd.BR:case jd.IMG:case jd.WBR:case jd.AREA:case jd.EMBED:case jd.KEYGEN:pf(e,t);break;case jd.HR:!function(e,t){e.openElements.hasInButtonScope(jd.P)&&e._closePElement(),e._appendElement(t,Fd.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t);break;case jd.RB:case jd.RTC:!function(e,t){e.openElements.hasInScope(jd.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Fd.HTML)}(e,t);break;case jd.RT:case jd.RP:!function(e,t){e.openElements.hasInScope(jd.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(jd.RTC),e._insertElement(t,Fd.HTML)}(e,t);break;case jd.PRE:case jd.LISTING:!function(e,t){e.openElements.hasInButtonScope(jd.P)&&e._closePElement(),e._insertElement(t,Fd.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}(e,t);break;case jd.XMP:!function(e,t){e.openElements.hasInButtonScope(jd.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Yd.RAWTEXT)}(e,t);break;case jd.SVG:!function(e,t){e._reconstructActiveFormattingElements(),Lp(t),Mp(t),t.selfClosing?e._appendElement(t,Fd.SVG):e._insertElement(t,Fd.SVG),t.ackSelfClosing=!0}(e,t);break;case jd.HTML:!function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t);break;case jd.BASE:case jd.LINK:case jd.META:case jd.STYLE:case jd.TITLE:case jd.SCRIPT:case jd.BGSOUND:case jd.BASEFONT:case jd.TEMPLATE:sf(e,t);break;case jd.BODY:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t);break;case jd.FORM:!function(e,t){const n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope(jd.P)&&e._closePElement(),e._insertElement(t,Fd.HTML),n||(e.formElement=e.openElements.current))}(e,t);break;case jd.NOBR:!function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(jd.NOBR)&&(Jp(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Fd.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case jd.MATH:!function(e,t){e._reconstructActiveFormattingElements(),Op(t),Mp(t),t.selfClosing?e._appendElement(t,Fd.MATHML):e._insertElement(t,Fd.MATHML),t.ackSelfClosing=!0}(e,t);break;case jd.TABLE:!function(e,t){e.treeAdapter.getDocumentMode(e.document)!==Hd.QUIRKS&&e.openElements.hasInButtonScope(jd.P)&&e._closePElement(),e._insertElement(t,Fd.HTML),e.framesetOk=!1,e.insertionMode=jp.IN_TABLE}(e,t);break;case jd.INPUT:!function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fd.HTML),ff(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t);break;case jd.PARAM:case jd.TRACK:case jd.SOURCE:!function(e,t){e._appendElement(t,Fd.HTML),t.ackSelfClosing=!0}(e,t);break;case jd.IMAGE:!function(e,t){t.tagName=Ud.IMG,t.tagID=jd.IMG,pf(e,t)}(e,t);break;case jd.BUTTON:!function(e,t){e.openElements.hasInScope(jd.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(jd.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fd.HTML),e.framesetOk=!1}(e,t);break;case jd.APPLET:case jd.OBJECT:case jd.MARQUEE:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fd.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}(e,t);break;case jd.IFRAME:!function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Yd.RAWTEXT)}(e,t);break;case jd.SELECT:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fd.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===jp.IN_TABLE||e.insertionMode===jp.IN_CAPTION||e.insertionMode===jp.IN_TABLE_BODY||e.insertionMode===jp.IN_ROW||e.insertionMode===jp.IN_CELL?jp.IN_SELECT_IN_TABLE:jp.IN_SELECT}(e,t);break;case jd.OPTION:case jd.OPTGROUP:!function(e,t){e.openElements.currentTagId===jd.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Fd.HTML)}(e,t);break;case jd.NOEMBED:case jd.NOFRAMES:mf(e,t);break;case jd.FRAMESET:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Fd.HTML),e.insertionMode=jp.IN_FRAMESET)}(e,t);break;case jd.TEXTAREA:!function(e,t){e._insertElement(t,Fd.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Yd.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=jp.TEXT}(e,t);break;case jd.NOSCRIPT:e.options.scriptingEnabled?mf(e,t):gf(e,t);break;case jd.PLAINTEXT:!function(e,t){e.openElements.hasInButtonScope(jd.P)&&e._closePElement(),e._insertElement(t,Fd.HTML),e.tokenizer.state=Yd.PLAINTEXT}(e,t);break;case jd.COL:case jd.TH:case jd.TD:case jd.TR:case jd.HEAD:case jd.FRAME:case jd.TBODY:case jd.TFOOT:case jd.THEAD:case jd.CAPTION:case jd.COLGROUP:break;default:gf(e,t)}}function bf(e,t){const n=t.tagName,r=t.tagID;for(let s=e.openElements.stackTop;s>0;s--){const t=e.openElements.items[s],i=e.openElements.tagIDs[s];if(r===i&&(r!==jd.UNKNOWN||e.treeAdapter.getTagName(t)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=s&&e.openElements.shortenToLength(s);break}if(e._isSpecialElement(t,i))break}}function Ef(e,t){switch(t.tagID){case jd.A:case jd.B:case jd.I:case jd.S:case jd.U:case jd.EM:case jd.TT:case jd.BIG:case jd.CODE:case jd.FONT:case jd.NOBR:case jd.SMALL:case jd.STRIKE:case jd.STRONG:Jp(e,t);break;case jd.P:!function(e){e.openElements.hasInButtonScope(jd.P)||e._insertFakeElement(Ud.P,jd.P),e._closePElement()}(e);break;case jd.DL:case jd.UL:case jd.OL:case jd.DIR:case jd.DIV:case jd.NAV:case jd.PRE:case jd.MAIN:case jd.MENU:case jd.ASIDE:case jd.BUTTON:case jd.CENTER:case jd.FIGURE:case jd.FOOTER:case jd.HEADER:case jd.HGROUP:case jd.DIALOG:case jd.ADDRESS:case jd.ARTICLE:case jd.DETAILS:case jd.SEARCH:case jd.SECTION:case jd.SUMMARY:case jd.LISTING:case jd.FIELDSET:case jd.BLOCKQUOTE:case jd.FIGCAPTION:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case jd.LI:!function(e){e.openElements.hasInListItemScope(jd.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(jd.LI),e.openElements.popUntilTagNamePopped(jd.LI))}(e);break;case jd.DD:case jd.DT:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case jd.H1:case jd.H2:case jd.H3:case jd.H4:case jd.H5:case jd.H6:!function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e);break;case jd.BR:!function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ud.BR,jd.BR),e.openElements.pop(),e.framesetOk=!1}(e);break;case jd.BODY:!function(e,t){if(e.openElements.hasInScope(jd.BODY)&&(e.insertionMode=jp.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}(e,t);break;case jd.HTML:!function(e,t){e.openElements.hasInScope(jd.BODY)&&(e.insertionMode=jp.AFTER_BODY,Bf(e,t))}(e,t);break;case jd.FORM:!function(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(jd.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(jd.FORM):n&&e.openElements.remove(n))}(e);break;case jd.APPLET:case jd.OBJECT:case jd.MARQUEE:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}(e,t);break;case jd.TEMPLATE:af(e,t);break;default:bf(e,t)}}function vf(e,t){e.tmplInsertionModeStack.length>0?Ff(e,t):ef(e,t)}function _f(e,t){if(Gp.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=jp.IN_TABLE_TEXT,t.type){case Ed.CHARACTER:kf(e,t);break;case Ed.WHITESPACE_CHARACTER:Sf(e,t)}else wf(e,t)}function Tf(e,t){switch(t.tagID){case jd.TD:case jd.TH:case jd.TR:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ud.TBODY,jd.TBODY),e.insertionMode=jp.IN_TABLE_BODY,Rf(e,t)}(e,t);break;case jd.STYLE:case jd.SCRIPT:case jd.TEMPLATE:sf(e,t);break;case jd.COL:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ud.COLGROUP,jd.COLGROUP),e.insertionMode=jp.IN_COLUMN_GROUP,If(e,t)}(e,t);break;case jd.FORM:!function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,Fd.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t);break;case jd.TABLE:!function(e,t){e.openElements.hasInTableScope(jd.TABLE)&&(e.openElements.popUntilTagNamePopped(jd.TABLE),e._resetInsertionMode(),e._processStartTag(t))}(e,t);break;case jd.TBODY:case jd.TFOOT:case jd.THEAD:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fd.HTML),e.insertionMode=jp.IN_TABLE_BODY}(e,t);break;case jd.INPUT:!function(e,t){ff(t)?e._appendElement(t,Fd.HTML):wf(e,t),t.ackSelfClosing=!0}(e,t);break;case jd.CAPTION:!function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Fd.HTML),e.insertionMode=jp.IN_CAPTION}(e,t);break;case jd.COLGROUP:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fd.HTML),e.insertionMode=jp.IN_COLUMN_GROUP}(e,t);break;default:wf(e,t)}}function Af(e,t){switch(t.tagID){case jd.TABLE:e.openElements.hasInTableScope(jd.TABLE)&&(e.openElements.popUntilTagNamePopped(jd.TABLE),e._resetInsertionMode());break;case jd.TEMPLATE:af(e,t);break;case jd.BODY:case jd.CAPTION:case jd.COL:case jd.COLGROUP:case jd.HTML:case jd.TBODY:case jd.TD:case jd.TFOOT:case jd.TH:case jd.THEAD:case jd.TR:break;default:wf(e,t)}}function wf(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,uf(e,t),e.fosterParentingEnabled=n}function Sf(e,t){e.pendingCharacterTokens.push(t)}function kf(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Cf(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)wf(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const xf=new Set([jd.CAPTION,jd.COL,jd.COLGROUP,jd.TBODY,jd.TD,jd.TFOOT,jd.TH,jd.THEAD,jd.TR]);function If(e,t){switch(t.tagID){case jd.HTML:yf(e,t);break;case jd.COL:e._appendElement(t,Fd.HTML),t.ackSelfClosing=!0;break;case jd.TEMPLATE:sf(e,t);break;default:Nf(e,t)}}function Nf(e,t){e.openElements.currentTagId===jd.COLGROUP&&(e.openElements.pop(),e.insertionMode=jp.IN_TABLE,e._processToken(t))}function Rf(e,t){switch(t.tagID){case jd.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Fd.HTML),e.insertionMode=jp.IN_ROW;break;case jd.TH:case jd.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ud.TR,jd.TR),e.insertionMode=jp.IN_ROW,Pf(e,t);break;case jd.CAPTION:case jd.COL:case jd.COLGROUP:case jd.TBODY:case jd.TFOOT:case jd.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=jp.IN_TABLE,Tf(e,t));break;default:Tf(e,t)}}function Df(e,t){const n=t.tagID;switch(t.tagID){case jd.TBODY:case jd.TFOOT:case jd.THEAD:e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=jp.IN_TABLE);break;case jd.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=jp.IN_TABLE,Af(e,t));break;case jd.BODY:case jd.CAPTION:case jd.COL:case jd.COLGROUP:case jd.HTML:case jd.TD:case jd.TH:case jd.TR:break;default:Af(e,t)}}function Pf(e,t){switch(t.tagID){case jd.TH:case jd.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(t,Fd.HTML),e.insertionMode=jp.IN_CELL,e.activeFormattingElements.insertMarker();break;case jd.CAPTION:case jd.COL:case jd.COLGROUP:case jd.TBODY:case jd.TFOOT:case jd.THEAD:case jd.TR:e.openElements.hasInTableScope(jd.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=jp.IN_TABLE_BODY,Rf(e,t));break;default:Tf(e,t)}}function Of(e,t){switch(t.tagID){case jd.TR:e.openElements.hasInTableScope(jd.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=jp.IN_TABLE_BODY);break;case jd.TABLE:e.openElements.hasInTableScope(jd.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=jp.IN_TABLE_BODY,Df(e,t));break;case jd.TBODY:case jd.TFOOT:case jd.THEAD:(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(jd.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=jp.IN_TABLE_BODY,Df(e,t));break;case jd.BODY:case jd.CAPTION:case jd.COL:case jd.COLGROUP:case jd.HTML:case jd.TD:case jd.TH:break;default:Af(e,t)}}function Lf(e,t){switch(t.tagID){case jd.HTML:yf(e,t);break;case jd.OPTION:e.openElements.currentTagId===jd.OPTION&&e.openElements.pop(),e._insertElement(t,Fd.HTML);break;case jd.OPTGROUP:e.openElements.currentTagId===jd.OPTION&&e.openElements.pop(),e.openElements.currentTagId===jd.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Fd.HTML);break;case jd.HR:e.openElements.currentTagId===jd.OPTION&&e.openElements.pop(),e.openElements.currentTagId===jd.OPTGROUP&&e.openElements.pop(),e._appendElement(t,Fd.HTML),t.ackSelfClosing=!0;break;case jd.INPUT:case jd.KEYGEN:case jd.TEXTAREA:case jd.SELECT:e.openElements.hasInSelectScope(jd.SELECT)&&(e.openElements.popUntilTagNamePopped(jd.SELECT),e._resetInsertionMode(),t.tagID!==jd.SELECT&&e._processStartTag(t));break;case jd.SCRIPT:case jd.TEMPLATE:sf(e,t)}}function Mf(e,t){switch(t.tagID){case jd.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===jd.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===jd.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===jd.OPTGROUP&&e.openElements.pop();break;case jd.OPTION:e.openElements.currentTagId===jd.OPTION&&e.openElements.pop();break;case jd.SELECT:e.openElements.hasInSelectScope(jd.SELECT)&&(e.openElements.popUntilTagNamePopped(jd.SELECT),e._resetInsertionMode());break;case jd.TEMPLATE:af(e,t)}}function Ff(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(jd.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):ef(e,t)}function Bf(e,t){var n;if(t.tagID===jd.HTML){if(e.fragmentContext||(e.insertionMode=jp.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===jd.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(null===(n=e.treeAdapter.getNodeSourceCodeLocation(r))||void 0===n?void 0:n.endTag)&&e._setEndLocation(r,t)}}else Hf(e,t)}function Hf(e,t){e.insertionMode=jp.IN_BODY,uf(e,t)}function Uf(e,t){e.insertionMode=jp.IN_BODY,uf(e,t)}function jf(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Fd.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}const zf=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);String.prototype.codePointAt;function Gf(e,t){return function(n){let r,s=0,i="";for(;r=e.exec(n);)s!==r.index&&(i+=n.substring(s,r.index)),i+=t.get(r[0].charCodeAt(0)),s=r.index+1;return i+n.substring(s)}}Gf(/[&<>'"]/g,zf),Gf(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),Gf(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),new Set([Ud.AREA,Ud.BASE,Ud.BASEFONT,Ud.BGSOUND,Ud.BR,Ud.COL,Ud.EMBED,Ud.FRAME,Ud.HR,Ud.IMG,Ud.INPUT,Ud.KEYGEN,Ud.LINK,Ud.META,Ud.PARAM,Ud.SOURCE,Ud.TRACK,Ud.WBR]);const Wf=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,$f=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),qf={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Vf(e,t){const n=function(e){const t="root"===e.type?e.children[0]:e;return Boolean(t&&("doctype"===t.type||"element"===t.type&&"html"===t.tagName.toLowerCase()))}(e),r=Qh("type",{handlers:{root:Kf,element:Xf,text:Qf,comment:em,doctype:Jf,raw:tm},unknown:nm}),s={parser:n?new $p(qf):$p.getFragmentParser(void 0,qf),handle(e){r(e,s)},stitches:!1,options:t||{}};r(e,s),rm(s,Qo());const i=function(e,t){const n=t||{};return $h({file:n.file||void 0,location:!1,schema:"svg"===n.space?Bo:Fo,verbose:n.verbose||!1},e)}(n?s.parser.document:s.parser.getFragment(),{file:s.options.file});return s.stitches&&Hu(i,"comment",(function(e,t,n){const r=e;if(r.value.stitch&&n&&void 0!==t){return n.children[t]=r.value.stitch,t}})),"root"===i.type&&1===i.children.length&&i.children[0].type===e.type?i.children[0]:i}function Yf(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Kf(e,t){Yf(e.children,t)}function Xf(e,t){!function(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Yd.PLAINTEXT)return;rm(t,Qo(e));const r=t.parser.openElements.current;let s="namespaceURI"in r?r.namespaceURI:zh.html;s===zh.html&&"svg"===n&&(s=zh.svg);const i=function(e,t){const n=(t||Jh).space;return ed(e,"svg"===n?Bo:Fo)}({...e,children:[]},{space:s===zh.svg?"svg":"html"}),a={type:Ed.START_TAG,tagName:n,tagID:Gd(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in i?i.attrs:[],location:im(e)};t.parser.currentToken=a,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}(e,t),Yf(e.children,t),function(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&sd.includes(n))return;if(t.parser.tokenizer.state===Yd.PLAINTEXT)return;rm(t,Xo(e));const r={type:Ed.END_TAG,tagName:n,tagID:Gd(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:im(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n!==t.parser.tokenizer.lastStartTagName||t.parser.tokenizer.state!==Yd.RCDATA&&t.parser.tokenizer.state!==Yd.RAWTEXT&&t.parser.tokenizer.state!==Yd.SCRIPT_DATA||(t.parser.tokenizer.state=Yd.DATA)}(e,t)}function Qf(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:Ed.CHARACTER,chars:e.value,location:im(e)};rm(t,Qo(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Jf(e,t){const n={type:Ed.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:im(e)};rm(t,Qo(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Zf(e,t){t.stitches=!0;const n=function(e){return ku("children"in e?{...e,children:[]}:e)}(e);if("children"in e&&"children"in n){const r=Vf({type:"root",children:e.children},t.options);n.children=r.children}em({type:"comment",value:{stitch:n}},t)}function em(e,t){const n=e.value,r={type:Ed.COMMENT,data:n,location:im(e)};rm(t,Qo(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function tm(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,sm(t,Qo(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(Wf,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),72===t.parser.tokenizer.state||78===t.parser.tokenizer.state){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const e=t.parser.tokenizer._consume();t.parser.tokenizer._callState(e)}}function nm(e,t){const n=e;if(!t.options.passThrough||!t.options.passThrough.includes(n.type)){let e="";throw $f.has(n.type)&&(e=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+e)}Zf(n,t)}function rm(e,t){sm(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Yd.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function sm(e,t){if(t&&void 0!==t.offset){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=1-t.column,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function im(e){const t=Qo(e)||{line:void 0,column:void 0,offset:void 0},n=Xo(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function am(e){return function(t,n){return Vf(t,{...e,file:n})}}const om="4.73.0";let lm,cm,um,hm,dm,pm,fm,mm,gm,ym=!1,bm=null,Em=null,vm=null,_m=null;class Tm{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}lm||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{auto:!1};if(ym)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(lm)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${lm}'\``);ym=t.auto,lm=e.kind,cm=e.fetch,bm=e.Request,Em=e.Response,vm=e.Headers,um=e.FormData,_m=e.Blob,hm=e.File,dm=e.ReadableStream,pm=e.getMultipartRequestOptions,fm=e.getDefaultAgent,mm=e.fileFromPath,gm=e.isFsReadStream}(function(){let{manuallyImported:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,i;try{n=fetch,r=Request,s=Response,i=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:i,FormData:"undefined"!==typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!==typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!==typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!==typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new Tm(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0});class Am extends Error{}class wm extends Am{constructor(e,t,n,r){super(`${wm.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.request_id=r?.["x-request-id"];const s=t;this.error=s,this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(e,t,n){const r=t?.message?"string"===typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e)return new km({message:n,cause:Tg(t)});const s=t?.error;return 400===e?new xm(e,s,n,r):401===e?new Im(e,s,n,r):403===e?new Nm(e,s,n,r):404===e?new Rm(e,s,n,r):409===e?new Dm(e,s,n,r):422===e?new Pm(e,s,n,r):429===e?new Om(e,s,n,r):e>=500?new Lm(e,s,n,r):new wm(e,s,n,r)}}class Sm extends wm{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class km extends wm{constructor(e){let{message:t,cause:n}=e;super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class Cm extends km{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({message:e??"Request timed out."})}}class xm extends wm{constructor(){super(...arguments),this.status=400}}class Im extends wm{constructor(){super(...arguments),this.status=401}}class Nm extends wm{constructor(){super(...arguments),this.status=403}}class Rm extends wm{constructor(){super(...arguments),this.status=404}}class Dm extends wm{constructor(){super(...arguments),this.status=409}}class Pm extends wm{constructor(){super(...arguments),this.status=422}}class Om extends wm{constructor(){super(...arguments),this.status=429}}class Lm extends wm{}class Mm extends Am{constructor(){super("Could not parse response content as the length limit was reached")}}class Fm extends Am{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Bm{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const n=Bm.NEWLINE_CHARS.has(t[t.length-1]||"");let r=t.split(Bm.NEWLINE_REGEXP);return n&&r.pop(),1!==r.length||n?(this.buffer.length>0&&(r=[this.buffer.join("")+r[0],...r.slice(1)],this.buffer=[]),n||(this.buffer=[r.pop()||""]),r):(this.buffer.push(r[0]),[])}decodeText(e){if(null==e)return"";if("string"===typeof e)return e;if("undefined"!==typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Am(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!==typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Am(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Am("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}Bm.NEWLINE_CHARS=new Set(["\n","\r"]),Bm.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Hm{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;return new Hm((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const n of async function*(e,t){if(!e.body)throw t.abort(),new Am("Attempted to iterate over a response with no body");const n=new jm,r=new Bm,s=zm(e.body);for await(const i of async function*(e){let t=new Uint8Array;for await(const n of e){if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"===typeof n?(new TextEncoder).encode(n):n;let r,s=new Uint8Array(t.length+e.length);for(s.set(t),s.set(e,t.length),t=s;-1!==(r=Um(t));)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}(s))for(const e of r.decode(i)){const t=n.decode(e);t&&(yield t)}for(const i of r.flush()){const e=n.decode(i);e&&(yield e)}}(e,t))if(!r)if(n.data.startsWith("[DONE]"))r=!0;else if(null===n.event){let e;try{e=JSON.parse(n.data)}catch(s){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),s}if(e&&e.error)throw new wm(void 0,e.error,void 0,void 0);yield e}else{let e;try{e=JSON.parse(n.data)}catch(s){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),s}if("error"==n.event)throw new wm(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}r=!0}catch(s){if(s instanceof Error&&"AbortError"===s.name)return;throw s}finally{r||t.abort()}}),t)}static fromReadableStream(e,t){let n=!1;return new Hm((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const t of async function*(){const t=new Bm,n=zm(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())r||t&&(yield JSON.parse(t));r=!0}catch(s){if(s instanceof Error&&"AbortError"===s.name)return;throw s}finally{r||t.abort()}}),t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new Hm((()=>r(e)),this.controller),new Hm((()=>r(t)),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new dm({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:s}=await t.next();if(s)return e.close();const i=n.encode(JSON.stringify(r)+"\n");e.enqueue(i)}catch(r){e.error(r)}},async cancel(){await(t.return?.())}})}}function Um(e){for(let t=0;t<e.length-2;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}class jm{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e,t){const n=e.indexOf(t);if(-1!==n)return[e.substring(0,n),t,e.substring(n+t.length)];return[e,"",""]}(e,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}function zm(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Gm=e=>null!=e&&"object"===typeof e&&"string"===typeof e.url&&"function"===typeof e.blob,Wm=e=>null!=e&&"object"===typeof e&&"string"===typeof e.name&&"number"===typeof e.lastModified&&$m(e),$m=e=>null!=e&&"object"===typeof e&&"number"===typeof e.size&&"string"===typeof e.type&&"function"===typeof e.text&&"function"===typeof e.slice&&"function"===typeof e.arrayBuffer,qm=e=>Wm(e)||Gm(e)||gm(e);async function Vm(e,t,n){if(e=await e,Wm(e))return e;if(Gm(e)){const r=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const s=$m(r)?[await r.arrayBuffer()]:[r];return new hm(s,t,n)}const r=await async function(e){let t=[];if("string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if($m(e))t.push(await e.arrayBuffer());else{if(!Km(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){const t=Object.getOwnPropertyNames(e);return`[${t.map((e=>`"${e}"`)).join(", ")}]`}(e)}`);for await(const n of e)t.push(n)}return t}(e);if(t||(t=function(e){return Ym(e.name)||Ym(e.filename)||Ym(e.path)?.split(/[\\/]/).pop()}(e)??"unknown_file"),!n?.type){const e=r[0]?.type;"string"===typeof e&&(n={...n,type:e})}return new hm(r,t,n)}const Ym=e=>"string"===typeof e?e:"undefined"!==typeof Buffer&&e instanceof Buffer?String(e):void 0,Km=e=>null!=e&&"object"===typeof e&&"function"===typeof e[Symbol.asyncIterator],Xm=e=>e&&"object"===typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],Qm=async e=>{const t=await Jm(e.body);return pm(t,e)},Jm=async e=>{const t=new um;return await Promise.all(Object.entries(e||{}).map((e=>{let[n,r]=e;return Zm(t,n,r)}))),t},Zm=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)e.append(t,String(n));else if(qm(n)){const r=await Vm(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map((n=>Zm(e,t+"[]",n))));else{if("object"!==typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map((n=>{let[r,s]=n;return Zm(e,`${t}[${r}]`,s)})))}}};var eg,tg=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},ng=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};async function rg(e){const{response:t}=e;if(e.options.stream)return Cg("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):Hm.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if(n?.includes("application/json")||n?.includes("application/vnd.api+json")){const e=await t.json();return Cg("response",t.status,t.url,t.headers,e),sg(e,t)}const r=await t.text();return Cg("response",t.status,t.url,t.headers,r),r}function sg(e,t){return!e||"object"!==typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class ig extends Promise{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rg;super((e=>{e(null)})),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new ig(this.responsePromise,(async t=>sg(e(await this.parseResponse(t),t),t.response)))}asResponse(){return this.responsePromise.then((e=>e.response))}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class ag{constructor(e){let{baseURL:t,maxRetries:n=2,timeout:r=6e5,httpAgent:s,fetch:i}=e;this.baseURL=t,this.maxRetries=_g("maxRetries",n),this.timeout=_g("timeout",r),this.httpAgent=s,this.fetch=i??cm}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...gg(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${xg()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then((async n=>{const r=n&&$m(n?.body)?new DataView(await n.body.arrayBuffer()):n?.body instanceof DataView?n.body:n?.body instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n?.body)?new DataView(n.body.buffer):n?.body;return{method:e,path:t,...n,body:r}})))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"===typeof e){if("undefined"!==typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!==typeof TextEncoder){return(new TextEncoder).encode(e).length.toString()}}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e){let{retryCount:t=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{method:n,path:r,query:s,headers:i={}}=e,a=ArrayBuffer.isView(e.body)||e.__binaryRequest&&"string"===typeof e.body?e.body:Xm(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,o=this.calculateContentLength(a),l=this.buildURL(r,s);"timeout"in e&&_g("timeout",e.timeout);const c=e.timeout??this.timeout,u=e.httpAgent??this.httpAgent??fm(l),h=c+1e3;"number"===typeof u?.options?.timeout&&h>(u.options.timeout??0)&&(u.options.timeout=h),this.idempotencyHeader&&"get"!==n&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);return{req:{method:n,...a&&{body:a},headers:this.buildHeaders({options:e,headers:i,contentLength:o,retryCount:t}),...u&&{agent:u},signal:e.signal??null},url:l,timeout:c}}buildHeaders(e){let{options:t,headers:n,contentLength:r,retryCount:s}=e;const i={};r&&(i["content-length"]=r);const a=this.defaultHeaders(t);return kg(i,a),kg(i,n),Xm(t.body)&&"node"!==lm&&delete i["content-type"],void 0===Ig(a,"x-stainless-retry-count")&&void 0===Ig(n,"x-stainless-retry-count")&&(i["x-stainless-retry-count"]=String(s)),this.validateHeaders(i,n),i}async prepareOptions(e){}async prepareRequest(e,t){let{url:n,options:r}=t}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map((e=>[...e]))):{...e}:{}}makeStatusError(e,t,n,r){return wm.generate(e,t,n,r)}request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new ig(this.makeRequest(e,t))}async makeRequest(e,t){const n=await e,r=n.maxRetries??this.maxRetries;null==t&&(t=r),await this.prepareOptions(n);const{req:s,url:i,timeout:a}=this.buildRequest(n,{retryCount:r-t});if(await this.prepareRequest(s,{url:i,options:n}),Cg("request",i,n,s.headers),n.signal?.aborted)throw new Sm;const o=new AbortController,l=await this.fetchWithTimeout(i,s,a,o).catch(Tg);if(l instanceof Error){if(n.signal?.aborted)throw new Sm;if(t)return this.retryRequest(n,t);if("AbortError"===l.name)throw new Cm;throw new km({cause:l})}const c=cg(l.headers);if(!l.ok){if(t&&this.shouldRetry(l)){return Cg(`response (error; ${`retrying, ${t} attempts remaining`})`,l.status,i,c),this.retryRequest(n,t,c)}const e=await l.text().catch((e=>Tg(e).message)),r=yg(e),s=r?void 0:e;Cg(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,l.status,i,c,s);throw this.makeStatusError(l.status,r,s,c)}return{response:l,options:n,controller:o}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new lg(this,n,e)}buildURL(e,t){const n=Eg(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return wg(r)||(t={...r,...t}),"object"===typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter((e=>{let[t,n]=e;return"undefined"!==typeof n})).map((e=>{let[t,n]=e;if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(null===n)return`${encodeURIComponent(t)}=`;throw new Am(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)})).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:s,...i}=t||{};s&&s.addEventListener("abort",(()=>r.abort()));const a=setTimeout((()=>r.abort()),n);return this.getRequestClient().fetch.call(void 0,e,{signal:r.signal,...i}).finally((()=>{clearTimeout(a)}))}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,t,n){let r;const s=n?.["retry-after-ms"];if(s){const e=parseFloat(s);Number.isNaN(e)||(r=e)}const i=n?.["retry-after"];if(i&&!r){const e=parseFloat(i);r=Number.isNaN(e)?Date.parse(i)-Date.now():1e3*e}if(!(r&&0<=r&&r<6e4)){const n=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}return await vg(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${om}`}}class og{constructor(e,t,n,r){eg.set(this,void 0),tg(this,eg,e,"f"),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Am("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"===typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,r]of n)e.url.searchParams.set(t,r);t.query=void 0,t.path=e.url.toString()}return await ng(this,eg,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(eg=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class lg extends ig{constructor(e,t,n){super(t,(async t=>new n(e,t.response,await rg(t),t.options)))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const cg=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),ug={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},hg=e=>"object"===typeof e&&null!==e&&!wg(e)&&Object.keys(e).every((e=>Sg(ug,e))),dg=()=>{if("undefined"!==typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":om,"X-Stainless-OS":fg(Deno.build.os),"X-Stainless-Arch":pg(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"===typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!==typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":om,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":om,"X-Stainless-OS":fg(process.platform),"X-Stainless-Arch":pg(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"===typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":om,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":om,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const pg=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",fg=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let mg;const gg=()=>mg??(mg=dg()),yg=e=>{try{return JSON.parse(e)}catch(t){return}},bg=new RegExp("^(?:[a-z]+:)?//","i"),Eg=e=>bg.test(e),vg=e=>new Promise((t=>setTimeout(t,e))),_g=(e,t)=>{if("number"!==typeof t||!Number.isInteger(t))throw new Am(`${e} must be an integer`);if(t<0)throw new Am(`${e} must be a positive integer`);return t},Tg=e=>{if(e instanceof Error)return e;if("object"===typeof e&&null!==e)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},Ag=e=>"undefined"!==typeof process?{NODE_ENV:"production",PUBLIC_URL:"/Audio-Copilot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}?.[e]?.trim()??void 0:"undefined"!==typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function wg(e){if(!e)return!0;for(const t in e)return!1;return!0}function Sg(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function kg(e,t){for(const n in t){if(!Sg(t,n))continue;const r=n.toLowerCase();if(!r)continue;const s=t[n];null===s?delete e[r]:void 0!==s&&(e[r]=s)}}function Cg(e){if("undefined"!==typeof process&&"true"==={NODE_ENV:"production",PUBLIC_URL:"/Audio-Copilot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}?.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.log(`OpenAI:DEBUG:${e}`,...n)}}const xg=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),Ig=(e,t)=>{const n=t.toLowerCase();if((e=>"function"===typeof e?.get)(e)){const r=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,((e,t,n)=>t+n.toUpperCase()));for(const s of[t,n,t.toUpperCase(),r]){const t=e.get(s);if(t)return t}}for(const[r,s]of Object.entries(e))if(r.toLowerCase()===n)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${t} header, using the first entry.`),s[0]):s};function Ng(e){return null!=e&&"object"===typeof e&&!Array.isArray(e)}var Rg,Dg,Pg,Og,Lg,Mg,Fg,Bg,Hg,Ug,jg,zg,Gg,Wg=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},$g=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class qg{constructor(){Rg.add(this),this.controller=new AbortController,Dg.set(this,void 0),Pg.set(this,(()=>{})),Og.set(this,(()=>{})),Lg.set(this,void 0),Mg.set(this,(()=>{})),Fg.set(this,(()=>{})),Bg.set(this,{}),Hg.set(this,!1),Ug.set(this,!1),jg.set(this,!1),zg.set(this,!1),Wg(this,Dg,new Promise(((e,t)=>{Wg(this,Pg,e,"f"),Wg(this,Og,t,"f")})),"f"),Wg(this,Lg,new Promise(((e,t)=>{Wg(this,Mg,e,"f"),Wg(this,Fg,t,"f")})),"f"),$g(this,Dg,"f").catch((()=>{})),$g(this,Lg,"f").catch((()=>{}))}_run(e){setTimeout((()=>{e().then((()=>{this._emitFinal(),this._emit("end")}),$g(this,Rg,"m",Gg).bind(this))}),0)}_connected(){this.ended||($g(this,Pg,"f").call(this),this._emit("connect"))}get ended(){return $g(this,Hg,"f")}get errored(){return $g(this,Ug,"f")}get aborted(){return $g(this,jg,"f")}abort(){this.controller.abort()}on(e,t){return($g(this,Bg,"f")[e]||($g(this,Bg,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=$g(this,Bg,"f")[e];if(!n)return this;const r=n.findIndex((e=>e.listener===t));return r>=0&&n.splice(r,1),this}once(e,t){return($g(this,Bg,"f")[e]||($g(this,Bg,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise(((t,n)=>{Wg(this,zg,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)}))}async done(){Wg(this,zg,!0,"f"),await $g(this,Lg,"f")}_emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if($g(this,Hg,"f"))return;"end"===e&&(Wg(this,Hg,!0,"f"),$g(this,Mg,"f").call(this));const s=$g(this,Bg,"f")[e];if(s&&($g(this,Bg,"f")[e]=s.filter((e=>!e.once)),s.forEach((e=>{let{listener:t}=e;return t(...n)}))),"abort"===e){const e=n[0];return $g(this,zg,"f")||s?.length||Promise.reject(e),$g(this,Og,"f").call(this,e),$g(this,Fg,"f").call(this,e),void this._emit("end")}if("error"===e){const e=n[0];$g(this,zg,"f")||s?.length||Promise.reject(e),$g(this,Og,"f").call(this,e),$g(this,Fg,"f").call(this,e),this._emit("end")}}_emitFinal(){}}Dg=new WeakMap,Pg=new WeakMap,Og=new WeakMap,Lg=new WeakMap,Mg=new WeakMap,Fg=new WeakMap,Bg=new WeakMap,Hg=new WeakMap,Ug=new WeakMap,jg=new WeakMap,zg=new WeakMap,Rg=new WeakSet,Gg=function(e){if(Wg(this,Ug,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new Sm),e instanceof Sm)return Wg(this,jg,!0,"f"),this._emit("abort",e);if(e instanceof Am)return this._emit("error",e);if(e instanceof Error){const t=new Am(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Am(String(e)))};var Vg,Yg,Kg,Xg,Qg,Jg,Zg,ey,ty,ny,ry,sy,iy,ay,oy,ly,cy,uy,hy,dy,py,fy,my=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},gy=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};class yy extends qg{constructor(){super(...arguments),Vg.add(this),Yg.set(this,[]),Kg.set(this,{}),Xg.set(this,{}),Qg.set(this,void 0),Jg.set(this,void 0),Zg.set(this,void 0),ey.set(this,void 0),ty.set(this,void 0),ny.set(this,void 0),ry.set(this,void 0),sy.set(this,void 0),iy.set(this,void 0)}[(Yg=new WeakMap,Kg=new WeakMap,Xg=new WeakMap,Qg=new WeakMap,Jg=new WeakMap,Zg=new WeakMap,ey=new WeakMap,ty=new WeakMap,ny=new WeakMap,ry=new WeakMap,sy=new WeakMap,iy=new WeakMap,Vg=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",(n=>{const r=t.shift();r?r.resolve(n):e.push(n)})),this.on("end",(()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0})),this.on("abort",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),this.on("error",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise(((e,n)=>t.push({resolve:e,reject:n}))).then((e=>e?{value:e,done:!1}:{value:void 0,done:!0}));return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new yy;return t._run((()=>t._fromReadableStream(e))),t}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",(()=>this.controller.abort()))),this._connected();const r=Hm.fromReadableStream(e,this.controller);for await(const s of r)my(this,Vg,"m",ay).call(this,s);if(r.controller.signal?.aborted)throw new Sm;return this._addRun(my(this,Vg,"m",oy).call(this))}toReadableStream(){return new Hm(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,s){const i=new yy;return i._run((()=>i._runToolAssistantStream(e,t,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}}))),i}async _createToolAssistantStream(e,t,n,r,s){const i=s?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",(()=>this.controller.abort())));const a={...r,stream:!0},o=await e.submitToolOutputs(t,n,a,{...s,signal:this.controller.signal});this._connected();for await(const l of o)my(this,Vg,"m",ay).call(this,l);if(o.controller.signal?.aborted)throw new Sm;return this._addRun(my(this,Vg,"m",oy).call(this))}static createThreadAssistantStream(e,t,n){const r=new yy;return r._run((()=>r._threadAssistantStream(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}}))),r}static createAssistantStream(e,t,n,r){const s=new yy;return s._run((()=>s._runAssistantStream(e,t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}}))),s}currentEvent(){return my(this,ry,"f")}currentRun(){return my(this,sy,"f")}currentMessageSnapshot(){return my(this,Qg,"f")}currentRunStepSnapshot(){return my(this,iy,"f")}async finalRunSteps(){return await this.done(),Object.values(my(this,Kg,"f"))}async finalMessages(){return await this.done(),Object.values(my(this,Xg,"f"))}async finalRun(){if(await this.done(),!my(this,Jg,"f"))throw Error("Final run was not received.");return my(this,Jg,"f")}async _createThreadAssistantStream(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort())));const s={...t,stream:!0},i=await e.createAndRun(s,{...n,signal:this.controller.signal});this._connected();for await(const a of i)my(this,Vg,"m",ay).call(this,a);if(i.controller.signal?.aborted)throw new Sm;return this._addRun(my(this,Vg,"m",oy).call(this))}async _createAssistantStream(e,t,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",(()=>this.controller.abort())));const i={...n,stream:!0},a=await e.create(t,i,{...r,signal:this.controller.signal});this._connected();for await(const o of a)my(this,Vg,"m",ay).call(this,o);if(a.controller.signal?.aborted)throw new Sm;return this._addRun(my(this,Vg,"m",oy).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(null!==t&&void 0!==t)if("index"!==n&&"type"!==n){if("string"===typeof t&&"string"===typeof r)t+=r;else if("number"===typeof t&&"number"===typeof r)t+=r;else{if(!Ng(t)||!Ng(r)){if(Array.isArray(t)&&Array.isArray(r)){if(t.every((e=>"string"===typeof e||"number"===typeof e))){t.push(...r);continue}for(const e of r){if(!Ng(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const n=e.index;if(null==n)throw console.error(e),new Error("Expected array delta entry to have an `index` property");if("number"!==typeof n)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);const r=t[n];null==r?t.push(e):t[n]=this.accumulateDelta(r,e)}continue}throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${t}`)}t=this.accumulateDelta(t,r)}e[n]=t}else e[n]=r;else e[n]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,s){return await this._createToolAssistantStream(n,e,t,r,s)}}ay=function(e){if(!this.ended)switch(gy(this,ry,e,"f"),my(this,Vg,"m",uy).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":my(this,Vg,"m",fy).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":my(this,Vg,"m",cy).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":my(this,Vg,"m",ly).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},oy=function(){if(this.ended)throw new Am("stream has ended, this shouldn't happen");if(!my(this,Jg,"f"))throw Error("Final run has not been received");return my(this,Jg,"f")},ly=function(e){const[t,n]=my(this,Vg,"m",dy).call(this,e,my(this,Qg,"f"));gy(this,Qg,t,"f"),my(this,Xg,"f")[t.id]=t;for(const r of n){const e=t.content[r.index];"text"==e?.type&&this._emit("textCreated",e.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,r=t.content[n.index];if(!r||"text"!=r.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,r.text)}if(n.index!=my(this,Zg,"f")){if(my(this,ey,"f"))switch(my(this,ey,"f").type){case"text":this._emit("textDone",my(this,ey,"f").text,my(this,Qg,"f"));break;case"image_file":this._emit("imageFileDone",my(this,ey,"f").image_file,my(this,Qg,"f"))}gy(this,Zg,n.index,"f")}gy(this,ey,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==my(this,Zg,"f")){const t=e.data.content[my(this,Zg,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,my(this,Qg,"f"));break;case"text":this._emit("textDone",t.text,my(this,Qg,"f"))}}my(this,Qg,"f")&&this._emit("messageDone",e.data),gy(this,Qg,void 0,"f")}},cy=function(e){const t=my(this,Vg,"m",hy).call(this,e);switch(gy(this,iy,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of n.step_details.tool_calls)e.index==my(this,ty,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(my(this,ny,"f")&&this._emit("toolCallDone",my(this,ny,"f")),gy(this,ty,e.index,"f"),gy(this,ny,t.step_details.tool_calls[e.index],"f"),my(this,ny,"f")&&this._emit("toolCallCreated",my(this,ny,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":gy(this,iy,void 0,"f");"tool_calls"==e.data.step_details.type&&my(this,ny,"f")&&(this._emit("toolCallDone",my(this,ny,"f")),gy(this,ny,void 0,"f")),this._emit("runStepDone",e.data,t)}},uy=function(e){my(this,Yg,"f").push(e),this._emit("event",e)},hy=function(e){switch(e.event){case"thread.run.step.created":return my(this,Kg,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=my(this,Kg,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=yy.accumulateDelta(t,n.delta);my(this,Kg,"f")[e.data.id]=r}return my(this,Kg,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":my(this,Kg,"f")[e.data.id]=e.data}if(my(this,Kg,"f")[e.data.id])return my(this,Kg,"f")[e.data.id];throw new Error("No snapshot available")},dy=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const e of r.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=my(this,Vg,"m",py).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},py=function(e,t){return yy.accumulateDelta(t,e)},fy=function(e){switch(gy(this,sy,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.cancelling":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":gy(this,Jg,e.data,"f"),my(this,ny,"f")&&(this._emit("toolCallDone",my(this,ny,"f")),gy(this,ny,void 0,"f"))}};const by="RFC3986",Ey={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},vy=(Object.prototype.hasOwnProperty,Array.isArray),_y=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})();const Ty=1024;function Ay(e,t){if(vy(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const wy=Object.prototype.hasOwnProperty,Sy={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},ky=Array.isArray,Cy=Array.prototype.push,xy=function(e,t){Cy.apply(e,ky(t)?t:[t])},Iy=Date.prototype.toISOString,Ny={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,n,r,s)=>{if(0===e.length)return e;let i=e;if("symbol"===typeof e?i=Symbol.prototype.toString.call(e):"string"!==typeof e&&(i=String(e)),"iso-8859-1"===n)return escape(i).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));let a="";for(let o=0;o<i.length;o+=Ty){const e=i.length>=Ty?i.slice(o,o+Ty):i,t=[];for(let n=0;n<e.length;++n){let r=e.charCodeAt(n);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||"RFC1738"===s&&(40===r||41===r)?t[t.length]=e.charAt(n):r<128?t[t.length]=_y[r]:r<2048?t[t.length]=_y[192|r>>6]+_y[128|63&r]:r<55296||r>=57344?t[t.length]=_y[224|r>>12]+_y[128|r>>6&63]+_y[128|63&r]:(n+=1,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t[t.length]=_y[240|r>>18]+_y[128|r>>12&63]+_y[128|r>>6&63]+_y[128|63&r])}a+=t.join("")}return a},encodeValuesOnly:!1,format:by,formatter:Ey[by],indices:!1,serializeDate:e=>Iy.call(e),skipNulls:!1,strictNullHandling:!1};const Ry={};function Dy(e,t,n,r,s,i,a,o,l,c,u,h,d,p,f,m,g,y){let b=e,E=y,v=0,_=!1;for(;void 0!==(E=E.get(Ry))&&!_;){const t=E.get(e);if(v+=1,"undefined"!==typeof t){if(t===v)throw new RangeError("Cyclic object value");_=!0}"undefined"===typeof E.get(Ry)&&(v=0)}if("function"===typeof c?b=c(t,b):b instanceof Date?b=d?.(b):"comma"===n&&ky(b)&&(b=Ay(b,(function(e){return e instanceof Date?d?.(e):e}))),null===b){if(i)return l&&!m?l(t,Ny.encoder,g,"key",p):t;b=""}if("string"===typeof(T=b)||"number"===typeof T||"boolean"===typeof T||"symbol"===typeof T||"bigint"===typeof T||function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}(b)){if(l){const e=m?t:l(t,Ny.encoder,g,"key",p);return[f?.(e)+"="+f?.(l(b,Ny.encoder,g,"value",p))]}return[f?.(t)+"="+f?.(String(b))]}var T;const A=[];if("undefined"===typeof b)return A;let w;if("comma"===n&&ky(b))m&&l&&(b=Ay(b,l)),w=[{value:b.length>0?b.join(",")||null:void 0}];else if(ky(c))w=c;else{const e=Object.keys(b);w=u?e.sort(u):e}const S=o?String(t).replace(/\./g,"%2E"):String(t),k=r&&ky(b)&&1===b.length?S+"[]":S;if(s&&ky(b)&&0===b.length)return k+"[]";for(let C=0;C<w.length;++C){const t=w[C],E="object"===typeof t&&"undefined"!==typeof t.value?t.value:b[t];if(a&&null===E)continue;const _=h&&o?t.replace(/\./g,"%2E"):t,T=ky(b)?"function"===typeof n?n(k,_):k:k+(h?"."+_:"["+_+"]");y.set(e,v);const S=new WeakMap;S.set(Ry,y),xy(A,Dy(E,T,n,r,s,i,a,o,"comma"===n&&m&&ky(b)?null:l,c,u,h,d,p,f,m,g,S))}return A}function Py(e){let t=e;const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ny;if("undefined"!==typeof e.allowEmptyArrays&&"boolean"!==typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof e.encodeDotInKeys&&"boolean"!==typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&"undefined"!==typeof e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||Ny.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=by;if("undefined"!==typeof e.format){if(!wy.call(Ey,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=Ey[n];let s,i=Ny.filter;if(("function"===typeof e.filter||ky(e.filter))&&(i=e.filter),s=e.arrayFormat&&e.arrayFormat in Sy?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":Ny.arrayFormat,"commaRoundTrip"in e&&"boolean"!==typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a="undefined"===typeof e.allowDots?!0===!!e.encodeDotInKeys||Ny.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:Ny.addQueryPrefix,allowDots:a,allowEmptyArrays:"boolean"===typeof e.allowEmptyArrays?!!e.allowEmptyArrays:Ny.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:Ny.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:"undefined"===typeof e.delimiter?Ny.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:Ny.encode,encodeDotInKeys:"boolean"===typeof e.encodeDotInKeys?e.encodeDotInKeys:Ny.encodeDotInKeys,encoder:"function"===typeof e.encoder?e.encoder:Ny.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:Ny.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:Ny.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:Ny.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:Ny.strictNullHandling}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});let r,s;"function"===typeof n.filter?(s=n.filter,t=s("",t)):ky(n.filter)&&(s=n.filter,r=s);const i=[];if("object"!==typeof t||null===t)return"";const a=Sy[n.arrayFormat],o="comma"===a&&n.commaRoundTrip;r||(r=Object.keys(t)),n.sort&&r.sort(n.sort);const l=new WeakMap;for(let h=0;h<r.length;++h){const e=r[h];n.skipNulls&&null===t[e]||xy(i,Dy(t[e],e,a,o,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}const c=i.join(n.delimiter);let u=!0===n.addQueryPrefix?"?":"";return n.charsetSentinel&&("iso-8859-1"===n.charset?u+="utf8=%26%2310003%3B&":u+="utf8=%E2%9C%93&"),c.length>0?u+c:""}class Oy{constructor(e){this._client=e}}class Ly extends Oy{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class My extends Oy{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}}class Fy extends Oy{constructor(){super(...arguments),this.completions=new My(this._client)}}Fy.Completions=My;class By extends Oy{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}class Hy extends og{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Uy extends og{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class jy extends Oy{create(e,t){return this._client.post("/files",Qm({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return hg(e)?this.list({},e):this._client.getAPIList("/files",zy,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t?.headers}})}async waitForProcessing(e){let{pollInterval:t=5e3,maxWait:n=18e5}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new Set(["processed","error","deleted"]),s=Date.now();let i=await this.retrieve(e);for(;!i.status||!r.has(i.status);)if(await vg(t),i=await this.retrieve(e),Date.now()-s>n)throw new Cm({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return i}}class zy extends Uy{}jy.FileObjectsPage=zy;class Gy extends Oy{createVariation(e,t){return this._client.post("/images/variations",Qm({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Qm({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Wy extends Oy{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}class $y extends Oy{create(e,t){return this._client.post("/audio/transcriptions",Qm({body:e,...t}))}}class qy extends Oy{create(e,t){return this._client.post("/audio/translations",Qm({body:e,...t}))}}class Vy extends Oy{constructor(){super(...arguments),this.transcriptions=new $y(this._client),this.translations=new qy(this._client),this.speech=new Wy(this._client)}}Vy.Transcriptions=$y,Vy.Translations=qy,Vy.Speech=Wy;class Yy extends Oy{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class Ky extends Oy{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Xy,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class Xy extends Hy{}Ky.ModelsPage=Xy;class Qy extends Oy{list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return hg(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Jy,{query:t,...n})}}class Jy extends Uy{}Qy.FineTuningJobCheckpointsPage=Jy;class Zy extends Oy{constructor(){super(...arguments),this.checkpoints=new Qy(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return hg(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",eb,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return hg(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,tb,{query:t,...n})}}class eb extends Uy{}class tb extends Uy{}Zy.FineTuningJobsPage=eb,Zy.FineTuningJobEventsPage=tb,Zy.Checkpoints=Qy,Zy.FineTuningJobCheckpointsPage=Jy;class nb extends Oy{constructor(){super(...arguments),this.jobs=new Zy(this._client)}}nb.Jobs=Zy,nb.FineTuningJobsPage=eb,nb.FineTuningJobEventsPage=tb;class rb extends Oy{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return hg(e)?this.list({},e):this._client.getAPIList("/assistants",sb,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class sb extends Uy{}function ib(e){return"function"===typeof e.parse}rb.AssistantsPage=sb;const ab=e=>"assistant"===e?.role,ob=e=>"function"===e?.role,lb=e=>"tool"===e?.role;function cb(e){return"auto-parseable-response-format"===e?.$brand}function ub(e){return"auto-parseable-tool"===e?.$brand}function hb(e,t){const n=e.choices.map((e=>{if("length"===e.finish_reason)throw new Mm;if("content_filter"===e.finish_reason)throw new Fm;return{...e,message:{...e.message,tool_calls:e.message.tool_calls?.map((e=>function(e,t){const n=e.tools?.find((e=>e.function?.name===t.function.name));return{...t,function:{...t.function,parsed_arguments:ub(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}(t,e)))??[],parsed:e.message.content&&!e.message.refusal?db(t,e.message.content):null}}}));return{...e,choices:n}}function db(e,t){if("json_schema"!==e.response_format?.type)return null;if("json_schema"===e.response_format?.type){if("$parseRaw"in e.response_format){return e.response_format.$parseRaw(t)}return JSON.parse(t)}return null}function pb(e,t){if(!e)return!1;const n=e.tools?.find((e=>e.function?.name===t.function.name));return ub(n)||n?.function.strict||!1}function fb(e){return!!cb(e.response_format)||(e.tools?.some((e=>ub(e)||"function"===e.type&&!0===e.function.strict))??!1)}var mb,gb,yb,bb,Eb,vb,_b,Tb,Ab=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const wb=10;class Sb extends qg{constructor(){super(...arguments),mb.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(ob(e)||lb(e))&&e.content)this._emit("functionCallResult",e.content);else if(ab(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(ab(e)&&e.tool_calls)for(const n of e.tool_calls)"function"===n.type&&this._emit("functionCall",n.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Am("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Ab(this,mb,"m",gb).call(this)}async finalMessage(){return await this.done(),Ab(this,mb,"m",yb).call(this)}async finalFunctionCall(){return await this.done(),Ab(this,mb,"m",bb).call(this)}async finalFunctionCallResult(){return await this.done(),Ab(this,mb,"m",Eb).call(this)}async totalUsage(){return await this.done(),Ab(this,mb,"m",vb).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=Ab(this,mb,"m",yb).call(this);t&&this._emit("finalMessage",t);const n=Ab(this,mb,"m",gb).call(this);n&&this._emit("finalContent",n);const r=Ab(this,mb,"m",bb).call(this);r&&this._emit("finalFunctionCall",r);const s=Ab(this,mb,"m",Eb).call(this);null!=s&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some((e=>e.usage))&&this._emit("totalUsage",Ab(this,mb,"m",vb).call(this))}async _createChatCompletion(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),Ab(this,mb,"m",_b).call(this,t);const s=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(hb(s,t))}async _runChatCompletion(e,t,n){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){const r="function",{function_call:s="auto",stream:i,...a}=t,o="string"!==typeof s&&s?.name,{maxChatCompletions:l=wb}=n||{},c={};for(const d of t.functions)c[d.name||d.function.name]=d;const u=t.functions.map((e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description})));for(const d of t.messages)this._addMessage(d,!1);for(let d=0;d<l;++d){const t=await this._createChatCompletion(e,{...a,function_call:s,functions:u,messages:[...this.messages]},n),i=t.choices[0]?.message;if(!i)throw new Am("missing message in ChatCompletion response");if(!i.function_call)return;const{name:l,arguments:d}=i.function_call,p=c[l];if(!p){const e=`Invalid function_call: ${JSON.stringify(l)}. Available options are: ${u.map((e=>JSON.stringify(e.name))).join(", ")}. Please try again`;this._addMessage({role:r,name:l,content:e});continue}if(o&&o!==l){const e=`Invalid function_call: ${JSON.stringify(l)}. ${JSON.stringify(o)} requested. Please try again`;this._addMessage({role:r,name:l,content:e});continue}let f;try{f=ib(p)?await p.parse(d):d}catch(h){this._addMessage({role:r,name:l,content:h instanceof Error?h.message:String(h)});continue}const m=await p.function(f,this),g=Ab(this,mb,"m",Tb).call(this,m);if(this._addMessage({role:r,name:l,content:g}),o)return}}async _runTools(e,t,n){const r="tool",{tool_choice:s="auto",stream:i,...a}=t,o="string"!==typeof s&&s?.function?.name,{maxChatCompletions:l=wb}=n||{},c=t.tools.map((e=>{if(ub(e)){if(!e.$callback)throw new Am("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e})),u={};for(const p of c)"function"===p.type&&(u[p.function.name||p.function.function.name]=p.function);const h="tools"in t?c.map((e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e)):void 0;for(const p of t.messages)this._addMessage(p,!1);for(let p=0;p<l;++p){const t=await this._createChatCompletion(e,{...a,tool_choice:s,tools:h,messages:[...this.messages]},n),i=t.choices[0]?.message;if(!i)throw new Am("missing message in ChatCompletion response");if(!i.tool_calls?.length)return;for(const e of i.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:n,arguments:s}=e.function,i=u[n];if(!i){const e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${Object.keys(u).map((e=>JSON.stringify(e))).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}if(o&&o!==n){const e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(o)} requested. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}let a;try{a=ib(i)?await i.parse(s):s}catch(d){const e=d instanceof Error?d.message:String(d);this._addMessage({role:r,tool_call_id:t,content:e});continue}const l=await i.function(a,this),c=Ab(this,mb,"m",Tb).call(this,l);if(this._addMessage({role:r,tool_call_id:t,content:c}),o)return}}}}mb=new WeakSet,gb=function(){return Ab(this,mb,"m",yb).call(this).content??null},yb=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(ab(t)){const{function_call:e,...n}=t,r={...n,content:t.content??null,refusal:t.refusal??null};return e&&(r.function_call=e),r}}throw new Am("stream ended without producing a ChatCompletionMessage with role=assistant")},bb=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(ab(t)&&t?.function_call)return t.function_call;if(ab(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},Eb=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(ob(t)&&null!=t.content)return t.content;if(lb(t)&&null!=t.content&&"string"===typeof t.content&&this.messages.some((e=>"assistant"===e.role&&e.tool_calls?.some((e=>"function"===e.type&&e.id===t.tool_call_id)))))return t.content}},vb=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},_b=function(e){if(null!=e.n&&e.n>1)throw new Am("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Tb=function(e){return"string"===typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class kb extends Sb{static runFunctions(e,t,n){const r=new kb,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run((()=>r._runFunctions(e,t,s))),r}static runTools(e,t,n){const r=new kb,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run((()=>r._runTools(e,t,s))),r}_addMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super._addMessage(e,t),ab(e)&&e.content&&this._emit("content",e.content)}}const Cb={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,SPECIAL:496,ATOM:499,COLLECTION:12,ALL:511};class xb extends Error{}class Ib extends Error{}const Nb=(e,t)=>{const n=e.length;let r=0;const s=e=>{throw new xb(`${e} at position ${r}`)},i=e=>{throw new Ib(`${e} at position ${r}`)},a=()=>(h(),r>=n&&s("Unexpected end of input"),'"'===e[r]?o():"{"===e[r]?l():"["===e[r]?c():"null"===e.substring(r,r+4)||Cb.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):"true"===e.substring(r,r+4)||Cb.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):"false"===e.substring(r,r+5)||Cb.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):"Infinity"===e.substring(r,r+8)||Cb.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):"-Infinity"===e.substring(r,r+9)||Cb.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):"NaN"===e.substring(r,r+3)||Cb.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):u()),o=()=>{const a=r;let o=!1;for(r++;r<n&&('"'!==e[r]||o&&"\\"===e[r-1]);)o="\\"===e[r]&&!o,r++;if('"'==e.charAt(r))try{return JSON.parse(e.substring(a,++r-Number(o)))}catch(l){i(String(l))}else if(Cb.STR&t)try{return JSON.parse(e.substring(a,r-Number(o))+'"')}catch(l){return JSON.parse(e.substring(a,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{r++,h();const i={};try{for(;"}"!==e[r];){if(h(),r>=n&&Cb.OBJ&t)return i;const s=o();h(),r++;try{const e=a();Object.defineProperty(i,s,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(l){if(Cb.OBJ&t)return i;throw l}h(),","===e[r]&&r++}}catch(l){if(Cb.OBJ&t)return i;s("Expected '}' at end of object")}return r++,i},c=()=>{r++;const n=[];try{for(;"]"!==e[r];)n.push(a()),h(),","===e[r]&&r++}catch(i){if(Cb.ARR&t)return n;s("Expected ']' at end of array")}return r++,n},u=()=>{if(0===r){"-"===e&&Cb.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(o){if(Cb.NUM&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(o){}i(String(o))}}const a=r;for("-"===e[r]&&r++;e[r]&&!",]}".includes(e[r]);)r++;r!=n||Cb.NUM&t||s("Unterminated number literal");try{return JSON.parse(e.substring(a,r))}catch(o){"-"===e.substring(a,r)&&Cb.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(a,e.lastIndexOf("e")))}catch(o){i(String(o))}}},h=()=>{for(;r<n&&" \n\r\t".includes(e[r]);)r++};return a()},Rb=e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cb.ALL;if("string"!==typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return Nb(e.trim(),t)}(e,Cb.ALL^Cb.NUM);var Db,Pb,Ob,Lb,Mb,Fb,Bb,Hb,Ub,jb,zb,Gb,Wb=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},$b=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class qb extends Sb{constructor(e){super(),Db.add(this),Pb.set(this,void 0),Ob.set(this,void 0),Lb.set(this,void 0),Wb(this,Pb,e,"f"),Wb(this,Ob,[],"f")}get currentChatCompletionSnapshot(){return $b(this,Lb,"f")}static fromReadableStream(e){const t=new qb(null);return t._run((()=>t._fromReadableStream(e))),t}static createChatCompletion(e,t,n){const r=new qb(t);return r._run((()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}}))),r}async _createChatCompletion(e,t,n){super._createChatCompletion;const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),$b(this,Db,"m",Mb).call(this);const s=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const i of s)$b(this,Db,"m",Bb).call(this,i);if(s.controller.signal?.aborted)throw new Sm;return this._addChatCompletion($b(this,Db,"m",jb).call(this))}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",(()=>this.controller.abort()))),$b(this,Db,"m",Mb).call(this),this._connected();const r=Hm.fromReadableStream(e,this.controller);let s;for await(const i of r)s&&s!==i.id&&this._addChatCompletion($b(this,Db,"m",jb).call(this)),$b(this,Db,"m",Bb).call(this,i),s=i.id;if(r.controller.signal?.aborted)throw new Sm;return this._addChatCompletion($b(this,Db,"m",jb).call(this))}[(Pb=new WeakMap,Ob=new WeakMap,Lb=new WeakMap,Db=new WeakSet,Mb=function(){this.ended||Wb(this,Lb,void 0,"f")},Fb=function(e){let t=$b(this,Ob,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},$b(this,Ob,"f")[e.index]=t,t)},Bb=function(e){if(this.ended)return;const t=$b(this,Db,"m",Gb).call(this,e);this._emit("chunk",e,t);for(const n of e.choices){const e=t.choices[n.index];null!=n.delta.content&&"assistant"===e.message?.role&&e.message?.content&&(this._emit("content",n.delta.content,e.message.content),this._emit("content.delta",{delta:n.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=n.delta.refusal&&"assistant"===e.message?.role&&e.message?.refusal&&this._emit("refusal.delta",{delta:n.delta.refusal,snapshot:e.message.refusal}),null!=n.logprobs?.content&&"assistant"===e.message?.role&&this._emit("logprobs.content.delta",{content:n.logprobs?.content,snapshot:e.logprobs?.content??[]}),null!=n.logprobs?.refusal&&"assistant"===e.message?.role&&this._emit("logprobs.refusal.delta",{refusal:n.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});const r=$b(this,Db,"m",Fb).call(this,e);e.finish_reason&&($b(this,Db,"m",Ub).call(this,e),null!=r.current_tool_call_index&&$b(this,Db,"m",Hb).call(this,e,r.current_tool_call_index));for(const t of n.delta.tool_calls??[])r.current_tool_call_index!==t.index&&($b(this,Db,"m",Ub).call(this,e),null!=r.current_tool_call_index&&$b(this,Db,"m",Hb).call(this,e,r.current_tool_call_index)),r.current_tool_call_index=t.index;for(const t of n.delta.tool_calls??[]){const n=e.message.tool_calls?.[t.index];n?.type&&("function"===n?.type&&this._emit("tool_calls.function.arguments.delta",{name:n.function?.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:t.function?.arguments??""}))}}},Hb=function(e,t){if($b(this,Db,"m",Fb).call(this,e).done_tool_calls.has(t))return;const n=e.message.tool_calls?.[t];if(!n)throw new Error("no tool call snapshot");if(!n.type)throw new Error("tool call snapshot missing `type`");if("function"===n.type){const e=$b(this,Pb,"f")?.tools?.find((e=>"function"===e.type&&e.function.name===n.function.name));this._emit("tool_calls.function.arguments.done",{name:n.function.name,index:t,arguments:n.function.arguments,parsed_arguments:ub(e)?e.$parseRaw(n.function.arguments):e?.function.strict?JSON.parse(n.function.arguments):null})}else n.type},Ub=function(e){const t=$b(this,Db,"m",Fb).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;const n=$b(this,Db,"m",zb).call(this);this._emit("content.done",{content:e.message.content,parsed:n?n.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},jb=function(){if(this.ended)throw new Am("stream has ended, this shouldn't happen");const e=$b(this,Lb,"f");if(!e)throw new Am("request ended without sending any chunks");return Wb(this,Lb,void 0,"f"),Wb(this,Ob,[],"f"),function(e,t){const{id:n,choices:r,created:s,model:i,system_fingerprint:a,...o}=e,l={...o,id:n,choices:r.map((t=>{let{message:n,finish_reason:r,index:s,logprobs:i,...a}=t;if(!r)throw new Am(`missing finish_reason for choice ${s}`);const{content:o=null,function_call:l,tool_calls:c,...u}=n,h=n.role;if(!h)throw new Am(`missing role for choice ${s}`);if(l){const{arguments:e,name:t}=l;if(null==e)throw new Am(`missing function_call.arguments for choice ${s}`);if(!t)throw new Am(`missing function_call.name for choice ${s}`);return{...a,message:{content:o,function_call:{arguments:e,name:t},role:h,refusal:n.refusal??null},finish_reason:r,index:s,logprobs:i}}return c?{...a,index:s,finish_reason:r,logprobs:i,message:{...u,role:h,content:o,refusal:n.refusal??null,tool_calls:c.map(((t,n)=>{const{function:r,type:i,id:a,...o}=t,{arguments:l,name:c,...u}=r||{};if(null==a)throw new Am(`missing choices[${s}].tool_calls[${n}].id\n${Vb(e)}`);if(null==i)throw new Am(`missing choices[${s}].tool_calls[${n}].type\n${Vb(e)}`);if(null==c)throw new Am(`missing choices[${s}].tool_calls[${n}].function.name\n${Vb(e)}`);if(null==l)throw new Am(`missing choices[${s}].tool_calls[${n}].function.arguments\n${Vb(e)}`);return{...o,id:a,type:i,function:{...u,name:c,arguments:l}}}))}}:{...a,message:{...u,content:o,role:h,refusal:n.refusal??null},finish_reason:r,index:s,logprobs:i}})),created:s,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}};return function(e,t){return t&&fb(t)?hb(e,t):{...e,choices:e.choices.map((e=>({...e,message:{...e.message,parsed:null,tool_calls:e.message.tool_calls??[]}})))}}(l,t)}(e,$b(this,Pb,"f"))},zb=function(){const e=$b(this,Pb,"f")?.response_format;return cb(e)?e:null},Gb=function(e){var t,n,r,s;let i=$b(this,Lb,"f");const{choices:a,...o}=e;i?Object.assign(i,o):i=Wb(this,Lb,{...o,choices:[]},"f");for(const{delta:l,finish_reason:c,index:u,logprobs:h=null,...d}of e.choices){let e=i.choices[u];if(e||(e=i.choices[u]={finish_reason:c,index:u,message:{},logprobs:h,...d}),h)if(e.logprobs){const{content:r,refusal:s,...i}=h;Object.assign(e.logprobs,i),r&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...r)),s&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...s))}else e.logprobs=Object.assign({},h);if(c&&(e.finish_reason=c,$b(this,Pb,"f")&&fb($b(this,Pb,"f")))){if("length"===c)throw new Mm;if("content_filter"===c)throw new Fm}if(Object.assign(e,d),!l)continue;const{content:a,refusal:o,function_call:p,role:f,tool_calls:m,...g}=l;if(Object.assign(e.message,g),o&&(e.message.refusal=(e.message.refusal||"")+o),f&&(e.message.role=f),p&&(e.message.function_call?(p.name&&(e.message.function_call.name=p.name),p.arguments&&((r=e.message.function_call).arguments??(r.arguments=""),e.message.function_call.arguments+=p.arguments)):e.message.function_call=p),a&&(e.message.content=(e.message.content||"")+a,!e.message.refusal&&$b(this,Db,"m",zb).call(this)&&(e.message.parsed=Rb(e.message.content))),m){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:n,type:r,function:i,...a}of m){const o=(s=e.message.tool_calls)[t]??(s[t]={});Object.assign(o,a),n&&(o.id=n),r&&(o.type=r),i&&(o.function??(o.function={name:i.name??"",arguments:""})),i?.name&&(o.function.name=i.name),i?.arguments&&(o.function.arguments+=i.arguments,pb($b(this,Pb,"f"),o)&&(o.function.parsed_arguments=Rb(o.function.arguments)))}}}return i},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",(n=>{const r=t.shift();r?r.resolve(n):e.push(n)})),this.on("end",(()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0})),this.on("abort",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),this.on("error",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise(((e,n)=>t.push({resolve:e,reject:n}))).then((e=>e?{value:e,done:!1}:{value:void 0,done:!0}));return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Hm(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Vb(e){return JSON.stringify(e)}class Yb extends qb{static fromReadableStream(e){const t=new Yb(null);return t._run((()=>t._fromReadableStream(e))),t}static runFunctions(e,t,n){const r=new Yb(null),s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run((()=>r._runFunctions(e,t,s))),r}static runTools(e,t,n){const r=new Yb(t),s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run((()=>r._runTools(e,t,s))),r}}class Kb extends Oy{parse(e,t){return function(e){for(const t of e??[]){if("function"!==t.type)throw new Am(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new Am(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap((t=>hb(t,e)))}runFunctions(e,t){return e.stream?Yb.runFunctions(this._client,e,t):kb.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?Yb.runTools(this._client,e,t):kb.runTools(this._client,e,t)}stream(e,t){return qb.createChatCompletion(this._client,e,t)}}class Xb extends Oy{constructor(){super(...arguments),this.completions=new Kb(this._client)}}!function(e){e.Completions=Kb}(Xb||(Xb={}));class Qb extends Oy{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return hg(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Jb,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class Jb extends Uy{}Qb.MessagesPage=Jb;class Zb extends Oy{retrieve(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;return hg(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return hg(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,eE,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class eE extends Uy{}Zb.RunStepsPage=eE;class tE extends Oy{constructor(){super(...arguments),this.steps=new Zb(this._client)}create(e,t,n){const{include:r,...s}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return hg(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,nE,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return yy.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:s,response:i}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...r}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=i.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await vg(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,t,n){return yy.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){const s=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,s.id,r)}submitToolOutputsStream(e,t,n,r){return yy.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}}class nE extends Uy{}tE.RunsPage=nE,tE.Steps=Zb,tE.RunStepsPage=eE;class rE extends Oy{constructor(){super(...arguments),this.runs=new tE(this._client),this.messages=new Qb(this._client)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return hg(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return yy.createThreadAssistantStream(e,this._client.beta.threads,t)}}rE.Runs=tE,rE.RunsPage=nE,rE.Messages=Qb,rE.MessagesPage=Jb;class sE extends Oy{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return hg(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,iE,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const s=await this.retrieve(e,t,{...n,headers:r}).withResponse(),i=s.data;switch(i.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=s.response.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await vg(e);break;case"failed":case"completed":return i}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}}class iE extends Uy{}sE.VectorStoreFilesPage=iE;class aE extends Oy{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return hg(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,iE,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:s,response:i}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(s.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=i.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await vg(e);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,t,n){let{files:r,fileIds:s=[]}=t;if(null==r||0==r.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=n?.maxConcurrency??5,a=Math.min(i,r.length),o=this._client,l=r.values(),c=[...s];const u=Array(a).fill(l).map((async function(e){for(let t of e){const e=await o.files.create({file:t,purpose:"assistants"},n);c.push(e.id)}}));return await(async e=>{const t=await Promise.allSettled(e),n=t.filter((e=>"rejected"===e.status));if(n.length){for(const e of n)console.error(e.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of t)"fulfilled"===s.status&&r.push(s.value);return r})(u),await this.createAndPoll(e,{file_ids:c})}}class oE extends Oy{constructor(){super(...arguments),this.files=new sE(this._client),this.fileBatches=new aE(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return hg(e)?this.list({},e):this._client.getAPIList("/vector_stores",lE,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class lE extends Uy{}oE.VectorStoresPage=lE,oE.Files=sE,oE.VectorStoreFilesPage=iE,oE.FileBatches=aE;class cE extends Oy{constructor(){super(...arguments),this.vectorStores=new oE(this._client),this.chat=new Xb(this._client),this.assistants=new rb(this._client),this.threads=new rE(this._client)}}cE.VectorStores=oE,cE.VectorStoresPage=lE,cE.Assistants=rb,cE.AssistantsPage=sb,cE.Threads=rE;class uE extends Oy{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return hg(e)?this.list({},e):this._client.getAPIList("/batches",hE,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class hE extends Uy{}uE.BatchesPage=hE;class dE extends Oy{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,Qm({body:t,...n}))}}class pE extends Oy{constructor(){super(...arguments),this.parts=new dE(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}var fE;pE.Parts=dE;class mE extends ag{constructor(){let{baseURL:e=Ag("OPENAI_BASE_URL"),apiKey:t=Ag("OPENAI_API_KEY"),organization:n=Ag("OPENAI_ORG_ID")??null,project:r=Ag("OPENAI_PROJECT_ID")??null,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0===t)throw new Am("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:t,organization:n,project:r,...s,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof navigator)throw new Am("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new Ly(this),this.chat=new Fy(this),this.embeddings=new By(this),this.files=new jy(this),this.images=new Gy(this),this.audio=new Vy(this),this.moderations=new Yy(this),this.models=new Ky(this),this.fineTuning=new nb(this),this.beta=new cE(this),this.batches=new uE(this),this.uploads=new pE(this),this._options=i,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return Py(e,{arrayFormat:"brackets"})}}fE=mE,mE.OpenAI=fE,mE.DEFAULT_TIMEOUT=6e5,mE.OpenAIError=Am,mE.APIError=wm,mE.APIConnectionError=km,mE.APIConnectionTimeoutError=Cm,mE.APIUserAbortError=Sm,mE.NotFoundError=Rm,mE.ConflictError=Dm,mE.RateLimitError=Om,mE.BadRequestError=xm,mE.AuthenticationError=Im,mE.InternalServerError=Lm,mE.PermissionDeniedError=Nm,mE.UnprocessableEntityError=Pm,mE.toFile=Vm,mE.fileFromPath=mm,mE.Completions=Ly,mE.Chat=Fy,mE.Embeddings=By,mE.Files=jy,mE.FileObjectsPage=zy,mE.Images=Gy,mE.Audio=Vy,mE.Moderations=Yy,mE.Models=Ky,mE.ModelsPage=Xy,mE.FineTuning=nb,mE.Beta=cE,mE.Batches=uE,mE.BatchesPage=hE,mE.Uploads=pE;new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations"]);let gE=localStorage.getItem("tmp::voice_api_key");if(""===gE){if(gE=prompt("OpenAI API Key"),null===gE)throw new Error("API Key is required");localStorage.setItem("tmp::voice_api_key",gE)}let yE=localStorage.getItem("tmp::asst_id");if(""===yE){if(yE=prompt("Assistant Id needed"),null===yE)throw new Error("Assistant Id is required");localStorage.setItem("tmp::asst_id",yE)}const bE=new mE({apiKey:gE,dangerouslyAllowBrowser:!0}),EE=e=>{let{text:t}=e;return(0,Se.jsx)("div",{className:to.userMessage,children:(0,Se.jsx)(Rh,{rehypePlugins:[am],children:t})})},vE=e=>{let{text:t}=e;return(0,Se.jsx)("div",{className:to.assistantMessage,children:(0,Se.jsx)(Rh,{rehypePlugins:[am],children:(e=>e.includes("<iframe")||e.includes("</iframe>")?e:e.replace(/\n/g,"<br />"))(t)})})},_E=e=>{let{text:t}=e;return(0,Se.jsx)("div",{className:to.assistantMessage,children:(0,Se.jsx)("audio",{src:t,controls:!0})})},TE=e=>{let{itemId:t,items:n}=e;const r=n.find((e=>e.id===t)),s="user"===(null===r||void 0===r?void 0:r.role)?"flex-end":"flex-start";return(0,Se.jsx)("div",{style:{alignSelf:s},children:n.filter((e=>e.id===t)).map((e=>{var t;return(0,Se.jsxs)("div",{className:"cv-item",children:[(0,Se.jsx)("div",{className:`speaker ${e.role||""}`,style:{display:"none"},children:(0,Se.jsx)("div",{children:(e.role||e.type).replaceAll("_"," ")})}),(0,Se.jsxs)("div",{className:"speaker-content",children:["function_call_output"===e.type&&(0,Se.jsx)("div",{style:{display:"none"},children:e.formatted.output}),!!e.formatted.tool&&(0,Se.jsxs)("div",{style:{display:"none"},children:[e.formatted.tool.name,"(",e.formatted.tool.arguments,")"]}),!e.formatted.tool&&"user"===e.role&&(0,Se.jsx)("div",{style:{alignSelf:"flex-end",textAlign:"right"},children:e.formatted.transcript||(null!==(t=e.formatted.audio)&&void 0!==t&&t.length?"(awaiting transcript)":e.formatted.text||"(item sent)")}),!e.formatted.tool&&"assistant"===e.role&&(0,Se.jsx)("div",{children:e.formatted.transcript||e.formatted.text||"(truncated)"}),e.formatted.file&&(console.log("Audio URL:",e.formatted.file.url),(0,Se.jsx)("audio",{src:e.formatted.file.url,controls:!0}))]})]},e.id)}))})},AE=e=>{let{text:t}=e;return(0,Se.jsx)("div",{className:to.codeMessage,children:t.split("\n").map(((e,t)=>(0,Se.jsxs)("div",{children:[(0,Se.jsx)("span",{children:`${t+1}. `}),e]},t)))})},wE=e=>{let{role:t,text:n,items:r}=e;switch(t){case"user":return(0,Se.jsx)(EE,{text:n});case"assistant":return(0,Se.jsx)(vE,{text:n});case"code":return(0,Se.jsx)(AE,{text:n});case"audio":return(0,Se.jsx)(TE,{itemId:n,items:r});case"read_aloud":return(0,Se.jsx)(_E,{text:n});default:return null}},SE=(0,s.forwardRef)(((e,t)=>{let{functionCallHandler:n=()=>Promise.resolve("")}=e;const[r,i]=(0,s.useState)(""),[a,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)(""),d=(0,s.useRef)(null),[p,f]=(0,s.useState)([]),m=(0,s.useRef)(null);(0,s.useImperativeHandle)(t,(()=>({updateData(e){S("user",e)},updateVideo(e){S("assistant",e)},updateSelection(e){S("user","[Read Aloud]:<br />"+e)},updateReadAloud(e){S("read_aloud",e)},updateItems(e){f(e)},updateItemID(e){S("audio",e)}}))),(0,s.useEffect)((()=>{(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()}),[a]);const g=async e=>{try{await(async()=>{try{if(!u){const e=await bE.beta.threads.create();h(e.id),d.current=e.id}}catch(e){S("assistant","Connection error. Please try again."),c(!1)}})(),await bE.beta.threads.messages.create(d.current,{role:"user",content:e});const t=bE.beta.threads.runs.stream(d.current,{assistant_id:yE}).toReadableStream();if(t){const e=yy.fromReadableStream(t);A(e)}else console.error("Response body is null")}catch(t){console.error("Error sending message",t),S("assistant","Connection error. Please try again..."),c(!1)}},y=async e=>{const t=e.data.id,r=e.data.required_action.submit_tool_outputs.tool_calls,s=await Promise.all(r.map((async e=>({output:await n(e),tool_call_id:e.id}))));c(!0),(async(e,t)=>{const n=bE.beta.threads.runs.submitToolOutputsStream(d.current,e,{tool_outputs:t}),r=yy.fromReadableStream(n.toReadableStream());A(r)})(t,s)},b=()=>{S("assistant","")},E=e=>{null!=e.value&&w(e.value),null!=e.annotations&&k(e.annotations)},v=e=>{w(`\n![${e.file_id}](/api/files/${e.file_id})\n`)},_=e=>{"code_interpreter"==e.type&&S("code","")},T=(e,t)=>{var n;"code_interpreter"==e.type&&null!==(n=e.code_interpreter)&&void 0!==n&&n.input&&w(e.code_interpreter.input)},A=e=>{e.on("textCreated",b),e.on("textDelta",E),e.on("imageFileDone",v),e.on("toolCallCreated",_),e.on("toolCallDelta",T),e.on("event",(e=>{"thread.run.requires_action"===e.event&&y(e),"thread.run.completed"===e.event&&c(!1)}))},w=e=>{o((t=>{const n=t[t.length-1],r={...n,text:n.text+e};return[...t.slice(0,-1),r]}))},S=(e,t)=>{o((n=>[...n,{role:e,text:t}]))},k=e=>{o((t=>{const n={...t[t.length-1]};return e.forEach((e=>{"file_path"===e.type&&(n.text=n.text.replaceAll(e.text,`/api/files/${e.file_path.file_id}`))})),[...t.slice(0,-1),n]}))};return(0,Se.jsxs)("div",{className:to.chatContainer,children:[(0,Se.jsxs)("div",{className:to.messages,children:[a.map(((e,t)=>(0,Se.jsx)(wE,{role:e.role,text:e.text,items:p},t))),(0,Se.jsx)("div",{ref:m})]}),(0,Se.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r.trim()&&(o((e=>[...e,{role:"user",text:r}])),g(r),i(""),c(!0))},className:`${to.inputForm} ${to.clearfix}`,children:[(0,Se.jsx)("input",{id:"chatInputBox",type:"text",className:to.input,value:r,onChange:e=>i(e.target.value),placeholder:"Enter your question"}),(0,Se.jsx)("button",{type:"submit",className:to.button,disabled:l,style:{display:"none"},children:"Send"}),(0,Se.jsx)(ke,{type:"submit",id:"submitButton",className:to.button,label:"Send",iconPosition:"start",disabled:l,buttonStyle:"regular",onFocus:()=>{console.log("Mute/Unmute icon should not be displayed")}})]})]})})),kE=SE;var CE=n(950);function xE(){return xE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xE.apply(this,arguments)}function IE(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var NE=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=e.size,a=void 0===i?24:i,o=IE(e,["color","size"]);return s.createElement("svg",xE({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),s.createElement("rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",ry:"2"}),s.createElement("circle",{cx:"12",cy:"14",r:"4"}),s.createElement("line",{x1:"12",y1:"6",x2:"12.01",y2:"6"}))}));NE.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},NE.displayName="Speaker";const RE=NE;sa.workerSrc="node_modules/pdfjs-dist/build/pdf.worker.js";const DE=e=>{let{pdfFilePath:t}=e;const[n,r]=(0,s.useState)(null),i=(0,s.useRef)(),a=(0,s.useRef)({});return(0,Se.jsx)("div",{style:{margin:"0 auto",marginTop:"2.5em",width:"100%",overflowY:"auto",scrollbarWidth:"auto",top:"400px"},children:(0,Se.jsx)("div",{ref:i,style:{margin:"0 auto",width:"100%",overflowY:"auto",scrollbarWidth:"none",top:"400px",backgroundColor:"white",transform:"scale(1)",transformOrigin:"top center"},children:(0,Se.jsx)(Na,{file:t,onLoadSuccess:e=>{let{numPages:t}=e;r(t);for(let n=1;n<=t;n++)a.current[n]=s.createRef()},children:Array.from(new Array(n),((e,n)=>(0,Se.jsx)("div",{ref:a.current[n+1],style:{marginBottom:"10px",flexShrink:0,margin:"20px auto",width:"fit-content",position:"relative"},children:(0,Se.jsx)(Xa,{pageNumber:n+1,renderTextLayer:!0,renderAnnotationLayer:!1,onLoadSuccess:()=>(async e=>{var n;let{pageNumber:r}=e;const s=await oa(t).promise,i=await s.getPage(r),o=i.getViewport({scale:1}),l=await i.getTextContent(),c=null===(n=a.current[r])||void 0===n?void 0:n.current;c&&l.items.forEach((e=>{if("str"in e&&"transform"in e){const{str:t,transform:n}=e,[r,,,s,i,a]=n,l=i,u=o.height-a,h=document.createElement("div");h.style.position="absolute",h.style.left=`${l}px`,h.style.top=`${u}px`,h.style.transform=`scale(${r}, ${s})`,h.style.display="flex",h.style.alignItems="center",h.style.justifyContent="center",h.style.color="red",h.style.fontSize="14px",CE.render((0,Se.jsx)(RE,{}),h),c.appendChild(h)}}))})({pageNumber:n+1}),loading:(0,Se.jsxs)("p",{children:["Loading page ",n+1,"..."]})},`page_${n+1}`)},`page_${n+1}`)))})})})},PE={NODE_ENV:"production",PUBLIC_URL:"/Audio-Copilot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_LOCAL_RELAY_SERVER_URL||"";function OE(){let e;const t=(0,s.useRef)(new x({sampleRate:24e3})),n=(0,s.useRef)(new S({sampleRate:24e3})),r=(0,s.useRef)(new p(PE?{url:PE}:{apiKey:"",dangerouslyAllowAPIKeyInBrowser:!0})),i=(0,s.useRef)(null),a=(0,s.useRef)(null),o=(0,s.useRef)(0),l=(0,s.useRef)(null),c=(0,s.useRef)((new Date).toISOString()),u=(0,s.useRef)(null),[h,d]=(0,s.useState)([]),[f,m]=(0,s.useState)([]),[g,y]=(0,s.useState)(!1),[b,E]=(0,s.useState)({}),[v,_]=(0,s.useState)(!1),[T,A]=(0,s.useState)(!0),[w,k]=(0,s.useState)(0),[C,I]=(0,s.useState)(1),[R,P]=(0,s.useState)(""),[O,L]=(0,s.useState)(!0),[M,F]=(0,s.useState)(!1),[H,U]=(0,s.useState)(!1),[j,G]=(0,s.useState)(!1),[W,$]=(0,s.useState)(""),[V,Y]=(0,s.useState)(0),[K,Q]=(0,s.useState)(0),[J,Z]=(0,s.useState)(!1),[te,ne]=(0,s.useState)(!1),[re,ie]=(0,s.useState)(!0),[ae,oe]=(0,s.useState)(!1),[ce,ue]=(0,s.useState)("Connecting to Copilot"),[he,pe]=(0,s.useState)(0),fe=(0,s.useRef)(null),me=(0,s.useRef)(null),ye=(0,s.useRef)(null),be=(0,s.useRef)(null),Ee=(0,s.useRef)(null),_e=(0,s.useRef)(null),Te=(0,s.useRef)(null),Ae=(0,s.useRef)(null),Ce=(0,s.useRef)(null),[xe,Ie]=(0,s.useState)(),Ne=(0,s.useRef)(null),Re=(0,s.useRef)([]),[De,Pe]=(0,s.useState)(1),[Oe,Le]=(0,s.useState)([1]),Me=(0,s.useRef)(),Fe=(0,s.useRef)(),[Be,He]=(0,s.useState)(!1),Ue=(0,s.useRef)(g);(0,s.useEffect)((()=>{Ue.current=g}),[g]);const je=e=>{let{pageNumber:t}=e;var n;Re.current[t]?null===(n=Re.current[t].current)||void 0===n||n.scrollIntoView({behavior:"auto",block:"start"}):alert(`Page ${t} is out of range!`)};const ze=()=>{Ge();const e=document.getElementById("openRightArrow");e&&(e.style.display="flex");const t=document.getElementById("closeRightArrow");t&&(t.style.display="none")},Ge=()=>{ie(!0);const e=document.getElementById("splitter"),t=document.getElementById("chatContainer"),n=Ce.current;n&&(e.style.display="none",n.style.display="none",t.style.display="none",_e.current.style.display="flex")};let We=null;const $e=e=>{const t=document.getElementById("button-row");if((!t||e.target!==t)&&e.ctrlKey){if(e.target!==Ne.current)return;e.preventDefault(),e.stopPropagation();const n=De+(e.deltaY<0?.1:-.1);Pe(Math.max(n,.5)),t&&(t.style.transform=`scale(${1/n})`)}};(0,s.useEffect)((()=>{const e=Ne.current;null!==e&&e&&e.addEventListener("wheel",$e,{capture:!0});const t=t=>{t.ctrlKey&&t.target===e&&t.preventDefault()};return window.addEventListener("wheel",t,{passive:!1}),()=>{e&&(e.removeEventListener("wheel",$e,{capture:!0}),window.removeEventListener("wheel",t))}}),[De]),(0,s.useEffect)((()=>{let e;return te?e=setInterval((()=>{pe((e=>(e+1)%4))}),500):ue(`Connect${".".repeat(he)}\xa0\xa0\xa0`),()=>clearInterval(e)}),[te]),(0,s.useEffect)((()=>{te&&(0===he&&ue(`Connect${".".repeat(he)}\xa0\xa0\xa0`),1===he&&ue(`Connect${".".repeat(he)}\xa0\xa0`),2===he&&ue(`Connect${".".repeat(he)}\xa0`),3===he&&ue(`Connect${".".repeat(he)}`))}),[he,te]),(0,s.useEffect)((()=>(be.current=new Audio(eo),()=>{be.current&&(be.current.pause(),be.current.src="")})),[]),(0,s.useEffect)((()=>{be.current&&(be.current.playbackRate=C)}),[C]);const qe=e=>{const t=document.getElementById("captionDisplay");if(t&&t.parentElement){const n=window.getComputedStyle(t).fontSize,r=window.getComputedStyle(t.parentElement).fontSize,s=parseFloat(r),i=parseFloat(n)/s,a=i+e>3?3:i+e<1?1:i+e;t.style.fontSize=`${a}em`}},Ve=e=>{let{time:t}=e;const n=Math.floor(t/3600),r=Math.floor(t%3600/60),s=Math.floor(t%60);return n>0?`${n}:${r<10?"0":""}${r}:${s<10?"0":""}${s}`:`${r}:${s<10?"0":""}${s}`},Ye=(e,t)=>{e.stopPropagation(),I(t),console.log(`Speed set to ${t}`)};(0,s.useEffect)((()=>{const e=be.current;if(!e)return;const t=()=>{e.duration&&(k(e.currentTime/e.duration*100),Q(e.currentTime))},n=()=>{const t=e.currentTime,n=Qa.findIndex(((e,n)=>{const r=Qa[n+1];return t>=e.time&&(!r||t<r.time)}));if(-1!==n){const e=Qa[n],r=Qa[n+1],s=((e,t)=>{const n=e.text.split(" "),r=(t?t-e.time:2)/n.length;return n.map(((t,n)=>({word:t,startTime:e.time+n*r,endTime:e.time+(n+1)*r})))})(e,null===r||void 0===r?void 0:r.time),i=s.find(((e,n)=>t>=e.startTime&&t<e.endTime||0===n&&t<e.endTime));if(i){const e=s.map((e=>e===i?` <span style="border-radius: 4px; color: #00FFFF; display: inline-block; margin: 0 1px;">${e.word}</span> `:` <span style="display: inline; margin: 0 1px;">${e.word}</span> `)).join(" ");$(e)}}},r=()=>{Y(e.duration)};return e.addEventListener("timeupdate",t),e.addEventListener("timeupdate",n),e.addEventListener("loadedmetadata",r),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("timeupdate",n),e.removeEventListener("loadedmetadata",r)}}),[]);const Ke=e=>{const t=Ce.current,n=window.innerWidth-e.clientX-12,r=n>700?700:n<400?400:n;t&&(t.style.width=`${r}px`);const s=document.getElementById("closeRightArrow");if(s){const e=r+15;s.style.right=`${e}px`}};(0,s.useEffect)((()=>(document.addEventListener("mousemove",Xe),document.addEventListener("mouseup",Qe),()=>{document.removeEventListener("mousemove",Xe),document.removeEventListener("mouseup",Qe)})),[M]);const Xe=e=>{const t=document.getElementById(".button-row-top");t&&e.clientY<50&&(t.style.display="flex"),M&&(H&&tt(e),j&&Ke(e))},Qe=e=>{F(!1),U(!1),G(!1);const t=window.getSelection().toString().trim();t?t&&Ue.current&&et(e.clientX,e.clientY,t):e.target!==Ze&&Ze&&(Ze.remove(),Ze=null,clearTimeout(Je))};let Je=null,Ze=null;const et=(e,t,r)=>{Ze&&(Ze.remove(),clearTimeout(Je),We=null);const s=document.createElement("div");s.id="readAloudPopup",s.textContent="Read Aloud",s.style.position="absolute",s.style.left=`${e+10}px`,s.style.top=`${t+10}px`,s.style.backgroundColor="#fff",s.style.border="1px solid #000",s.style.borderRadius="4px",s.style.padding="5px",s.style.cursor="pointer",s.onclick=()=>(async e=>{if(We)n.current.add16BitPCM(We);else{const t=await bE.audio.speech.create({model:"tts-1",voice:"alloy",response_format:"pcm",speed:1,input:e}),r=await t.arrayBuffer(),s=new Int16Array(r);n.current.add16BitPCM(s),u.current.updateSelection(e);const i=await x.decode(s,24e3,24e3);u.current.updateReadAloud(i.url),We=s}})(r),s.onmouseleave=()=>{Je=setTimeout((()=>{s.remove(),Ze=null,We=null}),1e3)},s.onmouseenter=()=>{clearTimeout(Je)},document.body.appendChild(s),Ze=s,We=null},tt=e=>{const t=fe.current;if(t){const n=t.getBoundingClientRect(),r=(e.clientX-n.left)/n.width*100;k(r),be.current&&(be.current.currentTime=r/100*be.current.duration)}};function nt(e){const t=e.match(/(?:youtube\.com\/.*v=|youtu\.be\/)([^&]+)/);if(t&&t[1]){return`https://www.youtube.com/embed/${t[1]}`}return null}(0,s.useEffect)((()=>{const e=document.getElementById("closePopup"),t=document.getElementById("popupOverlay"),n=document.getElementById("videoFrame"),r=document.getElementById("searchBox");return e&&t&&n&&r&&e.addEventListener("click",(()=>{n.src="",t.style.display="none",r.value=""})),()=>{}}),[]),(0,s.useEffect)((()=>{const e=e=>{const t=document.getElementById("searchBox"),n=document.getElementById("chatInputBox");if("Space"===e.code)e.target!==n&&(e.preventDefault(),me.current&&me.current.click());else if("Escape"===e.code){ze();const e=document.getElementById("popupOverlay");if(e){const n=document.getElementById("videoFrame");n&&(n.src=""),e.style.display="none",t.value=""}}else if("Enter"===e.code&&e.target===t){e.preventDefault();const n=t.value.trim();""!==n&&(t&&(t.blur(),rt(n)),at(n))}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]);const rt=t=>{const n=document.getElementById("searchBox");let r=0;e=setInterval((()=>{r=(r+1)%4,n.value=t+".".repeat(r)}),250)},st=t=>{const n=document.getElementById("searchBox");e&&(clearInterval(e),n&&(n.style.color="red",n.value=t))},it=async()=>{if(be.current&&O){if(v)be.current.pause();else try{be.current.play()}catch(e){console.error("Error playing audio:",e)}_(!v)}if(Ee.current&&!O){if(v)Ee.current.pause();else try{Ee.current.play()}catch(e){console.error("Error playing video:",e)}_(!v)}};const at=async e=>{const t=document.getElementById("searchBox"),n=document.getElementById("popupOverlay"),r=document.getElementById("videoFrame"),s=document.getElementById("popupContent"),i=document.getElementById("chatBot");ot(e).then((a=>{if(a.length>0){const o=a[0];console.log(`Title: ${o.title}`),console.log(`Original URL: ${o.url}`);const l=nt(o.url);l?(console.log(`Embeddable URL: ${l}`),r.src=l,r.style.display="flex",i.style.display="none",s.className="popup-content-video",n&&(n.style.display="flex",st(e),t.style.color="blue",u.current.updateVideo(`<iframe width="100%" height="68%" src="${l}" style={{ borderRadius: '9px'}} allowfullscreen></iframe>`))):(st("Error occurred during video search."),console.log("Failed to convert to embeddable URL."))}else st("No results found."),console.log("No results found.")})).catch((e=>{st("Error occurred during YouTube search"),console.error("Error occurred during YouTube search:",e)}))};async function ot(e){try{const t=await fetch(`http://localhost:3001/api/videos?q=${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();return console.log("Search results:",n),n.map((e=>({title:e.title,url:e.link})))}catch(t){return console.error("Error in performYoutubeSearch:",t),[{title:"",url:""}]}}const lt=()=>{const e=document.getElementById("openRightArrow");e&&(e.style.display="none");const t=document.getElementById("closeRightArrow"),n=Ce.current;if(t){t.style.display="flex";const e=getComputedStyle(n).width,r=parseInt(e,10)+15;t.style.right=`${r}px`}},ct=()=>{ie(!1);const e=document.getElementById("splitter"),t=document.getElementById("chatContainer");var n;"flex"===e.style.display?"none"===t.style.display&&(t.style.display="flex",_e.current.style.display="none"):(e.style.display="flex",Ce.current.style.display="flex",t.style.display="flex",_e.current.style.display="none"),(n=Ce.current).scrollTop=n.scrollHeight,Ce.current.scrollIntoView({behavior:"smooth"}),lt()},ut=async()=>{if(t.current&&r.current){if(T){await ht();r.current.isConnected()&&ct()}else await dt();A(!T)}""!=localStorage.getItem("tmp::voice_api_key")&&r.current.isConnected()&&!ae||A(!0)},ht=async()=>{const e=r.current;if(e.isConnected()){A(!1);const n=t.current;await n.record((t=>e.appendInputAudio(t.mono)))}else ne(!0),pt("server_vad")},dt=async()=>{if(r.current.isConnected()){A(!0);const e=t.current;await e.pause()}},pt=async e=>{r.current.isConnected()?"none"===e?await mt():await ft():"server_vad"===e&&await ft()},ft=(0,s.useCallback)((async()=>{const e=r.current;t.current,n.current;c.current=(new Date).toISOString(),m(f),d(e.conversation.getItems()),d(h),await u.current.updateItems(e.conversation.getItems());try{oe(!1);const t=PE?"":localStorage.getItem("tmp::voice_api_key")||prompt("OpenAI API Key")||"";if(""!==PE)await e.connect();else if(""!==t){if(localStorage.setItem("tmp::voice_api_key",t),e.realtime.apiKey=t,e.isConnected())throw new Error("Already connected, use .disconnect() first");await e.realtime.connect({model:"gpt-4o-mini-realtime-preview-2024-12-17"}),e.updateSession()}else ne(!1)}catch(s){A(!0),ne(!1),oe(!0),console.error("Error playing audio:",s)}}),[]),mt=(0,s.useCallback)((async()=>{y(!1),E({});r.current.disconnect();const e=t.current;await e.end();const s=n.current;await s.interrupt()}),[]);(0,s.useCallback)((e=>{const t=c.current,n=new Date(t).valueOf(),r=new Date(e).valueOf()-n,s=Math.floor(r/10)%100,i=Math.floor(r/1e3)%60,a=e=>{let t=e+"";for(;t.length<2;)t="0"+t;return t};return`${a(Math.floor(r/6e4)%60)}:${a(i)}.${a(s)}`}),[]);const gt=(0,s.useCallback)((()=>{const e=prompt("OpenAI API Key");null!==e&&(localStorage.clear(),localStorage.setItem("tmp::voice_api_key",e))}),[]),yt=(0,s.useCallback)((async e=>{r.current.deleteItem(e)}),[]);(0,s.useEffect)((()=>{if(l.current){const e=l.current,t=e.scrollHeight;t!==o.current&&(e.scrollTop=t,o.current=t)}}),[f]),(0,s.useEffect)((()=>{const e=[].slice.call(document.body.querySelectorAll("[data-conversation-content]"));for(const t of e){const e=t;e.scrollTop=e.scrollHeight}}),[h]),(0,s.useEffect)((()=>{let e=!0;const r=t.current,s=i.current;let o=null;const l=n.current,c=a.current;let u=null;const h=()=>{if(e){if(s&&(s.width&&s.height||(s.width=s.offsetWidth,s.height=s.offsetHeight),o=o||s.getContext("2d"),o)){o.clearRect(0,0,s.width,s.height);const e=r.recording?r.getFrequencies("voice"):{values:new Float32Array([0])};D.drawBars(s,o,e.values,"#0099ff",10,0,8)}if(c&&(c.width&&c.height||(c.width=c.offsetWidth,c.height=c.offsetHeight),u=u||c.getContext("2d"),u)){u.clearRect(0,0,c.width,c.height);const e=l.analyser?l.getFrequencies("voice"):{values:new Float32Array([0])};D.drawBars(c,u,e.values,"#009900",10,0,8)}window.requestAnimationFrame(h)}};return h(),()=>{e=!1}}),[]),(0,s.useEffect)((()=>{const s=n.current,i=r.current;return i.updateSession({instructions:N}),i.updateSession({input_audio_transcription:{model:"whisper-1"}}),i.updateSession({turn_detection:{type:"server_vad"}}),i.addTool({name:"set_memory",description:"Saves important data about the user into memory.",parameters:{type:"object",properties:{key:{type:"string",description:"The key of the memory value. Always use lowercase and underscores, no other characters."},value:{type:"string",description:"Value can be anything represented as a string"}},required:["key","value"]}},(async e=>{let{key:t,value:n}=e;return E((e=>{const r={...e};return r[t]=n,r})),{ok:!0}})),i.addTool({name:"google_search",description:"Performs a Google News search and returns the top 2 results.",parameters:{type:"object",properties:{query:{type:"string",description:"The search query to be used."}},required:["query"]}},(async e=>{let{query:t}=e;return await async function(e){try{const t=await fetch(`http://localhost:3001/api/news?q=${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();return console.log("Search results:",n),n.map((e=>({title:e.title,url:e.link})))}catch(t){return console.error("Error in performGoogleSearch:",t),[{title:"",url:""}]}}(t)})),i.addTool({name:"youtube_search",description:"Performs a Youtube video search and returns the top 1 results.",parameters:{type:"object",properties:{query:{type:"string",description:"The search query to be used."}},required:["query"]}},(async t=>{let{query:n}=t;const r=document.getElementById("searchBox");if(r){r.value=n;let t=0;const s=3;e=setInterval((()=>{t=(t+1)%(s+1),r.value=n+".".repeat(t)}),250)}await at(n)})),i.addTool({name:"get_stock_price",description:"Retrieves the latest stock price for a given comppany. ",parameters:{type:"object",properties:{company:{type:"string",description:"Name of the company"}},required:["company"]}},(async e=>{let{company:t}=e;return{ok:!0,date:"2024-10-25",company:"SAP",price:237.69,currency:"USD"}})),i.addTool({name:"audio_control",description:"Voice control the on-going playback. e.g. stop the audio, speed up or down the audio",parameters:{type:"object",properties:{context:{type:"string",description:"additional information to control the audio"},command:{type:"string",description:"commoand to control the audio"}},required:["context","command"]}},(async e=>{let{context:t,command:r}=e;const s=n.current;if(s.askStop=!1,"pause"===r)s.askStop=!0;else if("resume"===r)s.askStop=!1;else if("speed"===r)"up"===t?I(C+.25):"down"===t?I(C-.25):"normal"===t&&I(1);else if("skip"===r)be.current&&("forward"===t?be.current.currentTime+=10:"backward"===t?(be.current.currentTime-=10,be.current.currentTime<0&&(be.current.currentTime=0)):"start"==t&&(be.current.currentTime=0));else if("volume"===r)be.current&&("up"===t?be.current.volume=Math.min(be.current.volume+.1,1):"down"===t&&(be.current.volume=Math.max(be.current.volume-.5,0)));else if("peek"===r&&be.current)return{ok:!0,currentTime:be.current.currentTime,duration:be.current.duration};return{ok:!0}})),i.addTool({name:"translation_current_sentence",description:"translate the current sentence to the target language, by default, it is Chinese if not specified target language",parameters:{type:"object",properties:{target_lan:{type:"string",description:"target language"}}}},(async e=>{let{target_lan:t}=e;return be.current?null===t?{ok:!0,target_lan:"zh",currentTime:be.current.currentTime,duration:be.current.duration}:{ok:!0,target_lan:t,currentTime:be.current.currentTime,duration:be.current.duration}:{ok:!1,info:"No audio file is playing"}})),i.addTool({name:"learn_by_keyword",description:"learn the content of the audio by the keyword",parameters:{type:"object",properties:{keyword:{type:"string",description:"topic keyword to learn/explore"}}}},(async e=>{let{keyword:t}=e;if(t in Ja){const e=Ja[t];return[e[0],e[1]]}return{ok:!1,info:"No such a keyword"}})),i.addTool({name:"feedback_collection",description:"Collect feedback from the user. e.g. feedback on the company AI first strategy...",parameters:{type:"object",properties:{title:{type:"string",description:"feedback title"},content:{type:"string",description:"feedback content"}},required:["title","content"]}},(async e=>{let{title:t,content:n}=e;return{ok:!0,info:"Thanks for your feedback"}})),i.addTool({name:"send_mail",description:"help the user to send the mail to a specific Recipient",parameters:{type:"object",properties:{title:{type:"string",description:"feedback title"},content:{type:"string",description:"feedback content"},to:{type:"string",description:"mail receiver"}},required:["query"]}},(async e=>{let{title:t,content:n}=e;return{ok:!0,info:"Thanks for mail"}})),i.on("realtime.event",(e=>{m((t=>{const n=t[t.length-1];return(null===n||void 0===n?void 0:n.event.type)===e.event.type?(n.count=(n.count||0)+1,t.slice(0,-1).concat(n)):t.concat(e)}))})),i.on("error",(e=>{console.error(e)})),i.on("conversation.interrupted",(async()=>{const e=await s.interrupt();if(null!==e&&void 0!==e&&e.trackId){const{trackId:t,offset:n}=e;await i.cancelResponse(t,n)}})),i.on("conversation.updated",(async e=>{var t;let{item:n,delta:r}=e;s.setItemStatus(n.status),s.isHidden=O;const a=i.conversation.getItems();if(null!==r&&void 0!==r&&r.audio&&s.add16BitPCM(r.audio,n.id),"completed"===n.status&&null!==(t=n.formatted.audio)&&void 0!==t&&t.length){const e=await x.decode(n.formatted.audio,24e3,24e3);n.formatted.file=e}d(a),await u.current.updateItems(a)})),i.realtime.on("server.error",(()=>{console.error("Error from server")})),i.realtime.on("server.input_audio_buffer.speech_started",(()=>{be.current&&(be.current.pause(),_(!1)),Ee.current&&(Ee.current.pause(),_(!1))})),i.realtime.on("server.conversation.item.created",(async e=>{const{item:t,delta:n}=i.conversation.processEvent(e);await u.current.updateItems(i.conversation.getItems()),await u.current.updateItemID(t.id)})),i.realtime.on("server.session.created",(async()=>{const e=setInterval((()=>{"paused"===t.current.getStatus()&&(clearInterval(e),ne(!1))}),100),s=(r.current,t.current),i=n.current;await s.begin(),await i.connect(be.current,Ee.current,_),i.askStop=!0,y(!0)})),d(i.conversation.getItems()),u.current.updateItems(i.conversation.getItems()),()=>{i.reset()}}),[]);const bt=(0,s.useCallback)((async()=>{y(!1),m([]),d([]),await u.current.updateItems([]),E({});r.current.disconnect();const e=t.current;await e.end();const s=n.current;await s.interrupt(),ne(!1),A(!0)}),[]);return(0,Se.jsxs)("div",{"data-component":"ConsolePage",children:[(0,Se.jsx)("div",{id:"popupOverlay",className:"popup-overlay",children:(0,Se.jsxs)("div",{id:"popupContent",className:"popup-content-chat",children:[(0,Se.jsx)("span",{id:"closePopup",className:"close-button",children:(0,Se.jsx)(B,{})}),(0,Se.jsx)("iframe",{id:"videoFrame",width:"1000",height:"562.5",src:"",allow:"fullscreen",allowFullScreen:!0,style:{display:"none"}}),(0,Se.jsx)("iframe",{id:"chatBot",width:"100%",height:"100%",src:"http://localhost:4000/examples/audio-copilot",allow:"fullscreen",allowFullScreen:!0,style:{display:"none",borderRadius:"9px"}})]})}),h.length<0&&!J&&(0,Se.jsx)("div",{className:"floating-button",ref:Te,onMouseDown:e=>{const t=Te.current;if(t){const n=t.getBoundingClientRect();t.dragOffsetX=e.clientX-n.left,t.dragOffsetY=e.clientY-n.top}},onMouseMove:e=>{if(0===e.clientX&&0===e.clientY)return;const t=Te.current;t&&(t.style.left=e.clientX-t.dragOffsetX+"px",t.style.top=e.clientY-t.dragOffsetY+"px")},children:(0,Se.jsx)(ke,{style:{height:"10px"},label:"Conversation List",buttonStyle:"flush",onClick:()=>{ie(!1);const e=document.getElementById("splitter"),t=document.getElementById("chatContainer");"flex"===e.style.display?"none"===_e.current.style.display&&(t.style.display="none",_e.current.style.display="flex"):(e.style.display="flex",Ce.current.style.display="flex",t.style.display="none",_e.current.style.display="flex"),lt()},className:"button"})}),(0,Se.jsx)("div",{className:"top-hover-area",children:(0,Se.jsxs)("div",{id:"button-row-top",className:"button-row-top",children:[(0,Se.jsx)(ke,{style:{height:"10px"},label:"",icon:z,buttonStyle:"flush",onClick:()=>{Pe((e=>Math.min(e+.05,3)));const e=Ne.current;if(e){const t=e.scrollTop,n=e.scrollLeft,r=t*De,s=n*De;e.scrollLeft=s,e.scrollTop=r}},className:"button"}),(0,Se.jsx)(ke,{style:{height:"10px"},label:"",icon:q,buttonStyle:"flush",onClick:()=>{Pe((e=>Math.max(e-.05,.5)));const e=Ne.current;if(e){const t=e.scrollTop,n=e.scrollLeft,r=t*De,s=n*De;e.scrollLeft=s,e.scrollTop=r}},className:"button"}),(0,Se.jsx)(ke,{style:{height:"10px"},label:"WebRTC Test",onClick:async()=>{const e=await fetch("http://localhost:3001/api/session"),t=(await e.json()).client_secret.value,n=new RTCPeerConnection,r=document.createElement("audio");r.autoplay=!0,n.ontrack=e=>r.srcObject=e.streams[0];const s=await navigator.mediaDevices.getUserMedia({audio:!0});n.addTrack(s.getTracks()[0]);n.createDataChannel("oai-events").addEventListener("message",(e=>{console.log(e)}));const i=await n.createOffer();await n.setLocalDescription(i);const a=await fetch("https://api.openai.com/v1/realtime?model=gpt-4o-mini-realtime-preview-2024-12-17",{method:"POST",body:i.sdp,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/sdp"}}),o={type:"answer",sdp:await a.text()};await n.setRemoteDescription(o)}}),(0,Se.jsxs)("div",{className:"right-buttons",children:[(0,Se.jsx)("div",{children:(0,Se.jsx)(ke,{label:g?"Disconnect":te?ce:"Connect\xa0\xa0\xa0",iconPosition:g?"end":"start",icon:g?B:X,disabled:te,onClick:g?async()=>{bt(),ze()}:async()=>{ye.current&&ye.current.click()}})}),(0,Se.jsx)("div",{className:"content-api-key",children:!PE&&(0,Se.jsx)(ke,{icon:ee,iconPosition:"end",buttonStyle:"flush",label:"\xa0",title:"Reset the OpenAI API Key",onClick:()=>gt()})})]})]})}),(0,Se.jsxs)("div",{className:"content-main",ref:Ae,children:[(0,Se.jsx)("div",{style:{display:"none"},children:(0,Se.jsx)(DE,{pdfFilePath:Za})}),(0,Se.jsx)("div",{style:{display:"flex",margin:"0 auto",width:"100%",overflowY:"auto",scrollbarWidth:"auto",top:"400px"},children:(0,Se.jsx)("div",{ref:Ne,style:{margin:"0 auto",width:"100%",overflowY:"auto",scrollbarWidth:"none",top:"400px",backgroundColor:"white",transform:`scale(${De})`,transformOrigin:"top center"},children:(0,Se.jsx)(Na,{file:Za,onLoadSuccess:function(e){let{numPages:t}=e;Ie(t),Re.current=Array(t).fill(null).map(((e,t)=>Re.current[t]||s.createRef()))},children:Oe.map((e=>(0,Se.jsx)("div",{ref:Re.current[e],style:{marginBottom:"10px",flexShrink:0,margin:"20px auto",width:"fit-content"},children:(0,Se.jsx)(Xa,{pageNumber:e,renderTextLayer:!0,renderAnnotationLayer:!1,onLoadSuccess:()=>(e=>{let{pageNumber:t}=e;console.log(`Page ${t} loaded successfully.`),Le((e=>{const n=Math.min(t+1,xe||0);return e.includes(n)?e:[...e,n]}))})({pageNumber:e}),loading:(0,Se.jsxs)("p",{children:["Loading page ",e,"..."]})},`page_${e}`)},`page_${e+1}`)))})})}),(0,Se.jsxs)("div",{className:"tooltip-container",children:[(0,Se.jsx)("div",{id:"openRightArrow",className:"close-icon-right",onClick:ct,style:{display:g?"flex":"none"},children:(0,Se.jsx)(se,{style:{width:"15px",height:"15px"}})}),(0,Se.jsx)("div",{className:"tooltip",children:(0,Se.jsx)("span",{children:(0,Se.jsx)("strong",{className:"tooltip-title",children:"Open Chatbot"})})})]}),(0,Se.jsx)("div",{id:"closeRightArrow",className:"close-icon-left",onClick:ze,style:{display:"none"},children:(0,Se.jsx)(le,{style:{width:"15px",height:"15px"}})}),(0,Se.jsx)("div",{id:"splitter",className:"splitter",onMouseDown:e=>{F(!0),G(!0),Ke(e.nativeEvent)},style:{display:"none"}}),(0,Se.jsxs)("div",{className:"content-right",ref:Ce,style:{display:"none"},children:[(0,Se.jsx)("div",{id:"chatContainer",style:{display:"none"},children:(0,Se.jsx)(kE,{functionCallHandler:async e=>{var t;const n=JSON.parse(e.function.arguments);return"get_video"===(null===e||void 0===e||null===(t=e.function)||void 0===t?void 0:t.name)?ot(n.query).then((e=>{if(e.length>0){const t=nt(e[0].url);return t?`<iframe width="100%" height="68%" src="${t}" style={{ borderRadius: '9px'}} allowfullscreen></iframe>`:"Failed to convert to embeddable URL."}return"No results found."})).catch((e=>"Error occurred during YouTube search")):""},ref:u})}),(0,Se.jsx)("div",{className:"content-main",ref:_e,style:{display:"none"},children:(0,Se.jsx)("div",{className:"content-logs",children:(0,Se.jsx)("div",{className:"content-block conversation",children:(0,Se.jsxs)("div",{className:"content-block-body","data-conversation-content":!0,children:[!h.length&&"Conversation List",h.map(((e,t)=>{var n;return(0,Se.jsxs)("div",{className:"conversation-item",children:[(0,Se.jsxs)("div",{className:`speaker ${e.role||""}`,children:[(0,Se.jsx)("div",{children:(e.role||e.type).replaceAll("_"," ")}),(0,Se.jsx)("div",{className:"close",onClick:()=>yt(e.id),children:(0,Se.jsx)(B,{})})]}),(0,Se.jsxs)("div",{className:"speaker-content",children:["function_call_output"===e.type&&(0,Se.jsx)("div",{children:e.formatted.output}),!!e.formatted.tool&&(0,Se.jsxs)("div",{children:[e.formatted.tool.name,"(",e.formatted.tool.arguments,")"]}),!e.formatted.tool&&"user"===e.role&&(0,Se.jsx)("div",{children:e.formatted.transcript||(null!==(n=e.formatted.audio)&&void 0!==n&&n.length?"(awaiting transcript)":e.formatted.text||"(item sent)")}),!e.formatted.tool&&"assistant"===e.role&&(0,Se.jsx)("div",{children:e.formatted.transcript||e.formatted.text||"(truncated)"}),e.formatted.file&&(console.log("Audio URL:",e.formatted.file.url),(0,Se.jsx)("audio",{src:e.formatted.file.url,controls:!0}))]})]},e.id)}))]})})})})]})]}),(0,Se.jsxs)("div",{id:"button-row",className:"button-row",children:[J&&(0,Se.jsxs)("div",{children:[(0,Se.jsx)("div",{className:"captionFont",style:{cursor:"pointer"},onClick:()=>{qe(.1)},children:"+"}),(0,Se.jsx)("div",{className:"captionFont",style:{cursor:"pointer"},onClick:()=>{qe(-.1)},children:"-"})]}),J&&(0,Se.jsx)("div",{id:"captionDisplay",className:"caption-display",dangerouslySetInnerHTML:{__html:W},style:{fontSize:"2em",marginTop:"20px"}}),(0,Se.jsx)("div",{className:"content-caption",children:(0,Se.jsx)(ke,{label:J?"Hide Captions":"Show Captions",buttonStyle:"regular",onClick:()=>{Z(!J)},className:"button"})}),(0,Se.jsx)("button",{ref:me,onClick:it,className:"hidden-button"}),(0,Se.jsxs)("div",{className:"tooltip-container",children:[(0,Se.jsx)(ke,{label:v?"Pause":"Play\xa0",iconPosition:"start",icon:v?de:ge,buttonStyle:"regular",onClick:it,className:"button"}),(0,Se.jsxs)("div",{className:"tooltip",children:[(0,Se.jsxs)("span",{children:["Press Space(\u7a7a\u683c\u952e) to ",(0,Se.jsxs)(Se.Fragment,{children:[" ",v?"Pause":"Play"," "]})," the on-going Audio"]}),(0,Se.jsx)("br",{})]})]}),(0,Se.jsxs)("div",{ref:fe,style:{position:"relative",width:"60%",backgroundColor:"#ccc",height:"0.625em",borderRadius:"0.3125em",marginTop:"0.2em",marginLeft:"-1px"},onMouseDown:e=>{F(!0),U(!0),tt(e.nativeEvent),be.current&&(Me.current&&be.current.removeEventListener("timeupdate",Me.current),Fe.current&&be.current.removeEventListener("ended",Fe.current))},children:[(0,Se.jsx)("div",{style:{width:`${w}%`,backgroundColor:"#007bff",height:"0.625em",borderRadius:"0.3125em"}}),(0,Se.jsxs)("div",{className:"speed-controls",onMouseDown:e=>{e.stopPropagation()},children:[(0,Se.jsx)("div",{className:"speed-control",style:{backgroundColor:.85===C?"#666":"#ccc",color:.85===C?"#fff":"#000",borderRadius:"0.3125em"},onClick:e=>Ye(e,.85),children:"Slower"}),(0,Se.jsx)("div",{className:"speed-control",style:{backgroundColor:1===C?"#666":"#ccc",color:1===C?"#fff":"#000",borderRadius:"0.3125em"},onClick:e=>Ye(e,1),children:"Normal"}),(0,Se.jsx)("div",{className:"speed-control",style:{backgroundColor:1.2===C?"#666":"#ccc",color:1.2===C?"#fff":"#000",borderRadius:"0.3125em"},onClick:e=>Ye(e,1.2),children:"Faster"}),(0,Se.jsx)("div",{}),(0,Se.jsx)("div",{className:"speed-control",style:{display:"none",backgroundColor:!0===Be?"#666":"#ccc",color:!0===Be?"#fff":"#000",borderRadius:"0.3125em"},onClick:e=>(e.stopPropagation(),void He(!Be)),children:"Loop"}),(0,Se.jsx)("div",{className:"spacer"}),(0,Se.jsx)("div",{children:"Keywords:"}),Object.entries(Ja).map(((e,t)=>{let[n,[r,s,i]]=e;return(0,Se.jsxs)("div",{className:"keyword",style:{backgroundColor:R===n?"#666":"#ccc",color:R===n?"#fff":"#000",borderRadius:"0.3125em",whiteSpace:"nowrap"},onClick:e=>((e,t,n,r,s)=>{if(P(t),be.current){Me.current&&be.current.removeEventListener("timeupdate",Me.current),Fe.current&&be.current.removeEventListener("ended",Fe.current),je({pageNumber:s});const e=document.getElementById("pdfFile");e&&(e.data=Za+"?t="+(new Date).getTime()+"#page="+s,console.log(e.data)),be.current.currentTime=n,v||me.current&&me.current.click();const t=((e,t,n)=>()=>{e.currentTime>=n&&(e.currentTime=t,e.play())})(be.current,n,r),i=((e,t,n)=>()=>{e.currentTime<n&&(e.currentTime=t,e.play())})(be.current,n,r);Me.current=t,Fe.current=i,be.current.removeEventListener("timeupdate",t),be.current.removeEventListener("ended",i),be.current.addEventListener("timeupdate",t),console.log("timeupdate event listener registered"),be.current.addEventListener("ended",i),console.log("ended event listener registered"),be.current.onpause=()=>{be.current&&(be.current.removeEventListener("timeupdate",t),be.current.removeEventListener("ended",i),console.log("event listeners removed"))}}})(0,n,r,s,i),children:[n," "]},t)})),(0,Se.jsx)("div",{style:{position:"fixed",transform:"translateX(41.5em)",bottom:"1px"},children:(0,Se.jsx)("input",{id:"searchBox",type:"text",className:"dynamic-searchBox",placeholder:"Type and Press Enter to Search a Video",style:{display:"none"},onFocus:()=>{const e=document.getElementById("searchBox");e.value="",e.style.color="blue"}})})]}),(0,Se.jsx)("div",{style:{position:"absolute",top:"-2em",left:`${w}%`,transform:"translateX(-20%)",backgroundColor:"rgba(255, 255, 255, 0)",color:"rgba(0, 0, 0, 0.7)",padding:"0.3125em",borderRadius:"0.3125em",fontSize:"0.9em"},children:Ve({time:K})}),(0,Se.jsx)("div",{className:"audio-duration",children:Ve({time:V})})]}),(0,Se.jsxs)("div",{className:"tooltip-container",children:[(0,Se.jsx)(ke,{label:"Chatbot",buttonStyle:"regular",disabled:!g,onClick:ct}),(0,Se.jsxs)("div",{className:"tooltip",children:[(0,Se.jsxs)("span",{children:[(0,Se.jsx)("strong",{className:"tooltip-title",children:"Open an AI Chatbot to: "}),(0,Se.jsx)("br",{}),"Ask for general questions or Search a Video from youtube or Search in the Magzine"]}),(0,Se.jsx)("br",{})]})]}),(0,Se.jsx)("button",{ref:ye,onClick:ut,className:"hidden-button"}),(0,Se.jsxs)("div",{className:"tooltip-container",children:[(0,Se.jsx)(ke,{id:"muteButton",label:"",iconPosition:"start",icon:T?ve:we,disabled:!g,buttonStyle:"regular",onClick:ut}),(0,Se.jsxs)("div",{className:"tooltip",children:[(0,Se.jsxs)("strong",{className:"tooltip-title",children:["Turn ",(0,Se.jsx)(Se.Fragment,{children:T?"on":"off"})," microphone"]}),(0,Se.jsx)("br",{}),!g&&(0,Se.jsxs)(Se.Fragment,{children:["The ",(0,Se.jsx)("span",{className:"highlightred",children:"first"})," turning on will start the Audio Copilot.",(0,Se.jsx)("br",{}),(0,Se.jsx)("br",{})," "]}),g&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("br",{})," "]})]})]}),(0,Se.jsx)("div",{style:{fontSize:"1em"},children:g?(0,Se.jsxs)(Se.Fragment,{children:[" Copilot: ",(0,Se.jsx)("span",{className:"highlightgreen",children:"On"})," "]}):te?ce:ae?(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsx)("span",{className:"highlightred",children:"Error Occurred!"})}):(0,Se.jsxs)(Se.Fragment,{children:[" Copilot: ",(0,Se.jsx)("span",{className:"highlightred",children:"Off"})," "]})})]})]})}sa.workerSrc=new URL(n(749),n.b).toString();const LE=function(){return(0,Se.jsx)("div",{"data-component":"App",children:(0,Se.jsx)(OE,{})})},ME=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:s,getLCP:i,getTTFB:a}=t;n(e),r(e),s(e),i(e),a(e)}))};i.createRoot(document.getElementById("root")).render((0,Se.jsx)(s.StrictMode,{children:(0,Se.jsx)(LE,{})})),ME()})()})();
//# sourceMappingURL=main.5faa99a2.js.map